import{b as $,af as G,au as U,N as j,O as M,G as d,d as O,f as i,o as s,c as m,R as _,a,w as e,S as r,t as n,e as E,J as C,V as z,_ as J}from"./index-Boy7RURc.js";import{_ as q,a as H}from"./AliasRecipientForm-Bx69ZmjE.js";import{L as K}from"./LoadingData-Bmf8vybL.js";import{w,i as b,h as A}from"./index-D1ibh7w-.js";import{V as R,c as S,a as T,b as Q}from"./VExpansionPanels-DVrYyDjx.js";import{a as g,V as f}from"./VRow-DAQDyhv3.js";import{V as W}from"./VChip-qls-6apb.js";import{V as X,a as Y}from"./VToolbar-COzDZIcY.js";import"./EmailField-CWN9bWwl.js";import"./VTextField-2VV2Y3Ax.js";import"./tag-D_adDfUM.js";import"./forwardRefs-DpLIx09u.js";import"./ssrBoot-B_CqNgto.js";import"./dimensions-BG_mhZfX.js";import"./VAvatar-BgJfG1wg.js";import"./VForm-DS0kAiBG.js";import"./VSwitch-BxHZfHYd.js";import"./VSelect-8OQrJhsc.js";import"./VMenu-Bob0AvfG.js";import"./VTextarea-CiTmsnhN.js";import"./VContainer-BDI64i74.js";/* empty css              */const Z={key:1},ee={key:0},ae={class:"mr-2"},te={key:0},le={class:"mt-4 d-flex justify-end"},se={__name:"AliasEditForm",setup(B){const{$gettext:u}=$(),k=G(),y=U(),x=j(),N=M(),o=d({pk:x.params.id}),v=d(0),p=d(!1),V=d(!1),F=d(),h=d(),I={generalForm:F,recipientForm:h};async function L(){V.value=!1,v.value=[];for(const[c,l]of Object.entries(I))if(l.value!=null){const{valid:t}=await l.value.vFormRef.validate();t||(V.value=!0,v.value.push(c))}V.value||(p.value=!0,k.updateIdentity("alias",o.value).then(()=>N.push({name:"AliasDetail",params:{id:x.params.id}})).finally(()=>p.value=!1))}return O(()=>{y.getAlias(x.params.id).then(c=>{o.value={...c.data}})}),(c,l)=>!i(y).aliasesLoaded||p.value?(s(),m(K,{key:0})):(s(),_("div",Z,[a(Q,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=t=>v.value=t),multiple:V.value},{default:e(()=>[a(R,{eager:"",value:"generalForm"},{default:e(()=>[a(S,null,{default:e(({expanded:t})=>[a(g,{"no-gutters":""},{default:e(()=>[a(f,{cols:"4"},{default:e(()=>[r(n(i(u)("General")),1)]),_:1}),a(f,{cols:"8",class:"text-medium-emphasis"},{default:e(()=>[a(w,{"leave-absolute":""},{default:e(()=>[t?(s(),_("span",ee)):(s(),m(g,{key:1,"no-gutters":"",style:{width:"100%"}},{default:e(()=>[a(f,{cols:"6"},{default:e(()=>[r(n(i(u)("Address"))+": "+n(o.value.address),1)]),_:1}),a(f,{cols:"6"},{default:e(()=>[E("div",ae,n(i(u)("Enabled")),1),o.value.enabled?(s(),m(b,{key:0,color:"success"},{default:e(()=>[r("mdi-check-circle-outline")]),_:1})):(s(),m(b,{key:1},{default:e(()=>[r("mdi-close-circle-outline")]),_:1}))]),_:1})]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),a(T,null,{default:e(()=>[a(q,{ref_key:"generalForm",ref:F,modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=t=>o.value=t)},null,8,["modelValue"])]),_:1})]),_:1}),a(R,{eager:"",value:"recipientForm"},{default:e(()=>[a(S,null,{default:e(({expanded:t})=>[a(g,{"no-gutters":""},{default:e(()=>[a(f,{cols:"4"},{default:e(()=>[r(n(i(u)("Recipients")),1)]),_:1}),a(f,{cols:"8",class:"text-medium-emphasis"},{default:e(()=>[a(w,{"leave-absolute":""},{default:e(()=>[t?(s(),_("span",te)):(s(),m(g,{key:1,"no-gutters":"",style:{width:"100%"}},{default:e(()=>[(s(!0),_(C,null,z(o.value.recipients,(P,D)=>(s(),m(W,{key:D,size:"small"},{default:e(()=>[r(n(P),1)]),_:2},1024))),128))]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),a(T,null,{default:e(()=>[a(i(H),{ref_key:"recipientForm",ref:h,modelValue:o.value.recipients,"onUpdate:modelValue":l[1]||(l[1]=t=>o.value.recipients=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","multiple"]),E("div",le,[a(A,{loading:p.value,onClick:l[3]||(l[3]=t=>c.$router.go(-1))},{default:e(()=>[r(n(i(u)("Cancel")),1)]),_:1},8,["loading"]),a(A,{class:"ml-4",color:"primary darken-1",loading:p.value,onClick:L},{default:e(()=>[r(n(i(u)("Save")),1)]),_:1},8,["loading"])])]))}},oe={__name:"AliasEditView",setup(B){const{$gettext:u}=$();return(k,y)=>(s(),_(C,null,[a(X,{flat:""},{default:e(()=>[a(Y,null,{default:e(()=>[r(n(i(u)("Edit alias")),1)]),_:1})]),_:1}),a(se,{alias:k.alias},null,8,["alias"])],64))}},Re=J(oe,[["__scopeId","data-v-21c8ea90"]]);export{Re as default};
