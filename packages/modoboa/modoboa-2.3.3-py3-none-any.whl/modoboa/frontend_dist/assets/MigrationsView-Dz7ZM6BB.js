import{ac as c,b as k,a0 as I,G as s,r as U,o as S,c as j,w as o,a as e,I as $,S as g,t as v,f as _,_ as z,R as G}from"./index-Boy7RURc.js";import{_ as L}from"./MenuItems-COSLslFB.js";import{V as P}from"./VDataTable-BX8DPycj.js";import{V as T,a as q}from"./VToolbar-COzDZIcY.js";import{V as w}from"./VMenu-Bob0AvfG.js";import{h as p}from"./index-D1ibh7w-.js";import{V as E}from"./forwardRefs-DpLIx09u.js";import{V as B}from"./VSpacer-CMIrGfop.js";import{V as F}from"./VTextField-2VV2Y3Ax.js";import{c as O}from"./VCard-CLg_0_q0.js";import"./tag-D_adDfUM.js";import"./dimensions-BG_mhZfX.js";import"./VSelect-8OQrJhsc.js";import"./VChip-qls-6apb.js";import"./VAvatar-BgJfG1wg.js";import"./filter-Dlu2jFuL.js";import"./ssrBoot-B_CqNgto.js";/* empty css              */const f="migrations",y={getMigrations(l){return c.get(`/${f}/`,{params:l})},getMigration(l,i){return c.get(`/${f}/${l}/`,i)},deleteMigration(l){return c.delete(`/${f}/${l}/`)}},R={__name:"MigrationsList",setup(l){const{$gettext:i}=k(),V=I(),n=s([]),C=[{title:i("Provider"),value:"provider.name"},{title:i("Old account"),value:"username"},{title:i("New account"),value:"mailbox"},{title:i("Actions"),value:"actions",sortable:!1,align:"right"}],x=s([]),u=s(!1),m=s(""),h=s({}),M=s(0);function A(r){y.deleteMigration(r.id).then(()=>{V.displayNotification({msg:i("Migration deleted")}),n.value=n.value.filter(a=>a.id!==r.id)})}function b(r){u.value=!0;let a={};y.getMigrations(a).then(d=>{n.value=d.data,M.value=n.value.length}).finally(()=>u.value=!1)}function D(){const r=[];return r.push({label:i("Delete"),icon:"mdi-delete-outline",onClick:A(),color:"red"}),r}return b(),(r,a)=>{const d=U("router-link");return S(),j(O,{class:"mt-6"},{default:o(()=>[e(P,{modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]=t=>x.value=t),options:h.value,"onUpdate:options":a[3]||(a[3]=t=>h.value=t),headers:C,items:n.value,search:m.value,"server-items-length":M.value,loading:u.value,"show-select":""},{top:o(()=>[e(T,{color:"white",flat:""},{default:o(()=>[e(w,{location:"bottom"},{activator:o(({props:t})=>[e(p,$(t,{variant:"flat","append-icon":"mdi-chevron-down",size:"small"}),{default:o(()=>[g(v(_(i)("Actions")),1)]),_:2},1040)]),default:o(()=>[e(E,{density:"compact"})]),_:1}),e(p,{variant:"text",icon:"mdi-reload",onClick:a[0]||(a[0]=t=>b())}),e(B),e(F,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=t=>m.value=t),"prepend-inner-icon":"mdi-magnify",placeholder:"Search",filled:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),"item.mailbox":o(({item:t})=>[e(d,{to:{name:"AccountDetail",params:{id:t.mailbox.user}}},{default:o(()=>[g(v(t.mailbox.full_address),1)]),_:2},1032,["to"])]),"item.actions":o(({item:t})=>[e(w,{"offset-y":""},{activator:o(({props:N})=>[e(p,$({icon:"mdi-dots-horizontal"},N),null,16)]),default:o(()=>[e(_(L),{items:D(),object:t},null,8,["items","object"])]),_:2},1024)]),_:2},1032,["modelValue","options","items","search","server-items-length","loading"])]),_:1})}}},H={__name:"MigrationsView",setup(l){const{$gettext:i}=k();return(V,n)=>(S(),G("div",null,[e(T,{flat:""},{default:o(()=>[e(q,null,{default:o(()=>[g(v(_(i)("Migrations")),1)]),_:1}),e(B)]),_:1}),e(R)]))}},de=z(H,[["__scopeId","data-v-5f22702f"]]);export{de as default};
