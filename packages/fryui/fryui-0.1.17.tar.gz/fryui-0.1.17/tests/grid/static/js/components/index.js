var R=[],G=class{constructor(t){this.rawValue=t,this.effectSet=new Set}addEffect(t){this.effectSet.add(t)}removeEffect(t){this.effectSet.delete(t)}hasEffect(t){return this.effectSet.has(t)}peek(){return this.rawValue}get value(){let t=R.length;if(t===0)return this.rawValue;let r=R[t-1];return this.hasEffect(r)||(this.effectSet.add(r),r.addSignal(this)),this.rawValue}set value(t){if(this.rawValue!==t){this.rawValue=t;let r=[];for(let f of this.effectSet)try{f.callback()}catch(y){r.push([f,y])}if(r.length>0)throw r}}};function Z(a){return new G(a)}var I=class{constructor(t){this.fn=t,this.active=!1,this.todispose=!1,this.disposed=!1,this.signalSet=new Set}addSignal(t){this.signalSet.add(t)}removeSignal(t){this.signalSet.delete(t)}callback(){if(!(this.active===!0||this.disposed===!0)){R.push(this),this.active=!0,this.signalSet.clear();try{this.fn()}finally{this.active=!1,R.pop(),this.todispose&&this.dispose()}}}dispose(){if(!this.disposed){if(this.active){this.todispose=!0;return}for(let t of this.signalSet)t.removeEffect(this);this.signalSet.clear(),this.todispose=!1,this.disposed=!0}}};function q(a){let t=new I(a);try{t.callback()}catch(r){throw t.dispose(),r}return t.dispose.bind(t)}var T=class{constructor(t){this.fn=t,this.rawValue=void 0,this.active=!1,this.todispose=!1,this.disposed=!1,this.effectSet=new Set,this.signalSet=new Set}addEffect(t){this.effectSet.add(t)}removeEffect(t){this.effectSet.delete(t)}hasEffect(t){return this.effectSet.has(t)}peek(){return this.rawValue}get value(){this.rawValue=this.fn();let t=R.length;if(t===0)return this.rawValue;let r=R[t-1];return this.hasEffect(r)||(this.effectSet.add(r),r.addSignal(this)),this.rawValue}addSignal(t){this.signalSet.add(t)}removeSignal(t){this.signalSet.delete(t)}callback(){if(this.active===!0||this.disposed===!0)return;R.push(this),this.active=!0,this.signalSet.clear();let t;try{if(t=this.fn(),t!=this.rawValue){this.rawValue=t;let r=[];for(let f of this.effectSet)try{f.callback()}catch(y){r.push([f,y])}if(r.length>0)throw r}}finally{this.active=!1,R.pop(),this.todispose&&this.dispose()}}dispose(){if(!this.disposed){if(this.active){this.todispose=!0;return}for(let t of this.signalSet)t.removeEffect(this);this.signalSet.clear();for(let t of this.effectSet)t.removeSignal(this);this.effectSet.clear(),this.todispose=!1,this.disposed=!0}}};var J=class{constructor({cid:t,name:r,setup:f,args:y,refs:m,element:p,g:C}){this.fryid=t;let u=r.split(":");u.length==1?(this.fryapp="",this.fryname=r):(this.fryapp=u[0],this.fryname=u[1]),this.frysetup=f,this.fryargs=y,this.fryrefs=m,this.fryelement=p,this.fryg=C,this._fryparent=null,this._fryroot=null}ready(t){this.fryg.readyFns.push(t)}get g(){return this.fryg.g}get isReady(){return this.fryg.isReady}get fryparent(){if(this._fryparent)return this._fryparent;let t=this.fryelement,r=t.frycomponents,f=r.indexOf(this);if(f>0)return this._fryparent=r[f-1],this._fryparent;for(t=t.parentElement;t;){if("frycomponents"in t)return r=t.frycomponents,this._fryparent=r[r.length-1],this._fryparent;t=t.parentElement}}get fryroot(){let t=this.fryelement,r=this;if(!t.isConnected)return this._fryroot=null,null;if(this._fryroot)return this._fryroot;for(;t;)"frycomponents"in t&&(r=t.frycomponents[0]),t=t.parentElement;return this._fryroot=r,r}},Te={};async function K(a,t,r){let f={readyFns:[],isReady:!1,g:Te},y={},m=[],p={};for(let l of document.querySelectorAll("script[data-fryid]"))p[l.dataset.fryid]=l;function C(l){if(l.tagName!=="SCRIPT"){if(l.tagName==="TEMPLATE")return;if(l.dataset&&"fryid"in l.dataset)for(let i of l.dataset.fryid.split(" ")){if(i in y)throw`duplicate component id ${i}`;if(!(i in p))throw`unknown component id ${i}`;let o=p[i],{setup:d,args:h,refs:g}=JSON.parse(o.textContent),{fryname:S}=o.dataset;m.length===0&&h&&Object.assign(h,r);let V=y[i]=new J({cid:i,name:S,setup:d,args:h,refs:g,element:l,g:f});m.push(V),"frycomponents"in l?l.frycomponents.push(V):l.frycomponents=[V]}for(let i of l.children)C(i)}}C(a);let u=a.querySelectorAll("[data-fryref]:not(script)");for(let l of u){let i=l.dataset.fryref;for(let o of i.split(" ")){let[d,h]=o.split("-"),g=y[h];if(d.endsWith(":a")){let S=d.slice(0,-2);S in g.fryargs?g.fryargs[S].push(l):g.fryargs[S]=[l]}else g.fryargs[d]=l}}for(let l of m){let i=function(o){let d=a.querySelector(`[data-frytid="${o}"]`);return{template:d,create:async g=>{let S=d.content.cloneNode(!0);return await K(S,t,g),S.firstElementChild.frycomponents[0]}}};for(let o in l.fryrefs){let d=l.fryrefs[o],h=o,g=S=>y[S];o.startsWith("t:")&&(h=o.slice(2),g=i),Array.isArray(d)?l.fryargs[h]=d.map(S=>g(S)):l.fryargs[h]=g(d)}}function v(l){let i=""+l.fryid+"/",o=l.fryembeds;function d(h){if("fryembed"in h.dataset){let g=h.dataset.fryembed;for(let S of g.split(" ")){if(!S.startsWith(i))continue;let[V,E,...e]=S.substr(i.length).split("-"),n=parseInt(V),w=e.join("-");if(n>=o.length){console.log("invalid embed id: ",V);continue}let z=o[n];E==="text"?z instanceof G||z instanceof T?q(()=>h.textContent=z.value):h.textContent=z:E==="html"?z instanceof G||z instanceof T?q(()=>h.innerHTML=z.value):h.innerHTML=z:E==="event"?h.addEventListener(w,z):E==="attr"?z instanceof G||z instanceof T?q(()=>h.setAttribute(w,z.value)):h.setAttribute(w,z):E==="object"?("frydata"in h||(h.frydata={}),h.frydata[w]=z):console.log("invalid attribute type: ",E)}}for(let g of h.children)d(g)}d(l.fryelement)}for(let l of m){if(!l.frysetup)continue;await t[l.frysetup].bind(l)(),v(l)}for(let l of f.readyFns)l();f.readyFns.length=0,f.isReady=!0}var ye=async function(){let{hcenter:a,vcenter:t}=this.fryargs,r=()=>a.broaden(),f=()=>a.narrow(),y=()=>t.broaden(),m=()=>t.narrow(),p=Z(!0),C=Z(!0),u=()=>{p.peek()?(p.value=!1,a.setCentered(!1)):(p.value=!0,a.setCentered(!0))},v=()=>{C.peek()?(C.value=!1,t.setCentered(!1)):(C.value=!0,t.setCentered(!0))};document.addEventListener("keydown",l=>{l.code==="KeyB"?(console.log(l.code),r(),y()):l.code==="KeyN"&&(console.log(l.code),f(),m())}),this.fryembeds=[r,f,u,p,y,m,v,C]};var ge=async function(){let{dom:a}=this.fryargs;this.focus=()=>{a.focus()},this.fryembeds=[]};var we=async function(){let{gutters:a,ncol:t,nrow:r,resizable:f}=this.fryargs;this.hgutters=y=>{let m=[];for(let p=0;p<t;p++){let C=y*t+p,u=this.fryelement.children.item(C);if(u&&u.frycomponents&&u.frycomponents.length>0){let v=u.frycomponents[0];v.isGutter&&m.push(v)}}return m},this.vgutters=y=>{let m=[];for(let p=0;p<r;p++){let C=p*t+y,u=this.fryelement.children.item(C);if(u&&u.frycomponents&&u.frycomponents.length>0){let v=u.frycomponents[0];v.isGutter&&m.push(v)}}return m},this.fryembeds=[]};var Se=async function(){let{bar:a,el:t,ish:r,isv:f,cursor:y,col:m,row:p,ncol:C,nrow:u,resizable:v,center:l}=this.fryargs,i=!1,o=[],d=[],h=[],g=[],S=0,V=0,E=0,e=0,n=0,w=0,z=[],Q=[],U=0,ee=0,X=[],te=[],se=0,re=0,ne=0,ie=0,M=0,Le,Ce,$,_e,j,ze,B="grid-template-columns",D="grid-template-rows",oe="bg-primarya",_=t.parentElement;a.classList.add("h-full"),a.classList.add("w-full"),r&&(a.classList.add("-top-3px"),a.classList.add("h-7px"),a.classList.remove("h-full")),f&&(a.classList.add("-left-3px"),a.classList.add("w-7px"),a.classList.remove("w-full"));let Y=(s,c)=>Number(s.slice(0,-1*c.length)),Ve=function(s){return s.endsWith("px")?{value:s,type:"px",numeric:Y(s,"px")}:s.endsWith("fr")?{value:s,type:"fr",numeric:Y(s,"fr")}:s.endsWith("%")?{value:s,type:"%",numeric:Y(s,"%")}:s==="auto"?{value:s,type:"auto"}:null},Ne=s=>s.value?s.value:`${s.numeric}${s.type}`,k=s=>s.split(" ").map(Ve),ce=s=>s.map(Ne).join(" "),fe=s=>h.slice(0,s).reduce((c,x)=>c+x.numeric,0),Re=s=>h.slice(0,s+1).reduce((c,x)=>c+x.numeric,0),le=s=>g.slice(0,s).reduce((c,x)=>c+x.numeric,0),We=s=>g.slice(0,s+1).reduce((c,x)=>c+x.numeric,0),ae=s=>"touches"in s?s.touches[0].clientX:s.clientX,ue=s=>"touches"in s?s.touches[0].clientY:s.clientY,P=(s,c)=>{o[s].value=null,o[s].type==="px"?o[s].numeric=c:o[s].type==="fr"?z.length===1?o[s].numeric=1:S!==0&&(o[s].numeric=c/S):o[s].type==="%"&&E!==0&&(o[s].numeric=c/E)},O=(s,c)=>{d[s].value=null,d[s].type==="px"?d[s].numeric=c:d[s].type==="fr"?X.length===1?d[s].numeric=1:V!==0&&(d[s].numeric=c/V):d[s].type==="%"&&e!==0&&(d[s].numeric=c/e)},H=(s,c)=>{for(let x=0;x<s.length;x++)if(s[x].type==c&&s[x].numeric>0)return x;return null},A=()=>!1,Ge=()=>a.classList.add(oe),Pe=()=>a.classList.remove(oe),de=()=>{if(this.centered){if(r)return this.fryparent.vgutters(0);if(f)return this.fryparent.hgutters(0)}if(C===1||u===1)return[this];let s=new Set;if(r)for(let c of this.fryparent.hgutters(p))s.add(c);if(f)for(let c of this.fryparent.vgutters(m))s.add(c);return s},he=()=>{v&&de().forEach(c=>c.show())},pe=()=>{!i&&v&&de().forEach(c=>c.hide())},Oe=s=>{let c=_.getBoundingClientRect();Le=c.width,Ce=c.height,$=c.top,_e=c.bottom,j=c.left,ze=c.right;let x=ae(s),N=ue(s);if(r){let L=_.style[D];if(L&&(d=k(L)),L=window.getComputedStyle(_)[D],L&&(g=k(L),this.centered&&(M=g[0].numeric+g[2].numeric+g[4].numeric)),U=N-$-le(p),ee=g[p].numeric-U,X=d.filter(b=>b.type==="fr"),te=d.filter(b=>b.type==="%"),X.length){let b=H(d,"fr");b!==null&&(V=g[b].numeric/d[b].numeric)}if(te.length){let b=H(d,"%");b!==null&&(e=g[b].numeric/d[b].numeric)}ne=le(p-1),ie=We(p+1)}if(f){let L=_.style[B];if(L&&(o=k(L)),L=window.getComputedStyle(_)[B],L&&(h=k(L),this.centered&&(M=h[0].numeric+h[2].numeric+h[4].numeric)),n=x-j-fe(m),w=h[m].numeric-n,z=o.filter(b=>b.type==="fr"),Q=o.filter(b=>b.type==="%"),z.length){let b=H(o,"fr");b!==null&&(S=h[b].numeric/o[b].numeric)}if(Q.length){let b=H(o,"%");b!==null&&(E=h[b].numeric/o[b].numeric)}se=fe(m-1),re=Re(m+1)}},me=s=>{v&&("button"in s&&s.button!==0||(s.preventDefault(),Oe(s),i=!0,window.addEventListener("mouseup",W),window.addEventListener("touchend",W),window.addEventListener("touchcancel",W),window.addEventListener("mousemove",F),window.addEventListener("touchmove",F),document.documentElement.classList.add(y),_.addEventListener("selectstart",A),_.addEventListener("dragstart",A),_.style.userSelect="none",_.style.webkitUserSelect="none",_.style.MozUserSelect="none",_.style.pointerEvents="none",he()))},F=s=>{if(r){let c=ue(s),x=$+ne+U,N=$+ie-ee;if(c<x&&(c=x),c>N&&(c=N),this.centered){let L=0,b=0;p===1?L=c-x:L=N-c,b=M-2*L,O(0,L),O(2,b),O(4,L)}else O(p-1,c-x),O(p+1,N-c);_.style[D]=ce(d)}if(f){let c=ae(s),x=j+se+n,N=j+re-w;if(c<x&&(c=x),c>N&&(c=N),this.centered){let L=0,b=0;m===1?L=c-x:L=N-c,b=M-2*L,P(0,L),P(2,b),P(4,L)}else P(m-1,c-x),P(m+1,N-c);_.style[B]=ce(o)}},W=()=>{i=!1,window.removeEventListener("mouseup",W),window.removeEventListener("touchend",W),window.removeEventListener("touchcancel",W),window.removeEventListener("mousemove",F),window.removeEventListener("touchmove",F),document.documentElement.classList.remove(y),_.removeEventListener("selectstart",A),_.removeEventListener("dragstart",A),_.style.userSelect="",_.style.webkitUserSelect="",_.style.MozUserSelect="",_.style.pointerEvents="",pe()};this.centered=l,this.show=Ge,this.hide=Pe,this.col=m,this.row=p,this.ish=r,this.isv=f,this.isGutter=!0,this.fryembeds=[he,pe,me,me]};var be=async function(){let{leftGutter:a,grid:t,rightGutter:r}=this.fryargs,f=(e,n)=>Number(e.slice(0,-1*n.length)),y=function(e){return e.endsWith("px")?{value:e,type:"px",numeric:f(e,"px")}:e.endsWith("fr")?{value:e,type:"fr",numeric:f(e,"fr")}:e.endsWith("%")?{value:e,type:"%",numeric:f(e,"%")}:e==="auto"?{value:e,type:"auto"}:null},m=e=>e.value?e.value:`${e.numeric}${e.type}`,p=e=>e.split(" ").map(y),C=e=>e.map(m).join(" "),u=5,v="grid-template-columns",l=(e,n)=>{for(let w=0;w<e.length;w++)if(e[w].type==n&&e[w].numeric>0)return w;return null},i=[],o=[],d=[],h=[],g=0,S=0,V=()=>{i=[],o=[],d=[],h=[],g=0,S=0;let e=t.style[v];if(e&&(i=p(e)),e=window.getComputedStyle(t)[v],e&&(o=p(e)),d=i.filter(n=>n.type==="fr"),d.length){let n=l(i,"fr");n!==null&&(g=o[n].numeric/i[n].numeric)}if(h=i.filter(n=>n.type==="%"),h.length){let n=l(i,"%");n!==null&&(S=o[n].numeric/i[n].numeric)}},E=(e,n)=>{i[e].value=null,i[e].type==="px"?i[e].numeric=n:i[e].type==="fr"?d.length===1?i[e].numeric=1:g!==0&&(i[e].numeric=n/g):i[e].type==="%"&&S!==0&&(i[e].numeric=n/S)};this.broaden=()=>{V();let e=o[0].numeric,n=o[2].numeric,w=o[4].numeric;e<=u||w<=u||(e-=u,w-=u,n+=u+u,E(0,e),E(2,n),E(4,w),t.style[v]=C(i))},this.narrow=()=>{V();let e=o[0].numeric,n=o[2].numeric,w=o[4].numeric;n<=u+u||(e+=u,w+=u,n-=u+u,E(0,e),E(2,n),E(4,w),t.style[v]=C(i))},this.setCentered=e=>{e&&!a.centered&&(t.style[v]="1fr 1px 2fr 1px 1fr"),a.centered=e,r.centered=e},this.isCentered=()=>a.centered,this.hgutters=e=>[a,r],this.vgutters=e=>e===1?[a]:e===3?[r]:[],this.fryembeds=[]};var ve=async function(){let{nrow:a,resizable:t}=this.fryargs;this.hgutters=r=>{let f=this.fryelement.children.item(r);if(f&&f.frycomponents&&f.frycomponents.length>0){let y=f.frycomponents[0];if(y.isGutter)return[y]}return[]},this.vgutters=r=>{let f=[];for(let y=0;y<a;y++){let m=this.fryelement.children.item(y);if(m&&m.frycomponents&&m.frycomponents.length>0){let p=m.frycomponents[0];p.isGutter&&f.push(p)}}return f},this.fryembeds=[]};var xe=async function(){let{bottomGutter:a,grid:t,topGutter:r}=this.fryargs,f=(e,n)=>Number(e.slice(0,-1*n.length)),y=function(e){return e.endsWith("px")?{value:e,type:"px",numeric:f(e,"px")}:e.endsWith("fr")?{value:e,type:"fr",numeric:f(e,"fr")}:e.endsWith("%")?{value:e,type:"%",numeric:f(e,"%")}:e==="auto"?{value:e,type:"auto"}:null},m=e=>e.value?e.value:`${e.numeric}${e.type}`,p=e=>e.split(" ").map(y),C=e=>e.map(m).join(" "),u=5,v="grid-template-rows",l=(e,n)=>{for(let w=0;w<e.length;w++)if(e[w].type==n&&e[w].numeric>0)return w;return null},i=[],o=[],d=[],h=[],g=0,S=0,V=()=>{i=[],o=[],d=[],h=[],g=0,S=0;let e=t.style[v];if(e&&(i=p(e)),e=window.getComputedStyle(t)[v],e&&(o=p(e)),d=i.filter(n=>n.type==="fr"),d.length){let n=l(i,"fr");n!==null&&(g=o[n].numeric/i[n].numeric)}if(h=i.filter(n=>n.type==="%"),h.length){let n=l(i,"%");n!==null&&(S=o[n].numeric/i[n].numeric)}},E=(e,n)=>{i[e].value=null,i[e].type==="px"?i[e].numeric=n:i[e].type==="fr"?d.length===1?i[e].numeric=1:g!==0&&(i[e].numeric=n/g):i[e].type==="%"&&S!==0&&(i[e].numeric=n/S)};this.broaden=()=>{V();let e=o[0].numeric,n=o[2].numeric,w=o[4].numeric;e<=u||w<=u||(e-=u,w-=u,n+=u+u,E(0,e),E(2,n),E(4,w),t.style[v]=C(i))},this.narrow=()=>{V();let e=o[0].numeric,n=o[2].numeric,w=o[4].numeric;n<=u+u||(e+=u,w+=u,n-=u+u,E(0,e),E(2,n),E(4,w),t.style[v]=C(i))},this.setCentered=e=>{e&&!r.centered&&(t.style[v]="1fr 1px 2fr 1px 1fr"),r.centered=e,a.centered=e},this.isCentered=()=>r.centered,this.hgutters=e=>{if(e===1)return[r];if(e===3)return[a]},this.vgutters=e=>[r,a],this.fryembeds=[]};var Ee=async function(){let{ncol:a,resizable:t}=this.fryargs;this.hgutters=r=>{let f=[];for(let y=0;y<a;y++){let m=this.fryelement.children.item(y);if(m&&m.frycomponents&&m.frycomponents.length>0){let p=m.frycomponents[0];p.isGutter&&f.push(p)}}return f},this.vgutters=r=>{let f=this.fryelement.children.item(r);if(f&&f.frycomponents&&f.frycomponents.length>0){let y=f.frycomponents[0];if(y.isGutter)return[y]}return[]},this.fryembeds=[]};var Me={app_d64ef7e9d9d5f4c4125541a27af8606d1bd6f6be:ye,button_4616a9523c57bc14a585e19328bd69071f499916:ge,grid_409e5d77cd1da8a53df559edc146191151f6195a:we,gutter_8fef153628ef09372e3aaa26db32a236d12992a5:Se,hcenter_73ec7b1f975960779e2d908c0dba18a366989bc7:be,hsplit_1353f23d9bf5b2ed73337047fe905353b711ed7a:ve,vcenter_90645585eab8b9c757ea79d7e1a7492977e20936:xe,vsplit_801698f314d808861efa8b352e01d3cf8f09c11d:Ee},st=async a=>await K(a,Me);export{st as hydrate};
//# sourceMappingURL=index.js.map
