var me=async function(){let{dom:h}=this.fryargs;this.focus=()=>{h.focus()},this.fryembeds=[]};var ye=async function(){let{gutters:h,ncol:t,nrow:c,resizable:m}=this.fryargs;this.hgutters=L=>{let S=[];for(let y=0;y<t;y++){let C=L*t+y,f=this.fryelement.children.item(C);if(f&&f.frycomponents&&f.frycomponents.length>0){let x=f.frycomponents[0];x.fryname==="Gutter"&&S.push(x)}}return S},this.vgutters=L=>{let S=[];for(let y=0;y<c;y++){let C=y*t+L,f=this.fryelement.children.item(C);if(f&&f.frycomponents&&f.frycomponents.length>0){let x=f.frycomponents[0];x.fryname==="Gutter"&&S.push(x)}}return S},this.fryembeds=[]};var ge=async function(){let{bar:h,el:t,ish:c,isv:m,cursor:L,col:S,row:y,ncol:C,nrow:f,resizable:x,center:l}=this.fryargs,n=!1,i=[],a=[],u=[],d=[],g=0,_=0,v=0,e=0,r=0,p=0,z=[],K=[],X=0,Q=0,k=[],ee=[],te=0,se=0,re=0,ne=0,$=0,be,ve,j,xe,G,Ee,D="grid-template-columns",Y="grid-template-rows",ie="bg-primarya",V=t.parentElement;h.classList.add("h-full"),h.classList.add("w-full"),c&&(h.classList.add("-top-3px"),h.classList.add("h-7px"),h.classList.remove("h-full")),m&&(h.classList.add("-left-3px"),h.classList.add("w-7px"),h.classList.remove("w-full"));let B=(s,o)=>Number(s.slice(0,-1*o.length)),Le=function(s){return s.endsWith("px")?{value:s,type:"px",numeric:B(s,"px")}:s.endsWith("fr")?{value:s,type:"fr",numeric:B(s,"fr")}:s.endsWith("%")?{value:s,type:"%",numeric:B(s,"%")}:s==="auto"?{value:s,type:"auto"}:null},Ve=s=>s.value?s.value:`${s.numeric}${s.type}`,A=s=>s.split(" ").map(Le),oe=s=>s.map(Ve).join(" "),ce=s=>u.slice(0,s).reduce((o,b)=>o+b.numeric,0),ze=s=>u.slice(0,s+1).reduce((o,b)=>o+b.numeric,0),fe=s=>d.slice(0,s).reduce((o,b)=>o+b.numeric,0),Ce=s=>d.slice(0,s+1).reduce((o,b)=>o+b.numeric,0),le=s=>"touches"in s?s.touches[0].clientX:s.clientX,ae=s=>"touches"in s?s.touches[0].clientY:s.clientY,P=(s,o)=>{i[s].value=null,i[s].type==="px"?i[s].numeric=o:i[s].type==="fr"?z.length===1?i[s].numeric=1:g!==0&&(i[s].numeric=o/g):i[s].type==="%"&&v!==0&&(i[s].numeric=o/v)},O=(s,o)=>{a[s].value=null,a[s].type==="px"?a[s].numeric=o:a[s].type==="fr"?k.length===1?a[s].numeric=1:_!==0&&(a[s].numeric=o/_):a[s].type==="%"&&e!==0&&(a[s].numeric=o/e)},H=(s,o)=>{for(let b=0;b<s.length;b++)if(s[b].type==o&&s[b].numeric>0)return b;return null},F=()=>!1,_e=()=>h.classList.add(ie),Ne=()=>h.classList.remove(ie),ue=()=>{if(C===1||f===1)return[this];let s=new Set;if(c)for(let o of this.fryparent.hgutters(y))s.add(o);if(m)for(let o of this.fryparent.vgutters(S))s.add(o);return s},de=()=>{x&&ue().forEach(o=>o.show())},pe=()=>{!n&&x&&ue().forEach(o=>o.hide())},Re=s=>{let o=V.getBoundingClientRect();be=o.width,ve=o.height,j=o.top,xe=o.bottom,G=o.left,Ee=o.right;let b=le(s),N=ae(s);if(c){let E=V.style[Y];if(E&&(a=A(E)),E=window.getComputedStyle(V)[Y],E&&(d=A(E),this.centered&&($=d[0].numeric+d[2].numeric+d[4].numeric)),X=N-j-fe(y),Q=d[y].numeric-X,k=a.filter(w=>w.type==="fr"),ee=a.filter(w=>w.type==="%"),k.length){let w=H(a,"fr");w!==null&&(_=d[w].numeric/a[w].numeric)}if(ee.length){let w=H(a,"%");w!==null&&(e=d[w].numeric/a[w].numeric)}re=fe(y-1),ne=Ce(y+1)}if(m){let E=V.style[D];if(E&&(i=A(E)),E=window.getComputedStyle(V)[D],E&&(u=A(E),this.centered&&($=u[0].numeric+u[2].numeric+u[4].numeric)),r=b-G-ce(S),p=u[S].numeric-r,z=i.filter(w=>w.type==="fr"),K=i.filter(w=>w.type==="%"),z.length){let w=H(i,"fr");w!==null&&(g=u[w].numeric/i[w].numeric)}if(K.length){let w=H(i,"%");w!==null&&(v=u[w].numeric/i[w].numeric)}te=ce(S-1),se=ze(S+1)}},he=s=>{x&&("button"in s&&s.button!==0||(s.preventDefault(),Re(s),n=!0,window.addEventListener("mouseup",W),window.addEventListener("touchend",W),window.addEventListener("touchcancel",W),window.addEventListener("mousemove",U),window.addEventListener("touchmove",U),document.documentElement.classList.add(L),V.addEventListener("selectstart",F),V.addEventListener("dragstart",F),V.style.userSelect="none",V.style.webkitUserSelect="none",V.style.MozUserSelect="none",V.style.pointerEvents="none",de()))},U=s=>{if(c){let o=ae(s),b=j+re+X,N=j+ne-Q;if(o<b&&(o=b),o>N&&(o=N),this.centered){let E=0,w=0;y===1?E=o-b:E=N-o,w=$-2*E,O(0,E),O(2,w),O(4,E)}else O(y-1,o-b),O(y+1,N-o);V.style[Y]=oe(a)}if(m){let o=le(s),b=G+te+r,N=G+se-p;if(o<b&&(o=b),o>N&&(o=N),this.centered){let E=0,w=0;S===1?E=o-b:E=N-o,w=$-2*E,P(0,E),P(2,w),P(4,E)}else P(S-1,o-b),P(S+1,N-o);V.style[D]=oe(i)}},W=()=>{n=!1,window.removeEventListener("mouseup",W),window.removeEventListener("touchend",W),window.removeEventListener("touchcancel",W),window.removeEventListener("mousemove",U),window.removeEventListener("touchmove",U),document.documentElement.classList.remove(L),V.removeEventListener("selectstart",F),V.removeEventListener("dragstart",F),V.style.userSelect="",V.style.webkitUserSelect="",V.style.MozUserSelect="",V.style.pointerEvents="",pe()};this.centered=l,this.show=_e,this.hide=Ne,this.col=S,this.row=y,this.ish=c,this.isv=m,this.fryembeds=[de,pe,he,he]};var we=async function(){let{leftGutter:h,rightGutter:t,grid:c}=this.fryargs,m=(e,r)=>Number(e.slice(0,-1*r.length)),L=function(e){return e.endsWith("px")?{value:e,type:"px",numeric:m(e,"px")}:e.endsWith("fr")?{value:e,type:"fr",numeric:m(e,"fr")}:e.endsWith("%")?{value:e,type:"%",numeric:m(e,"%")}:e==="auto"?{value:e,type:"auto"}:null},S=e=>e.value?e.value:`${e.numeric}${e.type}`,y=e=>e.split(" ").map(L),C=e=>e.map(S).join(" "),f=5,x="grid-template-columns",l=(e,r)=>{for(let p=0;p<e.length;p++)if(e[p].type==r&&e[p].numeric>0)return p;return null},n=[],i=[],a=[],u=[],d=0,g=0,_=()=>{n=[],i=[],a=[],u=[],d=0,g=0;let e=c.style[x];if(e&&(n=y(e)),e=window.getComputedStyle(c)[x],e&&(i=y(e)),a=n.filter(r=>r.type==="fr"),a.length){let r=l(n,"fr");r!==null&&(d=i[r].numeric/n[r].numeric)}if(u=n.filter(r=>r.type==="%"),u.length){let r=l(n,"%");r!==null&&(g=i[r].numeric/n[r].numeric)}},v=(e,r)=>{n[e].value=null,n[e].type==="px"?n[e].numeric=r:n[e].type==="fr"?a.length===1?n[e].numeric=1:d!==0&&(n[e].numeric=r/d):n[e].type==="%"&&g!==0&&(n[e].numeric=r/g)};this.broaden=()=>{_();let e=i[0].numeric,r=i[2].numeric,p=i[4].numeric;e<=f||p<=f||(e-=f,p-=f,r+=f+f,v(0,e),v(2,r),v(4,p),c.style[x]=C(n))},this.narrow=()=>{_();let e=i[0].numeric,r=i[2].numeric,p=i[4].numeric;r<=f+f||(e+=f,p+=f,r-=f+f,v(0,e),v(2,r),v(4,p),c.style[x]=C(n))},this.setCentered=e=>{e&&!h.centered&&(c.style[x]="1fr 1px 2fr 1px 1fr"),h.centered=e,t.centered=e},this.isCentered=()=>h.centered,this.fryembeds=[]};var Se=async function(){let{bottomGutter:h,grid:t,topGutter:c}=this.fryargs,m=(e,r)=>Number(e.slice(0,-1*r.length)),L=function(e){return e.endsWith("px")?{value:e,type:"px",numeric:m(e,"px")}:e.endsWith("fr")?{value:e,type:"fr",numeric:m(e,"fr")}:e.endsWith("%")?{value:e,type:"%",numeric:m(e,"%")}:e==="auto"?{value:e,type:"auto"}:null},S=e=>e.value?e.value:`${e.numeric}${e.type}`,y=e=>e.split(" ").map(L),C=e=>e.map(S).join(" "),f=5,x="grid-template-rows",l=(e,r)=>{for(let p=0;p<e.length;p++)if(e[p].type==r&&e[p].numeric>0)return p;return null},n=[],i=[],a=[],u=[],d=0,g=0,_=()=>{n=[],i=[],a=[],u=[],d=0,g=0;let e=t.style[x];if(e&&(n=y(e)),e=window.getComputedStyle(t)[x],e&&(i=y(e)),a=n.filter(r=>r.type==="fr"),a.length){let r=l(n,"fr");r!==null&&(d=i[r].numeric/n[r].numeric)}if(u=n.filter(r=>r.type==="%"),u.length){let r=l(n,"%");r!==null&&(g=i[r].numeric/n[r].numeric)}},v=(e,r)=>{n[e].value=null,n[e].type==="px"?n[e].numeric=r:n[e].type==="fr"?a.length===1?n[e].numeric=1:d!==0&&(n[e].numeric=r/d):n[e].type==="%"&&g!==0&&(n[e].numeric=r/g)};this.broaden=()=>{_();let e=i[0].numeric,r=i[2].numeric,p=i[4].numeric;e<=f||p<=f||(e-=f,p-=f,r+=f+f,v(0,e),v(2,r),v(4,p),t.style[x]=C(n))},this.narrow=()=>{_();let e=i[0].numeric,r=i[2].numeric,p=i[4].numeric;r<=f+f||(e+=f,p+=f,r-=f+f,v(0,e),v(2,r),v(4,p),t.style[x]=C(n))},this.setCentered=e=>{e&&!c.centered&&(t.style[x]="1fr 1px 2fr 1px 1fr"),c.centered=e,h.centered=e},this.isCentered=()=>c.centered,this.fryembeds=[]};var R=[],T=class{constructor(t){this.rawValue=t,this.effectSet=new Set}addEffect(t){this.effectSet.add(t)}removeEffect(t){this.effectSet.delete(t)}hasEffect(t){return this.effectSet.has(t)}peek(){return this.rawValue}get value(){let t=R.length;if(t===0)return this.rawValue;let c=R[t-1];return this.hasEffect(c)||(this.effectSet.add(c),c.addSignal(this)),this.rawValue}set value(t){if(this.rawValue!==t){this.rawValue=t;let c=[];for(let m of this.effectSet)try{m.callback()}catch(L){c.push([m,L])}if(c.length>0)throw c}}};var I=class{constructor(t){this.fn=t,this.active=!1,this.todispose=!1,this.disposed=!1,this.signalSet=new Set}addSignal(t){this.signalSet.add(t)}removeSignal(t){this.signalSet.delete(t)}callback(){if(!(this.active===!0||this.disposed===!0)){R.push(this),this.active=!0,this.signalSet.clear();try{this.fn()}finally{this.active=!1,R.pop(),this.todispose&&this.dispose()}}}dispose(){if(!this.disposed){if(this.active){this.todispose=!0;return}for(let t of this.signalSet)t.removeEffect(this);this.signalSet.clear(),this.todispose=!1,this.disposed=!0}}};function q(h){let t=new I(h);try{t.callback()}catch(c){throw t.dispose(),c}return t.dispose.bind(t)}var M=class{constructor(t){this.fn=t,this.rawValue=void 0,this.active=!1,this.todispose=!1,this.disposed=!1,this.effectSet=new Set,this.signalSet=new Set}addEffect(t){this.effectSet.add(t)}removeEffect(t){this.effectSet.delete(t)}hasEffect(t){return this.effectSet.has(t)}peek(){return this.rawValue}get value(){this.rawValue=this.fn();let t=R.length;if(t===0)return this.rawValue;let c=R[t-1];return this.hasEffect(c)||(this.effectSet.add(c),c.addSignal(this)),this.rawValue}addSignal(t){this.signalSet.add(t)}removeSignal(t){this.signalSet.delete(t)}callback(){if(this.active===!0||this.disposed===!0)return;R.push(this),this.active=!0,this.signalSet.clear();let t;try{if(t=this.fn(),t!=this.rawValue){this.rawValue=t;let c=[];for(let m of this.effectSet)try{m.callback()}catch(L){c.push([m,L])}if(c.length>0)throw c}}finally{this.active=!1,R.pop(),this.todispose&&this.dispose()}}dispose(){if(!this.disposed){if(this.active){this.todispose=!0;return}for(let t of this.signalSet)t.removeEffect(this);this.signalSet.clear();for(let t of this.effectSet)t.removeSignal(this);this.effectSet.clear(),this.todispose=!1,this.disposed=!0}}};var J=class{constructor({cid:t,name:c,setup:m,args:L,refs:S,element:y,g:C}){this.fryid=t;let f=c.split(":");f.length==1?(this.fryapp="",this.fryname=c):(this.fryapp=f[0],this.fryname=f[1]),this.frysetup=m,this.fryargs=L,this.fryrefs=S,this.fryelement=y,this.fryg=C,this._fryparent=null,this._fryroot=null}ready(t){this.fryg.readyFns.push(t)}get g(){return this.fryg.g}get isReady(){return this.fryg.isReady}get fryparent(){if(this._fryparent)return this._fryparent;let t=this.fryelement,c=t.frycomponents,m=c.indexOf(this);if(m>0)return this._fryparent=c[m-1],this._fryparent;for(t=t.parentElement;t;){if("frycomponents"in t)return c=t.frycomponents,this._fryparent=c[c.length-1],this._fryparent;t=t.parentElement}}get fryroot(){let t=this.fryelement,c=this;if(!t.isConnected)return this._fryroot=null,null;if(this._fryroot)return this._fryroot;for(;t;)"frycomponents"in t&&(c=t.frycomponents[0]),t=t.parentElement;return this._fryroot=c,c}},We={};async function Z(h,t,c){let m={readyFns:[],isReady:!1,g:We},L={},S=[],y={};for(let l of document.querySelectorAll("script[data-fryid]"))y[l.dataset.fryid]=l;function C(l){if(l.tagName!=="SCRIPT"){if(l.tagName==="TEMPLATE")return;if(l.dataset&&"fryid"in l.dataset)for(let n of l.dataset.fryid.split(" ")){if(n in L)throw`duplicate component id ${n}`;if(!(n in y))throw`unknown component id ${n}`;let i=y[n],{setup:a,args:u,refs:d}=JSON.parse(i.textContent),{fryname:g}=i.dataset;S.length===0&&u&&Object.assign(u,c);let _=L[n]=new J({cid:n,name:g,setup:a,args:u,refs:d,element:l,g:m});S.push(_),"frycomponents"in l?l.frycomponents.push(_):l.frycomponents=[_]}for(let n of l.children)C(n)}}C(h);let f=h.querySelectorAll("[data-fryref]:not(script)");for(let l of f){let n=l.dataset.fryref;for(let i of n.split(" ")){let[a,u]=i.split("-"),d=L[u];if(a.endsWith(":a")){let g=a.slice(0,-2);g in d.fryargs?d.fryargs[g].push(l):d.fryargs[g]=[l]}else d.fryargs[a]=l}}for(let l of S){let n=function(i){let a=h.querySelector(`[data-frytid="${i}"]`);return{template:a,create:async d=>{let g=a.content.cloneNode(!0);return await Z(g,t,d),g.firstElementChild.frycomponents[0]}}};for(let i in l.fryrefs){let a=l.fryrefs[i],u=i,d=g=>L[g];i.startsWith("t:")&&(u=i.slice(2),d=n),Array.isArray(a)?l.fryargs[u]=a.map(g=>d(g)):l.fryargs[u]=d(a)}}function x(l){let n=""+l.fryid+"/",i=l.fryembeds;function a(u){if("fryembed"in u.dataset){let d=u.dataset.fryembed;for(let g of d.split(" ")){if(!g.startsWith(n))continue;let[_,v,...e]=g.substr(n.length).split("-"),r=parseInt(_),p=e.join("-");if(r>=i.length){console.log("invalid embed id: ",_);continue}let z=i[r];v==="text"?z instanceof T||z instanceof M?q(()=>u.textContent=z.value):u.textContent=z:v==="html"?z instanceof T||z instanceof M?q(()=>u.innerHTML=z.value):u.innerHTML=z:v==="event"?u.addEventListener(p,z):v==="attr"?z instanceof T||z instanceof M?q(()=>u.setAttribute(p,z.value)):u.setAttribute(p,z):v==="object"?("frydata"in u||(u.frydata={}),u.frydata[p]=z):console.log("invalid attribute type: ",v)}}for(let d of u.children)a(d)}a(l.fryelement)}for(let l of S){if(!l.frysetup)continue;await t[l.frysetup].bind(l)(),x(l)}for(let l of m.readyFns)l();m.readyFns.length=0,m.isReady=!0}var Pe={button_4616a9523c57bc14a585e19328bd69071f499916:me,grid_0ceb6e1d28beb13e16738bae971c575258e02269:ye,gutter_3f7b3ac8293e0abfd877500ab92a0d65e93d437e:ge,hcenter_ed2c906ac427ddbf6848e8c3c46bce7db3609647:we,vcenter_5b488d757346167a5ec07d8caecda9cf2adcd475:Se},De=async h=>await Z(h,Pe);export{De as hydrate};
//# sourceMappingURL=index.js.map
