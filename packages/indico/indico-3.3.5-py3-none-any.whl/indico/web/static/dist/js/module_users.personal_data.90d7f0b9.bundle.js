"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[743],{51624:(e,a,i)=>{var n=i(29079),s=i(637),t=i.n(s),l=i(97598),r=i.n(l),d=i(86326),c=i(35623),u=i(42430),o=i(6423),m=i(26225),f=i(89152),y=i(96478),g=i(49528),p=i(18606);const F=n.Ay.bind(null,{endpoint:"users.user_emails",rules:[{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"emails",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"emails",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/"),D=n.Ay.bind(null,{endpoint:"users.user_profile_update",rules:[{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"profile",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"profile",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/");function b({userId:e,userValues:a,currentAffiliation:i,titles:n,syncedValues:s,lockedFields:l,lockedFieldMessage:r,hasPredefinedAffiliations:c}){const b=null!==e?{user_id:e}:{},k=n.map((e=>({key:e.name,value:e.name,text:e.title})));return d.createElement("div",null,d.createElement(u.Form,{onSubmit:async(e,a)=>{const i=(0,f.getChangedValues)(e,a);c?i.affiliation_data&&(i.affiliation=i.affiliation_data.text.trim(),i.affiliation_id=i.affiliation_data.id,delete i.affiliation_data):delete i.affiliation_data;try{await g.indicoAxios.patch(D(b),i)}catch(e){return(0,f.handleSubmitError)(e)}location.reload(),await new Promise((()=>{}))},initialValues:a,initialValuesEqual:t().isEqual,subscription:{}},(e=>d.createElement(o.A,{onSubmit:e.handleSubmit},d.createElement(u.Field,{name:"synced_fields",isEqual:t().isEqual,render:()=>null}),d.createElement(f.FinalDropdown,{name:"title",options:k,selection:!0,parse:f.parsers.nullIfEmpty,label:y.Translate.string("Title","Salutation"),placeholder:y.Translate.string("None")}),d.createElement(o.A.Group,{widths:"equal"},d.createElement(m.SyncedFinalInput,{name:"first_name",label:y.Translate.string("First name"),required:!0,syncedValues:s,lockedFields:l,lockedFieldMessage:r}),d.createElement(m.SyncedFinalInput,{name:"last_name",label:y.Translate.string("Last name"),required:!0,syncedValues:s,lockedFields:l,lockedFieldMessage:r})),c?d.createElement(m.SyncedFinalAffiliationDropdown,{name:"affiliation_data",syncName:"affiliation",currentAffiliation:i,syncedValues:s,lockedFields:l,lockedFieldMessage:r}):d.createElement(m.SyncedFinalInput,{name:"affiliation",label:y.Translate.string("Affiliation"),syncedValues:s,lockedFields:l,lockedFieldMessage:r}),d.createElement(m.SyncedFinalTextArea,{name:"address",label:y.Translate.string("Address"),syncedValues:s,lockedFields:l,lockedFieldMessage:r}),d.createElement(m.SyncedFinalInput,{name:"phone",label:y.Translate.string("Phone number"),syncedValues:s,lockedFields:l,lockedFieldMessage:r}),d.createElement(m.SyncedFinalInput,{name:"email",label:y.Translate.string("Email address"),syncedValues:s,lockedFields:l,lockedFieldMessage:r,readOnly:!0},d.createElement(y.Translate,null,"You can manage your email addresses"," ",d.createElement(y.Param,{name:"link",wrapper:d.createElement("a",{href:F(b)})},"here"),".")),(0,p.renderPluginComponents)("user-personal-data-form-inputs",{userValues:a,syncedValues:s,lockedFields:l,lockedFieldMessage:r}),d.createElement(f.FinalSubmitButton,{label:y.Translate.string("Save changes"),className:"submit-button"})))))}b.propTypes={userId:r().number,userValues:r().object.isRequired,currentAffiliation:r().object,titles:r().arrayOf(r().shape({name:r().string.isRequired,title:r().string.isRequired})).isRequired,syncedValues:r().objectOf(r().string).isRequired,lockedFields:r().arrayOf(r().string).isRequired,lockedFieldMessage:r().string.isRequired,hasPredefinedAffiliations:r().bool.isRequired},b.defaultProps={userId:null,currentAffiliation:null},window.setupPersonalDataForm=function(e,a,i,n,s,t,l,r){document.addEventListener("DOMContentLoaded",(()=>{c.render(d.createElement(b,{userId:e,userValues:a,currentAffiliation:i,titles:n,syncedValues:s,lockedFields:t,lockedFieldMessage:l,hasPredefinedAffiliations:r}),document.querySelector("#personal-details-form-container"))}))}}},e=>{e.O(0,[4644,4394,2076],(()=>{return a=51624,e(e.s=a);var a}));e.O()}]);
//# sourceMappingURL=module_users.personal_data.90d7f0b9.bundle.js.map