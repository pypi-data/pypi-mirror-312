"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[7822],{67822:(e,t,s)=>{s.r(t),s.d(t,{ForkManager:()=>me,IForkManagerToken:()=>ue,JUPYTER_COLLABORATION_FORK_EVENTS_URI:()=>pe,NotebookCellServerExecutor:()=>L,ROOM_FORK_URL:()=>P,TimelineWidget:()=>he,WebSocketAwarenessProvider:()=>T,WebSocketProvider:()=>z,YDrive:()=>H,requestAPI:()=>N,requestDocSession:()=>j,requestDocumentTimeline:()=>A,requestUndoRedo:()=>O}),s(58919);var n=s(76505),o=s(69279),r=s(67893),i=s(8138);const a=new Map,c="undefined"==typeof BroadcastChannel?class{constructor(e){this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:r.Ey(t.newValue||"")}),i.k9(this._onChange)}postMessage(e){i.JT.setItem(this.room,r.nk(r.zS(e)))}close(){i.o6(this._onChange)}}:BroadcastChannel,l=e=>n._4(a,e,(()=>{const t=o.vt(),s=new c(e);return s.onmessage=e=>t.forEach((t=>t(e.data,"broadcastchannel"))),{bc:s,subs:t}})),d=(e,t,s=null)=>{const n=l(e);n.bc.postMessage(t),n.subs.forEach((e=>e(t,s)))};var h=s(90482),u=s(96214),p=s(19326),m=s(79870),g=s(97784),f=s(51370),v=s(30801),y=s(46132),_=s(47670),w=s(39907);const b=[];b[0]=(e,t,s,n,o)=>{u.zd(e,0);const r=m.VU(t,e,s.doc,s);n&&r===m.Zg&&!s.synced&&(s.synced=!0)},b[3]=(e,t,s,n,o)=>{u.zd(e,1),u.Gu(e,g.X3(s.awareness,Array.from(s.awareness.getStates().keys())))},b[1]=(e,t,s,n,o)=>{g.tQ(s.awareness,p.bo(t),s)},b[2]=(e,t,s,n,o)=>{((e,t,s)=>{0===p.cw(e)&&s(0,p.t3(e))})(t,s.doc,((e,t)=>S(s,t)))};const S=(e,t)=>console.warn(`Permission denied to access ${e.url}.\n${t}`),k=(e,t,s)=>{const n=p.$C(t),o=u.xv(),r=p.cw(n),i=e.messageHandlers[r];return i?i(o,n,e,s,r):console.error("Unable to compute message"),o},C=e=>{if(e.shouldConnect&&null===e.ws){const t=new e._WS(e.url);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=s=>{e.wsLastMessageReceived=h._g();const n=k(e,new Uint8Array(s.data),!0);u.Bw(n)>1&&t.send(u.Fo(n))},t.onerror=t=>{e.emit("connection-error",[t,e])},t.onclose=t=>{e.emit("connection-close",[t,e]),e.ws=null,e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,g._g(e.awareness,Array.from(e.awareness.getStates().keys()).filter((t=>t!==e.doc.clientID)),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(C,v.jk(100*v.n7(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e)},t.onopen=()=>{e.wsLastMessageReceived=h._g(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);const s=u.xv();if(u.zd(s,0),m.ue(s,e.doc),t.send(u.Fo(s)),null!==e.awareness.getLocalState()){const s=u.xv();u.zd(s,1),u.Gu(s,g.X3(e.awareness,[e.doc.clientID])),t.send(u.Fo(s))}},e.emit("status",[{status:"connecting"}])}},U=(e,t)=>{const s=e.ws;e.wsconnected&&s&&s.readyState===s.OPEN&&s.send(t),e.bcconnected&&d(e.bcChannel,t,e)};class x extends f.c{constructor(e,t,s,{connect:n=!0,awareness:o=new g.ww(s),params:r={},WebSocketPolyfill:i=WebSocket,resyncInterval:a=-1,maxBackoffTime:c=2500,disableBc:l=!1}={}){for(super();"/"===e[e.length-1];)e=e.slice(0,e.length-1);const p=(e=>y.Tj(e,((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&"))(r);this.maxBackoffTime=c,this.bcChannel=e+"/"+t,this.url=e+"/"+t+(0===p.length?"":"?"+p),this.roomname=t,this.doc=s,this._WS=i,this.awareness=o,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=l,this.wsUnsuccessfulReconnects=0,this.messageHandlers=b.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=n,this._resyncInterval=0,a>0&&(this._resyncInterval=setInterval((()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const e=u.xv();u.zd(e,0),m.ue(e,s),this.ws.send(u.Fo(e))}}),a)),this._bcSubscriber=(e,t)=>{if(t!==this){const t=k(this,new Uint8Array(e),!1);u.Bw(t)>1&&d(this.bcChannel,u.Fo(t),this)}},this._updateHandler=(e,t)=>{if(t!==this){const t=u.xv();u.zd(t,0),m.f7(t,e),U(this,u.Fo(t))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:e,updated:t,removed:s},n)=>{const r=e.concat(t).concat(s),i=u.xv();u.zd(i,1),u.Gu(i,g.X3(o,r)),U(this,u.Fo(i))},this._exitHandler=()=>{g._g(this.awareness,[s.clientID],"app closed")},_.Ll&&void 0!==w&&w.on("exit",this._exitHandler),o.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval((()=>{this.wsconnected&&3e4<h._g()-this.wsLastMessageReceived&&this.ws.close()}),3e3),n&&this.connect()}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),_.Ll&&void 0!==w&&w.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;var e,t;this.bcconnected||(e=this.bcChannel,t=this._bcSubscriber,l(e).subs.add(t),this.bcconnected=!0);const s=u.xv();u.zd(s,0),m.ue(s,this.doc),d(this.bcChannel,u.Fo(s),this);const n=u.xv();u.zd(n,0),m.nh(n,this.doc),d(this.bcChannel,u.Fo(n),this);const o=u.xv();u.zd(o,3),d(this.bcChannel,u.Fo(o),this);const r=u.xv();u.zd(r,1),u.Gu(r,g.X3(this.awareness,[this.doc.clientID])),d(this.bcChannel,u.Fo(r),this)}disconnectBc(){const e=u.xv();u.zd(e,1),u.Gu(e,g.X3(this.awareness,[this.doc.clientID],new Map)),U(this,u.Fo(e)),this.bcconnected&&(((e,t)=>{const s=l(e);s.subs.delete(t)&&0===s.subs.size&&(s.bc.close(),a.delete(e))})(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(C(this),this.connectBc())}}class T extends x{constructor(e){super(e.url,e.roomID,e.awareness.doc,{awareness:e.awareness}),this._isDisposed=!1,this._awareness=e.awareness,this._user=e.user,this._user.ready.then((()=>this._onUserChanged(this._user))).catch((e=>console.error(e))),this._user.userChanged.connect(this._onUserChanged,this)}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._user.userChanged.disconnect(this._onUserChanged,this),this._isDisposed=!0,this.destroy())}_onUserChanged(e){this._awareness.setLocalStateField("user",e.identity)}}var E=s(18504),R=s(62246),I=s(51827),D=s(90182);class L{constructor(e){var t;this._serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:I.ServerConnection.makeSettings()}async runCell({cell:e,notebook:t,notebookConfig:s,onCellExecuted:n,onCellExecutionScheduled:o,sessionContext:r,sessionDialogs:i,translator:a}){var c,l,d;const h=(a=null!=a?a:D.nullTranslator).load("jupyterlab");switch(e.model.type){case"markdown":e.rendered=!0,e.inputHidden=!1,n({cell:e,success:!0});break;case"code":if(r){if(r.isTerminating){await(0,E.showDialog)({title:h.__("Kernel Terminating"),body:h.__("The kernel for %1 appears to be terminating. You can not run any cell for now.",null===(c=r.session)||void 0===c?void 0:c.path),buttons:[E.Dialog.okButton()]});break}if(r.pendingInput)return await(0,E.showDialog)({title:h.__("Cell not executed due to pending input"),body:h.__("The cell has not been executed to avoid kernel deadlock as there is another pending input! Submit your pending input and try again."),buttons:[E.Dialog.okButton()]}),!1;if(r.hasNoKernel&&await r.startKernel()&&i&&await i.selectKernel(r),r.hasNoKernel)return e.model.sharedModel.transact((()=>{e.model.clearExecution()})),!0;const s=null===(d=null===(l=null==r?void 0:r.session)||void 0===l?void 0:l.kernel)||void 0===d?void 0:d.id,a=R.URLExt.join(this._serverSettings.baseUrl,`api/kernels/${s}/execute`),u=e.model.sharedModel.getId(),p=t.sharedModel.getState("document_id"),m={method:"POST",body:JSON.stringify({cell_id:u,document_id:p})};o({cell:e});let g=!1;try{g=(await I.ServerConnection.makeRequest(a,m,this._serverSettings)).ok}catch(t){if(n({cell:e,success:!1}),e.isDisposed)return!1;throw t}return n({cell:e,success:g}),!0}e.model.sharedModel.transact((()=>{e.model.clearExecution()}),!1)}return Promise.resolve(!0)}}const $="api/collaboration/session",F="api/collaboration/undo_redo",M="api/collaboration/timeline",P="api/collaboration/fork";async function N(e="",t={}){const s=I.ServerConnection.makeSettings(),n=R.URLExt.join(s.baseUrl,e);let o;try{o=await I.ServerConnection.makeRequest(n,t,s)}catch(e){throw new I.ServerConnection.NetworkError(e)}let r=await o.text();if(r.length>0)try{r=JSON.parse(r)}catch(e){console.error("Not a JSON response body.",o)}if(!o.ok)throw new I.ServerConnection.ResponseError(o,r.message||r);return r}async function j(e,t,s){const n=I.ServerConnection.makeSettings(),o=R.URLExt.join(n.baseUrl,$,encodeURIComponent(s)),r={method:"PUT",body:JSON.stringify({format:e,type:t})};let i;try{i=await I.ServerConnection.makeRequest(o,r,n)}catch(e){throw new I.ServerConnection.NetworkError(e)}let a=await i.text();if(a.length>0)try{a=JSON.parse(a)}catch(e){console.log("Not a JSON response body.",i)}if(!i.ok)throw new I.ServerConnection.ResponseError(i,a.message||a);return a}async function A(e,t,s){const n=I.ServerConnection.makeSettings();let o=R.URLExt.join(n.baseUrl,M,s);o=o.concat(`?format=${e}&&type=${t}`);const r={method:"GET"};let i;try{i=await I.ServerConnection.makeRequest(o,r,n)}catch(e){throw new I.ServerConnection.NetworkError(e)}return i}async function O(e,t,s,n){const o=I.ServerConnection.makeSettings();let r=R.URLExt.join(o.baseUrl,F,encodeURIComponent(e));r=r.concat(`?action=${t}&&steps=${s}&&forkRoom=${n}`);const i={method:"PUT"};let a;try{a=await I.ServerConnection.makeRequest(r,i,o)}catch(e){throw new I.ServerConnection.NetworkError(e)}let c=await a.text();if(c.length>0)try{c=JSON.parse(c)}catch(e){console.log("Not a JSON response body.",a)}if(!a.ok)throw new I.ServerConnection.ResponseError(a,c.message||c);return c}var B=s(30427),W=s(68211);class z{constructor(e){this._onConnectionClosed=e=>{1003===e.code&&(console.error("Document provider closed:",e.reason),(0,E.showErrorMessage)(this._trans.__("Document session error"),e.reason,[E.Dialog.okButton()]),this._sharedModel.dispose())},this._onSync=e=>{e&&(this._yWebsocketProvider&&(this._yWebsocketProvider.off("sync",this._onSync),this._sharedModel.ydoc.getMap("state").set("document_id",this._yWebsocketProvider.roomname)),this._ready.resolve())},this._ready=new W.PromiseDelegate,this._isDisposed=!1,this._path=e.path,this._contentType=e.contentType,this._format=e.format,this._serverUrl=e.url,this._sharedModel=e.model,this._awareness=e.model.awareness,this._yWebsocketProvider=null,this._trans=e.translator;const t=e.user;t.ready.then((()=>{this._onUserChanged(t)})).catch((e=>console.error(e))),t.userChanged.connect(this._onUserChanged,this),this._connect().catch((e=>console.warn(e)))}get isDisposed(){return this._isDisposed}get ready(){return this._ready.promise}get contentType(){return this._contentType}get format(){return this._format}dispose(){var e,t,s;this.isDisposed||(this._isDisposed=!0,null===(e=this._yWebsocketProvider)||void 0===e||e.off("connection-close",this._onConnectionClosed),null===(t=this._yWebsocketProvider)||void 0===t||t.off("sync",this._onSync),null===(s=this._yWebsocketProvider)||void 0===s||s.destroy(),this._disconnect(),B.Signal.clearData(this))}async reconnect(){this._disconnect(),this._connect()}async _connect(){const e=await j(this._format,this._contentType,this._path);this._yWebsocketProvider=new x(this._serverUrl,`${e.format}:${e.type}:${e.fileId}`,this._sharedModel.ydoc,{disableBc:!0,params:{sessionId:e.sessionId},awareness:this._awareness}),this._yWebsocketProvider.on("sync",this._onSync),this._yWebsocketProvider.on("connection-close",this._onConnectionClosed)}async connectToForkDoc(e,t){this._disconnect(),this._yWebsocketProvider=new x(this._serverUrl,e,this._sharedModel.ydoc,{disableBc:!0,params:{sessionId:t},awareness:this._awareness})}get wsProvider(){return this._yWebsocketProvider}_disconnect(){var e,t,s;null===(e=this._yWebsocketProvider)||void 0===e||e.off("connection-close",this._onConnectionClosed),null===(t=this._yWebsocketProvider)||void 0===t||t.off("sync",this._onSync),null===(s=this._yWebsocketProvider)||void 0===s||s.destroy(),this._yWebsocketProvider=null}_onUserChanged(e){this._awareness.setLocalStateField("user",e.identity)}}const J="true"===R.PageConfig.getOption("disableRTC");class H extends I.Drive{constructor(e,t,s){super({name:"RTC"}),this._onCreate=(e,t)=>{var s,n;if("string"==typeof e.format)try{const o=new z({url:R.URLExt.join(this.serverSettings.wsUrl,"api/collaboration/room"),path:e.path,format:e.format,contentType:e.contentType,model:t,user:this._user,translator:this._trans}),r=((null===(s=this._globalAwareness)||void 0===s?void 0:s.getLocalState())||{}).documents||[];r.includes(e.path)||(r.push(`${this.name}:${e.path}`),null===(n=this._globalAwareness)||void 0===n||n.setLocalStateField("documents",r));const i=`${e.format}:${e.contentType}:${e.path}`;this._providers.set(i,o),t.changed.connect((async(t,s)=>{if(!s.stateChange)return;const n=s.stateChange.filter((e=>"hash"===e.name));if(0===n.length)return;n.length>1&&console.error("Unexpected multiple changes to hash value in a single transaction");const o=n[0],r=await this.get(e.path,{content:!1});this._ydriveFileChanged.emit({type:"save",newValue:{...r,hash:o.newValue},oldValue:{hash:o.oldValue}})})),t.disposed.connect((()=>{var t,s;const n=this._providers.get(i);n&&(n.dispose(),this._providers.delete(i));const o=((null===(t=this._globalAwareness)||void 0===t?void 0:t.getLocalState())||{}).documents||[],r=o.indexOf(`${this.name}:${e.path}`);r>-1&&o.splice(r,1),null===(s=this._globalAwareness)||void 0===s||s.setLocalStateField("documents",o)}))}catch(t){console.error(`Failed to open websocket connection for ${e.path}.\n:${t}`)}},this._ydriveFileChanged=new B.Signal(this),this._user=e,this._trans=t,this._globalAwareness=s,this._providers=new Map,this.sharedModelFactory=new q(this._onCreate),super.fileChanged.connect(((e,t)=>{this._ydriveFileChanged.emit(t)}))}get providers(){return this._providers}dispose(){this.isDisposed||(this._providers.forEach((e=>e.dispose())),this._providers.clear(),super.dispose())}async get(e,t){if(t&&t.format&&t.type){const s=`${t.format}:${t.type}:${e}`,n=this._providers.get(s);if(n){const[s]=await Promise.all([super.get(e,{...t,content:!1}),n.ready]);return{...s,format:t.format}}}return super.get(e,t)}async save(e,t={}){if(t.format&&t.type){const s=`${t.format}:${t.type}:${e}`;if(this._providers.get(s)){const s={type:t.type,format:t.format,content:!1};return this.get(e,s)}}return super.save(e,t)}get fileChanged(){return this._ydriveFileChanged}}class q{constructor(e){this._onCreate=e,this.collaborative=!J,this.documentFactories=new Map}registerDocumentFactory(e,t){if(this.documentFactories.has(e))throw new Error(`The content type ${e} already exists`);this.documentFactories.set(e,t)}createNew(e){if("string"==typeof e.format){if(this.collaborative&&e.collaborative&&this.documentFactories.has(e.contentType)){const t=this.documentFactories.get(e.contentType)(e);return this._onCreate(e,t),t}}else console.warn(`Only defined format are supported; got ${e.format}.`)}}var G=s(95870),V=s.n(G),K=s(72591),Y=s.n(K),X=s(1740),Q=s.n(X),Z=s(88128),ee=s.n(Z),te=s(30855),se=s.n(te),ne=s(93051),oe=s.n(ne),re=s(73656),ie=s.n(re),ae=s(29858),ce={};ce.styleTagTransform=ie(),ce.setAttributes=se(),ce.insert=ee().bind(null,"head"),ce.domAPI=Q(),ce.insertStyleElement=oe(),Y()(ae.A,ce),ae.A&&ae.A.locals&&ae.A.locals;var le=s(64530);const de=({apiURL:e,provider:t,contentType:s,format:n,documentTimelineUrl:o})=>{const[r,i]=(0,G.useState)({roomId:"",timestamps:[],forkRoom:"",sessionId:""}),[a,c]=(0,G.useState)(r.timestamps.length-1),[l,d]=(0,G.useState)(!1),[h,u]=(0,G.useState)(!1),p=(0,G.useRef)(!0),m=(0,G.useRef)(!0),g=(0,G.useRef)(null);function f(e){try{const t=new URL(e).pathname,s=t.lastIndexOf(o);if(-1===s)throw new Error(`API segment "${o}" not found in URL.`);return t.slice(s+o.length)}catch(e){return console.error("Invalid URL or unable to extract filename:",e),""}}return V().createElement("div",{className:"jp-sliderContainer"},V().createElement("div",{onClick:()=>{!async function(o){try{if(p.current){const r=await A(n,s,o);if(!r.ok)throw 404===r.status?new Error("Not found"):503===r.status?new Error("WebSocket closed"):new Error(`Failed to fetch data: ${r.statusText}`);const a=await r.text();let l={roomId:"",timestamps:[],forkRoom:"",sessionId:""};return a&&(E.Notification.warning("Document is now in read-only mode. Changes will not be saved.",{autoClose:2500}),l=JSON.parse(a),i(l),c(l.timestamps.length-1),t.connectToForkDoc(l.forkRoom,l.sessionId),g.current=await j(n,s,f(e))),d(!0),p.current=!1,l}}catch(e){console.error("Error fetching data:",e)}}(f(e))},className:"jp-mod-highlighted",title:"Document Timeline"},V().createElement(le.historyIcon.react,{marginRight:"4px"})),l&&V().createElement("div",{className:"jp-timestampDisplay"},V().createElement("input",{type:"range",min:0,max:r.timestamps.length-1,value:a,onChange:async e=>{const t=parseInt(e.target.value),s=Math.abs(t-a);try{const e=function(e){return e<a?"undo":"redo"}(t);if(c(t),m.current&&(u(!0),m.current=!1),!g.current)return void console.error("Session is not initialized");await O(`${g.current.format}:${g.current.type}:${g.current.fileId}`,e,s,r.forkRoom)}catch(e){console.error("Error fetching or applying updates:",e)}},className:"jp-Slider"}),V().createElement("div",null,V().createElement("strong",null,f(e).split("/").pop()," ")," "),h&&V().createElement("div",{className:"jp-restoreBtnContainer"},V().createElement("button",{onClick:async()=>{if(!g.current)return void console.error("Session is not initialized");const e=await O(`${g.current.format}:${g.current.type}:${g.current.fileId}`,"restore",0,r.forkRoom);200===e.code?(E.Notification.success(e.status,{autoClose:4e3}),t.reconnect(),d(!1),p.current=!0):E.Notification.error(e.status,{autoClose:4e3})},className:"jp-ToolbarButtonComponent jp-restoreBtn"},"Restore version"," ",(e=>{const t=new Date(1e3*e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}`})(r.timestamps[a])))))};class he extends E.ReactWidget{constructor(e,t,s,n,o){super(),this.apiURL=e,this.provider=t,this.contentType=s,this.format=n,this.documentTimelineUrl=o,this.addClass("jp-timelineSliderWrapper")}render(){return G.createElement(de,{key:this.apiURL,apiURL:this.apiURL,provider:this.provider,contentType:this.contentType,format:this.format,documentTimelineUrl:this.documentTimelineUrl})}updateContent(e,t){this.apiURL=e,this.provider=t,this.contentType=this.provider.contentType,this.format=this.provider.format,this.update()}}const ue=new W.Token("@jupyter/docprovider:IForkManagerToken"),pe="https://schema.jupyter.org/jupyter_collaboration/fork/v1";class me{constructor(e){this._disposed=!1,this._forkAddedSignal=new B.Signal(this),this._forkDeletedSignal=new B.Signal(this);const{drive:t,eventManager:s}=e;this._drive=t,this._eventManager=s,this._eventManager.stream.connect(this._handleEvent,this)}get isDisposed(){return this._disposed}get forkAdded(){return this._forkAddedSignal}get forkDeleted(){return this._forkDeletedSignal}dispose(){var e;this._disposed||(null===(e=this._eventManager)||void 0===e||e.stream.disconnect(this._handleEvent),this._disposed=!0)}async createFork(e){const{rootId:t,title:s,description:n,synchronize:o}=e,r={method:"PUT",body:JSON.stringify({title:s,description:n,synchronize:o})},i=R.URLExt.join(P,t);return await N(i,r)}async getAllForks(e){const t=R.URLExt.join(P,e);return await N(t,{method:"GET"})}async deleteFork(e){const{forkId:t,merge:s}=e,n=R.URLExt.join(P,t),o=R.URLExt.objectToQueryString({merge:s});await N(`${n}${o}`,{method:"DELETE"})}getProvider(e){const{documentPath:t,format:s,type:n}=e,o=this._drive;if(o){const e=o.name;let r=t;return t.startsWith(e)&&(r=t.slice(e.length+1)),o.providers.get(`${s}:${n}:${r}`)}}_handleEvent(e,t){if(t.schema_id===pe)switch(t.action){case"create":this._forkAddedSignal.emit(t);break;case"delete":this._forkDeletedSignal.emit(t)}}}},29858:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(36758),o=s.n(n),r=s(40935),i=s.n(r)()(o());i.push([e.id,"/* -----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|---------------------------------------------------------------------------- */\n\n.jp-timelineSliderWrapper .jp-sliderContainer{\n  display: flex;\n  align-items: center;\n}\n\n.jp-Slider {\n  height: 4.5px\n}\n\n#jp-slider-status-bar {\n  display: flex;\n}\n\n.jp-timestampDisplay {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 6px;\n}\n\n.jp-restoreBtnContainer {\n  width: 192px;\n}\n\n.jp-ToolbarButtonComponent.jp-restoreBtn {\n  cursor: pointer;\n  color: var(--jp-layout-color2);\n  width: 100%;\n  background: var(--jp-accept-color-normal)\n}\n",""]);const a=i},40935:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",n=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),n&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),n&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,n,o,r){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(n)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(i[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);n&&i[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),s&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=s):d[2]=s),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},36758:e=>{e.exports=function(e){return e[1]}},72591:e=>{var t=[];function s(e){for(var s=-1,n=0;n<t.length;n++)if(t[n].identifier===e){s=n;break}return s}function n(e,n){for(var r={},i=[],a=0;a<e.length;a++){var c=e[a],l=n.base?c[0]+n.base:c[0],d=r[l]||0,h="".concat(l," ").concat(d);r[l]=d+1;var u=s(h),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var m=o(p,n);n.byIndex=a,t.splice(a,0,{identifier:h,updater:m,references:1})}i.push(h)}return i}function o(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,o){var r=n(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<r.length;i++){var a=s(r[i]);t[a].references--}for(var c=n(e,o),l=0;l<r.length;l++){var d=s(r[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=c}}},88128:e=>{var t={};e.exports=function(e,s){var n=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},93051:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},30855:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},1740:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var o=void 0!==s.layer;o&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,o&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var r=s.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},73656:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},97784:(e,t,s)=>{s.d(t,{X3:()=>h,_g:()=>d,tQ:()=>u,ww:()=>l});var n=s(96214),o=s(19326),r=s(90482),i=s(30801),a=s(51370),c=s(66527);s(58919);class l extends a.c{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const e=r._g();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach(((s,n)=>{n!==this.clientID&&3e4<=e-s.lastUpdated&&this.states.has(n)&&t.push(n)})),t.length>0&&d(this,t,"timeout")}),i.RI(3e3)),e.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,s=this.meta.get(t),n=void 0===s?0:s.clock+1,o=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:n,lastUpdated:r._g()});const i=[],a=[],l=[],d=[];null===e?d.push(t):null==o?null!=e&&i.push(t):(a.push(t),c.vo(o,e)||l.push(t)),(i.length>0||l.length>0||d.length>0)&&this.emit("change",[{added:i,updated:l,removed:d},"local"]),this.emit("update",[{added:i,updated:a,removed:d},"local"])}setLocalStateField(e,t){const s=this.getLocalState();null!==s&&this.setLocalState({...s,[e]:t})}getStates(){return this.states}}const d=(e,t,s)=>{const n=[];for(let s=0;s<t.length;s++){const o=t[s];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){const t=e.meta.get(o);e.meta.set(o,{clock:t.clock+1,lastUpdated:r._g()})}n.push(o)}}n.length>0&&(e.emit("change",[{added:[],updated:[],removed:n},s]),e.emit("update",[{added:[],updated:[],removed:n},s]))},h=(e,t,s=e.states)=>{const o=t.length,r=n.xv();n.zd(r,o);for(let i=0;i<o;i++){const o=t[i],a=s.get(o)||null,c=e.meta.get(o).clock;n.zd(r,o),n.zd(r,c),n.Qj(r,JSON.stringify(a))}return n.Fo(r)},u=(e,t,s)=>{const n=o.$C(t),i=r._g(),a=[],l=[],d=[],h=[],u=o.cw(n);for(let t=0;t<u;t++){const t=o.cw(n);let s=o.cw(n);const r=JSON.parse(o.t3(n)),u=e.meta.get(t),p=e.states.get(t),m=void 0===u?0:u.clock;(m<s||m===s&&null===r&&e.states.has(t))&&(null===r?t===e.clientID&&null!=e.getLocalState()?s++:e.states.delete(t):e.states.set(t,r),e.meta.set(t,{clock:s,lastUpdated:i}),void 0===u&&null!==r?a.push(t):void 0!==u&&null===r?h.push(t):null!==r&&(c.vo(r,p)||d.push(t),l.push(t)))}(a.length>0||d.length>0||h.length>0)&&e.emit("change",[{added:a,updated:d,removed:h},s]),(a.length>0||l.length>0||h.length>0)&&e.emit("update",[{added:a,updated:l,removed:h},s])}},79870:(e,t,s)=>{s.d(t,{VU:()=>u,Zg:()=>i,f7:()=>d,nh:()=>c,ue:()=>a});var n=s(96214),o=s(19326),r=s(58919);const i=1,a=(e,t)=>{n.zd(e,0);const s=r.encodeStateVector(t);n.Gu(e,s)},c=(e,t,s)=>{n.zd(e,i),n.Gu(e,r.encodeStateAsUpdate(t,s))},l=(e,t,s)=>{try{r.applyUpdate(t,o.bo(e),s)}catch(e){console.error("Caught error while handling a Yjs update",e)}},d=(e,t)=>{n.zd(e,2),n.Gu(e,t)},h=l,u=(e,t,s,n)=>{const r=o.cw(e);switch(r){case 0:((e,t,s)=>{c(t,s,o.bo(e))})(e,t,s);break;case i:l(e,s,n);break;case 2:h(e,s,n);break;default:throw new Error("Unknown message type")}return r}}}]);