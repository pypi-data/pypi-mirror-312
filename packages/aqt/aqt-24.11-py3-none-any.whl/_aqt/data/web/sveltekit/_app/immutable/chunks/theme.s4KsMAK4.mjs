import{h as I,Q as k,a0 as re,d as ne,c as te,V as se,a1 as G,a2 as le,a3 as z,a4 as D,z as w,v as J,w as K,x as fe,a5 as H,q as ie,a6 as B,a7 as S,f as Q,a8 as L,a9 as ue,k as ve,j as U,aa as oe,ab as ce,ac as de,ad as _e,ae as W,R as he,af as pe,ag as Ee,ah as ge}from"./runtime.HDa-Uzkj.mjs";import{r as Te}from"./runtime-require.BBZ7uOG6.mjs";import{r as be,g as Ae}from"./index.BBTf1svy.mjs";let M=null;function Ne(n,e){return e}function xe(n,e,a,u){for(var v=[],o=e.length,s=0;s<o;s++)oe(e[s].e,v,!0);var h=o>0&&v.length===0&&a!==null;if(h){var d=a.parentNode;ce(d),d.append(a),u.clear(),x(n,e[0].prev,e[o-1].next)}de(v,()=>{for(var E=0;E<o;E++){var _=e[E];h||(u.delete(_.k),x(n,_.prev,_.next)),_e(_.e,!h)}})}function ke(n,e,a,u,v,o=null){var s=n,h={flags:e,items:new Map,first:null},d=(e&W)!==0;if(d){var E=n;s=I?k(he(E)):E.appendChild(re())}I&&ne();var _=null,t=!1;te(()=>{var c=a(),i=se(c)?c:c==null?[]:G(c),l=i.length;if(t&&l===0)return;t=l===0;let p=!1;if(I){var T=s.data===le;T!==(l===0)&&(s=z(),k(s),D(!1),p=!0)}if(I){for(var b=null,g,r=0;r<l;r++){if(w.nodeType===8&&w.data===pe){s=w,p=!0,D(!1);break}var f=i[r],y=u(f,r);g=Z(w,h,b,null,f,y,r,v,e),h.items.set(y,g),b=g}l>0&&k(z())}I||Ie(i,h,s,v,e,u),o!==null&&(l===0?_?J(_):_=K(()=>o(s)):_!==null&&fe(_,()=>{_=null})),p&&D(!0),a()}),I&&(s=w)}function Ie(n,e,a,u,v,o){var P,V,q,F;var s=(v&Ee)!==0,h=(v&(S|L))!==0,d=n.length,E=e.items,_=e.first,t=_,c,i=null,l,p=[],T=[],b,g,r,f;if(s)for(f=0;f<d;f+=1)b=n[f],g=o(b,f),r=E.get(g),r!==void 0&&((P=r.a)==null||P.measure(),(l!=null?l:l=new Set).add(r));for(f=0;f<d;f+=1){if(b=n[f],g=o(b,f),r=E.get(g),r===void 0){var y=t?t.e.nodes_start:a;i=Z(y,e,i,i===null?e.first:i.next,b,g,f,u,v),E.set(g,i),p=[],T=[],t=i.next;continue}if(h&&me(r,b,f,v),r.e.f&H&&(J(r.e),s&&((V=r.a)==null||V.unfix(),(l!=null?l:l=new Set).delete(r))),r!==t){if(c!==void 0&&c.has(r)){if(p.length<T.length){var C=T[0],A;i=C.prev;var O=p[0],R=p[p.length-1];for(A=0;A<p.length;A+=1)X(p[A],C,a);for(A=0;A<T.length;A+=1)c.delete(T[A]);x(e,O.prev,R.next),x(e,i,O),x(e,R,C),t=C,i=R,f-=1,p=[],T=[]}else c.delete(r),X(r,t,a),x(e,r.prev,r.next),x(e,r,i===null?e.first:i.next),x(e,i,r),i=r;continue}for(p=[],T=[];t!==null&&t.k!==g;)t.e.f&H||(c!=null?c:c=new Set).add(t),T.push(t),t=t.next;if(t===null)continue;r=t}p.push(r),i=r,t=r.next}if(t!==null||c!==void 0){for(var m=c===void 0?[]:G(c);t!==null;)t.e.f&H||m.push(t),t=t.next;var N=m.length;if(N>0){var ae=v&W&&d===0?a:null;if(s){for(f=0;f<N;f+=1)(q=m[f].a)==null||q.measure();for(f=0;f<N;f+=1)(F=m[f].a)==null||F.fix()}xe(e,m,ae,E)}}s&&ie(()=>{var Y;if(l!==void 0)for(r of l)(Y=r.a)==null||Y.apply()}),B.first=e.first&&e.first.e,B.last=i&&i.e}function me(n,e,a,u){u&S&&Q(n.v,e),u&L?Q(n.i,a):n.i=a}function Z(n,e,a,u,v,o,s,h,d){var E=M;try{var _=(d&S)!==0,t=(d&ue)===0,c=_?t?ve(v):U(v):v,i=d&L?U(s):s,l={i,v:c,k:o,a:null,e:null,prev:a,next:u};return M=l,l.e=K(()=>h(n,c,i),I),l.e.prev=a&&a.e,l.e.next=u&&u.e,a===null?e.first=l:(a.next=l,a.e.next=l.e),u!==null&&(u.prev=l,u.e.prev=l.e),l}finally{M=E}}function X(n,e,a){for(var u=n.next?n.next.e.nodes_start:a,v=e?e.e.nodes_start:a,o=n.e.nodes_start;o!==u;){var s=ge(o);v.before(o),o=s}}function x(n,e,a){e===null?n.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function De(n,e,a,u,v){var d;var o=(d=n.__attributes)!=null?d:n.__attributes={},s=n.style,h="style-"+e;o[h]===a&&(!v||s.getPropertyValue(e)===a)||(o[h]=a,a==null?s.removeProperty(e):s.setProperty(e,a,""))}function $(){return{isDark:document.documentElement.classList.contains("night-mode")}}let j=null;const ee=be($(),n=>{j=n});Ae(ee);const we=new MutationObserver((n,e)=>{j($())});we.observe(document.documentElement,{attributeFilter:["class"]});Te("anki/theme",{pageTheme:ee});export{ke as e,Ne as i,ee as p,De as s};
