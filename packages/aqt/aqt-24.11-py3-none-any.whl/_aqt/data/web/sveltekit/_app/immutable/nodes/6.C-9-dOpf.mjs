import{r as Y,a as L,d as K,e as j,s as x,F as E,M as Zt,D as At,n as we}from"../chunks/disclose-version.CXWUuFGG.mjs";import{p as ct,l as X,a as vt,t as lt,b as ut,N as ot,g as m,s as C,m as N,ah as ue,a1 as ia,E as Jt,ag as St,a0 as be}from"../chunks/runtime.BJSnJeWl.mjs";import{i as ft}from"../chunks/lifecycle.DW1_rEFA.mjs";import{p as O,i as Mt}from"../chunks/props.fkJSEmZ6.mjs";import{s as Dt,a as pt,m as Ke,b as oe}from"../chunks/store.CAPRemx4.mjs";import{fj as Te,fk as xe,fl as ba,fm as Ha,fn as Re,fo as Je,ar as it,v as Pt,fp as Qa,fq as Wa,fr as Se,fs as Pe,ft as Ze,fu as Ua,fv as Xa,fw as Ka,fx as Ja,fy as Za,ek as Xt,fz as tn,fA as en,fB as an,fC as $a,fD as nn,fE as rn,fF as sn,fG as on,fH as ln,fI as cn,fJ as un,fK as fn,fL as dn,fM as gn,fN as vn,fO as hn,fP as He,fQ as mn,fR as pn,fS as yn,fT as bn,fU as $n,fV as xn,fW as _n,fX as wn,fY as kn,fZ as Dn,f_ as An,t as Mn,f$ as Cn,g0 as Tn,g1 as Rn,g2 as Sn,g3 as Pn,g4 as Fn,g5 as Bn,g6 as Nn,g7 as Yn,g8 as qn,g9 as jn,ga as Ln,gb as On,gc as zn,gd as Gn,ge as Vn,gf as In,gg as En,gh as Hn,gi as la,gj as Qn,gk as Wn,gl as Un,gm as Xn,gn as Kn,go as Jn,gp as Zn,ed as tr,gq as er,gr as ar,gs as nr,gt as rr,gu as sr,gv as or,gw as ir,gx as lr,gy as cr,gz as ur,gA as fr,gB as dr,gC as gr,gD as vr,gE as hr,gF as mr,gG as pr,gH as yr,gI as br,gJ as $r,gK as xr,gL as _r,gM as wr,U as kr}from"../chunks/runtime-require.xejYRuTk.mjs";import{c as Bt,a as ca}from"../chunks/index-client.D9hOaSri.mjs";import{e as ta,t as Ft,M as ke,Y as Dr,s as Ar}from"../chunks/time.DXBFJJA9.mjs";import{M as ua,O as Qe,P as Mr,Q as Cr,R as Tr,A as De,v as xa,S as Wt,T as _a,U as wa,V as ka,W as Rr,X as Sr,Y as Da,Z as U,_ as Pr,$ as Fr,a0 as Br,a1 as Aa,E as Nr,a2 as Nt,a3 as q,B as et,a4 as gt,a5 as xt,a6 as dt,y as te,z as Rt,C as Fe,D as Be,a7 as ea,F as ge,G as ve,H as he,K as Ne,J as me,N as pe,L as ee,I as _t,l as Ht,k as Yr,f as ie,m as qr,a8 as jr,a9 as Lr,o as Or,aa as Ma}from"../chunks/HoverColumns.iQYqBoln.mjs";import{m as Ae,I as Ct}from"../chunks/InputBox.eflzsSvl.mjs";import{i as zr,I as fa,c as ae,C as aa,T as qt}from"../chunks/TableData.BacdFHl8.mjs";import{b as mt,c as na,a as Gr}from"../chunks/input.05BvnVQv.mjs";import{b as ne}from"../chunks/this.C9pg2j_S.mjs";import{c as nt,e as Vr,b as Ir}from"../chunks/utils.CsQrVKie.mjs";import{s as Ot,e as fe}from"../chunks/render.CQvFnAiW.mjs";import{j as Er,a5 as zt,a6 as Hr,a7 as Qr,s as Wr,d as Ur,a8 as Xr}from"../chunks/backend.CJ3aQY-w.mjs";import{e as Ye,i as qe,p as Kr}from"../chunks/theme.ChRgnSdP.mjs";import{c as Jr}from"../chunks/bridgecommand.hyhg-qzd.mjs";import{w as We}from"../chunks/index.BB25h7Qo.mjs";import{a as Zr}from"../chunks/await.BrCVEzOe.mjs";function ts(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function ra(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?a=>n+=+a||0:a=>n+=+e(a,r++,t)||0)}function Kt(t,e){let n,r;if(e===void 0)for(const a of t)a!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)));else{let a=-1;for(let s of t)(s=e(s,++a,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}function es(t=ua){if(t===ua)return Ca;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Ca(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var as=Array.prototype,ns=as.slice;function Ve(t){return()=>t}function rs(t,e,n){let r;for(;;){const a=Qe(t,e,n);if(a===r||a===0||!isFinite(a))return[t,e];a>0?(t=Math.floor(t/a)*a,e=Math.ceil(e/a)*a):a<0&&(t=Math.ceil(t*a)/a,e=Math.floor(e*a)/a),r=a}}function ss(t){return Math.max(1,Math.ceil(Math.log(ts(t))/Math.LN2)+1)}function Yt(){var t=zr,e=Kt,n=ss;function r(a){Array.isArray(a)||(a=Array.from(a));var s,f=a.length,o,d,c=new Array(f);for(s=0;s<f;++s)c[s]=t(a[s],s,a);var u=e(c),i=u[0],l=u[1],v=n(c,i,l);if(!Array.isArray(v)){const p=l,w=+v;if(e===Kt&&([i,l]=rs(i,l,w)),v=Mr(i,l,w),v[0]<=i&&(d=Qe(i,l,w)),v[v.length-1]>=l)if(p>=l&&e===Kt){const M=Qe(i,l,w);isFinite(M)&&(M>0?l=(Math.floor(l/M)+1)*M:M<0&&(l=(Math.ceil(l*-M)+1)/-M))}else v.pop()}for(var b=v.length,$=0,g=b;v[$]<=i;)++$;for(;v[g-1]>l;)--g;($||g<b)&&(v=v.slice($,g),b=g-$);var y=new Array(b+1),h;for(s=0;s<=b;++s)h=y[s]=[],h.x0=s>0?v[s-1]:i,h.x1=s<b?v[s]:l;if(isFinite(d)){if(d>0)for(s=0;s<f;++s)(o=c[s])!=null&&i<=o&&o<=l&&y[Math.min(b,Math.floor((o-i)/d))].push(a[s]);else if(d<0){for(s=0;s<f;++s)if((o=c[s])!=null&&i<=o&&o<=l){const p=Math.floor((i-o)*d);y[Math.min(b,p+(v[p]<=o))].push(a[s])}}}else for(s=0;s<f;++s)(o=c[s])!=null&&i<=o&&o<=l&&y[Cr(v,o,0,b)].push(a[s]);return y}return r.value=function(a){return arguments.length?(t=typeof a=="function"?a:Ve(a),r):t},r.domain=function(a){return arguments.length?(e=typeof a=="function"?a:Ve([a[0],a[1]]),r):e},r.thresholds=function(a){return arguments.length?(n=typeof a=="function"?a:Ve(Array.isArray(a)?ns.call(a):a),r):n},r}function Ta(t,e,n=0,r=1/0,a){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(a=a===void 0?Ca:es(a);r>n;){if(r-n>600){const d=r-n+1,c=e-n+1,u=Math.log(d),i=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*i*(d-i)/d)*(c-d/2<0?-1:1),v=Math.max(n,Math.floor(e-c*i/d+l)),b=Math.min(r,Math.floor(e+(d-c)*i/d+l));Ta(t,e,v,b,a)}const s=t[e];let f=n,o=r;for(le(t,n,e),a(t[r],s)>0&&le(t,n,r);f<o;){for(le(t,f,o),++f,--o;a(t[f],s)<0;)++f;for(;a(t[o],s)>0;)--o}a(t[n],s)===0?le(t,n,o):(++o,le(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function le(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function da(t,e,n){if(t=Float64Array.from(Tr(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Ae(t);if(e>=1)return De(t);var r,a=(r-1)*e,s=Math.floor(a),f=De(Ta(t,s).subarray(0,s+1)),o=Ae(t.subarray(s+1));return f+(o-f)*(a-s)}}function os(t,e){let n=0,r=0;for(let a of t)a!=null&&(a=+a)>=a&&(++n,r+=a);if(n)return r/n}function is(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(a);++r<a;)s[r]=t+r*n;return s}const ga=Symbol("implicit");function Ra(){var t=new fa,e=[],n=[],r=ga;function a(s){let f=t.get(s);if(f===void 0){if(r!==ga)return r;t.set(s,f=e.push(s)-1)}return n[f%n.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new fa;for(const f of s)t.has(f)||t.set(f,e.push(f)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Ra(e,n).unknown(r)},xa.apply(a,arguments),a}function Me(){var t=Ra().unknown(void 0),e=t.domain,n=t.range,r=0,a=1,s,f,o=!1,d=0,c=0,u=.5;delete t.unknown;function i(){var l=e().length,v=a<r,b=v?a:r,$=v?r:a;s=($-b)/Math.max(1,l-d+c*2),o&&(s=Math.floor(s)),b+=($-b-s*(l-d))*u,f=s*(1-d),o&&(b=Math.round(b),f=Math.round(f));var g=is(l).map(function(y){return b+s*y});return n(v?g.reverse():g)}return t.domain=function(l){return arguments.length?(e(l),i()):e()},t.range=function(l){return arguments.length?([r,a]=l,r=+r,a=+a,i()):[r,a]},t.rangeRound=function(l){return[r,a]=l,r=+r,a=+a,o=!0,i()},t.bandwidth=function(){return f},t.step=function(){return s},t.round=function(l){return arguments.length?(o=!!l,i()):o},t.padding=function(l){return arguments.length?(d=Math.min(1,c=+l),i()):d},t.paddingInner=function(l){return arguments.length?(d=Math.min(1,l),i()):d},t.paddingOuter=function(l){return arguments.length?(c=+l,i()):c},t.align=function(l){return arguments.length?(u=Math.max(0,Math.min(1,l)),i()):u},t.copy=function(){return Me(e(),[r,a]).round(o).paddingInner(d).paddingOuter(c).align(u)},xa.apply(i(),arguments)}function va(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ls(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function cs(t){return t<0?-t*t:t*t}function us(t){var e=t(Wt,Wt),n=1;function r(){return n===1?t(Wt,Wt):n===.5?t(ls,cs):t(va(n),va(1/n))}return e.exponent=function(a){return arguments.length?(n=+a,r()):n},_a(e)}function Sa(){var t=0,e=1,n,r,a,s,f=Wt,o=!1,d;function c(i){return i==null||isNaN(i=+i)?d:f(a===0?.5:(i=(s(i)-n)*a,o?Math.max(0,Math.min(1,i)):i))}c.domain=function(i){return arguments.length?([t,e]=i,n=s(t=+t),r=s(e=+e),a=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(i){return arguments.length?(o=!!i,c):o},c.interpolator=function(i){return arguments.length?(f=i,c):f};function u(i){return function(l){var v,b;return arguments.length?([v,b]=l,f=i(v,b),c):[f(0),f(1)]}}return c.range=u(ka),c.rangeRound=u(Rr),c.unknown=function(i){return arguments.length?(d=i,c):d},function(i){return s=i,n=i(t),r=i(e),a=n===r?0:1/(r-n),c}}function Pa(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function $t(){var t=_a(Sa()(Wt));return t.copy=function(){return Pa(t,$t())},wa.apply(t,arguments)}function Fa(){var t=us(Sa());return t.copy=function(){return Pa(t,Fa()).exponent(t.exponent())},wa.apply(t,arguments)}function fs(){return Fa.apply(null,arguments).exponent(.5)}const re=t=>Sr(t[t.length-1]);var ds=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ae);const je=re(ds);var Ba=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ae);const Le=re(Ba);var Ue=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ae);const Xe=re(Ue);var gs=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ae);const vs=re(gs);var Na=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ae);const hs=re(Na);var Ya=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ae);const ms=re(Ya),ha=Math.abs,ht=Math.atan2,Lt=Math.cos,ps=Math.max,Ie=Math.min,Tt=Math.sin,Ut=Math.sqrt,bt=1e-12,de=Math.PI,Ce=de/2,_e=2*de;function ys(t){return t>1?0:t<-1?de:Math.acos(t)}function ma(t){return t>=1?Ce:t<=-1?-Ce:Math.asin(t)}function bs(t){return t.innerRadius}function $s(t){return t.outerRadius}function xs(t){return t.startAngle}function _s(t){return t.endAngle}function ws(t){return t&&t.padAngle}function ks(t,e,n,r,a,s,f,o){var d=n-t,c=r-e,u=f-a,i=o-s,l=i*d-u*c;if(!(l*l<bt))return l=(u*(e-s)-i*(t-a))/l,[t+l*d,e+l*c]}function $e(t,e,n,r,a,s,f){var o=t-n,d=e-r,c=(f?s:-s)/Ut(o*o+d*d),u=c*d,i=-c*o,l=t+u,v=e+i,b=n+u,$=r+i,g=(l+b)/2,y=(v+$)/2,h=b-l,p=$-v,w=h*h+p*p,M=a-s,F=l*$-b*v,_=(p<0?-1:1)*Ut(ps(0,M*M*w-F*F)),k=(F*p-h*_)/w,D=(-F*h-p*_)/w,S=(F*p+h*_)/w,P=(-F*h+p*_)/w,B=k-g,A=D-y,T=S-g,G=P-y;return B*B+A*A>T*T+G*G&&(k=S,D=P),{cx:k,cy:D,x01:-u,y01:-i,x11:k*(a/M-1),y11:D*(a/M-1)}}function Ds(){var t=bs,e=$s,n=U(0),r=null,a=xs,s=_s,f=ws,o=null,d=Da(c);function c(){var u,i,l=+t.apply(this,arguments),v=+e.apply(this,arguments),b=a.apply(this,arguments)-Ce,$=s.apply(this,arguments)-Ce,g=ha($-b),y=$>b;if(o||(o=u=d()),v<l&&(i=v,v=l,l=i),!(v>bt))o.moveTo(0,0);else if(g>_e-bt)o.moveTo(v*Lt(b),v*Tt(b)),o.arc(0,0,v,b,$,!y),l>bt&&(o.moveTo(l*Lt($),l*Tt($)),o.arc(0,0,l,$,b,y));else{var h=b,p=$,w=b,M=$,F=g,_=g,k=f.apply(this,arguments)/2,D=k>bt&&(r?+r.apply(this,arguments):Ut(l*l+v*v)),S=Ie(ha(v-l)/2,+n.apply(this,arguments)),P=S,B=S,A,T;if(D>bt){var G=ma(D/l*Tt(k)),H=ma(D/v*Tt(k));(F-=G*2)>bt?(G*=y?1:-1,w+=G,M-=G):(F=0,w=M=(b+$)/2),(_-=H*2)>bt?(H*=y?1:-1,h+=H,p-=H):(_=0,h=p=(b+$)/2)}var z=v*Lt(h),Q=v*Tt(h),Z=l*Lt(M),I=l*Tt(M);if(S>bt){var J=v*Lt(p),yt=v*Tt(p),at=l*Lt(w),wt=l*Tt(w),rt;if(g<de)if(rt=ks(z,Q,at,wt,J,yt,Z,I)){var tt=z-rt[0],kt=Q-rt[1],jt=J-rt[0],Vt=yt-rt[1],R=1/Tt(ys((tt*jt+kt*Vt)/(Ut(tt*tt+kt*kt)*Ut(jt*jt+Vt*Vt)))/2),W=Ut(rt[0]*rt[0]+rt[1]*rt[1]);P=Ie(S,(l-W)/(R-1)),B=Ie(S,(v-W)/(R+1))}else P=B=0}_>bt?B>bt?(A=$e(at,wt,z,Q,v,B,y),T=$e(J,yt,Z,I,v,B,y),o.moveTo(A.cx+A.x01,A.cy+A.y01),B<S?o.arc(A.cx,A.cy,B,ht(A.y01,A.x01),ht(T.y01,T.x01),!y):(o.arc(A.cx,A.cy,B,ht(A.y01,A.x01),ht(A.y11,A.x11),!y),o.arc(0,0,v,ht(A.cy+A.y11,A.cx+A.x11),ht(T.cy+T.y11,T.cx+T.x11),!y),o.arc(T.cx,T.cy,B,ht(T.y11,T.x11),ht(T.y01,T.x01),!y))):(o.moveTo(z,Q),o.arc(0,0,v,h,p,!y)):o.moveTo(z,Q),!(l>bt)||!(F>bt)?o.lineTo(Z,I):P>bt?(A=$e(Z,I,J,yt,l,-P,y),T=$e(z,Q,at,wt,l,-P,y),o.lineTo(A.cx+A.x01,A.cy+A.y01),P<S?o.arc(A.cx,A.cy,P,ht(A.y01,A.x01),ht(T.y01,T.x01),!y):(o.arc(A.cx,A.cy,P,ht(A.y01,A.x01),ht(A.y11,A.x11),!y),o.arc(0,0,l,ht(A.cy+A.y11,A.cx+A.x11),ht(T.cy+T.y11,T.cx+T.x11),y),o.arc(T.cx,T.cy,P,ht(T.y11,T.x11),ht(T.y01,T.x01),!y))):o.arc(0,0,l,M,w,y)}if(o.closePath(),u)return o=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-de/2;return[Lt(i)*u,Tt(i)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:U(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:U(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:U(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:U(+u),c):r},c.startAngle=function(u){return arguments.length?(a=typeof u=="function"?u:U(+u),c):a},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:U(+u),c):s},c.padAngle=function(u){return arguments.length?(f=typeof u=="function"?u:U(+u),c):f},c.context=function(u){return arguments.length?(o=u==null?null:u,c):o},c}function sa(t,e,n){var r=null,a=U(!0),s=null,f=Pr,o=null,d=Da(c);t=typeof t=="function"?t:t===void 0?Fr:U(+t),e=typeof e=="function"?e:e===void 0?U(0):U(+e),n=typeof n=="function"?n:n===void 0?Br:U(+n);function c(i){var l,v,b,$=(i=Aa(i)).length,g,y=!1,h,p=new Array($),w=new Array($);for(s==null&&(o=f(h=d())),l=0;l<=$;++l){if(!(l<$&&a(g=i[l],l,i))===y)if(y=!y)v=l,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=l-1;b>=v;--b)o.point(p[b],w[b]);o.lineEnd(),o.areaEnd()}y&&(p[l]=+t(g,l,i),w[l]=+e(g,l,i),o.point(r?+r(g,l,i):p[l],n?+n(g,l,i):w[l]))}if(h)return o=null,h+""||null}function u(){return Nr().defined(a).curve(f).context(s)}return c.x=function(i){return arguments.length?(t=typeof i=="function"?i:U(+i),r=null,c):t},c.x0=function(i){return arguments.length?(t=typeof i=="function"?i:U(+i),c):t},c.x1=function(i){return arguments.length?(r=i==null?null:typeof i=="function"?i:U(+i),c):r},c.y=function(i){return arguments.length?(e=typeof i=="function"?i:U(+i),n=null,c):e},c.y0=function(i){return arguments.length?(e=typeof i=="function"?i:U(+i),c):e},c.y1=function(i){return arguments.length?(n=i==null?null:typeof i=="function"?i:U(+i),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(i){return arguments.length?(a=typeof i=="function"?i:U(!!i),c):a},c.curve=function(i){return arguments.length?(f=i,s!=null&&(o=f(s)),c):f},c.context=function(i){return arguments.length?(i==null?s=o=null:o=f(s=i),c):s},c}function As(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Ms(t){return t}function Cs(){var t=Ms,e=As,n=null,r=U(0),a=U(_e),s=U(0);function f(o){var d,c=(o=Aa(o)).length,u,i,l=0,v=new Array(c),b=new Array(c),$=+r.apply(this,arguments),g=Math.min(_e,Math.max(-_e,a.apply(this,arguments)-$)),y,h=Math.min(Math.abs(g)/c,s.apply(this,arguments)),p=h*(g<0?-1:1),w;for(d=0;d<c;++d)(w=b[v[d]=d]=+t(o[d],d,o))>0&&(l+=w);for(e!=null?v.sort(function(M,F){return e(b[M],b[F])}):n!=null&&v.sort(function(M,F){return n(o[M],o[F])}),d=0,i=l?(g-c*p)/l:0;d<c;++d,$=y)u=v[d],w=b[u],y=$+(w>0?w*i:0)+p,b[u]={data:o[u],index:d,value:w,startAngle:$,endAngle:y,padAngle:h};return b}return f.value=function(o){return arguments.length?(t=typeof o=="function"?o:U(+o),f):t},f.sortValues=function(o){return arguments.length?(e=o,n=null,f):e},f.sort=function(o){return arguments.length?(n=o,e=null,f):n},f.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:U(+o),f):r},f.endAngle=function(o){return arguments.length?(a=typeof o=="function"?o:U(+o),f):a},f.padAngle=function(o){return arguments.length?(s=typeof o=="function"?o:U(+o),f):s},f}function pa(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function qa(t){this._context=t}qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function oa(t){return new qa(t)}function Ts(t){return{daysAdded:Nt(t.added.added)}}function Rs(t,e){const n=`"added:${t}"`;if(t===1)return n;const r=`-"added:${e}"`;return`${n} AND ${r}`}function Ss(t,e,n,r){if(!t.daysAdded.size)return[null,[]];let s;switch(e){case q.Month:s=-31;break;case q.ThreeMonths:s=-90;break;case q.Year:s=-365;break;case q.AllTime:s=Ae(t.daysAdded.keys());break}const f=1,o=Math.min(70,Math.abs(s)),d=et().domain([s,f]),c=Yt().value(p=>p[0]).domain(d.domain()).thresholds(d.ticks(o))(t.daysAdded.entries()),u=xt;if(!gt(c,u))return[null,[]];const i=et().range([.7,.3]),l=$t(p=>Le(i(p))).domain([f,s]),v=gt(c,u),b=Math.abs(s),$=Math.round(v/b),g=[{label:Te(),value:xe({cards:v})},{label:ba(),value:Ha({count:$})}];function y(p,w,M){const F=ta(p.x0,p.x1),_=xe({cards:u(p)}),k=Re(),D=xe({cards:w});return`${F}:<br>${_}<br>${k}: ${D}`}function h(p){const w=Math.abs(p.x0)+1,M=Math.abs(p.x1)+1,F=Rs(w,M);n("search",{query:F})}return[{scale:d,bins:c,total:v,hoverText:y,onClick:r?h:null,colourScale:l,binValue:xt,showArea:!0},g]}var Ps=K('<label><input type="radio"> </label>'),Fs=K('<label><input type="radio"> </label> <label><input type="radio"> </label> <label><input type="radio"> </label> <!>',1);function ye(t,e){ct(e,!1);const n=[];let r=O(e,"revlogRange"),a=O(e,"graphRange",4),s=O(e,"followRevlog",0,!1);function f(D){D===dt.All?a(q.AllTime):a()===q.AllTime&&a(q.Year)}const o=Ft(1*ke),d=Ft(3*ke),c=Ft(1*Dr),u=Je();X(()=>(ot(s()),ot(r())),()=>{s()&&f(r())}),vt(),ft();var i=Fs(),l=E(i),v=j(l);it(v);var b,$=x(v,!0);$.nodeValue=` ${o!=null?o:""}`,Y(l);var g=x(x(l,!0)),y=j(g);it(y);var h,p=x(y,!0);p.nodeValue=` ${d!=null?d:""}`,Y(g);var w=x(x(g,!0)),M=j(w);it(M);var F,_=x(M,!0);_.nodeValue=` ${c!=null?c:""}`,Y(w);var k=x(x(w,!0));Mt(k,()=>r()===dt.All,D=>{var S=Ps(),P=j(S);it(P);var B,A=x(P,!0);A.nodeValue=` ${u!=null?u:""}`,Y(S),lt(()=>{B!==(B=q.AllTime)&&(P.value=(P.__value=q.AllTime)==null?"":q.AllTime)}),mt(n,[],P,()=>(q.AllTime,a()),T=>a(T)),L(D,S)}),lt(()=>{b!==(b=q.Month)&&(v.value=(v.__value=q.Month)==null?"":q.Month),h!==(h=q.ThreeMonths)&&(y.value=(y.__value=q.ThreeMonths)==null?"":q.ThreeMonths),F!==(F=q.Year)&&(M.value=(M.__value=q.Year)==null?"":q.Year)}),mt(n,[],v,()=>(q.Month,a()),D=>a(D)),mt(n,[],y,()=>(q.ThreeMonths,a()),D=>a(D)),mt(n,[],M,()=>(q.Year,a()),D=>a(D)),L(t,i),ut()}const Bs="tick-odd",ja="graph-element-clickable";function Ns(t,e,n){var y;const r=te(t),a=r.transition().duration(600),s=h=>nt(h);if(n)Rt(r,!0);else{Rt(r,!1);return}const f=(y=n.binValue)!=null?y:h=>h.length,o=n.scale.range([e.marginLeft,e.width-e.marginRight]);r.select(".x-ticks").call(h=>{var p;return h.transition(a).call(Fe(o).ticks(7).tickSizeOuter(0).tickFormat((p=n.xTickFormat)!=null?p:s))}).attr("direction","ltr");const d=De(n.bins,h=>f(h)),c=et().range([e.height-e.marginBottom,e.marginTop]).domain([0,d]).nice();r.select(".y-ticks").call(h=>h.transition(a).call(Be(c).ticks(e.height/50).tickSizeOuter(0).tickFormat(s))).attr("direction","ltr");function u(h){const p=Math.max(0,o(h.x1)-o(h.x0)-1);return p!=null?p:0}const i=h=>h.attr("width",u).transition(a).attr("x",p=>o(p.x0)).attr("y",p=>c(f(p))).attr("height",p=>c(0)-c(f(p))).attr("fill",p=>n.colourScale(p.x1));r.select("g.bars").selectAll("rect").data(n.bins).join(h=>h.append("rect").attr("rx",1).attr("x",p=>o(p.x0)).attr("y",c(0)).attr("height",0).call(i),h=>h.call(i),h=>h.call(p=>p.transition(a).attr("height",0).attr("y",c(0))));const l=n.bins.map(h=>f(h));l.unshift(0);const v=ra(l),b=c.copy().domain([0,n.total]).nice();n.showArea&&n.bins.length&&v.slice(-1)[0]&&(r.select(".y2-ticks").call(h=>h.transition(a).call(ea(b).ticks(e.height/50).tickSizeOuter(0).tickFormat(s))).attr("direction","ltr"),r.select("path.cumulative-overlay").datum(v).attr("d",sa().curve(oa).x((h,p)=>o(p===0?n.bins[0].x0:n.bins[p-1].x1)).y0(e.height-e.marginBottom).y1(h=>b(h))));const $=n.bins.map((h,p)=>[h,v[p+1]]),g=r.select("g.hover-columns").selectAll("rect").data($).join("rect").attr("x",([h])=>o(h.x0)).attr("y",()=>c(d)).attr("width",([h])=>u(h)).attr("height",()=>c(0)-c(d)).on("mousemove",(h,[p,w])=>{const[M,F]=ge(h,document.body),_=n.showArea?w/n.total*100:0;ve(n.hoverText(p,w,_),M,F)}).on("mouseout",he);n.onClick&&g.filter(([h])=>h.length>0).attr("class",ja).on("click",(h,[p])=>n.onClick(p))}var Ys=Zt('<svg><g class="bars"></g><!><!><!><!></svg>');function Gt(t,e){ct(e,!1);let n=O(e,"data",0,null);const r=ee();let a=N(null);X(()=>(m(a),ot(n())),()=>{Ns(m(a),r,n())}),vt(),ft();var s=Ys();ne(s,i=>C(a,i),()=>m(a));var f=j(s),o=x(f);Ne(o);var d=x(o);aa(d);var c=x(d);me(c,{bounds:r,$$legacy:!0});var u=x(c);pe(u,{bounds:r,$$legacy:!0}),Y(s),lt(()=>Pt(s,"viewBox",`0 0 ${r.width} ${r.height}`)),L(t,s),ut()}var qs=K("<!> <!> <!>",1);function js(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData",0,null),s=O(e,"prefs"),f=N(null),o=N([]),d=N(q.Month);const c=Bt();let u=N(null);const i=Qa(),l=Wa();X(()=>ot(a()),()=>{a()&&C(u,Ts(a()))}),X(()=>(m(u),m(f),m(o),m(d),r()),()=>{m(u)&&(()=>{const v=Ss(m(u),m(d),c,r().browserLinksSupported);return C(f,v[0]),C(o,v[1]),v})()}),vt(),ft(),_t(t,{title:i,subtitle:l,children:(v,b)=>{var $=qs(),g=E($);Ct(g,{children:(p,w)=>{ye(p,{get graphRange(){return m(d)},set graphRange(M){C(d,M)},get revlogRange(){return dt.All},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var y=x(x(g,!0));Gt(y,{get data(){return m(f)},$$legacy:!0});var h=x(x(y,!0));qt(h,{get tableData(){return m(o)},$$legacy:!0}),L(v,$)},$$slots:{default:!0},$$legacy:!0}),ut()}function Ls(t,e){const n=t.buttons;switch(e){case q.Month:return n.oneMonth;case q.ThreeMonths:return n.threeMonths;case q.Year:return n.oneYear;case q.AllTime:return n.allTime}}function Os(t,e,n,r){const a=Ls(n,r),s=[...a.learning.map((h,p)=>({buttonNum:p+1,group:"learning",count:h})),...a.young.map((h,p)=>({buttonNum:p+1,group:"young",count:h})),...a.mature.map((h,p)=>({buttonNum:p+1,group:"mature",count:h}))],f=h=>{const p=s.filter(_=>_.group==h),w=gt(p,_=>_.count),M=gt(p.filter(_=>_.buttonNum>1),_=>_.count),F=w?nt(M/w*100):"0";return{total:w,correct:M,percent:F}},o=h=>{const p=f(h.group).total,w=h.count,M=p?nt(w/p*100):"0";return`${nt(w)} (${M}%)`},d=Math.max(...s.map(h=>h.count)),c=te(t),u=c.transition().duration(600);if(d)Rt(c,!0);else{Rt(c,!1);return}const i=Me().domain(["learning","young","mature"]).range([e.marginLeft,e.width-e.marginRight]);c.select(".x-ticks").call(h=>h.transition(u).call(Fe(i).tickFormat(p=>{let w;switch(p){case"learning":w=Ze();break;case"young":w=Pe();break;case"mature":default:w=Se();break}return`${w} ‎(${f(p).percent}%)`}).tickSizeOuter(0))).attr("direction","ltr");const l=Me().domain(["1","2","3","4"]).range([0,i.bandwidth()]).paddingOuter(1).paddingInner(.1),v=$t(je).domain([1,4]),b=h=>nt(h),$=et().range([e.height-e.marginBottom,e.marginTop]).domain([0,d]);c.select(".y-ticks").call(h=>h.transition(u).call(Be($).ticks(e.height/50).tickSizeOuter(0).tickFormat(b))).attr("direction","ltr");const g=h=>h.attr("width",l.bandwidth()).attr("opacity",.8).transition(u).attr("x",p=>i(p.group)+l(p.buttonNum.toString())).attr("y",p=>$(p.count)).attr("height",p=>$(0)-$(p.count)).attr("fill",p=>v(p.buttonNum));c.select("g.bars").selectAll("rect").data(s).join(h=>h.append("rect").attr("rx",1).attr("x",p=>i(p.group)+l(p.buttonNum.toString())).attr("y",$(0)).attr("height",0).call(g),h=>h.call(g),h=>h.call(p=>p.transition(u).attr("height",0).attr("y",$(0))));function y(h){const p=Ua(),w=Xa(),M=Ka(f(h.group)),F=`${w}: ${o(h)}`;return`${p}: ${h.buttonNum}<br>${F}<br>${M}`}c.select("g.hover-columns").selectAll("rect").data(s).join("rect").attr("x",h=>i(h.group)+l(h.buttonNum.toString())).attr("y",()=>$(d)).attr("width",l.bandwidth()).attr("height",()=>$(0)-$(d)).on("mousemove",(h,p)=>{const[w,M]=ge(h,document.body);ve(y(p),w,M)}).on("mouseout",he)}var zs=Zt('<!><svg><g class="bars"></g><!><!><!></svg>',1);function Gs(t,e){ct(e,!1);let n=O(e,"sourceData",0,null),r=O(e,"revlogRange"),a=N(q.Year);const s=ee();let f=N(null);const o=Ja(),d=Za();X(()=>(ot(n()),m(f),m(a)),()=>{n()&&Os(m(f),s,n(),m(a))}),vt(),ft(),_t(t,{title:o,subtitle:d,children:(c,u)=>{var i=zs(),l=E(i);Ct(l,{children:(h,p)=>{ye(h,{get graphRange(){return m(a)},set graphRange(w){C(a,w)},get revlogRange(){return r()},followRevlog:!0,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var v=x(l);ne(v,h=>C(f,h),()=>m(f));var b=j(v),$=x(b);Ne($);var g=x($);me(g,{bounds:s,$$legacy:!0});var y=x(g);pe(y,{bounds:s,$$legacy:!0}),Y(v),lt(()=>Pt(v,"viewBox",`0 0 ${s.width} ${s.height}`)),L(c,i)},$$slots:{default:!0},$$legacy:!0}),ut()}function Vs(t,e){const n=new Map(Object.entries(t.reviews.count).map(([s,f])=>[Number(s),f.learn+f.relearn+f.mature+f.filtered+f.young])),r=Es(e),a=[];for(let s=0;s<7;s++)a.push((e+s)%7);return{reviewCount:n,timeFunction:r,weekdayLabels:a,rolloverHour:t.rolloverHour}}function Is(t,e,n,r,a,s,f,o){const d=te(t),c=new Date,u=new Date;u.setFullYear(a);const i=et().range([e.marginLeft,e.width-e.marginRight]).domain([-1,53]),l=new Map;let v=0;for(const[_,k]of n.reviewCount.entries()){let D=Ht.offset(c,_);if(D=Yr.offset(D,-1*n.rolloverHour),k>v&&(v=k),D.getFullYear()!=a)continue;const S=n.timeFunction.count(ie(D),D),P=Ht.count(n.timeFunction(D),D),B=Ht.count(ie(D),D);l.set(B,{day:_,count:k,weekNumber:S,weekDay:P,date:D})}if(v)Rt(d,!0);else{Rt(d,!1);return}const b=ie(u),$=new Date(c);$.setFullYear(c.getFullYear()-1);for(let _=0;_<365;_++){const k=Ht.offset(b,_);if(k>c||f==dt.Year&&k<$)continue;const D=Ht.count(ie(k),k);if(!l.has(D)){const S=n.timeFunction.count(ie(k),k),P=Ht.count(n.timeFunction(k),k);l.set(D,{day:D,count:0,weekNumber:S,weekDay:P,date:k})}}const g=Array.from(l.values()),y=et().range([.2,s?.8:1]),h=fs().domain([0,v]).interpolator(_=>Le(y(_)));function p(_){const k=Ir(_.date,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),D=Xt({reviews:_.count});return`${k}<br>${D}`}const w=e.height/10,M=s?"#333":"#ddd",F=Er();d.select("g.weekdays").selectAll("text").data(n.weekdayLabels).join("text").text(_=>Vr(_)).attr("width",i(-1)-2).attr("height",w-2).attr("x",i(1)-3).attr("y",(_,k)=>e.marginTop+k*w).attr("fill",s?"#ddd":"black").attr("dominant-baseline","hanging").attr("text-anchor","end").attr("font-size",F.includes("zh")?"xx-small":"small").attr("font-family","monospace").attr("direction","ltr").style("user-select","none").on("click",null).filter(_=>[zt.SUNDAY,zt.MONDAY,zt.FRIDAY,zt.SATURDAY].includes(_)).on("click",(_,k)=>o(k)),d.select("g.days").selectAll("rect").data(g).join("rect").attr("fill",M).attr("width",_=>i(_.weekNumber+1)-i(_.weekNumber)-2).attr("height",w-2).attr("x",_=>i(_.weekNumber+1)).attr("y",_=>e.marginTop+_.weekDay*w).on("mousemove",(_,k)=>{const[D,S]=ge(_,document.body);ve(p(k),D,S)}).on("mouseout",he).attr("class",_=>_.count>0?ja:"").on("click",function(_,k){k.count>0&&r("search",{query:`"prop:rated=${k.day}"`})}).transition().duration(800).attr("fill",_=>_.count===0?M:h(_.count))}function Es(t){switch(t){case zt.MONDAY:return Or;case zt.FRIDAY:return Lr;case zt.SATURDAY:return jr;default:return qr}}var Hs=K("<span><button>◄</button></span> <span> </span> <span><button>►</button></span>",1),Qs=Zt('<!><svg><g class="weekdays"></g><g class="days"></g><!><!></svg>',1);function Ws(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData"),s=O(e,"prefs"),f=O(e,"revlogRange"),o=O(e,"nightMode");const d=Bt();let c=N(null);const u=N(ee());ue(u,m(u).height=120),ue(u,m(u).marginLeft=20),ue(u,m(u).marginRight=20);let i=N(null);const l=new Date().getFullYear();let v=N(0),b=N(l);const $=tn();X(()=>(ot(f()),m(v),m(b)),()=>{f()<dt.Year?C(v,l):f()===dt.Year?C(v,l-1):C(v,2e3),m(b)<m(v)&&C(b,m(v))}),X(()=>(ot(a()),m(c),r(),m(i),m(u),m(b),ot(o()),ot(f())),()=>{a()&&(C(c,Vs(a(),r().calendarFirstDayOfWeek)),Is(m(i),m(u),m(c),d,m(b),o(),f(),g=>Ke(s(),Jt(r).calendarFirstDayOfWeek=g,Jt(r))))}),vt(),ft(),_t(t,{title:$,children:(g,y)=>{var h=Qs(),p=E(h);Ct(p,{children:(D,S)=>{var P=Hs(),B=E(P),A=j(B);Y(B);var T=x(x(B,!0)),G=j(T);Y(T);var H=x(x(T,!0)),z=j(H);Y(H),lt(()=>{A.disabled=m(v)>=m(b),Ot(G,m(b)),z.disabled=m(b)>=l}),fe("click",A,()=>ia(b,-1),!1),fe("click",z,()=>ia(b),!1),L(D,P)},$$slots:{default:!0},$$legacy:!0});var w=x(p);ne(w,D=>C(i,D),()=>m(i));var M=j(w),F=x(M),_=x(F);me(_,{get bounds(){return m(u)},$$legacy:!0});var k=x(_);pe(k,{get bounds(){return m(u)},$$legacy:!0}),Y(w),lt(()=>Pt(w,"viewBox",`0 0 ${m(u).width} ${m(u).height}`)),L(g,h)},$$slots:{default:!0},$$legacy:!0}),ut()}const ya=[Ba[5][2],Ya[5][2],Na[5][2],Ue[5][2],Ue[5][3],"#FFDC41","grey"];function Us(t,e){const n=e?t.cardCounts.excludingInactive:t.cardCounts.includingInactive,r=e?'AND -("is:buried" OR "is:suspended")':"";return[[an(),n.newCards,!0,`"is:new"${r}`],[Ze(),n.learn,!0,`(-"is:review" AND "is:learn")${r}`],[$a(),n.relearn,!0,`("is:review" AND "is:learn")${r}`],[Pe(),n.young,!0,`("is:review" AND -"is:learn") AND "prop:ivl<21"${r}`],[Se(),n.mature,!0,`("is:review" -"is:learn") AND "prop:ivl>=21"${r}`],[nn(),n.suspended,e,'"is:suspended"'],[rn(),n.buried,e,'"is:buried"']]}function Xs(t,e){const n=Us(t,e),r=nt(gt(n,a=>a[1]));return{title:en(),counts:n,totalCards:r}}function Ks(t,e,n){const r=ra(n.counts,b=>b[1]),a=Array.from(r).map((b,$)=>{const g=n.counts[$];return{label:g[0],count:g[1],show:g[2],query:g[3],idx:$,total:b}}),s=Math.max(1,r.slice(-1)[0]),f=et().domain([0,s]),o=te(t),d=o.select(".counts"),c=Cs()(n.counts.map(b=>b[1])),u=e.height/2-e.marginTop-e.marginBottom,i=Ds().innerRadius(0).outerRadius(u),l=o.transition().duration(600);return d.attr("transform",`translate(${u},${u+e.marginTop})`).selectAll("path").data(c).join(b=>b.append("path").attr("fill",($,g)=>ya[g]).attr("d",i),function(b){return b.call($=>$.transition(l).attrTween("d",g=>{const y=ka({startAngle:0,endAngle:0},g);return h=>i(y(h))}))}),f.range([e.marginLeft,e.width-e.marginRight]),a.flatMap((b,$)=>{const g=nt(b.count/s*100,2);return b.show?{label:b.label,count:nt(b.count),percent:`${g}%`,colour:ya[$],query:b.query}:[]})}var Js=K('<label><input type="checkbox"> </label>'),Zs=K('<button class="search-link svelte-o8j8wx"> </button>'),to=K("<span> </span>"),eo=K('<tr><td class="svelte-o8j8wx"><span>■&nbsp;</span> <!></td><td class="right svelte-o8j8wx"> </td><td class="right svelte-o8j8wx"> </td></tr>'),ao=K('<!> <div class="counts-outer svelte-o8j8wx"><div class="svg-container svelte-o8j8wx"><svg class="svelte-o8j8wx"><g class="counts"></g></svg></div> <div class="counts-table svelte-o8j8wx"><table class="svelte-o8j8wx"><tbody><!><tr><td class="svelte-o8j8wx"><span style="visibility: hidden;">■</span> </td><td class="right svelte-o8j8wx"> </td><td class="svelte-o8j8wx"></td></tr></tbody></table></div></div>',1);function no(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData"),s=O(e,"prefs");const f=Bt();let o=N(null);const d=N(ee());ue(d,m(d).width=225),ue(d,m(d).marginBottom=0);let c=N(null),u=N(null);const i=sn(),l=on();X(()=>(m(c),ot(a()),r(),m(o),m(d)),()=>{C(c,Xs(a(),r().cardCountsSeparateInactive)),C(u,Ks(m(o),m(d),m(c)))}),vt(),ft(),_t(t,{get title(){return m(c).title},children:(v,b)=>{var $=ao(),g=E($);Ct(g,{children:(T,G)=>{var H=Js(),z=j(H);it(z);var Q=x(z,!0);Q.nodeValue=` ${i!=null?i:""}`,Y(H),na(z,()=>r().cardCountsSeparateInactive,Z=>Ke(s(),Jt(r).cardCountsSeparateInactive=Z,Jt(r))),L(T,H)},$$slots:{default:!0},$$legacy:!0});var y=x(x(g,!0)),h=j(y),p=j(h);ne(p,T=>C(o,T),()=>m(o)),Y(p),Y(h);var w=x(x(h,!0)),M=j(w),F=j(M),_=j(F);Ye(_,1,()=>m(u),qe,(T,G,H)=>{var z=eo(),Q=j(z),Z=j(Q),I=x(x(Z,!0));Mt(I,()=>r().browserLinksSupported,rt=>{var tt=Zs(),kt=j(tt);Y(tt),lt(()=>Ot(kt,St(G).label)),fe("click",tt,()=>f("search",{query:St(G).query}),!1),L(rt,tt)},rt=>{var tt=to(),kt=j(tt);Y(tt),lt(()=>Ot(kt,St(G).label)),L(rt,tt)}),Y(Q);var J=x(Q),yt=j(J);Y(J);var at=x(J),wt=j(at);Y(at),Y(z),lt(()=>{var rt;Pt(Z,"style",`color: ${(rt=St(G).colour)!=null?rt:""};`),Ot(yt,St(G).count),Ot(wt,St(G).percent)}),L(T,z)});var k=x(_),D=j(k),S=j(D),P=x(S,!0);P.nodeValue=` ${l!=null?l:""}`,Y(D);var B=x(D),A=j(B);Y(B),Y(k),Y(F),Y(M),Y(w),Y(y),lt(()=>{var T;Pt(p,"viewBox",`0 0 ${m(d).width} ${m(d).height}`),Pt(p,"style",`opacity: ${(T=m(c).totalCards?1:0)!=null?T:""}`),Ot(A,m(c).totalCards)}),L(v,$)},$$slots:{default:!0},$$legacy:!0}),ut()}function ro(t){return{eases:Nt(t.difficulty.eases),average:t.difficulty.average}}function so(t,e){const n=`"prop:d>=${t/100}"`;let r=`"prop:d<${(e+1)/100}"`;return e===99&&(r=r.replace("<","<=")),`${n} AND ${r}`}function oo(t,e,n){const r=et().domain([t,e]).nice(),a=r.ticks(n),s=r.domain(),f=t-s[0],o=a[1]-a[0];if(f===0||f%o!==0&&o%f!==0)return[r,a];const d=c=>c+f;return[et().domain(s.map(d)),a.map(d)]}function io(t,e,n){const r=t.eases;if(!r.size)return[null,[]];const a=0,s=100,f=20,[o,d]=oo(a,s,f),c=Yt().value(g=>g[0]).domain(o.domain()).thresholds(d)(r.entries()),u=gt(c,xt),i=$t(je).domain([100,0]);function l(g,y){const h=`${g.x0}%-${g.x1}%`;return cn({cards:xt(g),percent:h})}function v(g){const y=g.x0,h=g.x1-1,p=so(y,h);e("search",{query:p})}const b=g=>nt(g,0)+"%",$=[{label:ln(),value:b(t.average)}];return[{scale:o,bins:c,total:u,hoverText:l,onClick:n?v:null,colourScale:i,showArea:!1,binValue:xt,xTickFormat:b},$]}var lo=K("<!> <!>",1);function co(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData",0,null),s=O(e,"prefs");const f=Bt();let o=N(null),d=N([]);const c=un(),u=fn();X(()=>(ot(a()),m(o),m(d),r()),()=>{a()&&(()=>{const v=io(ro(a()),f,r().browserLinksSupported);return C(o,v[0]),C(d,v[1]),v})()}),vt(),ft();var i=At(),l=E(i);Mt(l,()=>{var v;return(v=a())==null?void 0:v.fsrs},v=>{_t(v,{title:c,subtitle:u,children:(b,$)=>{var g=lo(),y=E(g);Gt(y,{get data(){return m(o)},$$legacy:!0});var h=x(x(y,!0));qt(h,{get tableData(){return m(d)},$$legacy:!0}),L(b,g)},$$slots:{default:!0},$$legacy:!0})}),L(t,i),ut()}function uo(t){return{eases:Nt(t.eases.eases),average:t.eases.average}}function fo(t,e){if(t===e)return`"prop:ease=${t/100}"`;const n=`"prop:ease>=${t/100}"`,r=`"prop:ease<${(e+1)/100}"`;return`${n} AND ${r}`}function go(t,e,n){const r=et().domain([t,e]).nice(),a=r.ticks(n),s=r.domain(),f=t-s[0],o=a[1]-a[0];if(f===0||f%o!==0&&o%f!==0)return[r,a];const d=c=>c+f;return[et().domain(s.map(d)),a.map(d)]}function vo(t,e,n){const r=t.eases;if(!r.size)return[null,[]];const[,a]=Kt(r.keys()),s=130,f=a+1,o=20,[d,c]=go(s,f,o),u=Yt().value(y=>y[0]).domain(d.domain()).thresholds(c)(r.entries()),i=gt(u,xt),l=$t(je).domain([s,300]);function v(y,h){const p=Math.floor(y.x0),M=Math.floor(y.x1)-p<=10?`${y.x0}%`:`${y.x0}%-${y.x1}%`;return gn({cards:xt(y),percent:M})}function b(y){const h=y.x0,p=y.x1-1,w=fo(h,p);e("search",{query:w})}const $=y=>nt(y,0)+"%",g=[{label:dn(),value:$(gt(Array.from(r.entries()).map(([y,h])=>(y+2.5)*h))/i)}];return[{scale:d,bins:u,total:i,hoverText:v,onClick:n?b:null,colourScale:l,showArea:!1,binValue:xt,xTickFormat:$},g]}var ho=K("<!> <!>",1);function mo(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData",0,null),s=O(e,"prefs");const f=Bt();let o=N(null),d=N([]);const c=vn(),u=hn();X(()=>(ot(a()),m(o),m(d),r()),()=>{a()&&(()=>{const v=vo(uo(a()),f,r().browserLinksSupported);return C(o,v[0]),C(d,v[1]),v})()}),vt(),ft();var i=At(),l=E(i);Mt(l,()=>{var v,b;return!((b=(v=a())==null?void 0:v.fsrs)!=null&&b)},v=>{_t(v,{title:c,subtitle:u,children:(b,$)=>{var g=ho(),y=E(g);Gt(y,{get data(){return m(o)},$$legacy:!0});var h=x(x(y,!0));qt(h,{get tableData(){return m(d)},$$legacy:!0}),L(b,g)},$$slots:{default:!0},$$legacy:!0})}),L(t,i),ut()}function po(t){const e=t.futureDue;return{dueCounts:Nt(e.futureDue),haveBacklog:e.haveBacklog,dailyLoad:e.dailyLoad}}function yo(t,e){if(t===e)return`"prop:due=${t}"`;{const n=`"prop:due>=${t}"`,r=`"prop:due<=${e}"`;return`${n} AND ${r}`}}function bo(t,e,n,r,a){var F;const s={histogramData:null,tableData:[]},f=t.dueCounts;if(!f)return s;const[o,d]=Kt(f.keys());let c=o;n||(c=0);let u=d;switch(e){case q.Month:u=31;break;case q.ThreeMonths:u=90;break;case q.Year:u=365;break;case q.AllTime:break}const i=Math.min(70,u-c),l=et().domain([c,u]),v=Yt().value(_=>_[0]).domain(l.domain()).thresholds(l.ticks(i))(f.entries());if(!gt(v,_=>_.length))return s;const b=_=>nt(_),$=et().range([.7,.3]),g=$t(_=>Xe($(_))).domain([c,u]),y=gt(v,xt);function h(_,k,D){const S=ta(_.x0,_.x1===u?_.x1+1:_.x1),P=yn({cards:xt(_)}),B=Re();return`${S}:<br>${P}<br>${B}: ${nt(k)}`}function p(_){const k=_.x0,D=_.x1===u?_.x1:_.x1-1,S=yo(k,D);r("search",{query:S})}const w=u-c,M=[{label:Te(),value:Xt({reviews:y})},{label:ba(),value:He({count:Math.round(y/w)})},{label:mn(),value:Xt({reviews:(F=t.dueCounts.get(1))!=null?F:0})},{label:pn(),value:Xt({reviews:t.dailyLoad})}];return{histogramData:{scale:l,bins:v,total:y,hoverText:h,onClick:a?p:null,showArea:!0,colourScale:g,binValue:xt,xTickFormat:b},tableData:M}}var $o=K('<label><input type="checkbox"> </label>'),xo=K("<!> <!>",1),_o=K("<!> <!> <!>",1);function wo(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData",0,null),s=O(e,"prefs");const f=Bt();let o=N(null),d=N(null),c=N([]),u=N(q.Month);const i=bn(),l=$n(),v=xn();X(()=>ot(a()),()=>{a()&&C(o,po(a()))}),X(()=>(m(o),m(d),m(c),m(u),r()),()=>{m(o)&&(()=>{const b=bo(m(o),m(u),r().futureDueShowBacklog,f,r().browserLinksSupported);return C(d,b.histogramData),C(c,b.tableData),b})()}),vt(),ft(),_t(t,{title:i,subtitle:l,children:(b,$)=>{var g=_o(),y=E(g);Ct(y,{children:(w,M)=>{var F=xo(),_=E(F);Mt(_,()=>m(o)&&m(o).haveBacklog,D=>{var S=$o(),P=j(S);it(P);var B=x(P,!0);B.nodeValue=` ${v!=null?v:""}`,Y(S),na(P,()=>r().futureDueShowBacklog,A=>Ke(s(),Jt(r).futureDueShowBacklog=A,Jt(r))),L(D,S)});var k=x(x(_,!0));ye(k,{get graphRange(){return m(u)},set graphRange(D){C(u,D)},get revlogRange(){return dt.All},$$legacy:!0}),L(w,F)},$$slots:{default:!0},$$legacy:!0});var h=x(x(y,!0));Gt(h,{get data(){return m(d)},$$legacy:!0});var p=x(x(h,!0));qt(p,{get tableData(){return m(c)},$$legacy:!0}),L(b,g)},$$slots:{default:!0},$$legacy:!0}),ut()}var ko=K('<label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label> <label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label> <input type="text" id="statisticsSearchText" class="svelte-19q2rko">',1),Do=K('<label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label> <label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label>',1),Ao=K('<div class="range-box svelte-19q2rko"><div class="spin svelte-19q2rko">◐</div> <!> <!></div> <div class="range-box-pad svelte-19q2rko"></div>',1);function La(t,e){ct(e,!1);const n=Dt(),r=()=>pt(c(),"$days",n),a=()=>pt(u(),"$search",n),s=[],f=[];var o=N();(function(D){D[D.Deck=1]="Deck",D[D.Collection=2]="Collection",D[D.Custom=3]="Custom"})(m(o)||C(o,{}));let d=O(e,"loading"),c=O(e,"days"),u=O(e,"search"),i=N(Ma(r())),l=N();a()==="deck:current"?C(l,m(o).Deck):a()===""?C(l,m(o).Collection):C(l,m(o).Custom);let v=N(a());function b(){oe(u(),m(v))}const $=_n(),g=wn(),y=kn(),h=Dn(),p=An();X(()=>(m(l),m(o)),()=>{switch(m(l)){case m(o).Deck:oe(u(),C(v,"deck:current"));break;case m(o).Collection:oe(u(),C(v,""));break}}),X(()=>m(i),()=>{switch(m(i)){case dt.Year:oe(c(),365);break;case dt.All:oe(c(),0);break}}),vt(),ft();var w=Ao(),M=E(w),F=j(M),_=x(x(F,!0));Ct(_,{children:(D,S)=>{var P=ko(),B=E(P),A=j(B);it(A);var T,G=x(A,!0);G.nodeValue=` ${g!=null?g:""}`,Y(B);var H=x(x(B,!0)),z=j(H);it(z);var Q,Z=x(z,!0);Z.nodeValue=` ${y!=null?y:""}`,Y(H);var I=x(x(H,!0));it(I),Pt(I,"placeholder",h),lt(()=>{T!==(T=m(o).Deck)&&(A.value=(A.__value=m(o).Deck)==null?"":m(o).Deck),Q!==(Q=m(o).Collection)&&(z.value=(z.__value=m(o).Collection)==null?"":m(o).Collection)}),mt(s,[],A,()=>(m(o).Deck,m(l)),J=>C(l,J)),mt(s,[],z,()=>(m(o).Collection,m(l)),J=>C(l,J)),Gr(I,()=>m(v),J=>C(v,J)),fe("change",I,b,!1),fe("focus",I,()=>{C(l,m(o).Custom)},!1),L(D,P)},$$slots:{default:!0},$$legacy:!0});var k=x(x(_,!0));Ct(k,{children:(D,S)=>{var P=Do(),B=E(P),A=j(B);it(A);var T,G=x(A,!0);G.nodeValue=` ${$!=null?$:""}`,Y(B);var H=x(x(B,!0)),z=j(H);it(z);var Q,Z=x(z,!0);Z.nodeValue=` ${p!=null?p:""}`,Y(H),lt(()=>{T!==(T=dt.Year)&&(A.value=(A.__value=dt.Year)==null?"":dt.Year),Q!==(Q=dt.All)&&(z.value=(z.__value=dt.All)==null?"":dt.All)}),mt(f,[],A,()=>(dt.Year,m(i)),I=>C(i,I)),mt(f,[],z,()=>(dt.All,m(i)),I=>C(i,I)),L(D,P)},$$slots:{default:!0},$$legacy:!0}),Y(M),lt(()=>Mn(F,"loading",d())),L(t,w),ut()}async function Mo(t,e){let n=await t();const{subscribe:r,set:a}=We(n);function s(o){n=o,a(o),e(o)}function f(o){s(o(n))}return{subscribe:r,set:s,update:f}}function Co(t,e){ct(e,!1);const n=Dt(),r=()=>pt(f(),"$search",n),a=()=>pt(o(),"$days",n),s=N();let f=O(e,"search"),o=O(e,"days");const d=Mo(()=>Hr({}),Qr);let c=N(null),u=N(!0);async function i(b,$){await d,C(u,!0);try{C(c,await Xr({search:b,days:$}))}finally{C(u,!1)}}X(()=>(r(),a()),()=>{i(r(),a())}),X(()=>a(),()=>{C(s,Ma(a()))}),vt(),ft();var l=At(),v=E(l);Zr(v,()=>d,null,(b,$)=>{var g=At(),y=E(g);Wr(y,Ur(e),{get revlogRange(){return m(s)},get prefs(){return m($)},get sourceData(){return m(c)},get loading(){return m(u)}}),L(b,g)}),L(t,l),ut()}var To=K('<!> <div class="graphs-container svelte-n9umk6"><!></div> <div class="spacer svelte-n9umk6"></div>',1);function Ro(t,e){ct(e,!1);const n=Dt(),r=()=>pt(o,"$search",n),a=()=>pt(Kr,"$pageTheme",n);let s=O(e,"initialSearch"),f=O(e,"initialDays");const o=We(s()),d=We(f());let c=O(e,"graphs"),u=O(e,"controller",0,La);function i(l){Jr(`browserSearch: ${r()} ${l.detail.query}`)}ft(),Co(t,{search:o,days:d,children:(l,v)=>{const b=be(()=>v.sourceData),$=be(()=>v.loading),g=be(()=>v.prefs),y=be(()=>v.revlogRange);var h=To(),p=E(h);Mt(p,u,F=>{var _=At(),k=E(_);ca(k,u,(D,S)=>{S(D,{search:o,days:d,get loading(){return m($)},$$legacy:!0})}),L(F,_)});var w=x(x(p,!0)),M=j(w);Mt(M,()=>m(b)&&m(y),F=>{var _=At(),k=E(_);Ye(k,1,c,qe,(D,S,P)=>{var B=At(),A=E(B);ca(A,()=>St(S),(T,G)=>{G(T,{get sourceData(){return m(b)},get prefs(){return m(g)},get revlogRange(){return m(y)},get nightMode(){return a().isDark},$$events:{search:i},$$legacy:!0})}),L(D,B)}),L(F,_)}),Y(w),L(l,h)},$$slots:{default:!0},$$legacy:!0}),ut()}function So(t,e){function n(r){return r.map((a,s)=>({hour:s,totalCount:a.total,correctCount:a.correct}))}switch(e){case q.Month:return n(t.hours.oneMonth);case q.ThreeMonths:return n(t.hours.threeMonths);case q.Year:return n(t.hours.oneYear);case q.AllTime:return n(t.hours.allTime)}}function Po(t,e,n,r){const a=So(n,r),s=Math.max(...a.map(g=>g.totalCount)),f=te(t),o=f.transition().duration(600);if(s)Rt(f,!0);else{Rt(f,!1);return}const d=Me().domain(a.map(g=>g.hour.toString())).range([e.marginLeft,e.width-e.marginRight]).paddingInner(.1);f.select(".x-ticks").call(g=>g.transition(o).call(Fe(d).tickSizeOuter(0))).selectAll(".tick").selectAll("text").classed(Bs,g=>g%2!=0).attr("direction","ltr");const c=et().range([.1,.8]),u=$t(g=>Le(c(g))).domain([0,s]),i=g=>nt(g),l=et().range([e.height-e.marginBottom,e.marginTop]).domain([0,s]).nice();f.select(".y-ticks").call(g=>g.transition(o).call(Be(l).ticks(e.height/50).tickSizeOuter(0).tickFormat(i))).attr("direction","ltr");const v=l.copy().domain([0,1]),b=g=>g.attr("width",d.bandwidth()).transition(o).attr("x",y=>d(y.hour.toString())).attr("y",y=>l(y.totalCount)).attr("height",y=>l(0)-l(y.totalCount)).attr("fill",y=>u(y.totalCount));f.select("g.bars").selectAll("rect").data(a).join(g=>g.append("rect").attr("rx",1).attr("x",y=>d(y.hour.toString())).attr("y",l(0)).attr("height",0).call(b),g=>g.call(b),g=>g.call(y=>y.transition(o).attr("height",0).attr("y",l(0)))),f.select(".y2-ticks").call(g=>g.transition(o).call(ea(v).ticks(e.height/50).tickFormat(y=>`${Math.round(y*100)}%`).tickSizeOuter(0))).attr("direction","ltr"),f.select("path.cumulative-overlay").datum(a).attr("d",sa().curve(oa).defined(g=>g.totalCount>0).x(g=>d(g.hour.toString())+d.bandwidth()/2).y0(e.height-e.marginBottom).y1(g=>{const y=g.correctCount/g.totalCount;return v(isNaN(y)?0:y)}));function $(g){const y=Cn({hourStart:g.hour,hourEnd:g.hour+1}),h=Tn({reviews:g.totalCount}),p=Rn({percent:g.totalCount?g.correctCount/g.totalCount*100:0,reviews:g.correctCount});return`${y}<br>${h}<br>${p}`}f.select("g.hover-columns").selectAll("rect").data(a).join("rect").attr("x",g=>d(g.hour.toString())).attr("y",()=>l(s)).attr("width",d.bandwidth()).attr("height",()=>l(0)-l(s)).on("mousemove",(g,y)=>{const[h,p]=ge(g,document.body);ve($(y),h,p)}).on("mouseout",he)}var Fo=Zt('<!><svg><g class="bars"></g><!><!><!><!></svg>',1);function Bo(t,e){ct(e,!1);let n=O(e,"sourceData",0,null),r=O(e,"revlogRange"),a=N(q.Year);const s=ee();let f=N(null);const o=Sn(),d=Pn();X(()=>(ot(n()),m(f),m(a)),()=>{n()&&Po(m(f),s,n(),m(a))}),vt(),ft(),_t(t,{title:o,subtitle:d,children:(c,u)=>{var i=Fo(),l=E(i);Ct(l,{children:(p,w)=>{ye(p,{get graphRange(){return m(a)},set graphRange(M){C(a,M)},get revlogRange(){return r()},followRevlog:!0,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var v=x(l);ne(v,p=>C(f,p),()=>m(f));var b=j(v),$=x(b);aa($);var g=x($);Ne(g);var y=x(g);me(y,{bounds:s,$$legacy:!0});var h=x(y);pe(h,{bounds:s,$$legacy:!0}),Y(v),lt(()=>Pt(v,"viewBox",`0 0 ${s.width} ${s.height}`)),L(c,i)},$$slots:{default:!0},$$legacy:!0}),ut()}var V=(t=>(t[t.Month=0]="Month",t[t.Percentile50=1]="Percentile50",t[t.Percentile95=2]="Percentile95",t[t.All=3]="All",t))(V||{});function Oa(t){const e=Nt(t.intervals),n=gt(e,([s,f])=>f),r=Array(n);let a=0;for(const s of e.entries())r.fill(s[0],a,a+s[1]),a+=s[1];return r.sort((s,f)=>s-f),{intervals:r}}function No(t,e,n,r){return e-t<=1?(r?Nn:Yn)({day:t,cards:n}):(r?qn:jn)({daysStart:t,daysEnd:e-1,cards:n})}function Yo(t,e){if(t===e)return`"prop:ivl=${t}"`;const n=`"prop:ivl>=${t}"`,r=`"prop:ivl<=${e}"`;return`${n} ${r}`}function qo(t,e){t===0&&(t=.5);const n=`"prop:s>=${t-.5}"`,r=`"prop:s<${e+.5}"`;return`${n} ${r}`}function za(t,e,n,r,a){var _;const s=t.intervals;if(!s.length)return[null,[]];const f=0;let[,o]=Kt(s),d=!1;switch(e){case 0:o=Math.min(o,30);break;case 1:o=da(s,.5),d=!0;break;case 2:o=da(s,.95),d=!0;break;case 3:d=!0;break}o=o+1;const c=a?k=>k:k=>k+1,u=(k,D,S)=>D===S.length-1?[k-(S[0]-1),k+1]:[k-(S[0]-1)],i=Math.min(70,o-f),l=et().domain([f,o]),v=et().domain((d?l.nice():l).domain().map(c)),b=Yt().domain(v.domain()).thresholds(v.ticks(i).flatMap(u))(s),$=gt(b,k=>k.length);if(!$)return[null,[]];const g=et().range([.7,.3]),y=$t(k=>Le(g(k))).domain([o,f]);function h(k,D,S){const P=No(k.x0,k.x1,k.length,a),B=Re();return`${P}<br>${B}: ‎${nt(S,1)}%`}function p(k){const D=k.x0,S=k.x1-1,P=(a?qo:Yo)(D,S);n("search",{query:P})}const w=Math.round((_=os(s))!=null?_:0),M=Ft(w*86400,!1),F=[{label:a?Fn():Bn(),value:M}];return[{scale:v,bins:b,total:$,hoverText:h,onClick:r?p:null,colourScale:y,showArea:!0},F]}var jo=K('<label><input type="radio"> </label> <label><input type="radio"> 50%</label> <label><input type="radio"> 95%</label> <label><input type="radio"> </label>',1),Lo=K("<!> <!> <!>",1);function Oo(t,e){ct(e,!1);const n=Dt(),r=()=>pt(f(),"$prefs",n),a=[];let s=O(e,"sourceData",0,null),f=O(e,"prefs");const o=Bt();let d=N(null),c=N(null),u=N([]),i=N(V.Percentile95);const l=Ln(),v=On(),b=Ft(1*ke),$=Je();X(()=>ot(s()),()=>{s()&&C(d,Oa(s().intervals))}),X(()=>(m(d),m(c),m(u),m(i),r()),()=>{m(d)&&(()=>{const g=za(m(d),m(i),o,r().browserLinksSupported,!1);return C(c,g[0]),C(u,g[1]),g})()}),vt(),ft(),_t(t,{title:l,subtitle:v,children:(g,y)=>{var h=Lo(),p=E(h);Ct(p,{children:(F,_)=>{var k=jo(),D=E(k),S=j(D);it(S);var P,B=x(S,!0);B.nodeValue=` ${b!=null?b:""}`,Y(D);var A=x(x(D,!0)),T=j(A);it(T);var G;we(),Y(A);var H=x(x(A,!0)),z=j(H);it(z);var Q;we(),Y(H);var Z=x(x(H,!0)),I=j(Z);it(I);var J,yt=x(I,!0);yt.nodeValue=` ${$!=null?$:""}`,Y(Z),lt(()=>{P!==(P=V.Month)&&(S.value=(S.__value=V.Month)==null?"":V.Month),G!==(G=V.Percentile50)&&(T.value=(T.__value=V.Percentile50)==null?"":V.Percentile50),Q!==(Q=V.Percentile95)&&(z.value=(z.__value=V.Percentile95)==null?"":V.Percentile95),J!==(J=V.All)&&(I.value=(I.__value=V.All)==null?"":V.All)}),mt(a,[],S,()=>(V.Month,m(i)),at=>C(i,at)),mt(a,[],T,()=>(V.Percentile50,m(i)),at=>C(i,at)),mt(a,[],z,()=>(V.Percentile95,m(i)),at=>C(i,at)),mt(a,[],I,()=>(V.All,m(i)),at=>C(i,at)),L(F,k)},$$slots:{default:!0},$$legacy:!0});var w=x(x(p,!0));Gt(w,{get data(){return m(c)},$$legacy:!0});var M=x(x(w,!0));qt(M,{get tableData(){return m(u)},$$legacy:!0}),L(g,h)},$$slots:{default:!0},$$legacy:!0}),ut()}function zo(t){return{retrievability:Nt(t.retrievability.retrievability),average:t.retrievability.average,sumByCard:t.retrievability.sumByCard,sumByNote:t.retrievability.sumByNote}}function Go(t,e){const n=`"prop:r>=${t/100}"`;let r=`"prop:r<${(e+1)/100}"`;return e===99&&(r=r.replace("<","<=")),`${n} AND ${r}`}function Vo(t,e,n){const r=et().domain([t,e]).nice(),a=r.ticks(n),s=r.domain(),f=t-s[0],o=a[1]-a[0];if(f===0||f%o!==0&&o%f!==0)return[r,a];const d=c=>c+f;return[et().domain(s.map(d)),a.map(d)]}function Io(t,e,n){const r=t.retrievability;if(!r.size)return[null,[]];const a=0,s=100,f=20,[o,d]=Vo(a,s,f),c=Yt().value(g=>g[0]).domain(o.domain()).thresholds(d)(r.entries()),u=gt(c,xt),i=$t(je).domain([0,100]);function l(g,y){const h=`${g.x0}%-${g.x1}%`;return In({cards:xt(g),percent:h})}function v(g){const y=g.x0,h=g.x1-1,p=Go(y,h);e("search",{query:p})}const b=g=>nt(g,0)+"%",$=[{label:zn(),value:b(t.average)},{label:Gn(),value:`${xe({cards:+t.sumByCard.toFixed(0)})} / ${Vn({notes:+t.sumByNote.toFixed(0)})}`}];return[{scale:o,bins:c,total:u,hoverText:l,onClick:n?v:null,colourScale:i,showArea:!1,binValue:xt,xTickFormat:b},$]}var Eo=K("<!> <!>",1);function Ho(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData",0,null),s=O(e,"prefs");const f=Bt();let o=N(null),d=N([]);const c=En(),u=Hn();X(()=>(ot(a()),m(o),m(d),r()),()=>{a()&&(()=>{const v=Io(zo(a()),f,r().browserLinksSupported);return C(o,v[0]),C(d,v[1]),v})()}),vt(),ft();var i=At(),l=E(i);Mt(l,()=>{var v;return(v=a())==null?void 0:v.fsrs},v=>{_t(v,{title:c,subtitle:u,children:(b,$)=>{var g=Eo(),y=E(g);Gt(y,{get data(){return m(o)},$$legacy:!0});var h=x(x(y,!0));qt(h,{get tableData(){return m(d)},$$legacy:!0}),L(b,g)},$$slots:{default:!0},$$legacy:!0})}),L(t,i),ut()}function Qo(t){return{reviewCount:Nt(t.reviews.count),reviewTime:Nt(t.reviews.time)}}function Ga(t){const e=[0,0,0,0,0];for(const n of t)e[0]+=n[1].mature,e[1]+=n[1].young,e[2]+=n[1].relearn,e[3]+=n[1].learn,e[4]+=n[1].filtered;return e}function ce(t,e){return gt(Ga(t).slice(0,e+1))}function Wo(t,e,n,r,a){const s=te(t),f=s.transition().duration(600),o=1;let d=0;switch(r){case q.Month:d=-30;break;case q.ThreeMonths:d=-89;break;case q.Year:d=-364;break;case q.AllTime:d=Ae(n.reviewCount.keys());break}const c=Math.min(70,Math.abs(d)),u=et().domain([d,o]);r===q.AllTime&&u.nice(c);const i=a?n.reviewTime:n.reviewCount,l=Yt().value(R=>R[0]).domain(u.domain()).thresholds(u.ticks(c))(i.entries());if(gt(l,R=>R.length))Rt(s,!0);else return Rt(s,!1),[];u.range([e.marginLeft,e.width-e.marginRight]),s.select(".x-ticks").call(R=>R.transition(f).call(Fe(u).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const b=R=>a?Ft(R/1e3,!0):Math.round(R)!=R?"":nt(R),$=De(l,R=>ce(R,4)),g=et().range([e.height-e.marginBottom,e.marginTop]).domain([0,$]).nice();s.select(".y-ticks").call(R=>R.transition(f).call(Be(g).ticks(e.height/50).tickSizeOuter(0).tickFormat(b))).attr("direction","ltr");function y(R){const W=Math.max(0,u(R.x1)-u(R.x0)-1);return W!=null?W:0}const h=et().range([.3,.5]),p=et().range([.4,.7]),w=$t(R=>Xe(p(R))).domain(u.domain()),M=$t(R=>Xe(h(R))).domain(u.domain()),F=$t(R=>hs(h(R))).domain(u.domain()),_=$t(R=>ms(h(R))).domain(u.domain()),k=$t(R=>vs(h(R))).domain(u.domain());function D(R){switch(R){case 0:return w;case 1:return M;case 3:return _;case 2:return F;case 4:return k}}function S(R){return a?Ft(R/1e3):Xt({reviews:R})}function P(R,W){const st=ta(R.x0,R.x1),It=Ga(R),se=S(gt(It));let Et=`<table><tr><td>${st}</td><td align=end>${se}</td></tr>`;const Ia=[[4,Zn()],[3,Ze()],[2,$a()],[1,Pe()],[0,Se()],[null,Re()]];for(const[Oe,Ea]of Ia){let ze,Ge;Oe==null?(ze="transparent",Ge=S(W)):(ze=D(Oe)(1),Ge=S(It[Oe])),Et+=`<tr>
            <td><span style="color: ${ze};">■</span> ${Ea}</td>
            <td align=end>${Ge}</td>
            </tr>`}return Et}const B=(R,W)=>R.attr("width",y).transition(f).attr("x",st=>u(st.x0)).attr("y",st=>g(ce(st,W))).attr("height",st=>g(0)-g(ce(st,W))).attr("fill",st=>D(W)(st.x0));for(const R of[0,1,2,3,4])s.select(`g.bars${R}`).selectAll("rect").data(l).join(W=>W.append("rect").attr("rx",1).attr("x",st=>u(st.x0)).attr("y",g(0)).attr("height",0).call(st=>B(st,R)),W=>W.call(st=>B(st,R)),W=>W.call(st=>st.transition(f).attr("height",0).attr("y",g(0))));const A=l.map(R=>ce(R,4));A.unshift(0);const T=ra(A),G=T.slice(-1)[0],H=g.copy().domain([0,G]).nice();G&&(s.select(".y2-ticks").call(R=>R.transition(f).call(ea(H).ticks(e.height/50).tickFormat(b).tickSizeOuter(0))).attr("direction","ltr"),s.select("path.cumulative-overlay").datum(T).attr("d",sa().curve(oa).x((R,W)=>u(W===0?l[0].x0:l[W-1].x1)).y0(e.height-e.marginBottom).y1(R=>H(R))));const z=l.map((R,W)=>[R,T[W+1]]);s.select("g.hover-columns").selectAll("rect").data(z).join("rect").attr("x",([R])=>u(R.x0)).attr("y",()=>g($)).attr("width",([R])=>y(R)).attr("height",()=>g(0)-g($)).on("mousemove",(R,[W,st])=>{const[It,se]=ge(R,document.body);ve(P(W,st),It,se)}).on("mouseout",he);const Q=-d+1,Z=gt(l,R=>R.length),I=Z/Q*100,J=G,yt=J/Q,at=J/Z;let wt,rt,tt,kt,jt;if(a){wt=Ft(J/1e3,!1),rt=la({count:Math.round(at/1e3/60)}),tt=la({count:Math.round(yt/1e3/60)}),jt=Qn();const R=Yt().value(Et=>Et[0]).domain(u.domain())(n.reviewCount.entries()),W=gt(R,Et=>ce(Et,4)),st=J/1e3,It=st/W,se=W*60/st;kt=Wn({averageSeconds:It,cardsPerMinute:se})}else wt=Xt({reviews:J}),rt=He({count:Math.round(at)}),tt=He({count:Math.round(yt)}),kt=jt="";const Vt=[{label:Un(),value:Xn({amount:Z,total:Q,percent:I<99.5?nt(I):I<99.95?nt(I,1):I<100?nt(I,2):"100"})},{label:Te(),value:wt},{label:Kn(),value:rt},{label:Jn(),value:tt}];return kt&&Vt.push({label:jt,value:kt}),Vt}var Uo=K('<label><input type="checkbox"> </label> <!>',1),Xo=Zt("<g></g>"),Ko=Zt("<!><svg><!><!><!><!><!></svg><!>",1);function Jo(t,e){ct(e,!1);let n=O(e,"sourceData",0,null),r=O(e,"revlogRange"),a=N(null);const s=ee();let f=N(null),o=N(q.Month),d=N(!1),c=N([]);const u=tr(),i=er();let l=N("");X(()=>ot(n()),()=>{n()&&C(a,Qo(n()))}),X(()=>(m(a),m(f),m(o),m(d)),()=>{m(a)&&C(c,Wo(m(f),s,m(a),m(o),m(d)))}),X(()=>m(d),()=>{m(d)?C(l,ar()):C(l,nr())}),vt(),ft(),_t(t,{title:u,get subtitle(){return m(l)},children:(v,b)=>{var $=Ko(),g=E($);Ct(g,{children:(k,D)=>{var S=Uo(),P=E(S),B=j(P);it(B);var A=x(B,!0);A.nodeValue=` ${i!=null?i:""}`,Y(P);var T=x(x(P,!0));ye(T,{get graphRange(){return m(o)},set graphRange(G){C(o,G)},get revlogRange(){return r()},followRevlog:!0,$$legacy:!0}),na(B,()=>m(d),G=>C(d,G)),L(k,S)},$$slots:{default:!0},$$legacy:!0});var y=x(g);ne(y,k=>C(f,k),()=>m(f));var h=j(y);Ye(h,1,()=>[4,3,2,1,0],qe,(k,D,S)=>{var P=Xo();lt(()=>{var B;return rr(P,`bars${(B=St(D))!=null?B:""}`)}),L(k,P)});var p=x(h);aa(p);var w=x(p);Ne(w);var M=x(w);me(M,{bounds:s,$$legacy:!0});var F=x(M);pe(F,{bounds:s,$$legacy:!0}),Y(y);var _=x(y);qt(_,{get tableData(){return m(c)},$$legacy:!0}),lt(()=>Pt(y,"viewBox",`0 0 ${s.width} ${s.height}`)),L(v,$)},$$slots:{default:!0},$$legacy:!0}),ut()}var Zo=K('<label><input type="radio"> </label> <label><input type="radio"> 50%</label> <label><input type="radio"> 95%</label> <label><input type="radio"> </label>',1),ti=K("<!> <!> <!>",1);function ei(t,e){ct(e,!1);const n=Dt(),r=()=>pt(f(),"$prefs",n),a=[];let s=O(e,"sourceData",0,null),f=O(e,"prefs");const o=Bt();let d=N(null),c=N(null),u=N([]),i=N(V.Percentile95);const l=sr(),v=or(),b=Ft(1*ke),$=Je();X(()=>ot(s()),()=>{s()&&C(d,Oa(s().stability))}),X(()=>(m(d),m(c),m(u),m(i),r()),()=>{m(d)&&(()=>{const h=za(m(d),m(i),o,r().browserLinksSupported,!0);return C(c,h[0]),C(u,h[1]),h})()}),vt(),ft();var g=At(),y=E(g);Mt(y,()=>{var h;return(h=s())==null?void 0:h.fsrs},h=>{_t(h,{title:l,subtitle:v,children:(p,w)=>{var M=ti(),F=E(M);Ct(F,{children:(D,S)=>{var P=Zo(),B=E(P),A=j(B);it(A);var T,G=x(A,!0);G.nodeValue=` ${b!=null?b:""}`,Y(B);var H=x(x(B,!0)),z=j(H);it(z);var Q;we(),Y(H);var Z=x(x(H,!0)),I=j(Z);it(I);var J;we(),Y(Z);var yt=x(x(Z,!0)),at=j(yt);it(at);var wt,rt=x(at,!0);rt.nodeValue=` ${$!=null?$:""}`,Y(yt),lt(()=>{T!==(T=V.Month)&&(A.value=(A.__value=V.Month)==null?"":V.Month),Q!==(Q=V.Percentile50)&&(z.value=(z.__value=V.Percentile50)==null?"":V.Percentile50),J!==(J=V.Percentile95)&&(I.value=(I.__value=V.Percentile95)==null?"":V.Percentile95),wt!==(wt=V.All)&&(at.value=(at.__value=V.All)==null?"":V.All)}),mt(a,[],A,()=>(V.Month,m(i)),tt=>C(i,tt)),mt(a,[],z,()=>(V.Percentile50,m(i)),tt=>C(i,tt)),mt(a,[],I,()=>(V.Percentile95,m(i)),tt=>C(i,tt)),mt(a,[],at,()=>(V.All,m(i)),tt=>C(i,tt)),L(D,P)},$$slots:{default:!0},$$legacy:!0});var _=x(x(F,!0));Gt(_,{get data(){return m(c)},$$legacy:!0});var k=x(x(_,!0));qt(k,{get tableData(){return m(u)},$$legacy:!0}),L(p,M)},$$slots:{default:!0},$$legacy:!0})}),L(t,g),ut()}function ai(t){let e;const n=t.today;if(n.answerCount){const r=Ar(n.answerCount,n.answerMillis/1e3),a=n.answerCount-n.correctCount;let s=ir();s+=` ${a} (${nt(a/n.answerCount*100)}%)`;const f=lr({learnCount:n.learnCount,reviewCount:n.reviewCount,relearnCount:n.relearnCount,filteredCount:n.earlyReviewCount});let o;n.matureCount?o=cr({correct:n.matureCorrect,total:n.matureCount,percent:n.matureCorrect/n.matureCount*100}):o=ur(),e=[r,s,f,o]}else e=[fr()];return{title:dr(),lines:e}}var ni=K("<div> </div>"),ri=K('<div class="legend svelte-2llkqb"></div>');function si(t,e){ct(e,!1);let n=O(e,"sourceData",0,null),r=N(null);X(()=>ot(n()),()=>{n()&&C(r,ai(n()))}),vt(),ft();var a=At(),s=E(a);Mt(s,()=>m(r),f=>{_t(f,{get title(){return m(r).title},children:(o,d)=>{var c=ri();Ye(c,9,()=>m(r).lines,qe,(u,i,l)=>{var v=ni(),b=j(v);Y(v),lt(()=>Ot(b,St(i))),L(u,v)}),Y(c),L(o,c)},$$slots:{default:!0},$$legacy:!0})}),L(t,a),ut()}function Ee(t,e){const n=t+e;return n===0?"0%":nt(t/n*100,1)+"%"}var Va=(t=>(t[t.Young=0]="Young",t[t.Mature=1]="Mature",t[t.Total=2]="Total",t))(Va||{});function Qt(t,e,n){let r,a,s;switch(n){case 0:r=e.youngPassed,a=e.youngFailed,s=Ee(e.youngPassed,e.youngFailed);break;case 1:r=e.maturePassed,a=e.matureFailed,s=Ee(e.maturePassed,e.matureFailed);break;case 2:r=e.youngPassed+e.maturePassed,a=e.youngFailed+e.matureFailed,s=Ee(r,a);break}return`
        <tr>
            <td class="trl">${t}</td>
            <td class="trr">${nt(r)}</td>
            <td class="trr">${nt(a)}</td>
            <td class="trr">${s}</td>
        </tr>`}function oi(t,e){const n=t.trueRetention;let r="";for(const a of Object.values(Va)){if(typeof a=="string")continue;const s=`
        <style>
            td.trl { border: 1px solid; text-align: left; }
            td.trr { border: 1px solid; text-align: right; }
            td.trc { border: 1px solid; text-align: center; }
            table.true-retention { width: 100%; table-layout: fixed; }
            colgroup col:first-child { width: 40% }
        </style>
        <table class="true-retention" cellspacing="0" cellpadding="2">
        <colgroup><col><col><col></colgroup>
            <tr>
                <td class="trl"><b>${ii(a)}</b></td>
                <td class="trr">${gr()}</td>
                <td class="trr">${vr()}</td>
                <td class="trr">${hr()}</td>
            </tr>
            ${Qt(mr(),n.today,a)}
            ${Qt(pr(),n.yesterday,a)}
            ${Qt(yr(),n.week,a)}
            ${Qt(br(),n.month,a)}
            ${e===dt.Year?Qt($r(),n.year,a):Qt(xr(),n.allTime,a)}
        </table>`;r+=s}return r}function ii(t){switch(t){case 0:return Pe();case 1:return Se();case 2:return Te()}}var li=K('<div class="true-retention-table svelte-2xnk54"><!></div>');function ci(t,e){ct(e,!1);let n=O(e,"revlogRange"),r=O(e,"sourceData",0,null),a=N();const s=_r(),f=wr();X(()=>(ot(r()),ot(n())),()=>{r()&&C(a,oi(r(),n()))}),vt(),ft(),_t(t,{title:s,subtitle:f,children:(o,d)=>{var c=At(),u=E(c);Mt(u,()=>m(a),i=>{var l=li(),v=j(l);kr(v,()=>m(a),!1,!1),Y(l),L(i,l)}),L(o,c)},$$slots:{default:!0},$$legacy:!0}),ut()}function Ri(t){Ro(t,{graphs:[si,wo,Ws,Jo,no,Oo,ei,mo,co,Ho,Bo,Gs,js,ci],initialSearch:"deck:current",initialDays:365,controller:La,$$legacy:!0})}export{Ri as component};
