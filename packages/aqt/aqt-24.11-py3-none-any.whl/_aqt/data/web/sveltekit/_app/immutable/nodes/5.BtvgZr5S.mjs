var hs=Object.defineProperty;var ms=(c,t,n)=>t in c?hs(c,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[t]=n;var le=(c,t,n)=>ms(c,typeof t!="symbol"?t+"":t,n);import{K as ps,L as ys,M as Cs,N as ws,O as ks,s as Je,d as at,P as Ye,Q as Me,S as Ee,T as Lt,U as or,V as Wt,W as mt,X as ir,Y as pt,Z as _s,_ as bs,$ as Nt,a0 as Ps,a1 as xs,a2 as Ss,a3 as Os,a4 as Ts}from"../chunks/backend.AWOyeTAw.mjs";import{l as As,w as Rs,a as Ds,b as Is}from"../chunks/utils.BDX8kQtd.mjs";import{w as Oe,r as Ls,g as Ke,a as Ns}from"../chunks/index.BB25h7Qo.mjs";import{c as ur}from"../chunks/cloneDeep.CWcHdBXg.mjs";import{i as cr,a as Es,S as Ms}from"../chunks/Select.3s1_omuX.mjs";import{D as Ie,a as d,F as ee,d as q,e as J,r as j,s as a,n as Vs,t as K,M as Ws}from"../chunks/disclose-version.CXWUuFGG.mjs";import{p as de,m as N,ag as Ve,b as $e,g as r,U as Fs,R as Bt,T as js,t as E,l as oe,a as Re,s as k,N as He,V as Ft,ah as ye,E as b,a0 as ne}from"../chunks/runtime.BJSnJeWl.mjs";import{b as yt}from"../chunks/this.C9pg2j_S.mjs";import{i as ge}from"../chunks/lifecycle.DW1_rEFA.mjs";import{p as M,i as we,s as Er}from"../chunks/props.fkJSEmZ6.mjs";import{s as Hs,a as jt,c as Mr,o as Gt,b as Bs}from"../chunks/index-client.D9hOaSri.mjs";import{c as be,C as Gs}from"../chunks/Container.CxVXZ9-Q.mjs";import{I as zs,b as Se}from"../chunks/IconButton.DVHuyWt4.mjs";import{s as ke,a as ce,b as Xe,m as Z}from"../chunks/store.CAPRemx4.mjs";import{cd as Vr,v as je,ce as Ht,ca as Wr,aq as wt,cf as zt,cg as qs,ch as Qs,t as ht,ci as Us,cj as Ks,ck as dr,cl as Ys,cm as $r,cn as Js,co as Xs,cp as Zs,cq as ea,cr as ta,cs as ra,ct as sa,cu as aa,cv as na,cw as la,cx as oa,cy as ia,cz as ua,cA as gr,cB as ca,cC as da,cD as $a,cE as ga,cF as fr,cG as fa,cH as va,cI as ha,cJ as ma,cK as pa,cL as ya,cM as Ca,cN as wa,cO as ka,cP as _a,cQ as Fr,cR as ba,cS as Pa,cT as xa,cU as Sa,cV as Oa,cW as Ta,cX as Aa,cY as Ra,cZ as Da,c_ as Ia,c$ as La,d0 as Na,d1 as Ea,d2 as Ma,d3 as Va,d4 as Wa,d5 as Fa,d6 as ja,d7 as Ha,d8 as Ba,d9 as Ga,da as za,db as qa,dc as Qa,dd as Ua,de as Ka,df as Ya,dg as Ja,dh as Xa,di as Za,dj as en,dk as tn,dl as rn,dm as sn,dn as an,dp as nn,dq as vr,dr as ln,ds as on,dt as un,du as cn,dv as dn,dw as $n,dx as gn,dy as hr,dz as fn,dA as vn,dB as hn,dC as mn,dD as pn,dE as jr,dF as Hr,dG as Br,dH as yn,dI as Cn,dJ as wn,dK as kn,dL as _n,q as vt,dM as bn,dN as Pn,dO as xn,dP as Sn,dQ as On,dR as bt,dS as mr,dT as pr,dU as Tn,dV as An,dW as Rn,dX as Dn,dY as In,dZ as Ln,d_ as Nn,d$ as yr,e0 as En,e1 as Mn,e2 as Vn,e3 as Wn,e4 as Fn,e5 as jn,e6 as Hn,e7 as Bn,e8 as Gn,e9 as zn,ea as qn,eb as Cr,ec as Qn,ed as Un,ee as Gr,ef as zr,eg as Kn,eh as Et,ei as Yn,ej as Jn,ek as qr,el as Xn,em as Zn,en as Mt,eo as el,ep as tl,eq as rl,er as sl,es as al,et as Qr,eu as nl,ev as ll,ew as ol,ex as il,ey as ul,ez as cl,eA as dl,eB as $l,eC as gl,U as fl,eD as vl,eE as hl,eF as ml,eG as pl,eH as yl,eI as Cl,eJ as wl,eK as kl,eL as _l,eM as Ur,eN as wr,eO as bl,eP as Pl,eQ as xl,eR as Sl,eS as Ol,eT as Tl,eU as Al,eV as Rl,eW as Dl,eX as Il,eY as Ll,eZ as kr,e_ as Nl,e$ as El,f0 as Ml,f1 as Vl,f2 as Wl,f3 as Fl,f4 as jl,f5 as _r}from"../chunks/runtime-require.AM6bqlff.mjs";import{R as Ce}from"../chunks/Row.QzSAT3Up.mjs";import{e as qt,i as Kr,p as Hl}from"../chunks/theme.swshwi0b.mjs";import{T as Fe}from"../chunks/TitledContainer.DaKOttrm.mjs";import{s as G,e as he}from"../chunks/render.CQvFnAiW.mjs";import{C as nt,R as kt,H as ue,c as Te,a as X,b as Be,S as Le,E as qe,M as Bl}from"../chunks/EnumSelectorRow.DYzOtuwH.mjs";import{d as Gl,W as zl,P as ql,D as ft,t as Ql}from"../chunks/Badge.WCeL609F.mjs";import{a as St}from"../chunks/input.BFdbOG1j.mjs";import{I as xt,aa as Ul,H as Kl,e as br,f as Yr,ab as Yl,S as Jl,g as Xl,p as Zl}from"../chunks/Shortcut.C_u0IeGk.mjs";import{C as Ze}from"../chunks/Col.F7thcJOB.mjs";import{m as Jr}from"../chunks/context-keys.Dbye-yJ_.mjs";import{L as eo,S as to}from"../chunks/LabelButton.B36pBGCM.mjs";import{t as Pr,s as xr}from"../chunks/index.DPGbUxyT.mjs";import{r as Pt}from"../chunks/progress.C31K7zWr.mjs";import{y as Sr,z as Or,A as Tr,C as ro,B as so,D as ao,E as no,H as lo,F as oo,G as io,b as uo,I as co,K as $o,J as go,N as fo,L as vo}from"../chunks/HoverColumns.CgqAdONj.mjs";import{t as Ar,b as We,c as ho,u as mo,d as po}from"../chunks/time.ByZTkmk8.mjs";import{t as yo}from"../chunks/time.BBIwGFMC.mjs";import{I as Co,i as wo,c as ko,C as _o,T as bo}from"../chunks/TableData.RMa7t8lt.mjs";import{a as Po,c as xo}from"../chunks/bridgecommand.Du5FUFKY.mjs";function So(c,t,...n){return Oo(c,wo,t,n)}function Oo(c,t,n,e){return function s(l,h){if(h>=e.length)return n(l);const i=new Co,o=e[h++];let u=-1;for(const C of l){const y=o(C,++u,l),$=i.get(y);$?$.push(C):i.set(y,[C])}for(const[C,y]of i)i.set(C,s(y,h));return t(i)}(c,0)}const To=ko("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");class Ao{constructor(t,n){le(this,"currentConfig");le(this,"currentAuxData");le(this,"configList");le(this,"cardStateCustomizer");le(this,"currentDeck");le(this,"deckLimits");le(this,"defaults");le(this,"addonComponents");le(this,"newCardsIgnoreReviewLimit");le(this,"applyAllParentLimits");le(this,"fsrs");le(this,"fsrsReschedule",Oe(!1));le(this,"daysSinceLastOptimization");le(this,"currentPresetName");le(this,"targetDeckId");le(this,"configs");le(this,"selectedIdx");le(this,"configListSetter");le(this,"modifiedConfigs",new Set);le(this,"removedConfigs",[]);le(this,"schemaModified");le(this,"_presetAssignmentsChanged",!1);var e,s;this.targetDeckId=t,this.currentDeck=n.currentDeck,this.defaults=n.defaults.config,this.configs=n.allConfig.map(l=>({config:l.config,useCount:l.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(l=>l.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=Oe(n.cardStateCustomizer),this.deckLimits=Oe((s=(e=n.currentDeck)==null?void 0:e.limits)!=null?s:Do()),this.newCardsIgnoreReviewLimit=Oe(n.newCardsIgnoreReviewLimit),this.applyAllParentLimits=Oe(n.applyAllParentLimits),this.fsrs=Oe(n.fsrs),this.daysSinceLastOptimization=Oe(n.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=Oe(this.getCurrentConfig()),this.currentAuxData=Oe(this.getCurrentAuxData()),this.currentPresetName=Oe(this.configs[this.selectedIdx].config.name),this.configList=Ls(this.getConfigList(),l=>{this.configListSetter=l}),this.schemaModified=n.schemaModified,this.addonComponents=Oe([]),Ke(this.configList),this.currentConfig.subscribe(l=>this.onCurrentConfigChanged(l)),this.currentAuxData.subscribe(l=>this.onCurrentAuxDataChanged(l))}setCurrentIndex(t){this.selectedIdx=t,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList()}getCurrentName(){return this.configs[this.selectedIdx].config.name}setCurrentName(t){if(this.configs[this.selectedIdx].config.name===t)return;const n=this.ensureNewNameUnique(t),e=this.configs[this.selectedIdx].config;e.name=n,e.id&&this.modifiedConfigs.add(e.id),this.sortConfigs(),this.updateConfigList()}addConfig(t){this.addConfigFrom(t,this.defaults)}cloneConfig(t){this.addConfigFrom(t,this.configs[this.selectedIdx].config.config)}addConfigFrom(t,n){const e=this.ensureNewNameUnique(t),l={config:new ps({id:0n,name:e,config:new ys(ur(n))}),useCount:0};this.configs.push(l),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const t=this.configs[this.selectedIdx].config.id;if(t===1n)throw Error("can't remove default config");t!==0n&&(this.removedConfigs.push(t),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1),this.selectedIdx=Math.max(0,this.selectedIdx-1),this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList()}dataForSaving(t){const e=[...this.configs.map(s=>s.config).filter((s,l)=>l!==this.selectedIdx&&(s.id===0n||this.modifiedConfigs.has(s.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:e,mode:t,cardStateCustomizer:Ke(this.cardStateCustomizer),limits:Ke(this.deckLimits),newCardsIgnoreReviewLimit:Ke(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Ke(this.applyAllParentLimits),fsrs:Ke(this.fsrs),fsrsReschedule:Ke(this.fsrsReschedule)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(t){await Cs(this.dataForSaving(t))}onCurrentConfigChanged(t){const n=this.configs[this.selectedIdx].config;cr(t,n.config)||(n.config=t,n.id&&this.modifiedConfigs.add(n.id))}onCurrentAuxDataChanged(t){const n=this.getCurrentAuxData();cr(n,t)||this.currentConfig.update(e=>{const s=new TextEncoder().encode(JSON.stringify(t));return e.other=s,e})}ensureNewNameUnique(t){return this.configs.findIndex(e=>e.config.name===t)!==-1?t+(new Date().getTime()/1e3).toFixed(0):t}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var t;(t=this.configListSetter)==null||t.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return ur(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const t=this.configs[this.selectedIdx].config.config;return Ro(t.other)}sortConfigs(){const t=this.configs[this.selectedIdx].config.name;this.configs.sort((n,e)=>As(n.config.name,e.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(n=>n.config.name==t)}getConfigList(){return this.configs.map((n,e)=>{const s=n.useCount+(e===this.selectedIdx?1:0);return{name:n.config.name,current:e===this.selectedIdx,idx:e,useCount:s}})}isModified(){return this.removedConfigs.length>0||this.modifiedConfigs.size>0}}function Ro(c){if(!c.length)return{};let t;try{t=JSON.parse(new TextDecoder().decode(c))}catch{return console.log("invalid json in deck config"),{}}return t.constructor!==Object?(console.log("invalid object in deck config"),{}):t}function Do(){return new ws({})}class Ue{constructor(t,n,e,s,l){le(this,"title");le(this,"value");le(this,"setter");le(this,"disabledValue");le(this,"startValue");le(this,"initialValue");this.title=t,this.value=this.initialValue=n,this.setter=e,this.disabledValue=s,this.startValue=l}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(t){var n,e;this.value=(e=(n=this.value)!=null?n:this.startValue)!=null?e:t,this.setter(this.value)}setValue(t){this.value=t,this.setter(t)}}const Io=async({params:c})=>{const t=Number(c.deckId),n=BigInt(t),e=await ks({did:n});return{state:new Ao(BigInt(n),e)}},$c=Object.freeze(Object.defineProperty({__proto__:null,load:Io},Symbol.toStringTag,{value:"Module"}));Vr("svelte",Hs);Vr("svelte/store",Ns);function Lo(c,t){de(t,!1);const n=ke(),e=()=>ce(r(h),"$components",n),s=()=>ce(i,"$auxData",n);let l=M(t,"state");const h=N(l().addonComponents),i=l().currentAuxData;ge();var o=Ie(),u=ee(o);we(u,()=>e().length,C=>{Fe(C,{title:"Add-ons",children:(y,$)=>{var D=Ie(),S=ee(D);qt(S,1,e,Kr,(_,w,T)=>{var p=Ie(),H=ee(p);jt(H,()=>Ve(w).component,(I,F)=>{F(I,Er({get data(){return s()},set data(L){Xe(i,L)}},()=>Ve(w),{$$legacy:!0}))}),d(_,p)}),d(y,D)},$$slots:{default:!0},$$legacy:!0})}),d(c,o),$e()}function Vt(c,t){let n,e;if(t instanceof Element){if(n=t,e=Array.prototype.indexOf.call(c,n),e<0)return null}else if(typeof t=="string"){const s=c.namedItem(t);if(!s||(n=s,e=Array.prototype.indexOf.call(c,n),e<0))return null}else if(t<0){e=c.length+t;const s=c.item(e);if(!s)return null;n=s}else{e=t;const s=c.item(e);if(!s)return null;n=s}return[n,e]}class No{constructor(t){le(this,"parent");this.parent=t}insertElement(t,n){const e=Vt(this.parent.children,n);if(!e)return-1;const[s,l]=e;return this.parent.insertBefore(t,s[0]),l}appendElement(t,n){var i;const e=Vt(this.parent.children,n);if(!e)return-1;const[s,l]=e,h=(i=s.nextElementSibling)!=null?i:null;return this.parent.insertBefore(t,h),l+1}updateElement(t,n){const e=Vt(this.parent.children,n);return e?(t(...e),!0):!1}}function Eo(c){return new No(c)}function Mo(c){return c.nodeType===Node.ELEMENT_NODE}function Rr(){let c;return[new Promise(n=>c=n),c]}function Vo(c){function t(e){Fs(c,e)}return[{get(){return Bt(c)},available(){return js(c)}},t]}function Wo(c,t,n,e){const s=Oe([]);s.subscribe(t);function l(S,_){s.update(w=>(w.splice(S,0,_),w))}const[h,i]=Rr(),o=h.then(Eo),u=Oe([]);async function C(S,_){const[w,T]=Rr(),p=await o,H=c();function I(g){return!S.id||g.id===S.id}async function F(g,V){for(const P of g)for(const m of P.addedNodes){if(!Mo(m)||!I(m))continue;const x=_(m,p);return x>=0&&l(x,H),T(void 0),V.disconnect()}}new MutationObserver(F).observe(p.parent,{childList:!0});const f={component:S,hostProps:H};return u.update(g=>(g.push(f),g)),await w,{destroy(){u.update(g=>(Es(g,f),g))}}}async function y(S,_){return(await o).updateElement((T,p)=>{s.update(H=>(H[p]=S(H[p]),H))},_)}const $=e({addComponent:C,updateProps:y});function D(){const S=c();return s.update(_=>(_.push(S),_)),S}return n({getProps:D}),{dynamicSlotted:u,resolveSlotContainer:i,slotsInterface:$}}function Fo(){return{detach:Oe(!1)}}function jo({addComponent:c,updateProps:t}){function n(i,o=0){return c(i,(u,C)=>C.insertElement(u,o))}function e(i,o=-1){return c(i,(u,C)=>C.appendElement(u,o))}function s(i){return t(o=>(o.detach.set(!1),o),i)}function l(i){return t(o=>(o.detach.set(!0),o),i)}function h(i){return t(o=>(o.detach.update(u=>!u),o),i)}return{insert:n,append:e,show:s,hide:l,toggle:h}}const Ho=Symbol("dynamicSlotting"),[Dr,Bo]=Vo(Ho);var Go=q('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function Ge(c,t){de(t,!1);const n=ke(),e=()=>ce(r(D),"$dynamicSlotted",n);function s(p){return p}let l=M(t,"slotHost"),h=M(t,"createProps",0,Fo),i=M(t,"updatePropsList",0,s),o=M(t,"setSlotHostContext",0,Bo),u=M(t,"createInterface",0,jo);const C=Wo(h(),i(),o(),u()),y=C.slotsInterface,$=C.resolveSlotContainer,D=N(C.dynamicSlotted);let S=M(t,"api");Object.assign(S(),y),ge();var _=Go(),w=J(_);Je(w,at(t),{});var T=a(a(w,!0));qt(T,7,e,(p,H)=>Ve(Ve(p)).component.id,(p,H,I)=>{let F=()=>Ve(Ve(H)).component,L=()=>Ve(Ve(H)).hostProps;var f=Ie(),g=ee(f);jt(g,l,(V,P)=>{P(V,{get id(){return F().id},get hostProps(){return L()},children:(m,O)=>{var x=Ie(),A=ee(x);jt(A,()=>F().component,(R,B)=>{B(R,Er(()=>F().props,{$$legacy:!0}))}),d(m,x)},$$slots:{default:!0},$$legacy:!0})}),d(p,f)}),j(_),Gl(_,p=>$(p)),d(c,_),$e()}var zo=q('<div class="item svelte-u5rx4p"><!></div>');function U(c,t){var u;de(t,!1);const n=ke(),e=()=>ce(h,"$detach",n);let s=M(t,"id",0,void 0),l=M(t,"hostProps",0,void 0);Dr.available()||console.log("Item: should always have a slotHostContext");const{detach:h}=(u=l())!=null?u:Dr.get().getProps();ge();var i=zo(),o=J(i);we(o,()=>!e(),C=>{var y=Ie(),$=ee(y);Je($,at(t),{}),d(C,y)}),j(i),E(()=>je(i,"id",s())),d(c,i),$e()}var qo=q(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function Ct(c,t){de(t,!1);let n=M(t,"title");ge(),Vs();var e=qo(),s=ee(e,!0),l=a(s);E(()=>je(l,"title",Ht()));var h=J(l);xt(h,{icon:Ul,$$legacy:!0}),j(l),E(()=>{var i;return G(s,`${(i=n())!=null?i:""} `)}),d(c,e),$e()}var Qo=q('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),Uo=q('<div class="m-2"><!></div>');function Ko(c,t){let n=M(t,"value",4),e=M(t,"title");var s=Uo(),l=J(s);nt(l,{children:(h,i)=>{var o=Qo(),u=J(o),C=J(u);Ct(C,{get title(){return e()},$$legacy:!0}),j(u);var y=a(a(u,!0)),$=J(y);Wr($),j(y),j(o),St($,n,D=>n(D)),d(h,o)},$$slots:{default:!0,revert:(h,i)=>{kt(h,{slot:"revert",get value(){return n()},set value(o){n(o)},defaultValue:"",$$legacy:!0})}},$$legacy:!0}),j(s),d(c,s)}var Yo=q('<div class="spinner decrement svelte-1dakg3f" tabindex="-1" role="button"><!></div> <div class="spinner increment svelte-1dakg3f" tabindex="-1" role="button"><!></div>',1),Jo=q('<div class="spin-box svelte-1dakg3f"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-1dakg3f"> <!></div>');function Xr(c,t){de(t,!1);let n=M(t,"value",4),e=M(t,"step",0,1),s=M(t,"min",0,1),l=M(t,"max",0,9999),h=N(),i=N(!1);function o(L){Number.isNaN(L)||n(Math.min(l(),Math.max(s(),L))),Ft().then(()=>ye(h,r(h).value=r(C)))}function u(L){return Math.floor(L)===L?0:L.toString().split(".")[1].length||0}let C=N();function y(){o(parseFloat(this.value))}function $(L){r(i)&&(o(n()+(L.deltaY<0?e():-e())),L.preventDefault())}function D(L){o(n()+L),r(w)&&setTimeout(()=>D(L),T)}const S=[1500,1250,1e3,750,500,250];async function _(L){k(w,!0),T=128,k(p,setTimeout(L,250));for(const f of S)T=await new Promise(g=>setTimeout(()=>g(r(w)?T/2:128),f))}let w=N(!1),T,p=N();oe(()=>(He(n()),He(e())),()=>{k(C,n().toFixed(u(e())))}),Re(),ge();var H=Jo(),I=J(H);yt(I,L=>k(h,L),()=>r(h)),wt(I);var F=a(a(I,!0));we(F,Kl,L=>{var f=Yo(),g=ee(f);E(()=>je(g,"title",qs()));var V=J(g);br(V,{children:(O,x)=>{xt(O,{icon:Yr,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(g);var P=a(a(g,!0));E(()=>je(P,"title",Qs()));var m=J(P);br(m,{children:(O,x)=>{xt(O,{icon:Yl,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(P),E(()=>{ht(g,"active",n()>s()),ht(P,"active",n()<l())}),he("click",g,()=>{r(h).focus(),n()>s()&&D(-e())},!1),he("mousedown",g,()=>_(()=>{n()>s()&&D(-e())}),!1),he("mouseup",g,()=>{clearTimeout(r(p)),k(w,!1)},!1),he("click",P,()=>{r(h).focus(),n()<l()&&D(e())},!1),he("mousedown",P,()=>_(()=>{n()<l()&&D(e())}),!1),he("mouseup",P,()=>{clearTimeout(r(p)),k(w,!1)},!1),d(L,f)}),j(H),E(()=>{je(I,"min",s()),je(I,"max",l()),je(I,"step",e()),zt(I,r(C))}),he("wheel",H,$,!1,!0),he("blur",I,y,!1),he("focusin",I,()=>k(i,!0),!1),he("focusout",I,()=>k(i,!1),!1),d(c,H),$e()}var Xo=q('<div style="display: contents"><!></div> <div style="display: contents"><!></div>',1),Zo=q('<div style="display: contents"><!></div>',1);function ze(c,t){let n=M(t,"value",4),e=M(t,"defaultValue"),s=M(t,"min",0,0),l=M(t,"max",0,9999),h=M(t,"step",0,.01);var i=Zo(),o=ee(i);be(o,()=>({"--cols":13})),Ce(o.lastChild,{children:(u,C)=>{var y=Xo(),$=ee(y);be($,()=>({"--col-size":7})),Ze($.lastChild,{breakpoint:"xs",children:(S,_)=>{var w=Ie(),T=ee(w);Je(T,at(t),{}),d(S,w)},$$slots:{default:!0},$$legacy:!0}),j($);var D=a(a($,!0));be(D,()=>({"--col-size":6})),Ze(D.lastChild,{breakpoint:"xs",children:(S,_)=>{nt(S,{children:(w,T)=>{Xr(w,{get value(){return n()},set value(p){n(p)},get min(){return s()},get max(){return l()},get step(){return h()},$$legacy:!0})},$$slots:{default:!0,revert:(w,T)=>{kt(w,{slot:"revert",get value(){return n()},set value(p){n(p)},get defaultValue(){return e()},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(D),d(u,y)},$$slots:{default:!0},$$legacy:!0}),j(o),d(c,i)}var ei=q("<!> <!>",1),ti=q('<div style="display: contents"><!></div> <div style="display: contents"><!></div>',1),ri=q('<div style="display: contents"><!></div>',1);function Ae(c,t){let n=M(t,"value",4),e=M(t,"defaultValue"),s=M(t,"min",0,0),l=M(t,"max",0,9999);var h=ri(),i=ee(h);be(i,()=>({"--cols":13})),Ce(i.lastChild,{children:(o,u)=>{var C=ti(),y=ee(C);be(y,()=>({"--col-size":7})),Ze(y.lastChild,{breakpoint:"xs",children:(D,S)=>{var _=Ie(),w=ee(_);Je(w,at(t),{}),d(D,_)},$$slots:{default:!0},$$legacy:!0}),j(y);var $=a(a(y,!0));be($,()=>({"--col-size":6})),Ze($.lastChild,{breakpoint:"xs",children:(D,S)=>{Ce(D,{class:"flex-grow-1",children:(_,w)=>{var I;var T=ei(),p=ee(T);Je(p,(I=t.$$slots)==null?void 0:I.tabs,{});var H=a(a(p,!0));nt(H,{children:(F,L)=>{Xr(F,{get value(){return n()},set value(f){n(f)},get min(){return s()},get max(){return l()},$$legacy:!0})},$$slots:{default:!0,revert:(F,L)=>{kt(F,{slot:"revert",get value(){return n()},set value(f){n(f)},get defaultValue(){return e()},$$legacy:!0})}},$$legacy:!0}),d(_,T)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j($),d(o,C)},$$slots:{default:!0},$$legacy:!0}),j(i),d(c,h)}var si=q('<input type="date" class="svelte-ora9c4">'),ai=q('<div style="display: contents"><!></div> <div style="display: contents"><!></div>',1),ni=q('<div style="display: contents"><!></div>',1),li=q("<div><!></div>");function oi(c,t){de(t,!1);let n=M(t,"date",4);oe(()=>He(n()),()=>{n(n()?n():"1970-01-01")}),Re();var e=li(),s=J(e);nt(s,{children:(l,h)=>{var i=ni(),o=ee(i);be(o,()=>({"--cols":13})),Ce(o.lastChild,{children:(u,C)=>{var y=ai(),$=ee(y);be($,()=>({"--col-size":7})),Ze($.lastChild,{breakpoint:"xs",children:(S,_)=>{var w=Ie(),T=ee(w);Je(T,at(t),{}),d(S,w)},$$slots:{default:!0},$$legacy:!0}),j($);var D=a(a($,!0));be(D,()=>({"--col-size":6})),Ze(D.lastChild,{breakpoint:"xs",children:(S,_)=>{var w=si();wt(w),St(w,n,T=>n(T)),d(S,w)},$$slots:{default:!0},$$legacy:!0}),j(D),d(u,y)},$$slots:{default:!0},$$legacy:!0}),j(o),d(l,i)},$$slots:{default:!0},$$legacy:!0}),j(e),d(c,e),$e()}var ii=q("<!> <!> <!> <!> <!>",1),ui=q("<!> <!>",1),ci=q("<!> <!> <!>",1);function di(c,t){de(t,!1);const n=ke(),e=()=>ce(y,"$fsrs",n),s=()=>ce(o,"$config",n),l=()=>ce(C,"$cardStateCustomizer",n);let h=M(t,"state"),i=M(t,"api");const o=h().currentConfig,u=h().defaults,C=h().cardStateCustomizer,y=h().fsrs,$={maximumInterval:{title:Us(),help:Ks(),url:ue.DeckOptions.maximumInterval},historicalRetention:{title:dr(),help:Ys(),sched:Te.FSRS},ignoreRevlogsBeforeMs:{title:$r(),help:Js(),sched:Te.FSRS},startingEase:{title:Xs(),help:Zs(),url:ue.DeckOptions.startingEase,sched:Te.SM2},easyBonus:{title:ea(),help:ta(),url:ue.DeckOptions.easyBonus,sched:Te.SM2},intervalModifier:{title:ra(),help:sa(),url:ue.DeckOptions.intervalModifier,sched:Te.SM2},hardInterval:{title:aa(),help:na(),url:ue.DeckOptions.hardInterval,sched:Te.SM2},newInterval:{title:la(),help:oa(),url:ue.DeckOptions.newInterval,sched:Te.SM2},customScheduling:{title:ia(),help:ua(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling"}},D=Object.values($);let S=N(),_=N();function w(p){r(S).show(),r(_).to(p)}ge();var T=ne(()=>gr());Fe(c,{get title(){return r(T)},children:(p,H)=>{Ge(p,{slotHost:U,get api(){return i()},children:(I,F)=>{var L=ci(),f=ee(L);U(f,{children:(P,m)=>{Ae(P,{get value(){return s().maximumReviewInterval},set value(O){Z(o,b(s).maximumReviewInterval=O,b(s))},get defaultValue(){return u.maximumReviewInterval},min:1,max:365*100,children:(O,x)=>{X(O,{$$events:{click:()=>w(Object.keys($).indexOf("maximumInterval"))},children:(A,R)=>{var B=K();E(()=>G(B,$.maximumInterval.title)),d(A,B)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var g=a(a(f,!0));we(g,()=>!e(),P=>{var m=ii(),O=ee(m);U(O,{children:(Y,re)=>{ze(Y,{get value(){return s().initialEase},set value(z){Z(o,b(s).initialEase=z,b(s))},get defaultValue(){return u.initialEase},min:1.31,max:5,children:(z,W)=>{X(z,{$$events:{click:()=>w(Object.keys($).indexOf("startingEase"))},children:(fe,me)=>{var te=K();E(()=>G(te,$.startingEase.title)),d(fe,te)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var x=a(a(O,!0));U(x,{children:(Y,re)=>{ze(Y,{get value(){return s().easyMultiplier},set value(z){Z(o,b(s).easyMultiplier=z,b(s))},get defaultValue(){return u.easyMultiplier},min:1,max:5,children:(z,W)=>{X(z,{$$events:{click:()=>w(Object.keys($).indexOf("easyBonus"))},children:(fe,me)=>{var te=K();E(()=>G(te,$.easyBonus.title)),d(fe,te)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var A=a(a(x,!0));U(A,{children:(Y,re)=>{ze(Y,{get value(){return s().intervalMultiplier},set value(z){Z(o,b(s).intervalMultiplier=z,b(s))},get defaultValue(){return u.intervalMultiplier},min:.5,max:2,children:(z,W)=>{X(z,{$$events:{click:()=>w(Object.keys($).indexOf("intervalModifier"))},children:(fe,me)=>{var te=K();E(()=>G(te,$.intervalModifier.title)),d(fe,te)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var R=a(a(A,!0));U(R,{children:(Y,re)=>{ze(Y,{get value(){return s().hardMultiplier},set value(z){Z(o,b(s).hardMultiplier=z,b(s))},get defaultValue(){return u.hardMultiplier},min:.5,max:1.3,children:(z,W)=>{X(z,{$$events:{click:()=>w(Object.keys($).indexOf("hardInterval"))},children:(fe,me)=>{var te=K();E(()=>G(te,$.hardInterval.title)),d(fe,te)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var B=a(a(R,!0));U(B,{children:(Y,re)=>{ze(Y,{get value(){return s().lapseMultiplier},set value(z){Z(o,b(s).lapseMultiplier=z,b(s))},get defaultValue(){return u.lapseMultiplier},max:1,children:(z,W)=>{X(z,{$$events:{click:()=>w(Object.keys($).indexOf("newInterval"))},children:(fe,me)=>{var te=K();E(()=>G(te,$.newInterval.title)),d(fe,te)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),d(P,m)},P=>{var m=ui(),O=ee(m);ze(O,{get value(){return s().historicalRetention},set value(A){Z(o,b(s).historicalRetention=A,b(s))},get defaultValue(){return u.historicalRetention},min:.5,max:1,children:(A,R)=>{X(A,{$$events:{click:()=>w(Object.keys($).indexOf("historicalRetention"))},children:(B,Y)=>{var re=K();E(()=>G(re,dr())),d(B,re)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var x=a(a(O,!0));U(x,{children:(A,R)=>{oi(A,{get date(){return s().ignoreRevlogsBeforeDate},set date(B){Z(o,b(s).ignoreRevlogsBeforeDate=B,b(s))},children:(B,Y)=>{X(B,{$$events:{click:()=>w(Object.keys($).indexOf("ignoreRevlogsBeforeMs"))},children:(re,z)=>{var W=K();E(()=>G(W,$r())),d(re,W)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),d(P,m)});var V=a(a(g,!0));U(V,{children:(P,m)=>{Ko(P,{get title(){return $.customScheduling.title},get value(){return l()},set value(O){Xe(C,O)},$$events:{click:()=>w(Object.keys($).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),d(I,L)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(p,H)=>{var I=ne(()=>gr());Be(p,{get title(){return r(I)},get url(){return ue.DeckOptions.advanced},slot:"tooltip",get fsrs(){return e()},helpSections:D,$$events:{mount:F=>{k(S,F.detail.modal),k(_,F.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}var $i=q("<!> <!>",1);function gi(c,t){de(t,!1);const n=ke(),e=()=>ce(h,"$config",n);let s=M(t,"state"),l=M(t,"api");const h=s().currentConfig,i=s().defaults,o={disableAutoplay:{title:ca(),help:da()},skipQuestionWhenReplaying:{title:$a(),help:ga()}},u=Object.values(o);let C=N(),y=N();function $(S){r(C).show(),r(y).to(S)}ge();var D=ne(()=>fr());Fe(c,{get title(){return r(D)},children:(S,_)=>{Ge(S,{slotHost:U,get api(){return l()},children:(w,T)=>{var p=$i(),H=ee(p);U(H,{children:(F,L)=>{Le(F,{get value(){return e().disableAutoplay},set value(f){Z(h,b(e).disableAutoplay=f,b(e))},get defaultValue(){return i.disableAutoplay},children:(f,g)=>{X(f,{$$events:{click:()=>$(Object.keys(o).indexOf("disableAutoplay"))},children:(V,P)=>{var m=K();E(()=>G(m,o.disableAutoplay.title)),d(V,m)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var I=a(a(H,!0));U(I,{children:(F,L)=>{Le(F,{get value(){return e().skipQuestionWhenReplayingAnswer},set value(f){Z(h,b(e).skipQuestionWhenReplayingAnswer=f,b(e))},get defaultValue(){return i.skipQuestionWhenReplayingAnswer},children:(f,g)=>{X(f,{$$events:{click:()=>$(Object.keys(o).indexOf("skipQuestionWhenReplaying"))},children:(V,P)=>{var m=K();E(()=>G(m,o.skipQuestionWhenReplaying.title)),d(V,m)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),d(w,p)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(S,_)=>{var w=ne(()=>fr());Be(S,{get title(){return r(w)},get url(){return ue.DeckOptions.audio},slot:"tooltip",helpSections:u,$$events:{mount:T=>{k(C,T.detail.modal),k(y,T.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}function fi(){return[{label:fa(),value:Ye.DECK},{label:va(),value:Ye.DECK_THEN_RANDOM_NOTES},{label:ha(),value:Ye.LOWEST_POSITION},{label:ma(),value:Ye.HIGHEST_POSITION},{label:pa(),value:Ye.RANDOM_NOTES},{label:ya(),value:Ye.RANDOM_CARDS}]}function vi(){return[{label:Ca(),value:Me.TEMPLATE},{label:wa(),value:Me.NO_SORT},{label:ka(),value:Me.TEMPLATE_THEN_RANDOM},{label:_a(),value:Me.RANDOM_NOTE_THEN_TEMPLATE},{label:Fr(),value:Me.RANDOM_CARD}]}function hi(c){return[{label:ba(),value:Ee.DAY},{label:Pa(),value:Ee.DAY_THEN_DECK},{label:xa(),value:Ee.DECK_THEN_DAY},{label:Sa(),value:Ee.INTERVALS_ASCENDING},{label:Oa(),value:Ee.INTERVALS_DESCENDING},{label:c?Ta():Aa(),value:Ee.EASE_ASCENDING},{label:c?Ra():Da(),value:Ee.EASE_DESCENDING},{label:Ia(),value:Ee.RELATIVE_OVERDUENESS},{label:Fr(),value:Ee.RANDOM},{label:La(),value:Ee.ADDED},{label:Na(),value:Ee.REVERSE_ADDED}]}function Ir(){return[{label:Ea(),value:Lt.MIX_WITH_REVIEWS},{label:Ma(),value:Lt.AFTER_REVIEWS},{label:Va(),value:Lt.BEFORE_REVIEWS}]}function mi(){return[{label:Wa(),value:or.SUSPEND},{label:Fa(),value:or.TAG_ONLY}]}function pi(){return[{label:ja(),value:Wt.DUE},{label:Ha(),value:Wt.RANDOM}]}function yi(){return[{label:Ba(),value:mt.BURY_CARD},{label:Ga(),value:mt.ANSWER_AGAIN},{label:za(),value:mt.ANSWER_GOOD},{label:qa(),value:mt.ANSWER_HARD},{label:Qa(),value:mt.SHOW_REMINDER}]}function Ci(){return[{label:Ua(),value:ir.SHOW_ANSWER},{label:Ka(),value:ir.SHOW_REMINDER}]}var wi=q("<!> <!> <!> <!> <!>",1);function ki(c,t){de(t,!1);const n=ke(),e=()=>ce(h,"$config",n);let s=M(t,"state"),l=M(t,"api");const h=s().currentConfig,i=s().defaults,o={secondsToShowQuestion:{title:Ya(),help:Ja()},secondsToShowAnswer:{title:Xa(),help:Za()},waitForAudio:{title:en(),help:tn()},answerAction:{title:rn(),help:sn()},questionAction:{title:an(),help:nn()}},u=Object.values(o);let C=N(),y=N();function $(S){r(C).show(),r(y).to(S)}ge();var D=ne(()=>vr());Fe(c,{get title(){return r(D)},children:(S,_)=>{Ge(S,{slotHost:U,get api(){return l()},children:(w,T)=>{var p=wi(),H=ee(p);U(H,{children:(g,V)=>{ze(g,{get value(){return e().secondsToShowQuestion},set value(P){Z(h,b(e).secondsToShowQuestion=P,b(e))},get defaultValue(){return i.secondsToShowQuestion},step:.1,children:(P,m)=>{X(P,{$$events:{click:()=>$(Object.keys(o).indexOf("secondsToShowQuestion"))},children:(O,x)=>{var A=K();E(()=>G(A,o.secondsToShowQuestion.title)),d(O,A)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var I=a(a(H,!0));U(I,{children:(g,V)=>{ze(g,{get value(){return e().secondsToShowAnswer},set value(P){Z(h,b(e).secondsToShowAnswer=P,b(e))},get defaultValue(){return i.secondsToShowAnswer},step:.1,children:(P,m)=>{X(P,{$$events:{click:()=>$(Object.keys(o).indexOf("secondsToShowAnswer"))},children:(O,x)=>{var A=K();E(()=>G(A,o.secondsToShowAnswer.title)),d(O,A)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var F=a(a(I,!0));U(F,{children:(g,V)=>{Le(g,{get value(){return e().waitForAudio},set value(P){Z(h,b(e).waitForAudio=P,b(e))},get defaultValue(){return i.waitForAudio},children:(P,m)=>{X(P,{$$events:{click:()=>$(Object.keys(o).indexOf("waitForAudio"))},children:(O,x)=>{var A=K();E(()=>G(A,o.waitForAudio.title)),d(O,A)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var L=a(a(F,!0));U(L,{children:(g,V)=>{var P=ne(yi);qe(g,{get value(){return e().answerAction},set value(m){Z(h,b(e).answerAction=m,b(e))},get defaultValue(){return i.answerAction},get choices(){return r(P)},children:(m,O)=>{X(m,{$$events:{click:()=>$(Object.keys(o).indexOf("answerAction"))},children:(x,A)=>{var R=K();E(()=>G(R,o.answerAction.title)),d(x,R)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var f=a(a(L,!0));U(f,{children:(g,V)=>{var P=ne(Ci);qe(g,{get value(){return e().questionAction},set value(m){Z(h,b(e).questionAction=m,b(e))},get defaultValue(){return i.questionAction},get choices(){return r(P)},children:(m,O)=>{X(m,{$$events:{click:()=>$(Object.keys(o).indexOf("questionAction"))},children:(x,A)=>{var R=K();E(()=>G(R,o.questionAction.title)),d(x,R)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),d(w,p)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(S,_)=>{var w=ne(()=>vr());Be(S,{get title(){return r(w)},get url(){return ue.DeckOptions.autoAdvance},slot:"tooltip",helpSections:u,$$events:{mount:T=>{k(C,T.detail.modal),k(y,T.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}var _i=q("<!> <!> <!>",1);function bi(c,t){de(t,!1);const n=ke(),e=()=>ce(h,"$config",n);let s=M(t,"state"),l=M(t,"api");const h=s().currentConfig,i=s().defaults,o=`

`+ln(),u={buryNewSiblings:{title:on(),help:un()+o},buryReviewSiblings:{title:cn(),help:dn()+o},buryInterdayLearningSiblings:{title:$n(),help:gn()+o}},C=Object.values(u);let y=N(),$=N();function D(_){r(y).show(),r($).to(_)}ge();var S=ne(()=>hr());Fe(c,{get title(){return r(S)},children:(_,w)=>{Ge(_,{slotHost:U,get api(){return l()},children:(T,p)=>{var H=_i(),I=ee(H);U(I,{children:(f,g)=>{Le(f,{get value(){return e().buryNew},set value(V){Z(h,b(e).buryNew=V,b(e))},get defaultValue(){return i.buryNew},children:(V,P)=>{X(V,{$$events:{click:()=>D(Object.keys(u).indexOf("buryNewSiblings"))},children:(m,O)=>{var x=K();E(()=>G(x,u.buryNewSiblings.title)),d(m,x)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var F=a(a(I,!0));U(F,{children:(f,g)=>{Le(f,{get value(){return e().buryReviews},set value(V){Z(h,b(e).buryReviews=V,b(e))},get defaultValue(){return i.buryReviews},children:(V,P)=>{X(V,{$$events:{click:()=>D(Object.keys(u).indexOf("buryReviewSiblings"))},children:(m,O)=>{var x=K();E(()=>G(x,u.buryReviewSiblings.title)),d(m,x)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var L=a(a(F,!0));U(L,{children:(f,g)=>{Le(f,{get value(){return e().buryInterdayLearning},set value(V){Z(h,b(e).buryInterdayLearning=V,b(e))},get defaultValue(){return i.buryInterdayLearning},children:(V,P)=>{X(V,{$$events:{click:()=>D(Object.keys(u).indexOf("buryInterdayLearningSiblings"))},children:(m,O)=>{var x=K();E(()=>G(x,u.buryInterdayLearningSiblings.title)),d(m,x)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),d(T,H)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(_,w)=>{var T=ne(()=>hr());Be(_,{get title(){return r(T)},get url(){return ue.Studying.siblingsAndBurying},slot:"tooltip",helpSections:C,$$events:{mount:p=>{k(y,p.detail.modal),k($,p.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}function Pi(){}var xi=q('<hr class="dropdown-divider">');function Si(c){var t=xi();d(c,t)}var Oi=q('<div class="save svelte-ymxw35"> </div>'),Ti=q('<div style="display: contents"><!></div>',1),Ai=q("<!> <!> <!> <!> <!> <!> <!>",1),Ri=q('<div class="d-flex"><div style="display: contents"><!></div> <!> <!></div>');function Di(c,t){de(t,!1);const n=window.getComputedStyle(document.body).direction=="rtl",e=Mr();let s=M(t,"state");async function l(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await Ft()}async function h(){if(await Ft(),s().defaultConfigSelected()){alert(fn());return}const _=(s().removalWilLForceFullSync()?vn()+" ":"")+hn({name:s().getCurrentName()});if(confirm(Rs(_)))try{s().removeCurrentConfig(),e("remove")}catch(w){alert(w)}}async function i(_){if(await l(),_===pt.COMPUTE_ALL_WEIGHTS&&!Ke(s().fsrs)){alert(mn());return}s().save(_)}const o="Control+Enter";let u=N(!1);ge();var C=Ri(),y=J(C),$=ne(()=>Xl(o));be(y,()=>({"--border-left-radius":n?"0":"var(--border-radius)","--border-right-radius":n?"var(--border-radius)":"0"})),eo(y.lastChild,{primary:!0,get tooltip(){return r($)},$$events:{click:()=>i(pt.NORMAL)},children:(_,w)=>{var T=Oi(),p=J(T);E(()=>G(p,pn())),j(T),d(_,T)},$$slots:{default:!0},$$legacy:!0}),j(y);var D=a(a(y,!0));Jl(D,{keyCombination:o,$$events:{action:()=>i(pt.NORMAL)},$$legacy:!0});var S=a(a(D,!0));zl(S,{get show(){return r(u)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>k(u,!1)},$$slots:{reference:(_,w)=>{var T=Ti(),p=ee(T);be(p,()=>({"--border-right-radius":n?"0":"var(--border-radius)","--border-left-radius":n?"var(--border-radius)":"0"})),zs(p.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>k(u,!r(u))},children:(H,I)=>{xt(H,{icon:Yr,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(p),d(_,T)},floating:(_,w)=>{ql(_,{slot:"floating",children:(T,p)=>{var H=Ai(),I=ee(H);ft(I,{$$events:{click:()=>e("add")},children:(m,O)=>{var x=K();E(()=>G(x,jr())),d(m,x)},$$slots:{default:!0},$$legacy:!0});var F=a(a(I,!0));ft(F,{$$events:{click:()=>e("clone")},children:(m,O)=>{var x=K();E(()=>G(x,Hr())),d(m,x)},$$slots:{default:!0},$$legacy:!0});var L=a(a(F,!0));ft(L,{$$events:{click:()=>e("rename")},children:(m,O)=>{var x=K();E(()=>G(x,Br())),d(m,x)},$$slots:{default:!0},$$legacy:!0});var f=a(a(L,!0));ft(f,{$$events:{click:h},children:(m,O)=>{var x=K();E(()=>G(x,yn())),d(m,x)},$$slots:{default:!0},$$legacy:!0});var g=a(a(f,!0));Si(g);var V=a(a(g,!0));ft(V,{$$events:{click:()=>i(pt.APPLY_TO_CHILDREN)},children:(m,O)=>{var x=K();E(()=>G(x,Cn())),d(m,x)},$$slots:{default:!0},$$legacy:!0});var P=a(a(V,!0));ft(P,{$$events:{click:()=>i(pt.COMPUTE_ALL_WEIGHTS)},children:(m,O)=>{var x=K();E(()=>G(x,wn())),d(m,x)},$$slots:{default:!0},$$legacy:!0}),d(T,H)},$$slots:{default:!0},$$legacy:!0})}},$$legacy:!0}),j(C),d(c,C),$e()}var Ii=q('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content svelte-18qg9px"><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" class="btn-close svelte-18qg9px" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text" class="form-control svelte-18qg9px"></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function Li(c,t){de(t,!1);const n=ke(),e=()=>ce(Hl,"$pageTheme",n),s=N();let l=M(t,"title"),h=M(t,"prompt"),i=M(t,"initialValue",0,""),o=M(t,"onOk");const u=Math.random().toString(36).substring(2),C=Bt(Jr);let y=N(),$,D=N();function S(){o()(r(D).value),$.hide(),k(s,i())}function _(){$.hide(),k(s,i())}function w(){r(D).focus(),p(!0)}function T(){p(!1)}const{set:p,remove:H}=Ql(_);Gt(()=>{r(y).addEventListener("shown.bs.modal",w),r(y).addEventListener("hidden.bs.modal",T),$=new Bl(r(y),{keyboard:!1}),C.set(u,$)}),Bs(()=>{H(),r(y).removeEventListener("shown.bs.modal",w),r(y).removeEventListener("hidden.bs.modal",T)}),oe(()=>He(i()),()=>{k(s,i())}),Re(),ge();var I=Ii();yt(I,W=>k(y,W),()=>r(y));var F=J(I),L=J(F),f=J(L),g=J(f),V=J(g);j(g);var P=a(a(g,!0));j(f);var m=a(a(f,!0)),O=J(m),x=J(O),A=J(x),R=J(A);j(A);var B=a(a(A,!0));yt(B,W=>k(D,W),()=>r(D)),wt(B),j(x),j(O),j(m);var Y=a(a(m,!0)),re=J(Y),z=a(a(re,!0));return j(Y),j(L),j(F),j(I),E(()=>{var W;ht(L,"default-colors",e().isDark),G(V,l()),ht(P,"invert",e().isDark),G(R,`${(W=h())!=null?W:""}:`),ht(B,"nightMode",e().isDark)}),he("submit",O,Zl(S),!1),St(B,()=>r(s),W=>k(s,W)),he("click",re,_,!1),he("click",z,S,!1),d(c,I),Se(t,"modalKey",u),$e({modalKey:u})}var Ni=q('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),Ei=q('<!> <div style="display: contents"><!></div>',1);function Mi(c,t){de(t,!1);const n=ke(),e=()=>ce(i,"$configList",n),s=N(),l=N();let h=M(t,"state");const i=h().configList,o=Mr(),u=()=>o("presetchange");function C(m){const O=kn({decks:m.useCount});return`${m.name} (${O})`}function y(m){h().setCurrentIndex(m.detail.value),u()}function $(m){const O=m.trim();O.length&&(h().addConfig(O),u())}function D(m){const O=m.trim();O.length&&(h().cloneConfig(O),u())}function S(m){h().setCurrentName(m)}const _=Bt(Jr);let w=N(),T=N(""),p=N(""),H=N(Pi);function I(){k(p,jr()),k(H,$),k(T,""),_.get(r(w)).show()}function F(){k(p,Hr()),k(H,D),k(T,h().getCurrentName()),_.get(r(w)).show()}function L(){k(p,Br()),k(H,S),k(T,h().getCurrentName()),_.get(r(w)).show()}oe(()=>e(),()=>{k(s,e().findIndex(m=>m.current))}),oe(()=>(e(),r(s)),()=>{k(l,C(e()[r(s)]))}),Re(),ge();var f=Ei(),g=ee(f),V=ne(()=>_n());Li(g,{get title(){return r(p)},get prompt(){return r(V)},get initialValue(){return r(T)},get onOk(){return r(H)},get modalKey(){return r(w)},set modalKey(m){k(w,m)},$$legacy:!0});var P=a(a(g,!0));be(P,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),to(P.lastChild,{breakpoint:"sm",children:(m,O)=>{var x=Ni(),A=J(x);Ms(A,{class:"flex-grow-1 mr1",get value(){return r(s)},set value(B){k(s,B)},get label(){return r(l)},get list(){return e()},parser:B=>({content:C(B),value:B.idx}),$$events:{change:y},$$legacy:!0});var R=a(a(A,!0));Di(R,{get state(){return h()},$$events:{add:I,clone:F,rename:L,remove:u},$$legacy:!0}),j(x),d(m,x)},$$slots:{default:!0},$$legacy:!0}),j(P),d(c,f),$e()}var Vi=q('<li class="svelte-1ibi4j8"><button class="svelte-1ibi4j8"> </button></li>'),Wi=q('<ul class="svelte-1ibi4j8"></ul>');function Lr(c,t){de(t,!1);let n=M(t,"tabs"),e=M(t,"value",4),s=N(l());function l(){const u=n().slice().reverse().findIndex(C=>C.value!==null);return u===-1?0:n().length-u-1}function h(u){for(const[C,y]of n().entries())u===C?y.enable(e()):u>C?y.reset():y.disable()}const i=u=>()=>k(s,u);oe(()=>r(s),()=>{h(r(s))}),oe(()=>(He(n()),r(s)),()=>{var u;e((u=n()[r(s)].value)!=null?u:0)}),oe(()=>(He(n()),r(s),He(e())),()=>{n()[r(s)].setValue(e())}),Re(),ge();var o=Wi();qt(o,9,n,Kr,(u,C,y)=>{var $=Vi(),D=J($),S=J(D);j(D),j($),E(()=>{ht($,"active",r(s)===Ve(y)),G(S,Ve(C).title)}),he("click",D,i(Ve(y)),!1),d(u,$)}),j(o),d(c,o),$e()}var Fi=q("<div> </div>");function De(c,t){de(t,!1);let n=M(t,"warning"),e=M(t,"className",0,"alert-warning");ge();var s=Ie(),l=ee(s);we(l,n,h=>{Ce(h,{children:(i,o)=>{var u=Fi();Pr(1,u,()=>xr),Pr(2,u,()=>xr);var C=J(u);E(()=>G(C,Ds(n()))),j(u),E(()=>{var y;return vt(u,`col-12 alert ${(y=e())!=null?y:""} mb-0`)}),d(i,u)},$$slots:{default:!0},$$legacy:!0})}),d(c,s),$e()}var ji=q("<!> <!> <!> <!> <!>",1);function Hi(c,t){var A,R,B,Y,re,z;de(t,!1);const n=ke(),e=()=>ce(y,"$config",n),s=()=>ce($,"$limits",n),l=()=>ce(S,"$newCardsIgnoreReviewLimit",n),h=()=>ce(_,"$applyAllParentLimits",n),i=N();let o=M(t,"state"),u=M(t,"api");function C(){ye(I,r(I)[0]=new Ue(bt(),e().newPerDay,W=>Z(y,b(e).newPerDay=W,b(e)),e().newPerDay,null)),ye(F,r(F)[0]=new Ue(bt(),e().reviewsPerDay,W=>Z(y,b(e).reviewsPerDay=W,b(e)),e().reviewsPerDay,null))}const y=o().currentConfig,$=o().deckLimits,D=o().defaults,S=o().newCardsIgnoreReviewLimit,_=o().applyAllParentLimits,w=`

`+bn()+`

`+Pn(),T=`

`+xn()+w,p=Ht()+`

`+Sn(),H=Ht()+`

`+On(),I=N([new Ue(bt(),e().newPerDay,W=>Z(y,b(e).newPerDay=W,b(e)),e().newPerDay,null),new Ue(mr(),(A=s().new)!=null?A:null,W=>Z($,b(s).new=W!=null?W:void 0,b(s)),null,null),new Ue(pr(),s().newTodayActive&&(R=s().newToday)!=null?R:null,W=>Z($,b(s).newToday=W!=null?W:void 0,b(s)),null,(B=s().newToday)!=null?B:null)]),F=N([new Ue(bt(),e().reviewsPerDay,W=>Z(y,b(e).reviewsPerDay=W,b(e)),e().reviewsPerDay,null),new Ue(mr(),(Y=s().review)!=null?Y:null,W=>Z($,b(s).review=W!=null?W:void 0,b(s)),null,null),new Ue(pr(),s().reviewTodayActive&&(re=s().reviewToday)!=null?re:null,W=>Z($,b(s).reviewToday=W!=null?W:void 0,b(s)),null,(z=s().reviewToday)!=null?z:null)]);let L=N(0),f=N(0);const g={newLimit:{title:Tn(),help:An()+w,url:ue.DeckOptions.newCardsday},reviewLimit:{title:Rn(),help:Dn()+T,url:ue.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:In(),help:p,url:ue.DeckOptions.newCardsday},applyAllParentLimits:{title:Ln(),help:H,url:ue.DeckOptions.newCardsday}},V=Object.values(g);let P=N(),m=N();function O(W){r(P).show(),r(m).to(W)}oe(()=>(r(L),r(f)),()=>{k(i,Math.min(9999,r(L)*10)>r(f)?Nn({cards:r(L),expected:Math.min(9999,r(L)*10)}):"")}),Re(),ge();var x=ne(()=>yr());return Fe(c,{get title(){return r(x)},children:(W,fe)=>{Ge(W,{slotHost:U,get api(){return u()},children:(me,te)=>{var pe=ji(),Ne=ee(pe);U(Ne,{children:(_e,lt)=>{Ae(_e,{get value(){return r(L)},set value(ve){k(L,ve)},get defaultValue(){return D.newPerDay},children:(ve,rt)=>{X(ve,{$$events:{click:()=>O(Object.keys(g).indexOf("newLimit"))},children:(xe,ot)=>{var Qe=K();E(()=>G(Qe,g.newLimit.title)),d(xe,Qe)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tabs:(ve,rt)=>{Lr(ve,{slot:"tabs",get tabs(){return r(I)},get value(){return r(L)},set value(xe){k(L,xe)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var Pe=a(a(Ne,!0));U(Pe,{children:(_e,lt)=>{Ae(_e,{get value(){return r(f)},set value(ve){k(f,ve)},get defaultValue(){return D.reviewsPerDay},children:(ve,rt)=>{X(ve,{$$events:{click:()=>O(Object.keys(g).indexOf("reviewLimit"))},children:(xe,ot)=>{var Qe=K();E(()=>G(Qe,g.reviewLimit.title)),d(xe,Qe)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tabs:(ve,rt)=>{Lr(ve,{slot:"tabs",get tabs(){return r(F)},get value(){return r(f)},set value(xe){k(f,xe)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var et=a(a(Pe,!0));U(et,{children:(_e,lt)=>{De(_e,{get warning(){return r(i)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var _t=a(a(et,!0));U(_t,{children:(_e,lt)=>{Le(_e,{get value(){return l()},set value(ve){Xe(S,ve)},defaultValue:!1,children:(ve,rt)=>{X(ve,{$$events:{click:()=>O(Object.keys(g).indexOf("newCardsIgnoreReviewLimit"))},children:(xe,ot)=>{Ct(xe,{get title(){return g.newCardsIgnoreReviewLimit.title},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var tt=a(a(_t,!0));U(tt,{children:(_e,lt)=>{Le(_e,{get value(){return h()},set value(ve){Xe(_,ve)},defaultValue:!1,children:(ve,rt)=>{X(ve,{$$events:{click:()=>O(Object.keys(g).indexOf("applyAllParentLimits"))},children:(xe,ot)=>{Ct(xe,{get title(){return g.applyAllParentLimits.title},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),d(me,pe)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(W,fe)=>{var me=ne(()=>yr());Be(W,{get title(){return r(me)},get url(){return ue.DeckOptions.dailyLimits},slot:"tooltip",helpSections:V,$$events:{mount:te=>{k(P,te.detail.modal),k(m,te.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),Se(t,"onPresetChange",C),$e({onPresetChange:C})}var Bi=q("<!> <!> <!> <!> <!>",1);function Gi(c,t){de(t,!1);const n=ke(),e=()=>ce(i,"$config",n),s=()=>ce(u,"$fsrs",n);let l=M(t,"state"),h=M(t,"api");const i=l().currentConfig,o=l().defaults,u=l().fsrs,C=`

`+En();let y=N([]);const $={newGatherPriority:{title:Mn(),help:Vn()+C},newCardSortOrder:{title:Wn(),help:Fn()+C},newReviewPriority:{title:jn(),help:Hn()+C},interdayStepPriority:{title:Bn(),help:Gn()+C},reviewSortOrder:{title:zn(),help:qn()+C}},D=Object.values($);let S=N(),_=N();function w(p){r(S).show(),r(_).to(p)}oe(()=>(e(),r(y)),()=>{switch(e().newCardGatherPriority){case Ye.RANDOM_NOTES:k(y,[Me.TEMPLATE_THEN_RANDOM,Me.RANDOM_NOTE_THEN_TEMPLATE]);break;case Ye.RANDOM_CARDS:k(y,[Me.TEMPLATE_THEN_RANDOM,Me.RANDOM_NOTE_THEN_TEMPLATE,Me.RANDOM_CARD]);break;default:k(y,[]);break}r(y).includes(e().newCardSortOrder)&&Z(i,b(e).newCardSortOrder=0,b(e)),e().newCardSortOrder in Me||Z(i,b(e).newCardSortOrder=0,b(e))}),Re(),ge();var T=ne(()=>Cr());Fe(c,{get title(){return r(T)},children:(p,H)=>{Ge(p,{slotHost:U,get api(){return h()},children:(I,F)=>{var L=Bi(),f=ee(L);U(f,{children:(O,x)=>{var A=ne(fi);qe(O,{get value(){return e().newCardGatherPriority},set value(R){Z(i,b(e).newCardGatherPriority=R,b(e))},get defaultValue(){return o.newCardGatherPriority},get choices(){return r(A)},children:(R,B)=>{X(R,{$$events:{click:()=>w(Object.keys($).indexOf("newGatherPriority"))},children:(Y,re)=>{var z=K();E(()=>G(z,$.newGatherPriority.title)),d(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var g=a(a(f,!0));U(g,{children:(O,x)=>{var A=ne(vi);qe(O,{get value(){return e().newCardSortOrder},set value(R){Z(i,b(e).newCardSortOrder=R,b(e))},get defaultValue(){return o.newCardSortOrder},get choices(){return r(A)},get disabledChoices(){return r(y)},children:(R,B)=>{X(R,{$$events:{click:()=>w(Object.keys($).indexOf("newCardSortOrder"))},children:(Y,re)=>{var z=K();E(()=>G(z,$.newCardSortOrder.title)),d(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var V=a(a(g,!0));U(V,{children:(O,x)=>{var A=ne(Ir);qe(O,{get value(){return e().newMix},set value(R){Z(i,b(e).newMix=R,b(e))},get defaultValue(){return o.newMix},get choices(){return r(A)},children:(R,B)=>{X(R,{$$events:{click:()=>w(Object.keys($).indexOf("newReviewPriority"))},children:(Y,re)=>{var z=K();E(()=>G(z,$.newReviewPriority.title)),d(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var P=a(a(V,!0));U(P,{children:(O,x)=>{var A=ne(Ir);qe(O,{get value(){return e().interdayLearningMix},set value(R){Z(i,b(e).interdayLearningMix=R,b(e))},get defaultValue(){return o.interdayLearningMix},get choices(){return r(A)},children:(R,B)=>{X(R,{$$events:{click:()=>w(Object.keys($).indexOf("interdayStepPriority"))},children:(Y,re)=>{var z=K();E(()=>G(z,$.interdayStepPriority.title)),d(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var m=a(a(P,!0));U(m,{children:(O,x)=>{var A=ne(()=>hi(s()));qe(O,{get value(){return e().reviewOrder},set value(R){Z(i,b(e).reviewOrder=R,b(e))},get defaultValue(){return o.reviewOrder},get choices(){return r(A)},children:(R,B)=>{X(R,{$$events:{click:()=>w(Object.keys($).indexOf("reviewSortOrder"))},children:(Y,re)=>{var z=K();E(()=>G(z,$.reviewSortOrder.title)),d(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),d(I,L)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(p,H)=>{var I=ne(()=>Cr());Be(p,{get title(){return r(I)},get url(){return ue.DeckOptions.displayOrder},slot:"tooltip",helpSections:D,$$events:{mount:F=>{k(S,F.detail.modal),k(_,F.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}var zi=q('<textarea class="w-100"></textarea>');function qi(c,t){de(t,!1);let n=M(t,"value",4),e=M(t,"defaults"),s=N();function l(o){return o.map(u=>u.toFixed(4)).join(", ")}function h(){n(this.value.replace(/ /g,"").split(",").filter(o=>o).map(o=>Number(o)))}oe(()=>He(n()),()=>{k(s,l(n()))}),Re(),ge();var i=zi();Wr(i),E(()=>je(i,"placeholder",l(e()))),E(()=>zt(i,r(s))),he("blur",i,h,!1),d(c,i),$e()}var Qi=q("<!> <!>",1);function Ui(c,t){let n=M(t,"value",4),e=M(t,"defaultValue"),s=M(t,"defaults");var l=Qi(),h=ee(l);Je(h,at(t),{});var i=a(a(h,!0));nt(i,{children:(o,u)=>{qi(o,{get value(){return n()},set value(C){n(C)},get defaults(){return s()},$$legacy:!0})},$$slots:{default:!0,revert:(o,u)=>{kt(o,{slot:"revert",get value(){return n()},set value(C){n(C)},get defaultValue(){return e()},$$legacy:!0})}},$$legacy:!0}),d(c,l)}var Ki=q('<input type="text" class="w-100 mb-1">');function Yi(c,t){let n=M(t,"value",4),e=M(t,"placeholder");nt(c,{children:(s,l)=>{var h=Ki();wt(h),E(()=>je(h,"placeholder",e())),St(h,n,i=>n(i)),d(s,h)},$$slots:{default:!0},$$legacy:!0})}function Nr(c,t,n){const e=Sr(c);if(e.selectAll(".lines").remove(),e.selectAll(".hover-columns").remove(),e.selectAll(".focus-line").remove(),e.selectAll(".legend").remove(),n.length==0)return Or(e,!1),[];const s=e.transition().duration(600),l=new Date,h=n.map(f=>({...f,date:new Date(l.getTime()+f.x*24*60*60*1e3)})),i=l,o=Tr(h,f=>f.date),u=yo().domain([i,o]).range([t.marginLeft,t.width-t.marginRight]);e.select(".x-ticks").call(f=>f.transition(s).call(ro(u).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const C=f=>Ar(f,!0),y=Tr(h,f=>f.y),$=so().range([t.height-t.marginBottom,t.marginTop]).domain([0,y]).nice();e.select(".y-ticks").call(f=>f.transition(s).call(ao($).ticks(t.height/50).tickSizeOuter(0).tickFormat(C))).attr("direction","ltr"),e.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-t.marginLeft).attr("x",0-t.height/2).attr("dy","1em").attr("fill","currentColor").style("text-anchor","middle").text("Review Time per day");const D=h.map(f=>[u(f.date),$(f.y),f.label]),S=So(D,f=>Object.assign(f,{z:f[0][2]}),f=>f[2]),_=To;e.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(S.entries())).join("path").attr("stroke",(f,g)=>_[g%_.length]).attr("d",f=>no()(f[1].map(g=>[g[0],g[1]]))).attr("data-group",f=>f[0]);const w=e.append("line").attr("class","focus-line").attr("y1",t.marginTop).attr("y2",t.height-t.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),T=Array.from(S.values()).reduce((f,g)=>f.length>g.length?f:g),p=t.width/T.length;e.append("g").attr("class","hover-columns").selectAll("rect").data(T).join("rect").attr("x",f=>f[0]-p/2).attr("y",t.marginTop).attr("width",p).attr("height",t.height-t.marginTop-t.marginBottom).attr("fill","transparent").on("mousemove",H).on("mouseout",()=>{w.style("opacity",0),lo()});function H(f,g){oo(f,document.body);const V=u.invert(g[0]),P={};S.forEach((x,A)=>{const R=uo(re=>u.invert(re[0])).left,B=R(x,V),Y=x[B-1]||x[B];Y&&(P[A]=$.invert(Y[1]))}),w.attr("x1",g[0]).attr("x2",g[0]).style("opacity",1);const m=+((V.getTime()-Date.now())/(60*60*24*1e3)).toFixed();let O=`Date: ${Is(V)}<br>In ${m} Days<br>`;for(const[x,A]of Object.entries(P))O+=`#${x}: ${Ar(A)}<br>`;io(O,f.pageX,f.pageY)}const I=e.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(S.keys())).join("g").attr("transform",(f,g)=>`translate(0,${g*20})`).attr("cursor","pointer").on("click",(f,g)=>F(f,g));I.append("rect").attr("x",t.width-t.marginRight+36).attr("width",12).attr("height",12).attr("fill",(f,g)=>_[g%_.length]),I.append("text").attr("x",t.width-t.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(f=>`#${f}`);const F=(f,g)=>{const V=g,P=e.select(`path[data-group="${V}"]`),m=P.classed("hidden"),O=f.currentTarget;P.classed("hidden",!m),P.style("display",()=>m?null:"none"),Sr(O).select("rect").style("opacity",m?1:.5)};return Or(e,!0),[]}var Ji=q("Days to simulate",1),Xi=q(" <!>",1),Zi=q("Days to simulate",1),eu=q("Additional new cards to simulate",1),tu=q("New cards/day",1),ru=q("Maximum reviews/day",1),su=q("Maximum interval",1),au=Ws("<svg><!><!><!><!></svg><!>",1),nu=q('<!> <!> <div class="ms-1 me-1"><!> <!> <button><!></button> <button><!></button> <div><!></div> <!></div> <div class="m-2"><!> <!></div> <div class="m-2"><details><summary> </summary> <!> <button><!></button> <!> <div> </div></details></div> <div class="m-2"><details><summary>FSRS simulator (experimental)</summary> <!> <!> <!> <!> <!> <button> </button> <button> </button> <div> </div> <!></details></div>',1);function lu(c,t){de(t,!1);const n=ke(),e=()=>ce(f,"$daysSinceLastOptimization",n),s=()=>ce(H,"$presetName",n),l=()=>ce(I,"$config",n),h=()=>ce(L,"$fsrsReschedule",n),i=N(),o=N(),u=N(),C=N(),y=N(),$=N(),D=N(),S=N(),_=N(),w=N();let T=M(t,"state"),p=M(t,"openHelpModal");const H=T().currentPresetName,I=T().currentConfig,F=T().defaults,L=T().fsrsReschedule,f=T().daysSinceLastOptimization;let g=N(),V=N(!1),P=N(!1),m=N(!1),O=N(0),x=N();const A=N(new _s({daysToSimulate:365,lossAversion:2.5})),R=N(new bs({weights:l().fsrsWeights,desiredRetention:l().desiredRetention,deckSize:0,daysToSimulate:365,newLimit:l().newPerDay,reviewLimit:l().reviewsPerDay,maxInterval:l().maximumReviewInterval,search:`preset:"${T().getCurrentName()}" -is:suspended`}));function B(v){const se=Math.round(100/.23456790123456783*(Math.pow(v,1/-.5)-1));return se===100?"":Zn({days:se})}function Y(v){return v<.7||v>.97?"alert-danger":v<.8||v>.95?"alert-warning":"alert-info"}function re(){return BigInt(l().ignoreRevlogsBeforeDate?new Date(l().ignoreRevlogsBeforeDate).getTime():0)}async function z(){if(r(V)){await Nt({});return}if(T().presetAssignmentsChanged()){alert(Mt());return}k(V,!0),k(g,void 0);try{await Pt(async()=>{const v=await Ps({search:l().weightSearch?l().weightSearch:r(u),ignoreRevlogsBeforeMs:re(),currentWeights:l().fsrsWeights});(l().fsrsWeights.length&&l().fsrsWeights.every((Q,ae)=>Q.toFixed(4)===v.weights[ae].toFixed(4))||v.weights.length===0)&&setTimeout(()=>alert(el()),100),r(g)&&ye(g,r(g).current=r(g).total),Z(I,b(l).fsrsWeights=v.weights,b(l))},v=>{v.value.case==="computeWeights"&&k(g,v.value.value)})}finally{k(V,!1)}}async function W(){if(r(P)){await Nt({});return}if(T().presetAssignmentsChanged()){alert(Mt());return}k(P,!0),k(g,void 0);try{await Pt(async()=>{const v=l().weightSearch?l().weightSearch:r(u),Q=await xs({weights:l().fsrsWeights,search:v,ignoreRevlogsBeforeMs:re()});r(g)&&ye(g,r(g).current=r(g).total),setTimeout(()=>alert(`Log loss: ${Q.logLoss.toFixed(4)}, RMSE(bins): ${(Q.rmseBins*100).toFixed(2)}%. ${tl()}`),200)},v=>{v.value.case==="computeWeights"&&k(g,v.value.value)})}finally{k(P,!1)}}async function fe(){if(r(m)){await Nt({});return}if(T().presetAssignmentsChanged()){alert(Mt());return}k(m,!0),k(x,void 0);try{await Pt(async()=>{ye(A,r(A).maxInterval=l().maximumReviewInterval),ye(A,r(A).weights=l().fsrsWeights),ye(A,r(A).search=`preset:"${T().getCurrentName()}" -is:suspended`);const v=await Ss(r(A));k(O,v.optimalRetention),k(x,void 0)},v=>{v.value.case==="computeRetention"&&k(x,v.value.value)})}finally{k(m,!1)}}function me(v){if(!v||!v.total)return"";const Q=(v.current/v.total*100).toFixed(1);return v instanceof Os?`${Q}%`:rl({pct:Q,reviews:v.reviews})}function te(v){return v?sl({count:v.current}):""}function pe(v){return v?al({num:v.toFixed(2)}):""}let Ne=N([]);const Pe=vo();let et=N(null);const _t=Qn();let tt=0,_e=[];function lt(v,Q){const ae=[];for(let ie=0;ie<v.length;ie++){let se=0,st=0;for(let gt=Math.max(0,ie-Q+1);gt<=ie;gt++)se+=v[gt],st++;ae.push(se/st)}return ae}async function ve(){let v;tt+=1;try{await Pt(async()=>{ye(R,r(R).weights=l().fsrsWeights),ye(R,r(R).desiredRetention=l().desiredRetention),ye(R,r(R).search=`preset:"${T().getCurrentName()}" -is:suspended`),k(w,"processing..."),v=await Ts(r(R))},()=>{})}finally{if(k(w,""),v){const Q=lt(v.dailyTimeCost,Math.ceil(r(R).daysToSimulate/50));_e=_e.concat(Q.map((ae,ie)=>({x:ie,y:ae,label:tt}))),k(Ne,Nr(r(et),Pe,_e))}}}function rt(){_e=_e.filter(v=>v.label!==tt),tt=Math.max(0,tt-1),k(Ne,Nr(r(et),Pe,_e))}oe(()=>e(),()=>{k(i,e()>30?Un():"")}),oe(()=>s(),()=>{s()&&k(O,0)}),oe(()=>(r(V),r(P),r(m)),()=>{k(o,r(V)||r(P)||r(m))}),oe(()=>He(T()),()=>{k(u,`preset:"${T().getCurrentName()}" -is:suspended`)}),oe(()=>l(),()=>{k(C,Number(l().desiredRetention.toFixed(2)))}),oe(()=>r(C),()=>{k(y,B(r(C)))}),oe(()=>r(C),()=>{k($,Y(r(C)))}),oe(()=>r(A),()=>{r(A).daysToSimulate>3650&&ye(A,r(A).daysToSimulate=3650)}),oe(()=>r(g),()=>{k(D,me(r(g)))}),oe(()=>r(x),()=>{k(S,te(r(x)))}),oe(()=>r(g),()=>{var v,Q;k(_,(Q=(v=r(g))==null?void 0:v.reviews)!=null?Q:void 0)}),oe(()=>{},()=>{k(w,"")}),Re(),ge();var xe=nu(),ot=ee(xe);ze(ot,{get value(){return l().desiredRetention},set value(v){Z(I,b(l).desiredRetention=v,b(l))},get defaultValue(){return F.desiredRetention},min:.7,max:.99,children:(v,Q)=>{X(v,{$$events:{click:()=>p()("desiredRetention")},children:(ae,ie)=>{var se=K();E(()=>G(se,Gr())),d(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var Qe=a(a(ot,!0));De(Qe,{get warning(){return r(y)},get className(){return r($)},$$legacy:!0});var Ot=a(a(Qe,!0)),Qt=J(Ot);Ui(Qt,{get value(){return l().fsrsWeights},set value(v){Z(I,b(l).fsrsWeights=v,b(l))},defaultValue:[],get defaults(){return F.fsrsWeights},children:(v,Q)=>{X(v,{$$events:{click:()=>p()("modelWeights")},children:(ae,ie)=>{var se=K();E(()=>G(se,zr())),d(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var Ut=a(a(Qt,!0));Yi(Ut,{get value(){return l().weightSearch},set value(v){Z(I,b(l).weightSearch=v,b(l))},get placeholder(){return r(u)},$$legacy:!0});var it=a(a(Ut,!0)),es=J(it);we(es,()=>r(V),v=>{var Q=K();E(()=>G(Q,Et())),d(v,Q)},v=>{var Q=K();E(()=>G(Q,Kn())),d(v,Q)}),j(it);var ut=a(a(it,!0)),ts=J(ut);we(ts,()=>r(P),v=>{var Q=K();E(()=>G(Q,Et())),d(v,Q)},v=>{var Q=K();E(()=>G(Q,Yn())),d(v,Q)}),j(ut);var Tt=a(a(ut,!0)),rs=J(Tt);we(rs,()=>r(V)||r(P),v=>{var Q=K();E(()=>G(Q,r(D))),d(v,Q)},v=>{var Q=Ie(),ae=ee(Q);we(ae,()=>r(_)!==void 0,ie=>{var se=K();E(()=>G(se,Jn({reviews:r(_)}))),d(ie,se)},null,!0),d(v,Q)}),j(Tt);var ss=a(a(Tt,!0));De(ss,{get warning(){return r(i)},className:"alert-warning",$$legacy:!0}),j(Ot);var At=a(a(Ot,!0)),Kt=J(At);Le(Kt,{get value(){return h()},set value(v){Xe(L,v)},defaultValue:!1,children:(v,Q)=>{X(v,{$$events:{click:()=>p()("rescheduleCardsOnChange")},children:(ae,ie)=>{var se=ne(()=>Qr());Ct(ae,{get title(){return r(se)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var as=a(a(Kt,!0));we(as,h,v=>{var Q=ne(()=>nl());De(v,{get warning(){return r(Q)},$$legacy:!0})}),j(At);var Rt=a(a(At,!0)),Yt=J(Rt),Dt=J(Yt),ns=J(Dt);E(()=>G(ns,qr())),j(Dt);var Jt=a(a(Dt,!0));Ae(Jt,{get value(){return r(A).daysToSimulate},set value(v){ye(A,r(A).daysToSimulate=v)},defaultValue:365,min:1,max:3650,children:(v,Q)=>{X(v,{$$events:{click:()=>p()("computeOptimalRetention")},children:(ae,ie)=>{var se=Ji();d(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var ct=a(a(Jt,!0)),ls=J(ct);we(ls,()=>r(m),v=>{var Q=K();E(()=>G(Q,Et())),d(v,Q)},v=>{var Q=K();E(()=>G(Q,Xn())),d(v,Q)}),j(ct);var Xt=a(a(ct,!0));we(Xt,()=>r(O),v=>{var Q=Xi(),ae=ee(Q,!0);E(()=>{var se;return G(ae,`${(se=pe(r(O)))!=null?se:""} `)});var ie=a(ae);we(ie,()=>r(O)-l().desiredRetention>=.01,se=>{var st=ne(()=>ll());De(se,{get warning(){return r(st)},className:"alert-warning",$$legacy:!0})}),d(v,Q)});var Zt=a(a(Xt,!0)),os=J(Zt);j(Zt),j(Yt),j(Rt);var er=a(a(Rt,!0)),tr=J(er),is=J(tr),rr=a(a(is,!0));Ae(rr,{get value(){return r(R).daysToSimulate},set value(v){ye(R,r(R).daysToSimulate=v)},defaultValue:365,min:1,max:3650,children:(v,Q)=>{X(v,{$$events:{click:()=>p()("simulateFsrsReview")},children:(ae,ie)=>{var se=Zi();d(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var sr=a(a(rr,!0));Ae(sr,{get value(){return r(R).deckSize},set value(v){ye(R,r(R).deckSize=v)},defaultValue:0,min:1,max:1e5,children:(v,Q)=>{X(v,{$$events:{click:()=>p()("simulateFsrsReview")},children:(ae,ie)=>{var se=eu();d(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var ar=a(a(sr,!0));Ae(ar,{get value(){return r(R).newLimit},set value(v){ye(R,r(R).newLimit=v)},get defaultValue(){return F.newPerDay},min:0,max:1e3,children:(v,Q)=>{X(v,{$$events:{click:()=>p()("simulateFsrsReview")},children:(ae,ie)=>{var se=tu();d(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var nr=a(a(ar,!0));Ae(nr,{get value(){return r(R).reviewLimit},set value(v){ye(R,r(R).reviewLimit=v)},get defaultValue(){return F.reviewsPerDay},min:0,max:1e3,children:(v,Q)=>{X(v,{$$events:{click:()=>p()("simulateFsrsReview")},children:(ae,ie)=>{var se=ru();d(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var lr=a(a(nr,!0));Ae(lr,{get value(){return r(R).maxInterval},set value(v){ye(R,r(R).maxInterval=v)},get defaultValue(){return F.maximumReviewInterval},min:1,max:36500,children:(v,Q)=>{X(v,{$$events:{click:()=>p()("simulateFsrsReview")},children:(ae,ie)=>{var se=su();d(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var dt=a(a(lr,!0)),us=J(dt);us.nodeValue="Simulate",j(dt);var $t=a(a(dt,!0)),cs=J($t);cs.nodeValue="Clear last simulation",j($t);var It=a(a($t,!0)),ds=J(It);j(It);var $s=a(a(It,!0));co($s,{title:_t,children:(v,Q)=>{var ae=au(),ie=ee(ae);yt(ie,vs=>k(et,vs),()=>r(et));var se=J(ie);_o(se);var st=a(se);$o(st);var gt=a(st);go(gt,{bounds:Pe,$$legacy:!0});var gs=a(gt);fo(gs,{bounds:Pe,$$legacy:!0}),j(ie);var fs=a(ie);bo(fs,{get tableData(){return r(Ne)},$$legacy:!0}),E(()=>je(ie,"viewBox",`0 0 ${Pe.width} ${Pe.height}`)),d(v,ae)},$$slots:{default:!0},$$legacy:!0}),j(tr),j(er),E(()=>{var v,Q,ae,ie,se;vt(it,`btn ${(v=r(V)?"btn-warning":"btn-primary")!=null?v:""}`),it.disabled=!r(V)&&r(o),vt(ut,`btn ${(Q=r(P)?"btn-warning":"btn-primary")!=null?Q:""}`),ut.disabled=!r(P)&&r(o),vt(ct,`btn ${(ae=r(m)?"btn-warning":"btn-primary")!=null?ae:""}`),ct.disabled=!r(m)&&r(o),G(os,r(S)),vt(dt,`btn ${(ie=r(o)?"btn-warning":"btn-primary")!=null?ie:""}`),dt.disabled=r(o),vt($t,`btn ${(se=r(o)?"btn-warning":"btn-primary")!=null?se:""}`),$t.disabled=r(o),G(ds,r(w))}),he("click",it,()=>z(),!1),he("click",ut,()=>W(),!1),he("click",ct,()=>fe(),!1),he("click",dt,()=>ve(),!1),he("click",$t,()=>rt(),!1),d(c,xe),$e()}var ou=q("<!> <!> <!>",1);function iu(c,t){de(t,!1);const n=ke(),e=()=>ce(i,"$fsrs",n),s=N();let l=M(t,"state"),h=M(t,"api");const i=l().fsrs,o={fsrs:{title:"FSRS",help:ol(),url:ue.DeckOptions.fsrs},desiredRetention:{title:Gr(),help:il(),sched:Te.FSRS},modelWeights:{title:zr(),help:ul()+`

`+cl(),sched:Te.FSRS},rescheduleCardsOnChange:{title:Qr(),help:dl(),sched:Te.FSRS},computeOptimalRetention:{title:qr(),help:$l(),sched:Te.FSRS}},u=Object.values(o);let C=N(),y=N();function $(D){r(C).show(),r(y).to(D)}oe(()=>e(),()=>{k(s,e()?gl():"")}),Re(),ge(),Fe(c,{title:"FSRS",children:(D,S)=>{Ge(D,{slotHost:U,get api(){return h()},children:(_,w)=>{var T=ou(),p=ee(T);U(p,{children:(F,L)=>{Le(F,{get value(){return e()},set value(f){Xe(i,f)},defaultValue:!1,children:(f,g)=>{X(f,{$$events:{click:()=>$(Object.keys(o).indexOf("fsrs"))},children:(V,P)=>{Ct(V,{get title(){return o.fsrs.title},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var H=a(a(p,!0));De(H,{get warning(){return r(s)},$$legacy:!0});var I=a(a(H,!0));we(I,e,F=>{lu(F,{get state(){return l()},openHelpModal:L=>$(Object.keys(o).indexOf(L)),$$legacy:!0})}),d(_,T)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(D,S)=>{Be(D,{title:"FSRS",get url(){return ue.DeckOptions.fsrs},slot:"tooltip",get fsrs(){return e()},helpSections:u,$$events:{mount:_=>{k(C,_.detail.modal),k(y,_.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}function uu(c,t){de(t,!1);let n=M(t,"html"),e=M(t,"mounted");Gt(e()),ge();var s=Ie(),l=ee(s);fl(l,n,!1,!1),d(c,s),$e()}function cu(c){switch(c){case We.Seconds:return"s";case We.Minutes:return"m";case We.Hours:return"h";case We.Days:return"d";default:return""}}function du(c){switch(c){case"s":return We.Seconds;case"h":return We.Hours;case"d":return We.Days;default:return We.Minutes}}function $u(c){const t=c*60;let n=ho(t);return[We.Months,We.Years].includes(n)&&(n=We.Days),`${Math.round(mo(n,t))}${cu(n)}`}function gu(c){const t=c.match(/(\d+)(.*)/);if(t){const[n,e,s]=t,l=du(s),h=po(l)*parseInt(e,10);return Math.min(h,2**31)/60}else return 0}function fu(c){return c.map($u).join(" ")}function vu(c){return c.split(" ").map(gu).filter(t=>t)}var hu=q('<input type="text" class="svelte-f5c9s0">');function mu(c,t){de(t,!1);let n=M(t,"value",4),e=N();function s(){n(vu(this.value))}oe(()=>He(n()),()=>{k(e,fu(n()))}),Re(),ge();var l=hu();wt(l),E(()=>zt(l,r(e))),he("blur",l,s,!1),d(c,l),$e()}var pu=q('<div style="display: contents"><!></div> <div style="display: contents"><!></div>',1),yu=q('<div style="display: contents"><!></div>',1);function Zr(c,t){let n=M(t,"value",4),e=M(t,"defaultValue");var s=yu(),l=ee(s);be(l,()=>({"--cols":13})),Ce(l.lastChild,{children:(h,i)=>{var o=pu(),u=ee(o);be(u,()=>({"--col-size":7})),Ze(u.lastChild,{breakpoint:"xs",children:(y,$)=>{var D=Ie(),S=ee(D);Je(S,at(t),{}),d(y,D)},$$slots:{default:!0},$$legacy:!0}),j(u);var C=a(a(u,!0));be(C,()=>({"--col-size":6})),Ze(C.lastChild,{breakpoint:"xs",children:(y,$)=>{nt(y,{children:(D,S)=>{mu(D,{get value(){return n()},set value(_){n(_)},$$legacy:!0})},$$slots:{default:!0,revert:(D,S)=>{kt(D,{slot:"revert",get value(){return n()},set value(_){n(_)},get defaultValue(){return e()},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(C),d(h,o)},$$slots:{default:!0},$$legacy:!0}),j(l),d(c,s)}var Cu=q("<!> <!> <!> <!> <!> <!>",1);function wu(c,t){de(t,!1);const n=ke(),e=()=>ce(i,"$config",n),s=()=>ce(u,"$fsrs",n);let l=M(t,"state"),h=M(t,"api",8,()=>({}));const i=l().currentConfig,o=l().defaults,u=l().fsrs;let C=N(),y=N();const $={relearningSteps:{title:vl(),help:hl(),url:ue.DeckOptions.relearningSteps},minimumInterval:{title:ml(),help:pl(),url:ue.DeckOptions.minimumInterval,sched:Te.SM2},leechThreshold:{title:yl(),help:Cl(),url:ue.Leeches.leeches},leechAction:{title:wl(),help:kl(),url:ue.Leeches.waiting}},D=Object.values($);let S=N(),_=N();function w(p){r(S).show(),r(_).to(p)}oe(()=>(e(),s()),()=>{const p=e().relearnSteps.length?e().relearnSteps[e().relearnSteps.length-1]/60/24:0;k(C,!s()&&p>e().minimumLapseInterval?_l():""),k(y,s()&&p>=1?Ur():"")}),Re(),ge();var T=ne(()=>wr());Fe(c,{get title(){return r(T)},children:(p,H)=>{Ge(p,{slotHost:U,get api(){return h()},children:(I,F)=>{var L=Cu(),f=ee(L);U(f,{children:(x,A)=>{Zr(x,{get value(){return e().relearnSteps},set value(R){Z(i,b(e).relearnSteps=R,b(e))},get defaultValue(){return o.relearnSteps},children:(R,B)=>{X(R,{$$events:{click:()=>w(Object.keys($).indexOf("relearningSteps"))},children:(Y,re)=>{var z=K();E(()=>G(z,$.relearningSteps.title)),d(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var g=a(a(f,!0));U(g,{children:(x,A)=>{De(x,{get warning(){return r(y)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var V=a(a(g,!0));we(V,()=>!s(),x=>{U(x,{children:(A,R)=>{Ae(A,{get value(){return e().minimumLapseInterval},set value(B){Z(i,b(e).minimumLapseInterval=B,b(e))},get defaultValue(){return o.minimumLapseInterval},min:1,children:(B,Y)=>{X(B,{$$events:{click:()=>w(Object.keys($).indexOf("minimumInterval"))},children:(re,z)=>{var W=K();E(()=>G(W,$.minimumInterval.title)),d(re,W)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})});var P=a(a(V,!0));U(P,{children:(x,A)=>{De(x,{get warning(){return r(C)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var m=a(a(P,!0));U(m,{children:(x,A)=>{Ae(x,{get value(){return e().leechThreshold},set value(R){Z(i,b(e).leechThreshold=R,b(e))},get defaultValue(){return o.leechThreshold},min:1,children:(R,B)=>{X(R,{$$events:{click:()=>w(Object.keys($).indexOf("leechThreshold"))},children:(Y,re)=>{var z=K();E(()=>G(z,$.leechThreshold.title)),d(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var O=a(a(m,!0));U(O,{children:(x,A)=>{var R=ne(mi);qe(x,{get value(){return e().leechAction},set value(B){Z(i,b(e).leechAction=B,b(e))},get defaultValue(){return o.leechAction},get choices(){return r(R)},breakpoint:"md",children:(B,Y)=>{X(B,{$$events:{click:()=>w(Object.keys($).indexOf("leechAction"))},children:(re,z)=>{var W=K();E(()=>G(W,$.leechAction.title)),d(re,W)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),d(I,L)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(p,H)=>{var I=ne(()=>wr());Be(p,{get title(){return r(I)},get url(){return ue.DeckOptions.lapses},slot:"tooltip",get fsrs(){return s()},helpSections:D,$$events:{mount:F=>{k(S,F.detail.modal),k(_,F.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}var ku=q("<!> <!> <!> <!>",1),_u=q("<!> <!> <!> <!> <!>",1);function bu(c,t){de(t,!1);const n=ke(),e=()=>ce(u,"$config",n),s=()=>ce(y,"$fsrs",n),l=N(),h=N();let i=M(t,"state"),o=M(t,"api",8,()=>({}));const u=i().currentConfig,C=i().defaults,y=i().fsrs;let $=N(),D=N();const S={learningSteps:{title:bl(),help:Pl(),url:ue.DeckOptions.learningSteps},graduatingInterval:{title:xl(),help:Sl(),url:ue.DeckOptions.graduatingInterval,sched:Te.SM2},easyInterval:{title:Ol(),help:Tl(),url:ue.DeckOptions.easyInterval,sched:Te.SM2},insertionOrder:{title:Al(),help:Rl(),url:ue.DeckOptions.insertionOrder}},_=Object.values(S);let w=N(),T=N();function p(I){r(w).show(),r(T).to(I)}oe(()=>(e(),s()),()=>{const I=e().learnSteps.length?e().learnSteps[e().learnSteps.length-1]/60/24:0;k($,I>e().graduatingIntervalGood?Dl():""),k(D,s()&&I>=1?Ur():"")}),oe(()=>e(),()=>{k(l,e().graduatingIntervalGood>e().graduatingIntervalEasy?Il():"")}),oe(()=>e(),()=>{k(h,e().newCardInsertOrder==Wt.RANDOM?Ll():"")}),Re(),ge();var H=ne(()=>kr());Fe(c,{get title(){return r(H)},children:(I,F)=>{Ge(I,{slotHost:U,get api(){return o()},children:(L,f)=>{var g=_u(),V=ee(g);U(V,{children:(A,R)=>{Zr(A,{get value(){return e().learnSteps},set value(B){Z(u,b(e).learnSteps=B,b(e))},get defaultValue(){return C.learnSteps},children:(B,Y)=>{X(B,{$$events:{click:()=>p(Object.keys(S).indexOf("learningSteps"))},children:(re,z)=>{var W=K();E(()=>G(W,S.learningSteps.title)),d(re,W)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var P=a(a(V,!0));U(P,{children:(A,R)=>{De(A,{get warning(){return r(D)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var m=a(a(P,!0));we(m,()=>!s(),A=>{var R=ku(),B=ee(R);U(B,{children:(W,fe)=>{Ae(W,{get value(){return e().graduatingIntervalGood},set value(me){Z(u,b(e).graduatingIntervalGood=me,b(e))},get defaultValue(){return C.graduatingIntervalGood},children:(me,te)=>{X(me,{$$events:{click:()=>p(Object.keys(S).indexOf("graduatingInterval"))},children:(pe,Ne)=>{var Pe=K();E(()=>G(Pe,S.graduatingInterval.title)),d(pe,Pe)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var Y=a(a(B,!0));U(Y,{children:(W,fe)=>{De(W,{get warning(){return r($)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var re=a(a(Y,!0));U(re,{children:(W,fe)=>{Ae(W,{get value(){return e().graduatingIntervalEasy},set value(me){Z(u,b(e).graduatingIntervalEasy=me,b(e))},get defaultValue(){return C.graduatingIntervalEasy},children:(me,te)=>{X(me,{$$events:{click:()=>p(Object.keys(S).indexOf("easyInterval"))},children:(pe,Ne)=>{var Pe=K();E(()=>G(Pe,S.easyInterval.title)),d(pe,Pe)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var z=a(a(re,!0));U(z,{children:(W,fe)=>{De(W,{get warning(){return r(l)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),d(A,R)});var O=a(a(m,!0));U(O,{children:(A,R)=>{var B=ne(pi);qe(A,{get value(){return e().newCardInsertOrder},set value(Y){Z(u,b(e).newCardInsertOrder=Y,b(e))},get defaultValue(){return C.newCardInsertOrder},get choices(){return r(B)},breakpoint:"md",children:(Y,re)=>{X(Y,{$$events:{click:()=>p(Object.keys(S).indexOf("insertionOrder"))},children:(z,W)=>{var fe=K();E(()=>G(fe,S.insertionOrder.title)),d(z,fe)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var x=a(a(O,!0));U(x,{children:(A,R)=>{De(A,{get warning(){return r(h)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),d(L,g)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(I,F)=>{var L=ne(()=>kr());Be(I,{get title(){return r(L)},get url(){return ue.DeckOptions.newCards},slot:"tooltip",helpSections:_,get fsrs(){return s()},$$events:{mount:f=>{k(w,f.detail.modal),k(T,f.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}var Pu=q('<div class="show-timer-switch" style="display: contents;"><!></div>'),xu=q('<div class="show-timer-switch" style="display: contents;"><!></div>'),Su=q("<!> <!> <!> <!>",1);function Ou(c,t){de(t,!1);const n=ke(),e=()=>ce(i,"$config",n),s=N();let l=M(t,"state"),h=M(t,"api");const i=l().currentConfig,o=l().defaults,u={maximumAnswerSecs:{title:Nl(),help:El()},showAnswerTimer:{title:Ml(),help:Vl()},stopTimerOnAnswer:{title:Wl(),help:Fl()}},C=Object.values(u);let y=N(),$=N();function D(_){r(y).show(),r($).to(_)}oe(()=>e(),()=>{k(s,e().capAnswerTimeToSecs>600?jl():"")}),Re(),ge();var S=ne(()=>_r());Fe(c,{get title(){return r(S)},children:(_,w)=>{Ge(_,{slotHost:U,get api(){return h()},children:(T,p)=>{var H=Su(),I=ee(H);U(I,{children:(g,V)=>{Ae(g,{get value(){return e().capAnswerTimeToSecs},set value(P){Z(i,b(e).capAnswerTimeToSecs=P,b(e))},get defaultValue(){return o.capAnswerTimeToSecs},min:1,max:7200,children:(P,m)=>{X(P,{$$events:{click:()=>D(Object.keys(u).indexOf("maximumAnswerSecs"))},children:(O,x)=>{var A=K();E(()=>G(A,u.maximumAnswerSecs.title)),d(O,A)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var F=a(a(I,!0));U(F,{children:(g,V)=>{De(g,{get warning(){return r(s)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var L=a(a(F,!0));U(L,{children:(g,V)=>{var P=Pu(),m=J(P);Le(m,{get value(){return e().showTimer},set value(O){Z(i,b(e).showTimer=O,b(e))},get defaultValue(){return o.showTimer},children:(O,x)=>{X(O,{$$events:{click:()=>D(Object.keys(u).indexOf("showAnswerTimer"))},children:(A,R)=>{var B=K();E(()=>G(B,u.showAnswerTimer.title)),d(A,B)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(P),d(g,P)},$$slots:{default:!0},$$legacy:!0});var f=a(a(L,!0));U(f,{children:(g,V)=>{var P=xu(),m=J(P);Le(m,{get value(){return e().stopTimerOnAnswer},set value(O){Z(i,b(e).stopTimerOnAnswer=O,b(e))},get defaultValue(){return o.stopTimerOnAnswer},children:(O,x)=>{X(O,{$$events:{click:()=>D(Object.keys(u).indexOf("stopTimerOnAnswer"))},children:(A,R)=>{var B=K();E(()=>G(B,u.stopTimerOnAnswer.title)),d(A,B)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(P),d(g,P)},$$slots:{default:!0},$$legacy:!0}),d(T,H)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(_,w)=>{var T=ne(()=>_r());Be(_,{get title(){return r(T)},get url(){return ue.DeckOptions.timer},slot:"tooltip",helpSections:C,$$events:{mount:p=>{k(y,p.detail.modal),k($,p.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}var Tu=q("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!></div>",1),Au=q('<!> <div class="deck-options-page svelte-htbfcn"><div style="display: contents"><!></div></div>',1);function Ru(c,t){de(t,!1);const n=ke(),e=()=>ce(l,"$addons",n);let s=M(t,"state");const l=s().addonComponents;function h(){return s().currentAuxData}function i(f){Xe(l,[...e(),f])}function o(f,g){Xe(l,[...e(),{component:uu,html:f,mounted:g}])}const u={},C={},y={},$={},D={},S={},_={},w={},T={};let p=N();ge();var H=Au(),I=ee(H);Mi(I,{get state(){return s()},$$events:{presetchange(...f){const g=r(p);return g==null?void 0:g.apply(this,f)}},$$legacy:!0});var F=a(a(I,!0)),L=J(F);return be(L,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),Gs(L.lastChild,{breakpoint:"sm",class:"container-columns",children:(f,g)=>{var V=Tu(),P=ee(V),m=J(P);Ce(m,{class:"row-columns",children:(te,pe)=>{Hi(te,{get state(){return s()},api:C,get onPresetChange(){return r(p)},set onPresetChange(Ne){k(p,Ne)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var O=a(a(m,!0));Ce(O,{class:"row-columns",children:(te,pe)=>{bu(te,{get state(){return s()},api:y,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var x=a(a(O,!0));Ce(x,{class:"row-columns",children:(te,pe)=>{wu(te,{get state(){return s()},api:$,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var A=a(a(x,!0));Ce(A,{class:"row-columns",children:(te,pe)=>{Gi(te,{get state(){return s()},api:S,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var R=a(a(A,!0));Ce(R,{class:"row-columns",children:(te,pe)=>{bi(te,{get state(){return s()},api:D,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(P);var B=a(a(P,!0)),Y=J(B);Ce(Y,{class:"row-columns",children:(te,pe)=>{gi(te,{get state(){return s()},api:w,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var re=a(a(Y,!0));Ce(re,{class:"row-columns",children:(te,pe)=>{Ou(te,{get state(){return s()},api:_,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var z=a(a(re,!0));Ce(z,{class:"row-columns",children:(te,pe)=>{ki(te,{get state(){return s()},api:_,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var W=a(a(z,!0));we(W,()=>e().length,te=>{Ce(te,{class:"row-columns",children:(pe,Ne)=>{Lo(pe,{get state(){return s()},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})});var fe=a(a(W,!0));Ce(fe,{class:"row-columns",children:(te,pe)=>{iu(te,{get state(){return s()},api:{},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var me=a(a(fe,!0));Ce(me,{class:"row-columns",children:(te,pe)=>{di(te,{get state(){return s()},api:T,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(B),d(f,V)},$$slots:{default:!0},$$legacy:!0}),j(L),j(F),d(c,H),Se(t,"auxData",h),Se(t,"addSvelteAddon",i),Se(t,"addHtmlAddon",o),Se(t,"options",u),Se(t,"dailyLimits",C),Se(t,"newOptions",y),Se(t,"lapseOptions",$),Se(t,"buryOptions",D),Se(t,"displayOrder",S),Se(t,"timerOptions",_),Se(t,"audioOptions",w),Se(t,"advancedOptions",T),$e({auxData:h,addSvelteAddon:i,addHtmlAddon:o,options:u,dailyLimits:C,newOptions:y,lapseOptions:$,buryOptions:D,displayOrder:S,timerOptions:_,audioOptions:w,advancedOptions:T})}function gc(c,t){de(t,!1);let n=M(t,"data"),e=N();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=()=>n().state.isModified(),Gt(()=>{globalThis.$deckOptions=new Promise((s,l)=>{s(r(e))}),Po()&&xo("deckOptionsReady")}),ge(),yt(Ru(c,{get state(){return n().state},$$legacy:!0}),s=>k(e,s),()=>r(e)),$e()}export{gc as component,$c as universal};
