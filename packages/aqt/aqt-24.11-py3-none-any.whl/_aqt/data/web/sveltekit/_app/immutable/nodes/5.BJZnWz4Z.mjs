var hs=Object.defineProperty;var ms=(d,t,n)=>t in d?hs(d,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[t]=n;var le=(d,t,n)=>ms(d,typeof t!="symbol"?t+"":t,n);import{K as ps,L as ys,M as Cs,N as ws,O as ks,s as Je,d as at,P as Ye,Q as Ee,S as Ne,T as Lt,U as or,V as Ft,W as mt,X as ir,Y as pt,Z as _s,_ as bs,$ as Mt,a0 as Ps,a1 as xs,a2 as Ss,a3 as Os,a4 as Ts}from"../chunks/backend.AWOyeTAw.mjs";import{l as As,w as Rs,a as Ds,b as Is}from"../chunks/utils.D-97yPDv.mjs";import{w as Oe,r as Ls,g as Ke,a as Ms}from"../chunks/index.BB25h7Qo.mjs";import{c as ur}from"../chunks/cloneDeep.D7QE-BLU.mjs";import{i as cr,a as Ns,S as Es}from"../chunks/Select.B1NjCE1_.mjs";import{D as Ie,a as $,F as ee,d as q,e as J,r as j,s as a,n as Vs,t as K,M as Fs}from"../chunks/disclose-version.CXWUuFGG.mjs";import{p as de,m as N,ag as Ve,b as $e,g as r,U as Ws,R as Bt,T as js,t as E,l as oe,a as Re,s as w,N as He,V as Wt,ah as ye,E as _,a0 as ne}from"../chunks/runtime.BJSnJeWl.mjs";import{b as yt}from"../chunks/this.C9pg2j_S.mjs";import{i as ge}from"../chunks/lifecycle.DW1_rEFA.mjs";import{p as V,i as we,s as Nr}from"../chunks/props.fkJSEmZ6.mjs";import{s as Hs,a as jt,c as Er,o as Gt,b as Bs}from"../chunks/index-client.D9hOaSri.mjs";import{c as be,C as Gs}from"../chunks/Container.C09jAWYp.mjs";import{I as zs,b as Se}from"../chunks/IconButton.D3JHs1x_.mjs";import{s as ke,a as ce,b as Xe,m as Z}from"../chunks/store.CAPRemx4.mjs";import{cd as Vr,v as je,ce as Ht,ca as Fr,aq as wt,cf as zt,cg as qs,ch as Qs,t as ht,ci as Us,cj as Ks,ck as dr,cl as Ys,cm as $r,cn as Js,co as Xs,cp as Zs,cq as ea,cr as ta,cs as ra,ct as sa,cu as aa,cv as na,cw as la,cx as oa,cy as ia,cz as ua,cA as gr,cB as ca,cC as da,cD as $a,cE as ga,cF as fr,cG as fa,cH as va,cI as ha,cJ as ma,cK as pa,cL as ya,cM as Ca,cN as wa,cO as ka,cP as _a,cQ as Wr,cR as ba,cS as Pa,cT as xa,cU as Sa,cV as Oa,cW as Ta,cX as Aa,cY as Ra,cZ as Da,c_ as Ia,c$ as La,d0 as Ma,d1 as Na,d2 as Ea,d3 as Va,d4 as Fa,d5 as Wa,d6 as ja,d7 as Ha,d8 as Ba,d9 as Ga,da as za,db as qa,dc as Qa,dd as Ua,de as Ka,df as Ya,dg as Ja,dh as Xa,di as Za,dj as en,dk as tn,dl as rn,dm as sn,dn as an,dp as nn,dq as vr,dr as ln,ds as on,dt as un,du as cn,dv as dn,dw as $n,dx as gn,dy as hr,dz as fn,dA as vn,dB as hn,dC as mn,dD as pn,dE as jr,dF as Hr,dG as Br,dH as yn,dI as Cn,dJ as wn,dK as kn,dL as _n,q as vt,dM as bn,dN as Pn,dO as xn,dP as Sn,dQ as On,dR as bt,dS as mr,dT as pr,dU as Tn,dV as An,dW as Rn,dX as Dn,dY as In,dZ as Ln,d_ as Mn,d$ as yr,e0 as Nn,e1 as En,e2 as Vn,e3 as Fn,e4 as Wn,e5 as jn,e6 as Hn,e7 as Bn,e8 as Gn,e9 as zn,ea as qn,eb as Cr,ec as Qn,ed as Un,ee as Gr,ef as zr,eg as Kn,eh as Nt,ei as Yn,ej as Jn,ek as qr,el as Xn,em as Zn,en as Et,eo as el,ep as tl,eq as rl,er as sl,es as al,et as Qr,eu as nl,ev as ll,ew as ol,ex as il,ey as ul,ez as cl,eA as dl,eB as $l,eC as gl,U as fl,eD as vl,eE as hl,eF as ml,eG as pl,eH as yl,eI as Cl,eJ as wl,eK as kl,eL as _l,eM as Ur,eN as wr,eO as bl,eP as Pl,eQ as xl,eR as Sl,eS as Ol,eT as Tl,eU as Al,eV as Rl,eW as Dl,eX as Il,eY as Ll,eZ as kr,e_ as Ml,e$ as Nl,f0 as El,f1 as Vl,f2 as Fl,f3 as Wl,f4 as jl,f5 as _r}from"../chunks/runtime-require.B9u3s4Mi.mjs";import{R as Ce}from"../chunks/Row.OQ_EW2O_.mjs";import{e as qt,i as Kr,p as Hl}from"../chunks/theme.BMK9KvBa.mjs";import{T as We}from"../chunks/TitledContainer.CoHyBpMI.mjs";import{s as G,e as he}from"../chunks/render.CQvFnAiW.mjs";import{C as nt,R as kt,H as ue,c as Te,a as X,b as Be,S as Le,E as qe,M as Bl}from"../chunks/EnumSelectorRow.CB7WI00X.mjs";import{d as Gl,W as zl,P as ql,D as ft,t as Ql}from"../chunks/Badge.r4NBCJYU.mjs";import{a as St}from"../chunks/input.DyT1M9sw.mjs";import{I as xt,aa as Ul,H as Kl,e as br,f as Yr,ab as Yl,S as Jl,g as Xl,p as Zl}from"../chunks/Shortcut.B0N39ach.mjs";import{C as Ze}from"../chunks/Col.BQP6lpt8.mjs";import{m as Jr}from"../chunks/context-keys.Dbye-yJ_.mjs";import{L as eo,S as to}from"../chunks/LabelButton.MHrk84gw.mjs";import{t as Pr,s as xr}from"../chunks/index.DPGbUxyT.mjs";import{r as Pt}from"../chunks/progress.C31K7zWr.mjs";import{y as Sr,z as Or,A as Tr,C as ro,B as so,D as ao,E as no,H as lo,F as oo,G as io,b as uo,I as co,K as $o,J as go,N as fo,L as vo}from"../chunks/HoverColumns.DcrenFWk.mjs";import{t as ho,a as Ar}from"../chunks/time.D7gIuuTU.mjs";import{I as mo,i as po,c as yo,C as Co,T as wo}from"../chunks/TableData.SXvMF5vK.mjs";import{b as Fe,c as ko,u as _o,d as bo}from"../chunks/time.c7TpusB-.mjs";import{a as Po,c as xo}from"../chunks/bridgecommand.DCJGkGSy.mjs";function So(d,t,...n){return Oo(d,po,t,n)}function Oo(d,t,n,e){return function s(l,v){if(v>=e.length)return n(l);const u=new mo,i=e[v++];let c=-1;for(const C of l){const p=i(C,++c,l),g=u.get(p);g?g.push(C):u.set(p,[C])}for(const[C,p]of u)u.set(C,s(p,v));return t(u)}(d,0)}const To=yo("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");class Ao{constructor(t,n){le(this,"currentConfig");le(this,"currentAuxData");le(this,"configList");le(this,"cardStateCustomizer");le(this,"currentDeck");le(this,"deckLimits");le(this,"defaults");le(this,"addonComponents");le(this,"newCardsIgnoreReviewLimit");le(this,"applyAllParentLimits");le(this,"fsrs");le(this,"fsrsReschedule",Oe(!1));le(this,"daysSinceLastOptimization");le(this,"currentPresetName");le(this,"targetDeckId");le(this,"configs");le(this,"selectedIdx");le(this,"configListSetter");le(this,"modifiedConfigs",new Set);le(this,"removedConfigs",[]);le(this,"schemaModified");le(this,"_presetAssignmentsChanged",!1);var e,s;this.targetDeckId=t,this.currentDeck=n.currentDeck,this.defaults=n.defaults.config,this.configs=n.allConfig.map(l=>({config:l.config,useCount:l.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(l=>l.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=Oe(n.cardStateCustomizer),this.deckLimits=Oe((s=(e=n.currentDeck)==null?void 0:e.limits)!=null?s:Do()),this.newCardsIgnoreReviewLimit=Oe(n.newCardsIgnoreReviewLimit),this.applyAllParentLimits=Oe(n.applyAllParentLimits),this.fsrs=Oe(n.fsrs),this.daysSinceLastOptimization=Oe(n.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=Oe(this.getCurrentConfig()),this.currentAuxData=Oe(this.getCurrentAuxData()),this.currentPresetName=Oe(this.configs[this.selectedIdx].config.name),this.configList=Ls(this.getConfigList(),l=>{this.configListSetter=l}),this.schemaModified=n.schemaModified,this.addonComponents=Oe([]),Ke(this.configList),this.currentConfig.subscribe(l=>this.onCurrentConfigChanged(l)),this.currentAuxData.subscribe(l=>this.onCurrentAuxDataChanged(l))}setCurrentIndex(t){this.selectedIdx=t,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList()}getCurrentName(){return this.configs[this.selectedIdx].config.name}setCurrentName(t){if(this.configs[this.selectedIdx].config.name===t)return;const n=this.ensureNewNameUnique(t),e=this.configs[this.selectedIdx].config;e.name=n,e.id&&this.modifiedConfigs.add(e.id),this.sortConfigs(),this.updateConfigList()}addConfig(t){this.addConfigFrom(t,this.defaults)}cloneConfig(t){this.addConfigFrom(t,this.configs[this.selectedIdx].config.config)}addConfigFrom(t,n){const e=this.ensureNewNameUnique(t),l={config:new ps({id:0n,name:e,config:new ys(ur(n))}),useCount:0};this.configs.push(l),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const t=this.configs[this.selectedIdx].config.id;if(t===1n)throw Error("can't remove default config");t!==0n&&(this.removedConfigs.push(t),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1),this.selectedIdx=Math.max(0,this.selectedIdx-1),this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList()}dataForSaving(t){const e=[...this.configs.map(s=>s.config).filter((s,l)=>l!==this.selectedIdx&&(s.id===0n||this.modifiedConfigs.has(s.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:e,mode:t,cardStateCustomizer:Ke(this.cardStateCustomizer),limits:Ke(this.deckLimits),newCardsIgnoreReviewLimit:Ke(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Ke(this.applyAllParentLimits),fsrs:Ke(this.fsrs),fsrsReschedule:Ke(this.fsrsReschedule)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(t){await Cs(this.dataForSaving(t))}onCurrentConfigChanged(t){const n=this.configs[this.selectedIdx].config;cr(t,n.config)||(n.config=t,n.id&&this.modifiedConfigs.add(n.id))}onCurrentAuxDataChanged(t){const n=this.getCurrentAuxData();cr(n,t)||this.currentConfig.update(e=>{const s=new TextEncoder().encode(JSON.stringify(t));return e.other=s,e})}ensureNewNameUnique(t){return this.configs.findIndex(e=>e.config.name===t)!==-1?t+(new Date().getTime()/1e3).toFixed(0):t}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var t;(t=this.configListSetter)==null||t.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return ur(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const t=this.configs[this.selectedIdx].config.config;return Ro(t.other)}sortConfigs(){const t=this.configs[this.selectedIdx].config.name;this.configs.sort((n,e)=>As(n.config.name,e.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(n=>n.config.name==t)}getConfigList(){return this.configs.map((n,e)=>{const s=n.useCount+(e===this.selectedIdx?1:0);return{name:n.config.name,current:e===this.selectedIdx,idx:e,useCount:s}})}isModified(){return this.removedConfigs.length>0||this.modifiedConfigs.size>0}}function Ro(d){if(!d.length)return{};let t;try{t=JSON.parse(new TextDecoder().decode(d))}catch{return console.log("invalid json in deck config"),{}}return t.constructor!==Object?(console.log("invalid object in deck config"),{}):t}function Do(){return new ws({})}class Ue{constructor(t,n,e,s,l){le(this,"title");le(this,"value");le(this,"setter");le(this,"disabledValue");le(this,"startValue");le(this,"initialValue");this.title=t,this.value=this.initialValue=n,this.setter=e,this.disabledValue=s,this.startValue=l}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(t){var n,e;this.value=(e=(n=this.value)!=null?n:this.startValue)!=null?e:t,this.setter(this.value)}setValue(t){this.value=t,this.setter(t)}}const Io=async({params:d})=>{const t=Number(d.deckId),n=BigInt(t),e=await ks({did:n});return{state:new Ao(BigInt(n),e)}},$c=Object.freeze(Object.defineProperty({__proto__:null,load:Io},Symbol.toStringTag,{value:"Module"}));Vr("svelte",Hs);Vr("svelte/store",Ms);function Lo(d,t){de(t,!1);const n=ke(),e=()=>ce(r(v),"$components",n),s=()=>ce(u,"$auxData",n);let l=V(t,"state");const v=N(l().addonComponents),u=l().currentAuxData;ge();var i=Ie(),c=ee(i);we(c,()=>e().length,C=>{We(C,{title:"Add-ons",children:(p,g)=>{var O=Ie(),T=ee(O);qt(T,1,e,Kr,(k,y,A)=>{var m=Ie(),H=ee(m);jt(H,()=>Ve(y).component,(I,W)=>{W(I,Nr({get data(){return s()},set data(L){Xe(u,L)}},()=>Ve(y),{$$legacy:!0}))}),$(k,m)}),$(p,O)},$$slots:{default:!0},$$legacy:!0})}),$(d,i),$e()}function Vt(d,t){let n,e;if(t instanceof Element){if(n=t,e=Array.prototype.indexOf.call(d,n),e<0)return null}else if(typeof t=="string"){const s=d.namedItem(t);if(!s||(n=s,e=Array.prototype.indexOf.call(d,n),e<0))return null}else if(t<0){e=d.length+t;const s=d.item(e);if(!s)return null;n=s}else{e=t;const s=d.item(e);if(!s)return null;n=s}return[n,e]}class Mo{constructor(t){le(this,"parent");this.parent=t}insertElement(t,n){const e=Vt(this.parent.children,n);if(!e)return-1;const[s,l]=e;return this.parent.insertBefore(t,s[0]),l}appendElement(t,n){var u;const e=Vt(this.parent.children,n);if(!e)return-1;const[s,l]=e,v=(u=s.nextElementSibling)!=null?u:null;return this.parent.insertBefore(t,v),l+1}updateElement(t,n){const e=Vt(this.parent.children,n);return e?(t(...e),!0):!1}}function No(d){return new Mo(d)}function Eo(d){return d.nodeType===Node.ELEMENT_NODE}function Rr(){let d;return[new Promise(n=>d=n),d]}function Vo(d){function t(e){Ws(d,e)}return[{get(){return Bt(d)},available(){return js(d)}},t]}function Fo(d,t,n,e){const s=Oe([]);s.subscribe(t);function l(T,k){s.update(y=>(y.splice(T,0,k),y))}const[v,u]=Rr(),i=v.then(No),c=Oe([]);async function C(T,k){const[y,A]=Rr(),m=await i,H=d();function I(o){return!T.id||o.id===T.id}async function W(o,D){for(const x of o)for(const h of x.addedNodes){if(!Eo(h)||!I(h))continue;const b=k(h,m);return b>=0&&l(b,H),A(void 0),D.disconnect()}}new MutationObserver(W).observe(m.parent,{childList:!0});const M={component:T,hostProps:H};return c.update(o=>(o.push(M),o)),await y,{destroy(){c.update(o=>(Ns(o,M),o))}}}async function p(T,k){return(await i).updateElement((A,m)=>{s.update(H=>(H[m]=T(H[m]),H))},k)}const g=e({addComponent:C,updateProps:p});function O(){const T=d();return s.update(k=>(k.push(T),k)),T}return n({getProps:O}),{dynamicSlotted:c,resolveSlotContainer:u,slotsInterface:g}}function Wo(){return{detach:Oe(!1)}}function jo({addComponent:d,updateProps:t}){function n(u,i=0){return d(u,(c,C)=>C.insertElement(c,i))}function e(u,i=-1){return d(u,(c,C)=>C.appendElement(c,i))}function s(u){return t(i=>(i.detach.set(!1),i),u)}function l(u){return t(i=>(i.detach.set(!0),i),u)}function v(u){return t(i=>(i.detach.update(c=>!c),i),u)}return{insert:n,append:e,show:s,hide:l,toggle:v}}const Ho=Symbol("dynamicSlotting"),[Dr,Bo]=Vo(Ho);var Go=q('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function Ge(d,t){de(t,!1);const n=ke(),e=()=>ce(r(O),"$dynamicSlotted",n);function s(m){return m}let l=V(t,"slotHost"),v=V(t,"createProps",0,Wo),u=V(t,"updatePropsList",0,s),i=V(t,"setSlotHostContext",0,Bo),c=V(t,"createInterface",0,jo);const C=Fo(v(),u(),i(),c()),p=C.slotsInterface,g=C.resolveSlotContainer,O=N(C.dynamicSlotted);let T=V(t,"api");Object.assign(T(),p),ge();var k=Go(),y=J(k);Je(y,at(t),{});var A=a(a(y,!0));qt(A,7,e,(m,H)=>Ve(Ve(m)).component.id,(m,H,I)=>{let W=()=>Ve(Ve(H)).component,L=()=>Ve(Ve(H)).hostProps;var M=Ie(),o=ee(M);jt(o,l,(D,x)=>{x(D,{get id(){return W().id},get hostProps(){return L()},children:(h,P)=>{var b=Ie(),S=ee(b);jt(S,()=>W().component,(R,B)=>{B(R,Nr(()=>W().props,{$$legacy:!0}))}),$(h,b)},$$slots:{default:!0},$$legacy:!0})}),$(m,M)}),j(k),Gl(k,m=>g(m)),$(d,k),$e()}var zo=q('<div class="item svelte-u5rx4p"><!></div>');function U(d,t){var c;de(t,!1);const n=ke(),e=()=>ce(v,"$detach",n);let s=V(t,"id",0,void 0),l=V(t,"hostProps",0,void 0);Dr.available()||console.log("Item: should always have a slotHostContext");const{detach:v}=(c=l())!=null?c:Dr.get().getProps();ge();var u=zo(),i=J(u);we(i,()=>!e(),C=>{var p=Ie(),g=ee(p);Je(g,at(t),{}),$(C,p)}),j(u),E(()=>je(u,"id",s())),$(d,u),$e()}var qo=q(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function Ct(d,t){de(t,!1);let n=V(t,"title");ge(),Vs();var e=qo(),s=ee(e,!0),l=a(s);E(()=>je(l,"title",Ht()));var v=J(l);xt(v,{icon:Ul,$$legacy:!0}),j(l),E(()=>{var u;return G(s,`${(u=n())!=null?u:""} `)}),$(d,e),$e()}var Qo=q('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),Uo=q('<div class="m-2"><!></div>');function Ko(d,t){let n=V(t,"value",4),e=V(t,"title");var s=Uo(),l=J(s);nt(l,{children:(v,u)=>{var i=Qo(),c=J(i),C=J(c);Ct(C,{get title(){return e()},$$legacy:!0}),j(c);var p=a(a(c,!0)),g=J(p);Fr(g),j(p),j(i),St(g,n,O=>n(O)),$(v,i)},$$slots:{default:!0,revert:(v,u)=>{kt(v,{slot:"revert",get value(){return n()},set value(i){n(i)},defaultValue:"",$$legacy:!0})}},$$legacy:!0}),j(s),$(d,s)}var Yo=q('<div class="spinner decrement svelte-1dakg3f" tabindex="-1" role="button"><!></div> <div class="spinner increment svelte-1dakg3f" tabindex="-1" role="button"><!></div>',1),Jo=q('<div class="spin-box svelte-1dakg3f"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-1dakg3f"> <!></div>');function Xr(d,t){de(t,!1);let n=V(t,"value",4),e=V(t,"step",0,1),s=V(t,"min",0,1),l=V(t,"max",0,9999),v=N(),u=N(!1);function i(L){Number.isNaN(L)||n(Math.min(l(),Math.max(s(),L))),Wt().then(()=>ye(v,r(v).value=r(C)))}function c(L){return Math.floor(L)===L?0:L.toString().split(".")[1].length||0}let C=N();function p(){i(parseFloat(this.value))}function g(L){r(u)&&(i(n()+(L.deltaY<0?e():-e())),L.preventDefault())}function O(L){i(n()+L),r(y)&&setTimeout(()=>O(L),A)}const T=[1500,1250,1e3,750,500,250];async function k(L){w(y,!0),A=128,w(m,setTimeout(L,250));for(const M of T)A=await new Promise(o=>setTimeout(()=>o(r(y)?A/2:128),M))}let y=N(!1),A,m=N();oe(()=>(He(n()),He(e())),()=>{w(C,n().toFixed(c(e())))}),Re(),ge();var H=Jo(),I=J(H);yt(I,L=>w(v,L),()=>r(v)),wt(I);var W=a(a(I,!0));we(W,Kl,L=>{var M=Yo(),o=ee(M);E(()=>je(o,"title",qs()));var D=J(o);br(D,{children:(P,b)=>{xt(P,{icon:Yr,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(o);var x=a(a(o,!0));E(()=>je(x,"title",Qs()));var h=J(x);br(h,{children:(P,b)=>{xt(P,{icon:Yl,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(x),E(()=>{ht(o,"active",n()>s()),ht(x,"active",n()<l())}),he("click",o,()=>{r(v).focus(),n()>s()&&O(-e())},!1),he("mousedown",o,()=>k(()=>{n()>s()&&O(-e())}),!1),he("mouseup",o,()=>{clearTimeout(r(m)),w(y,!1)},!1),he("click",x,()=>{r(v).focus(),n()<l()&&O(e())},!1),he("mousedown",x,()=>k(()=>{n()<l()&&O(e())}),!1),he("mouseup",x,()=>{clearTimeout(r(m)),w(y,!1)},!1),$(L,M)}),j(H),E(()=>{je(I,"min",s()),je(I,"max",l()),je(I,"step",e()),zt(I,r(C))}),he("wheel",H,g,!1,!0),he("blur",I,p,!1),he("focusin",I,()=>w(u,!0),!1),he("focusout",I,()=>w(u,!1),!1),$(d,H),$e()}var Xo=q('<div style="display: contents"><!></div> <div style="display: contents"><!></div>',1),Zo=q('<div style="display: contents"><!></div>',1);function ze(d,t){let n=V(t,"value",4),e=V(t,"defaultValue"),s=V(t,"min",0,0),l=V(t,"max",0,9999),v=V(t,"step",0,.01);var u=Zo(),i=ee(u);be(i,()=>({"--cols":13})),Ce(i.lastChild,{children:(c,C)=>{var p=Xo(),g=ee(p);be(g,()=>({"--col-size":7})),Ze(g.lastChild,{breakpoint:"xs",children:(T,k)=>{var y=Ie(),A=ee(y);Je(A,at(t),{}),$(T,y)},$$slots:{default:!0},$$legacy:!0}),j(g);var O=a(a(g,!0));be(O,()=>({"--col-size":6})),Ze(O.lastChild,{breakpoint:"xs",children:(T,k)=>{nt(T,{children:(y,A)=>{Xr(y,{get value(){return n()},set value(m){n(m)},get min(){return s()},get max(){return l()},get step(){return v()},$$legacy:!0})},$$slots:{default:!0,revert:(y,A)=>{kt(y,{slot:"revert",get value(){return n()},set value(m){n(m)},get defaultValue(){return e()},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(O),$(c,p)},$$slots:{default:!0},$$legacy:!0}),j(i),$(d,u)}var ei=q("<!> <!>",1),ti=q('<div style="display: contents"><!></div> <div style="display: contents"><!></div>',1),ri=q('<div style="display: contents"><!></div>',1);function Ae(d,t){let n=V(t,"value",4),e=V(t,"defaultValue"),s=V(t,"min",0,0),l=V(t,"max",0,9999);var v=ri(),u=ee(v);be(u,()=>({"--cols":13})),Ce(u.lastChild,{children:(i,c)=>{var C=ti(),p=ee(C);be(p,()=>({"--col-size":7})),Ze(p.lastChild,{breakpoint:"xs",children:(O,T)=>{var k=Ie(),y=ee(k);Je(y,at(t),{}),$(O,k)},$$slots:{default:!0},$$legacy:!0}),j(p);var g=a(a(p,!0));be(g,()=>({"--col-size":6})),Ze(g.lastChild,{breakpoint:"xs",children:(O,T)=>{Ce(O,{class:"flex-grow-1",children:(k,y)=>{var I;var A=ei(),m=ee(A);Je(m,(I=t.$$slots)==null?void 0:I.tabs,{});var H=a(a(m,!0));nt(H,{children:(W,L)=>{Xr(W,{get value(){return n()},set value(M){n(M)},get min(){return s()},get max(){return l()},$$legacy:!0})},$$slots:{default:!0,revert:(W,L)=>{kt(W,{slot:"revert",get value(){return n()},set value(M){n(M)},get defaultValue(){return e()},$$legacy:!0})}},$$legacy:!0}),$(k,A)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(g),$(i,C)},$$slots:{default:!0},$$legacy:!0}),j(u),$(d,v)}var si=q('<input type="date" class="svelte-ora9c4">'),ai=q('<div style="display: contents"><!></div> <div style="display: contents"><!></div>',1),ni=q('<div style="display: contents"><!></div>',1),li=q("<div><!></div>");function oi(d,t){de(t,!1);let n=V(t,"date",4);oe(()=>He(n()),()=>{n(n()?n():"1970-01-01")}),Re();var e=li(),s=J(e);nt(s,{children:(l,v)=>{var u=ni(),i=ee(u);be(i,()=>({"--cols":13})),Ce(i.lastChild,{children:(c,C)=>{var p=ai(),g=ee(p);be(g,()=>({"--col-size":7})),Ze(g.lastChild,{breakpoint:"xs",children:(T,k)=>{var y=Ie(),A=ee(y);Je(A,at(t),{}),$(T,y)},$$slots:{default:!0},$$legacy:!0}),j(g);var O=a(a(g,!0));be(O,()=>({"--col-size":6})),Ze(O.lastChild,{breakpoint:"xs",children:(T,k)=>{var y=si();wt(y),St(y,n,A=>n(A)),$(T,y)},$$slots:{default:!0},$$legacy:!0}),j(O),$(c,p)},$$slots:{default:!0},$$legacy:!0}),j(i),$(l,u)},$$slots:{default:!0},$$legacy:!0}),j(e),$(d,e),$e()}var ii=q("<!> <!> <!> <!> <!>",1),ui=q("<!> <!>",1),ci=q("<!> <!> <!>",1);function di(d,t){de(t,!1);const n=ke(),e=()=>ce(p,"$fsrs",n),s=()=>ce(i,"$config",n),l=()=>ce(C,"$cardStateCustomizer",n);let v=V(t,"state"),u=V(t,"api");const i=v().currentConfig,c=v().defaults,C=v().cardStateCustomizer,p=v().fsrs,g={maximumInterval:{title:Us(),help:Ks(),url:ue.DeckOptions.maximumInterval},historicalRetention:{title:dr(),help:Ys(),sched:Te.FSRS},ignoreRevlogsBeforeMs:{title:$r(),help:Js(),sched:Te.FSRS},startingEase:{title:Xs(),help:Zs(),url:ue.DeckOptions.startingEase,sched:Te.SM2},easyBonus:{title:ea(),help:ta(),url:ue.DeckOptions.easyBonus,sched:Te.SM2},intervalModifier:{title:ra(),help:sa(),url:ue.DeckOptions.intervalModifier,sched:Te.SM2},hardInterval:{title:aa(),help:na(),url:ue.DeckOptions.hardInterval,sched:Te.SM2},newInterval:{title:la(),help:oa(),url:ue.DeckOptions.newInterval,sched:Te.SM2},customScheduling:{title:ia(),help:ua(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling"}},O=Object.values(g);let T=N(),k=N();function y(m){r(T).show(),r(k).to(m)}ge();var A=ne(()=>gr());We(d,{get title(){return r(A)},children:(m,H)=>{Ge(m,{slotHost:U,get api(){return u()},children:(I,W)=>{var L=ci(),M=ee(L);U(M,{children:(x,h)=>{Ae(x,{get value(){return s().maximumReviewInterval},set value(P){Z(i,_(s).maximumReviewInterval=P,_(s))},get defaultValue(){return c.maximumReviewInterval},min:1,max:365*100,children:(P,b)=>{X(P,{$$events:{click:()=>y(Object.keys(g).indexOf("maximumInterval"))},children:(S,R)=>{var B=K();E(()=>G(B,g.maximumInterval.title)),$(S,B)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var o=a(a(M,!0));we(o,()=>!e(),x=>{var h=ii(),P=ee(h);U(P,{children:(Y,re)=>{ze(Y,{get value(){return s().initialEase},set value(z){Z(i,_(s).initialEase=z,_(s))},get defaultValue(){return c.initialEase},min:1.31,max:5,children:(z,F)=>{X(z,{$$events:{click:()=>y(Object.keys(g).indexOf("startingEase"))},children:(fe,me)=>{var te=K();E(()=>G(te,g.startingEase.title)),$(fe,te)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var b=a(a(P,!0));U(b,{children:(Y,re)=>{ze(Y,{get value(){return s().easyMultiplier},set value(z){Z(i,_(s).easyMultiplier=z,_(s))},get defaultValue(){return c.easyMultiplier},min:1,max:5,children:(z,F)=>{X(z,{$$events:{click:()=>y(Object.keys(g).indexOf("easyBonus"))},children:(fe,me)=>{var te=K();E(()=>G(te,g.easyBonus.title)),$(fe,te)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var S=a(a(b,!0));U(S,{children:(Y,re)=>{ze(Y,{get value(){return s().intervalMultiplier},set value(z){Z(i,_(s).intervalMultiplier=z,_(s))},get defaultValue(){return c.intervalMultiplier},min:.5,max:2,children:(z,F)=>{X(z,{$$events:{click:()=>y(Object.keys(g).indexOf("intervalModifier"))},children:(fe,me)=>{var te=K();E(()=>G(te,g.intervalModifier.title)),$(fe,te)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var R=a(a(S,!0));U(R,{children:(Y,re)=>{ze(Y,{get value(){return s().hardMultiplier},set value(z){Z(i,_(s).hardMultiplier=z,_(s))},get defaultValue(){return c.hardMultiplier},min:.5,max:1.3,children:(z,F)=>{X(z,{$$events:{click:()=>y(Object.keys(g).indexOf("hardInterval"))},children:(fe,me)=>{var te=K();E(()=>G(te,g.hardInterval.title)),$(fe,te)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var B=a(a(R,!0));U(B,{children:(Y,re)=>{ze(Y,{get value(){return s().lapseMultiplier},set value(z){Z(i,_(s).lapseMultiplier=z,_(s))},get defaultValue(){return c.lapseMultiplier},max:1,children:(z,F)=>{X(z,{$$events:{click:()=>y(Object.keys(g).indexOf("newInterval"))},children:(fe,me)=>{var te=K();E(()=>G(te,g.newInterval.title)),$(fe,te)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(x,h)},x=>{var h=ui(),P=ee(h);ze(P,{get value(){return s().historicalRetention},set value(S){Z(i,_(s).historicalRetention=S,_(s))},get defaultValue(){return c.historicalRetention},min:.5,max:1,children:(S,R)=>{X(S,{$$events:{click:()=>y(Object.keys(g).indexOf("historicalRetention"))},children:(B,Y)=>{var re=K();E(()=>G(re,dr())),$(B,re)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var b=a(a(P,!0));U(b,{children:(S,R)=>{oi(S,{get date(){return s().ignoreRevlogsBeforeDate},set date(B){Z(i,_(s).ignoreRevlogsBeforeDate=B,_(s))},children:(B,Y)=>{X(B,{$$events:{click:()=>y(Object.keys(g).indexOf("ignoreRevlogsBeforeMs"))},children:(re,z)=>{var F=K();E(()=>G(F,$r())),$(re,F)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(x,h)});var D=a(a(o,!0));U(D,{children:(x,h)=>{Ko(x,{get title(){return g.customScheduling.title},get value(){return l()},set value(P){Xe(C,P)},$$events:{click:()=>y(Object.keys(g).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(I,L)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(m,H)=>{var I=ne(()=>gr());Be(m,{get title(){return r(I)},get url(){return ue.DeckOptions.advanced},slot:"tooltip",get fsrs(){return e()},helpSections:O,$$events:{mount:W=>{w(T,W.detail.modal),w(k,W.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}var $i=q("<!> <!>",1);function gi(d,t){de(t,!1);const n=ke(),e=()=>ce(v,"$config",n);let s=V(t,"state"),l=V(t,"api");const v=s().currentConfig,u=s().defaults,i={disableAutoplay:{title:ca(),help:da()},skipQuestionWhenReplaying:{title:$a(),help:ga()}},c=Object.values(i);let C=N(),p=N();function g(T){r(C).show(),r(p).to(T)}ge();var O=ne(()=>fr());We(d,{get title(){return r(O)},children:(T,k)=>{Ge(T,{slotHost:U,get api(){return l()},children:(y,A)=>{var m=$i(),H=ee(m);U(H,{children:(W,L)=>{Le(W,{get value(){return e().disableAutoplay},set value(M){Z(v,_(e).disableAutoplay=M,_(e))},get defaultValue(){return u.disableAutoplay},children:(M,o)=>{X(M,{$$events:{click:()=>g(Object.keys(i).indexOf("disableAutoplay"))},children:(D,x)=>{var h=K();E(()=>G(h,i.disableAutoplay.title)),$(D,h)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var I=a(a(H,!0));U(I,{children:(W,L)=>{Le(W,{get value(){return e().skipQuestionWhenReplayingAnswer},set value(M){Z(v,_(e).skipQuestionWhenReplayingAnswer=M,_(e))},get defaultValue(){return u.skipQuestionWhenReplayingAnswer},children:(M,o)=>{X(M,{$$events:{click:()=>g(Object.keys(i).indexOf("skipQuestionWhenReplaying"))},children:(D,x)=>{var h=K();E(()=>G(h,i.skipQuestionWhenReplaying.title)),$(D,h)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(y,m)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(T,k)=>{var y=ne(()=>fr());Be(T,{get title(){return r(y)},get url(){return ue.DeckOptions.audio},slot:"tooltip",helpSections:c,$$events:{mount:A=>{w(C,A.detail.modal),w(p,A.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}function fi(){return[{label:fa(),value:Ye.DECK},{label:va(),value:Ye.DECK_THEN_RANDOM_NOTES},{label:ha(),value:Ye.LOWEST_POSITION},{label:ma(),value:Ye.HIGHEST_POSITION},{label:pa(),value:Ye.RANDOM_NOTES},{label:ya(),value:Ye.RANDOM_CARDS}]}function vi(){return[{label:Ca(),value:Ee.TEMPLATE},{label:wa(),value:Ee.NO_SORT},{label:ka(),value:Ee.TEMPLATE_THEN_RANDOM},{label:_a(),value:Ee.RANDOM_NOTE_THEN_TEMPLATE},{label:Wr(),value:Ee.RANDOM_CARD}]}function hi(d){return[{label:ba(),value:Ne.DAY},{label:Pa(),value:Ne.DAY_THEN_DECK},{label:xa(),value:Ne.DECK_THEN_DAY},{label:Sa(),value:Ne.INTERVALS_ASCENDING},{label:Oa(),value:Ne.INTERVALS_DESCENDING},{label:d?Ta():Aa(),value:Ne.EASE_ASCENDING},{label:d?Ra():Da(),value:Ne.EASE_DESCENDING},{label:Ia(),value:Ne.RELATIVE_OVERDUENESS},{label:Wr(),value:Ne.RANDOM},{label:La(),value:Ne.ADDED},{label:Ma(),value:Ne.REVERSE_ADDED}]}function Ir(){return[{label:Na(),value:Lt.MIX_WITH_REVIEWS},{label:Ea(),value:Lt.AFTER_REVIEWS},{label:Va(),value:Lt.BEFORE_REVIEWS}]}function mi(){return[{label:Fa(),value:or.SUSPEND},{label:Wa(),value:or.TAG_ONLY}]}function pi(){return[{label:ja(),value:Ft.DUE},{label:Ha(),value:Ft.RANDOM}]}function yi(){return[{label:Ba(),value:mt.BURY_CARD},{label:Ga(),value:mt.ANSWER_AGAIN},{label:za(),value:mt.ANSWER_GOOD},{label:qa(),value:mt.ANSWER_HARD},{label:Qa(),value:mt.SHOW_REMINDER}]}function Ci(){return[{label:Ua(),value:ir.SHOW_ANSWER},{label:Ka(),value:ir.SHOW_REMINDER}]}var wi=q("<!> <!> <!> <!> <!>",1);function ki(d,t){de(t,!1);const n=ke(),e=()=>ce(v,"$config",n);let s=V(t,"state"),l=V(t,"api");const v=s().currentConfig,u=s().defaults,i={secondsToShowQuestion:{title:Ya(),help:Ja()},secondsToShowAnswer:{title:Xa(),help:Za()},waitForAudio:{title:en(),help:tn()},answerAction:{title:rn(),help:sn()},questionAction:{title:an(),help:nn()}},c=Object.values(i);let C=N(),p=N();function g(T){r(C).show(),r(p).to(T)}ge();var O=ne(()=>vr());We(d,{get title(){return r(O)},children:(T,k)=>{Ge(T,{slotHost:U,get api(){return l()},children:(y,A)=>{var m=wi(),H=ee(m);U(H,{children:(o,D)=>{ze(o,{get value(){return e().secondsToShowQuestion},set value(x){Z(v,_(e).secondsToShowQuestion=x,_(e))},get defaultValue(){return u.secondsToShowQuestion},step:.1,children:(x,h)=>{X(x,{$$events:{click:()=>g(Object.keys(i).indexOf("secondsToShowQuestion"))},children:(P,b)=>{var S=K();E(()=>G(S,i.secondsToShowQuestion.title)),$(P,S)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var I=a(a(H,!0));U(I,{children:(o,D)=>{ze(o,{get value(){return e().secondsToShowAnswer},set value(x){Z(v,_(e).secondsToShowAnswer=x,_(e))},get defaultValue(){return u.secondsToShowAnswer},step:.1,children:(x,h)=>{X(x,{$$events:{click:()=>g(Object.keys(i).indexOf("secondsToShowAnswer"))},children:(P,b)=>{var S=K();E(()=>G(S,i.secondsToShowAnswer.title)),$(P,S)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var W=a(a(I,!0));U(W,{children:(o,D)=>{Le(o,{get value(){return e().waitForAudio},set value(x){Z(v,_(e).waitForAudio=x,_(e))},get defaultValue(){return u.waitForAudio},children:(x,h)=>{X(x,{$$events:{click:()=>g(Object.keys(i).indexOf("waitForAudio"))},children:(P,b)=>{var S=K();E(()=>G(S,i.waitForAudio.title)),$(P,S)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var L=a(a(W,!0));U(L,{children:(o,D)=>{var x=ne(yi);qe(o,{get value(){return e().answerAction},set value(h){Z(v,_(e).answerAction=h,_(e))},get defaultValue(){return u.answerAction},get choices(){return r(x)},children:(h,P)=>{X(h,{$$events:{click:()=>g(Object.keys(i).indexOf("answerAction"))},children:(b,S)=>{var R=K();E(()=>G(R,i.answerAction.title)),$(b,R)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var M=a(a(L,!0));U(M,{children:(o,D)=>{var x=ne(Ci);qe(o,{get value(){return e().questionAction},set value(h){Z(v,_(e).questionAction=h,_(e))},get defaultValue(){return u.questionAction},get choices(){return r(x)},children:(h,P)=>{X(h,{$$events:{click:()=>g(Object.keys(i).indexOf("questionAction"))},children:(b,S)=>{var R=K();E(()=>G(R,i.questionAction.title)),$(b,R)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(y,m)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(T,k)=>{var y=ne(()=>vr());Be(T,{get title(){return r(y)},get url(){return ue.DeckOptions.autoAdvance},slot:"tooltip",helpSections:c,$$events:{mount:A=>{w(C,A.detail.modal),w(p,A.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}var _i=q("<!> <!> <!>",1);function bi(d,t){de(t,!1);const n=ke(),e=()=>ce(v,"$config",n);let s=V(t,"state"),l=V(t,"api");const v=s().currentConfig,u=s().defaults,i=`

`+ln(),c={buryNewSiblings:{title:on(),help:un()+i},buryReviewSiblings:{title:cn(),help:dn()+i},buryInterdayLearningSiblings:{title:$n(),help:gn()+i}},C=Object.values(c);let p=N(),g=N();function O(k){r(p).show(),r(g).to(k)}ge();var T=ne(()=>hr());We(d,{get title(){return r(T)},children:(k,y)=>{Ge(k,{slotHost:U,get api(){return l()},children:(A,m)=>{var H=_i(),I=ee(H);U(I,{children:(M,o)=>{Le(M,{get value(){return e().buryNew},set value(D){Z(v,_(e).buryNew=D,_(e))},get defaultValue(){return u.buryNew},children:(D,x)=>{X(D,{$$events:{click:()=>O(Object.keys(c).indexOf("buryNewSiblings"))},children:(h,P)=>{var b=K();E(()=>G(b,c.buryNewSiblings.title)),$(h,b)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var W=a(a(I,!0));U(W,{children:(M,o)=>{Le(M,{get value(){return e().buryReviews},set value(D){Z(v,_(e).buryReviews=D,_(e))},get defaultValue(){return u.buryReviews},children:(D,x)=>{X(D,{$$events:{click:()=>O(Object.keys(c).indexOf("buryReviewSiblings"))},children:(h,P)=>{var b=K();E(()=>G(b,c.buryReviewSiblings.title)),$(h,b)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var L=a(a(W,!0));U(L,{children:(M,o)=>{Le(M,{get value(){return e().buryInterdayLearning},set value(D){Z(v,_(e).buryInterdayLearning=D,_(e))},get defaultValue(){return u.buryInterdayLearning},children:(D,x)=>{X(D,{$$events:{click:()=>O(Object.keys(c).indexOf("buryInterdayLearningSiblings"))},children:(h,P)=>{var b=K();E(()=>G(b,c.buryInterdayLearningSiblings.title)),$(h,b)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(A,H)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(k,y)=>{var A=ne(()=>hr());Be(k,{get title(){return r(A)},get url(){return ue.Studying.siblingsAndBurying},slot:"tooltip",helpSections:C,$$events:{mount:m=>{w(p,m.detail.modal),w(g,m.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}function Pi(){}var xi=q('<hr class="dropdown-divider">');function Si(d){var t=xi();$(d,t)}var Oi=q('<div class="save svelte-ymxw35"> </div>'),Ti=q('<div style="display: contents"><!></div>',1),Ai=q("<!> <!> <!> <!> <!> <!> <!>",1),Ri=q('<div class="d-flex"><div style="display: contents"><!></div> <!> <!></div>');function Di(d,t){de(t,!1);const n=window.getComputedStyle(document.body).direction=="rtl",e=Er();let s=V(t,"state");async function l(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await Wt()}async function v(){if(await Wt(),s().defaultConfigSelected()){alert(fn());return}const k=(s().removalWilLForceFullSync()?vn()+" ":"")+hn({name:s().getCurrentName()});if(confirm(Rs(k)))try{s().removeCurrentConfig(),e("remove")}catch(y){alert(y)}}async function u(k){if(await l(),k===pt.COMPUTE_ALL_WEIGHTS&&!Ke(s().fsrs)){alert(mn());return}s().save(k)}const i="Control+Enter";let c=N(!1);ge();var C=Ri(),p=J(C),g=ne(()=>Xl(i));be(p,()=>({"--border-left-radius":n?"0":"var(--border-radius)","--border-right-radius":n?"var(--border-radius)":"0"})),eo(p.lastChild,{primary:!0,get tooltip(){return r(g)},$$events:{click:()=>u(pt.NORMAL)},children:(k,y)=>{var A=Oi(),m=J(A);E(()=>G(m,pn())),j(A),$(k,A)},$$slots:{default:!0},$$legacy:!0}),j(p);var O=a(a(p,!0));Jl(O,{keyCombination:i,$$events:{action:()=>u(pt.NORMAL)},$$legacy:!0});var T=a(a(O,!0));zl(T,{get show(){return r(c)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>w(c,!1)},$$slots:{reference:(k,y)=>{var A=Ti(),m=ee(A);be(m,()=>({"--border-right-radius":n?"0":"var(--border-radius)","--border-left-radius":n?"var(--border-radius)":"0"})),zs(m.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>w(c,!r(c))},children:(H,I)=>{xt(H,{icon:Yr,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(m),$(k,A)},floating:(k,y)=>{ql(k,{slot:"floating",children:(A,m)=>{var H=Ai(),I=ee(H);ft(I,{$$events:{click:()=>e("add")},children:(h,P)=>{var b=K();E(()=>G(b,jr())),$(h,b)},$$slots:{default:!0},$$legacy:!0});var W=a(a(I,!0));ft(W,{$$events:{click:()=>e("clone")},children:(h,P)=>{var b=K();E(()=>G(b,Hr())),$(h,b)},$$slots:{default:!0},$$legacy:!0});var L=a(a(W,!0));ft(L,{$$events:{click:()=>e("rename")},children:(h,P)=>{var b=K();E(()=>G(b,Br())),$(h,b)},$$slots:{default:!0},$$legacy:!0});var M=a(a(L,!0));ft(M,{$$events:{click:v},children:(h,P)=>{var b=K();E(()=>G(b,yn())),$(h,b)},$$slots:{default:!0},$$legacy:!0});var o=a(a(M,!0));Si(o);var D=a(a(o,!0));ft(D,{$$events:{click:()=>u(pt.APPLY_TO_CHILDREN)},children:(h,P)=>{var b=K();E(()=>G(b,Cn())),$(h,b)},$$slots:{default:!0},$$legacy:!0});var x=a(a(D,!0));ft(x,{$$events:{click:()=>u(pt.COMPUTE_ALL_WEIGHTS)},children:(h,P)=>{var b=K();E(()=>G(b,wn())),$(h,b)},$$slots:{default:!0},$$legacy:!0}),$(A,H)},$$slots:{default:!0},$$legacy:!0})}},$$legacy:!0}),j(C),$(d,C),$e()}var Ii=q('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content svelte-18qg9px"><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" class="btn-close svelte-18qg9px" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text" class="form-control svelte-18qg9px"></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function Li(d,t){de(t,!1);const n=ke(),e=()=>ce(Hl,"$pageTheme",n),s=N();let l=V(t,"title"),v=V(t,"prompt"),u=V(t,"initialValue",0,""),i=V(t,"onOk");const c=Math.random().toString(36).substring(2),C=Bt(Jr);let p=N(),g,O=N();function T(){i()(r(O).value),g.hide(),w(s,u())}function k(){g.hide(),w(s,u())}function y(){r(O).focus(),m(!0)}function A(){m(!1)}const{set:m,remove:H}=Ql(k);Gt(()=>{r(p).addEventListener("shown.bs.modal",y),r(p).addEventListener("hidden.bs.modal",A),g=new Bl(r(p),{keyboard:!1}),C.set(c,g)}),Bs(()=>{H(),r(p).removeEventListener("shown.bs.modal",y),r(p).removeEventListener("hidden.bs.modal",A)}),oe(()=>He(u()),()=>{w(s,u())}),Re(),ge();var I=Ii();yt(I,F=>w(p,F),()=>r(p));var W=J(I),L=J(W),M=J(L),o=J(M),D=J(o);j(o);var x=a(a(o,!0));j(M);var h=a(a(M,!0)),P=J(h),b=J(P),S=J(b),R=J(S);j(S);var B=a(a(S,!0));yt(B,F=>w(O,F),()=>r(O)),wt(B),j(b),j(P),j(h);var Y=a(a(h,!0)),re=J(Y),z=a(a(re,!0));return j(Y),j(L),j(W),j(I),E(()=>{var F;ht(L,"default-colors",e().isDark),G(D,l()),ht(x,"invert",e().isDark),G(R,`${(F=v())!=null?F:""}:`),ht(B,"nightMode",e().isDark)}),he("submit",P,Zl(T),!1),St(B,()=>r(s),F=>w(s,F)),he("click",re,k,!1),he("click",z,T,!1),$(d,I),Se(t,"modalKey",c),$e({modalKey:c})}var Mi=q('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),Ni=q('<!> <div style="display: contents"><!></div>',1);function Ei(d,t){de(t,!1);const n=ke(),e=()=>ce(u,"$configList",n),s=N(),l=N();let v=V(t,"state");const u=v().configList,i=Er(),c=()=>i("presetchange");function C(h){const P=kn({decks:h.useCount});return`${h.name} (${P})`}function p(h){v().setCurrentIndex(h.detail.value),c()}function g(h){const P=h.trim();P.length&&(v().addConfig(P),c())}function O(h){const P=h.trim();P.length&&(v().cloneConfig(P),c())}function T(h){v().setCurrentName(h)}const k=Bt(Jr);let y=N(),A=N(""),m=N(""),H=N(Pi);function I(){w(m,jr()),w(H,g),w(A,""),k.get(r(y)).show()}function W(){w(m,Hr()),w(H,O),w(A,v().getCurrentName()),k.get(r(y)).show()}function L(){w(m,Br()),w(H,T),w(A,v().getCurrentName()),k.get(r(y)).show()}oe(()=>e(),()=>{w(s,e().findIndex(h=>h.current))}),oe(()=>(e(),r(s)),()=>{w(l,C(e()[r(s)]))}),Re(),ge();var M=Ni(),o=ee(M),D=ne(()=>_n());Li(o,{get title(){return r(m)},get prompt(){return r(D)},get initialValue(){return r(A)},get onOk(){return r(H)},get modalKey(){return r(y)},set modalKey(h){w(y,h)},$$legacy:!0});var x=a(a(o,!0));be(x,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),to(x.lastChild,{breakpoint:"sm",children:(h,P)=>{var b=Mi(),S=J(b);Es(S,{class:"flex-grow-1 mr1",get value(){return r(s)},set value(B){w(s,B)},get label(){return r(l)},get list(){return e()},parser:B=>({content:C(B),value:B.idx}),$$events:{change:p},$$legacy:!0});var R=a(a(S,!0));Di(R,{get state(){return v()},$$events:{add:I,clone:W,rename:L,remove:c},$$legacy:!0}),j(b),$(h,b)},$$slots:{default:!0},$$legacy:!0}),j(x),$(d,M),$e()}var Vi=q('<li class="svelte-1ibi4j8"><button class="svelte-1ibi4j8"> </button></li>'),Fi=q('<ul class="svelte-1ibi4j8"></ul>');function Lr(d,t){de(t,!1);let n=V(t,"tabs"),e=V(t,"value",4),s=N(l());function l(){const c=n().slice().reverse().findIndex(C=>C.value!==null);return c===-1?0:n().length-c-1}function v(c){for(const[C,p]of n().entries())c===C?p.enable(e()):c>C?p.reset():p.disable()}const u=c=>()=>w(s,c);oe(()=>r(s),()=>{v(r(s))}),oe(()=>(He(n()),r(s)),()=>{var c;e((c=n()[r(s)].value)!=null?c:0)}),oe(()=>(He(n()),r(s),He(e())),()=>{n()[r(s)].setValue(e())}),Re(),ge();var i=Fi();qt(i,9,n,Kr,(c,C,p)=>{var g=Vi(),O=J(g),T=J(O);j(O),j(g),E(()=>{ht(g,"active",r(s)===Ve(p)),G(T,Ve(C).title)}),he("click",O,u(Ve(p)),!1),$(c,g)}),j(i),$(d,i),$e()}var Wi=q("<div> </div>");function De(d,t){de(t,!1);let n=V(t,"warning"),e=V(t,"className",0,"alert-warning");ge();var s=Ie(),l=ee(s);we(l,n,v=>{Ce(v,{children:(u,i)=>{var c=Wi();Pr(1,c,()=>xr),Pr(2,c,()=>xr);var C=J(c);E(()=>G(C,Ds(n()))),j(c),E(()=>{var p;return vt(c,`col-12 alert ${(p=e())!=null?p:""} mb-0`)}),$(u,c)},$$slots:{default:!0},$$legacy:!0})}),$(d,s),$e()}var ji=q("<!> <!> <!> <!> <!>",1);function Hi(d,t){var S,R,B,Y,re,z;de(t,!1);const n=ke(),e=()=>ce(p,"$config",n),s=()=>ce(g,"$limits",n),l=()=>ce(T,"$newCardsIgnoreReviewLimit",n),v=()=>ce(k,"$applyAllParentLimits",n),u=N();let i=V(t,"state"),c=V(t,"api");function C(){ye(I,r(I)[0]=new Ue(bt(),e().newPerDay,F=>Z(p,_(e).newPerDay=F,_(e)),e().newPerDay,null)),ye(W,r(W)[0]=new Ue(bt(),e().reviewsPerDay,F=>Z(p,_(e).reviewsPerDay=F,_(e)),e().reviewsPerDay,null))}const p=i().currentConfig,g=i().deckLimits,O=i().defaults,T=i().newCardsIgnoreReviewLimit,k=i().applyAllParentLimits,y=`

`+bn()+`

`+Pn(),A=`

`+xn()+y,m=Ht()+`

`+Sn(),H=Ht()+`

`+On(),I=N([new Ue(bt(),e().newPerDay,F=>Z(p,_(e).newPerDay=F,_(e)),e().newPerDay,null),new Ue(mr(),(S=s().new)!=null?S:null,F=>Z(g,_(s).new=F!=null?F:void 0,_(s)),null,null),new Ue(pr(),s().newTodayActive&&(R=s().newToday)!=null?R:null,F=>Z(g,_(s).newToday=F!=null?F:void 0,_(s)),null,(B=s().newToday)!=null?B:null)]),W=N([new Ue(bt(),e().reviewsPerDay,F=>Z(p,_(e).reviewsPerDay=F,_(e)),e().reviewsPerDay,null),new Ue(mr(),(Y=s().review)!=null?Y:null,F=>Z(g,_(s).review=F!=null?F:void 0,_(s)),null,null),new Ue(pr(),s().reviewTodayActive&&(re=s().reviewToday)!=null?re:null,F=>Z(g,_(s).reviewToday=F!=null?F:void 0,_(s)),null,(z=s().reviewToday)!=null?z:null)]);let L=N(0),M=N(0);const o={newLimit:{title:Tn(),help:An()+y,url:ue.DeckOptions.newCardsday},reviewLimit:{title:Rn(),help:Dn()+A,url:ue.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:In(),help:m,url:ue.DeckOptions.newCardsday},applyAllParentLimits:{title:Ln(),help:H,url:ue.DeckOptions.newCardsday}},D=Object.values(o);let x=N(),h=N();function P(F){r(x).show(),r(h).to(F)}oe(()=>(r(L),r(M)),()=>{w(u,Math.min(9999,r(L)*10)>r(M)?Mn({cards:r(L),expected:Math.min(9999,r(L)*10)}):"")}),Re(),ge();var b=ne(()=>yr());return We(d,{get title(){return r(b)},children:(F,fe)=>{Ge(F,{slotHost:U,get api(){return c()},children:(me,te)=>{var pe=ji(),Me=ee(pe);U(Me,{children:(_e,lt)=>{Ae(_e,{get value(){return r(L)},set value(ve){w(L,ve)},get defaultValue(){return O.newPerDay},children:(ve,rt)=>{X(ve,{$$events:{click:()=>P(Object.keys(o).indexOf("newLimit"))},children:(xe,ot)=>{var Qe=K();E(()=>G(Qe,o.newLimit.title)),$(xe,Qe)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tabs:(ve,rt)=>{Lr(ve,{slot:"tabs",get tabs(){return r(I)},get value(){return r(L)},set value(xe){w(L,xe)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var Pe=a(a(Me,!0));U(Pe,{children:(_e,lt)=>{Ae(_e,{get value(){return r(M)},set value(ve){w(M,ve)},get defaultValue(){return O.reviewsPerDay},children:(ve,rt)=>{X(ve,{$$events:{click:()=>P(Object.keys(o).indexOf("reviewLimit"))},children:(xe,ot)=>{var Qe=K();E(()=>G(Qe,o.reviewLimit.title)),$(xe,Qe)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tabs:(ve,rt)=>{Lr(ve,{slot:"tabs",get tabs(){return r(W)},get value(){return r(M)},set value(xe){w(M,xe)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var et=a(a(Pe,!0));U(et,{children:(_e,lt)=>{De(_e,{get warning(){return r(u)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var _t=a(a(et,!0));U(_t,{children:(_e,lt)=>{Le(_e,{get value(){return l()},set value(ve){Xe(T,ve)},defaultValue:!1,children:(ve,rt)=>{X(ve,{$$events:{click:()=>P(Object.keys(o).indexOf("newCardsIgnoreReviewLimit"))},children:(xe,ot)=>{Ct(xe,{get title(){return o.newCardsIgnoreReviewLimit.title},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var tt=a(a(_t,!0));U(tt,{children:(_e,lt)=>{Le(_e,{get value(){return v()},set value(ve){Xe(k,ve)},defaultValue:!1,children:(ve,rt)=>{X(ve,{$$events:{click:()=>P(Object.keys(o).indexOf("applyAllParentLimits"))},children:(xe,ot)=>{Ct(xe,{get title(){return o.applyAllParentLimits.title},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(me,pe)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(F,fe)=>{var me=ne(()=>yr());Be(F,{get title(){return r(me)},get url(){return ue.DeckOptions.dailyLimits},slot:"tooltip",helpSections:D,$$events:{mount:te=>{w(x,te.detail.modal),w(h,te.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),Se(t,"onPresetChange",C),$e({onPresetChange:C})}var Bi=q("<!> <!> <!> <!> <!>",1);function Gi(d,t){de(t,!1);const n=ke(),e=()=>ce(u,"$config",n),s=()=>ce(c,"$fsrs",n);let l=V(t,"state"),v=V(t,"api");const u=l().currentConfig,i=l().defaults,c=l().fsrs,C=`

`+Nn();let p=N([]);const g={newGatherPriority:{title:En(),help:Vn()+C},newCardSortOrder:{title:Fn(),help:Wn()+C},newReviewPriority:{title:jn(),help:Hn()+C},interdayStepPriority:{title:Bn(),help:Gn()+C},reviewSortOrder:{title:zn(),help:qn()+C}},O=Object.values(g);let T=N(),k=N();function y(m){r(T).show(),r(k).to(m)}oe(()=>(e(),r(p)),()=>{switch(e().newCardGatherPriority){case Ye.RANDOM_NOTES:w(p,[Ee.TEMPLATE_THEN_RANDOM,Ee.RANDOM_NOTE_THEN_TEMPLATE]);break;case Ye.RANDOM_CARDS:w(p,[Ee.TEMPLATE_THEN_RANDOM,Ee.RANDOM_NOTE_THEN_TEMPLATE,Ee.RANDOM_CARD]);break;default:w(p,[]);break}r(p).includes(e().newCardSortOrder)&&Z(u,_(e).newCardSortOrder=0,_(e)),e().newCardSortOrder in Ee||Z(u,_(e).newCardSortOrder=0,_(e))}),Re(),ge();var A=ne(()=>Cr());We(d,{get title(){return r(A)},children:(m,H)=>{Ge(m,{slotHost:U,get api(){return v()},children:(I,W)=>{var L=Bi(),M=ee(L);U(M,{children:(P,b)=>{var S=ne(fi);qe(P,{get value(){return e().newCardGatherPriority},set value(R){Z(u,_(e).newCardGatherPriority=R,_(e))},get defaultValue(){return i.newCardGatherPriority},get choices(){return r(S)},children:(R,B)=>{X(R,{$$events:{click:()=>y(Object.keys(g).indexOf("newGatherPriority"))},children:(Y,re)=>{var z=K();E(()=>G(z,g.newGatherPriority.title)),$(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var o=a(a(M,!0));U(o,{children:(P,b)=>{var S=ne(vi);qe(P,{get value(){return e().newCardSortOrder},set value(R){Z(u,_(e).newCardSortOrder=R,_(e))},get defaultValue(){return i.newCardSortOrder},get choices(){return r(S)},get disabledChoices(){return r(p)},children:(R,B)=>{X(R,{$$events:{click:()=>y(Object.keys(g).indexOf("newCardSortOrder"))},children:(Y,re)=>{var z=K();E(()=>G(z,g.newCardSortOrder.title)),$(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var D=a(a(o,!0));U(D,{children:(P,b)=>{var S=ne(Ir);qe(P,{get value(){return e().newMix},set value(R){Z(u,_(e).newMix=R,_(e))},get defaultValue(){return i.newMix},get choices(){return r(S)},children:(R,B)=>{X(R,{$$events:{click:()=>y(Object.keys(g).indexOf("newReviewPriority"))},children:(Y,re)=>{var z=K();E(()=>G(z,g.newReviewPriority.title)),$(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var x=a(a(D,!0));U(x,{children:(P,b)=>{var S=ne(Ir);qe(P,{get value(){return e().interdayLearningMix},set value(R){Z(u,_(e).interdayLearningMix=R,_(e))},get defaultValue(){return i.interdayLearningMix},get choices(){return r(S)},children:(R,B)=>{X(R,{$$events:{click:()=>y(Object.keys(g).indexOf("interdayStepPriority"))},children:(Y,re)=>{var z=K();E(()=>G(z,g.interdayStepPriority.title)),$(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var h=a(a(x,!0));U(h,{children:(P,b)=>{var S=ne(()=>hi(s()));qe(P,{get value(){return e().reviewOrder},set value(R){Z(u,_(e).reviewOrder=R,_(e))},get defaultValue(){return i.reviewOrder},get choices(){return r(S)},children:(R,B)=>{X(R,{$$events:{click:()=>y(Object.keys(g).indexOf("reviewSortOrder"))},children:(Y,re)=>{var z=K();E(()=>G(z,g.reviewSortOrder.title)),$(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(I,L)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(m,H)=>{var I=ne(()=>Cr());Be(m,{get title(){return r(I)},get url(){return ue.DeckOptions.displayOrder},slot:"tooltip",helpSections:O,$$events:{mount:W=>{w(T,W.detail.modal),w(k,W.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}var zi=q('<textarea class="w-100"></textarea>');function qi(d,t){de(t,!1);let n=V(t,"value",4),e=V(t,"defaults"),s=N();function l(i){return i.map(c=>c.toFixed(4)).join(", ")}function v(){n(this.value.replace(/ /g,"").split(",").filter(i=>i).map(i=>Number(i)))}oe(()=>He(n()),()=>{w(s,l(n()))}),Re(),ge();var u=zi();Fr(u),E(()=>je(u,"placeholder",l(e()))),E(()=>zt(u,r(s))),he("blur",u,v,!1),$(d,u),$e()}var Qi=q("<!> <!>",1);function Ui(d,t){let n=V(t,"value",4),e=V(t,"defaultValue"),s=V(t,"defaults");var l=Qi(),v=ee(l);Je(v,at(t),{});var u=a(a(v,!0));nt(u,{children:(i,c)=>{qi(i,{get value(){return n()},set value(C){n(C)},get defaults(){return s()},$$legacy:!0})},$$slots:{default:!0,revert:(i,c)=>{kt(i,{slot:"revert",get value(){return n()},set value(C){n(C)},get defaultValue(){return e()},$$legacy:!0})}},$$legacy:!0}),$(d,l)}var Ki=q('<input type="text" class="w-100 mb-1">');function Yi(d,t){let n=V(t,"value",4),e=V(t,"placeholder");nt(d,{children:(s,l)=>{var v=Ki();wt(v),E(()=>je(v,"placeholder",e())),St(v,n,u=>n(u)),$(s,v)},$$slots:{default:!0},$$legacy:!0})}function Mr(d,t,n){const e=Sr(d);if(e.selectAll(".lines").remove(),e.selectAll(".hover-columns").remove(),e.selectAll(".focus-line").remove(),e.selectAll(".legend").remove(),n.length==0)return Or(e,!1),[];const s=e.transition().duration(600),l=new Date,v=n.map(o=>({...o,date:new Date(l.getTime()+o.x*24*60*60*1e3),yMinutes:o.y/60})),u=l,i=Tr(v,o=>o.date),c=ho().domain([u,i]).range([t.marginLeft,t.width-t.marginRight]),C=Ar("%Y-%m-%d");e.select(".x-ticks").call(o=>o.transition(s).call(ro(c).ticks(7).tickFormat(D=>C(D)).tickSizeOuter(0))).attr("direction","ltr");const p=o=>Math.round(o)!=o?"":Is(o),g=Tr(v,o=>o.yMinutes),O=so().range([t.height-t.marginBottom,t.marginTop]).domain([0,g]).nice();e.select(".y-ticks").call(o=>o.transition(s).call(ao(O).ticks(t.height/50).tickSizeOuter(0).tickFormat(p))).attr("direction","ltr"),e.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-t.marginLeft).attr("x",0-t.height/2).attr("dy","1em").attr("fill","currentColor").style("text-anchor","middle").text("Review Time per day (minutes)");const T=v.map(o=>[c(o.date),O(o.yMinutes),o.label]),k=So(T,o=>Object.assign(o,{z:o[0][2]}),o=>o[2]),y=To;e.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(k.entries())).join("path").style("mix-blend-mode","multiply").attr("stroke",(o,D)=>y[D%y.length]).attr("d",o=>no()(o[1].map(D=>[D[0],D[1]]))).attr("data-group",o=>o[0]);const A=e.append("line").attr("class","focus-line").attr("y1",t.marginTop).attr("y2",t.height-t.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),m=Array.from(k.values()).reduce((o,D)=>o.length>D.length?o:D),H=t.width/m.length;e.append("g").attr("class","hover-columns").selectAll("rect").data(m).join("rect").attr("x",o=>o[0]-H/2).attr("y",t.marginTop).attr("width",H).attr("height",t.height-t.marginTop-t.marginBottom).attr("fill","transparent").on("mousemove",I).on("mouseout",lo);function I(o,D){oo(o,document.body);const x=c.invert(D[0]),h={};k.forEach((b,S)=>{const R=uo(re=>c.invert(re[0])).left,B=R(b,x),Y=b[B-1]||b[B];Y&&(h[S]=O.invert(Y[1]))}),A.attr("x1",D[0]).attr("x2",D[0]).style("opacity",1);let P=`Date: ${Ar("%Y-%m-%d")(x)}<br>`;for(const[b,S]of Object.entries(h))P+=`Simulation ${b}: ${S.toFixed(2)} minutes<br>`;io(P,o.pageX,o.pageY)}const W=e.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(k.keys())).join("g").attr("transform",(o,D)=>`translate(0,${D*20})`).attr("cursor","pointer").on("click",(o,D)=>L(o,D));W.append("rect").attr("x",t.width-t.marginRight+10).attr("width",19).attr("height",19).attr("fill",(o,D)=>y[D%y.length]),W.append("text").attr("x",t.width-t.marginRight+34).attr("y",9.5).attr("dy","0.32em").text(o=>`Simulation ${o}`);const L=(o,D)=>{const x=D,h=e.select(`path[data-group="${x}"]`),P=h.classed("hidden"),b=o.currentTarget;h.classed("hidden",!P),h.style("display",()=>P?null:"none"),Sr(b).select("rect").style("opacity",P?1:.5)};return Or(e,!0),[]}var Ji=q("Days to simulate",1),Xi=q(" <!>",1),Zi=q("Days to simulate",1),eu=q("Additional new cards to simulate",1),tu=q("New cards/day",1),ru=q("Maximum reviews/day",1),su=q("Maximum interval",1),au=Fs("<svg><!><!><!><!></svg><!>",1),nu=q('<!> <!> <div class="ms-1 me-1"><!> <!> <button><!></button> <button><!></button> <div><!></div> <!></div> <div class="m-2"><!> <!></div> <div class="m-2"><details><summary> </summary> <!> <button><!></button> <!> <div> </div></details></div> <div class="m-2"><details><summary>FSRS simulator (experimental)</summary> <!> <!> <!> <!> <!> <button> </button> <button> </button> <div> </div> <!></details></div>',1);function lu(d,t){de(t,!1);const n=ke(),e=()=>ce(M,"$daysSinceLastOptimization",n),s=()=>ce(H,"$presetName",n),l=()=>ce(I,"$config",n),v=()=>ce(L,"$fsrsReschedule",n),u=N(),i=N(),c=N(),C=N(),p=N(),g=N(),O=N(),T=N(),k=N(),y=N();let A=V(t,"state"),m=V(t,"openHelpModal");const H=A().currentPresetName,I=A().currentConfig,W=A().defaults,L=A().fsrsReschedule,M=A().daysSinceLastOptimization;let o=N(),D=N(!1),x=N(!1),h=N(!1),P=N(0),b=N();const S=N(new _s({daysToSimulate:365,lossAversion:2.5})),R=N(new bs({weights:l().fsrsWeights,desiredRetention:l().desiredRetention,deckSize:0,daysToSimulate:365,newLimit:l().newPerDay,reviewLimit:l().reviewsPerDay,maxInterval:l().maximumReviewInterval,search:`preset:"${A().getCurrentName()}" -is:suspended`}));function B(f){const se=Math.round(100/.23456790123456783*(Math.pow(f,1/-.5)-1));return se===100?"":Zn({days:se})}function Y(f){return f<.7||f>.97?"alert-danger":f<.8||f>.95?"alert-warning":"alert-info"}function re(){return BigInt(l().ignoreRevlogsBeforeDate?new Date(l().ignoreRevlogsBeforeDate).getTime():0)}async function z(){if(r(D)){await Mt({});return}if(A().presetAssignmentsChanged()){alert(Et());return}w(D,!0),w(o,void 0);try{await Pt(async()=>{const f=await Ps({search:l().weightSearch?l().weightSearch:r(c),ignoreRevlogsBeforeMs:re(),currentWeights:l().fsrsWeights});(l().fsrsWeights.length&&l().fsrsWeights.every((Q,ae)=>Q.toFixed(4)===f.weights[ae].toFixed(4))||f.weights.length===0)&&setTimeout(()=>alert(el()),100),r(o)&&ye(o,r(o).current=r(o).total),Z(I,_(l).fsrsWeights=f.weights,_(l))},f=>{f.value.case==="computeWeights"&&w(o,f.value.value)})}finally{w(D,!1)}}async function F(){if(r(x)){await Mt({});return}if(A().presetAssignmentsChanged()){alert(Et());return}w(x,!0),w(o,void 0);try{await Pt(async()=>{const f=l().weightSearch?l().weightSearch:r(c),Q=await xs({weights:l().fsrsWeights,search:f,ignoreRevlogsBeforeMs:re()});r(o)&&ye(o,r(o).current=r(o).total),setTimeout(()=>alert(`Log loss: ${Q.logLoss.toFixed(4)}, RMSE(bins): ${(Q.rmseBins*100).toFixed(2)}%. ${tl()}`),200)},f=>{f.value.case==="computeWeights"&&w(o,f.value.value)})}finally{w(x,!1)}}async function fe(){if(r(h)){await Mt({});return}if(A().presetAssignmentsChanged()){alert(Et());return}w(h,!0),w(b,void 0);try{await Pt(async()=>{ye(S,r(S).maxInterval=l().maximumReviewInterval),ye(S,r(S).weights=l().fsrsWeights),ye(S,r(S).search=`preset:"${A().getCurrentName()}" -is:suspended`);const f=await Ss(r(S));w(P,f.optimalRetention),w(b,void 0)},f=>{f.value.case==="computeRetention"&&w(b,f.value.value)})}finally{w(h,!1)}}function me(f){if(!f||!f.total)return"";const Q=(f.current/f.total*100).toFixed(1);return f instanceof Os?`${Q}%`:rl({pct:Q,reviews:f.reviews})}function te(f){return f?sl({count:f.current}):""}function pe(f){return f?al({num:f.toFixed(2)}):""}let Me=N([]);const Pe=vo();let et=N(null);const _t=Qn();let tt=0,_e=[];function lt(f,Q){const ae=[];for(let ie=0;ie<f.length;ie++){let se=0,st=0;for(let gt=Math.max(0,ie-Q+1);gt<=ie;gt++)se+=f[gt],st++;ae.push(se/st)}return ae}async function ve(){let f;tt+=1;try{await Pt(async()=>{ye(R,r(R).weights=l().fsrsWeights),ye(R,r(R).desiredRetention=l().desiredRetention),ye(R,r(R).search=`preset:"${A().getCurrentName()}" -is:suspended`),w(y,"processing..."),f=await Ts(r(R))},()=>{})}finally{if(w(y,""),f){const Q=lt(f.dailyTimeCost,Math.round(r(R).daysToSimulate/50));_e=_e.concat(Q.map((ae,ie)=>({x:ie,y:ae,label:tt}))),w(Me,Mr(r(et),Pe,_e))}}}function rt(){_e=_e.filter(f=>f.label!==tt),tt=Math.max(0,tt-1),w(Me,Mr(r(et),Pe,_e))}oe(()=>e(),()=>{w(u,e()>30?Un():"")}),oe(()=>s(),()=>{s()&&w(P,0)}),oe(()=>(r(D),r(x),r(h)),()=>{w(i,r(D)||r(x)||r(h))}),oe(()=>He(A()),()=>{w(c,`preset:"${A().getCurrentName()}" -is:suspended`)}),oe(()=>l(),()=>{w(C,Number(l().desiredRetention.toFixed(2)))}),oe(()=>r(C),()=>{w(p,B(r(C)))}),oe(()=>r(C),()=>{w(g,Y(r(C)))}),oe(()=>r(S),()=>{r(S).daysToSimulate>3650&&ye(S,r(S).daysToSimulate=3650)}),oe(()=>r(o),()=>{w(O,me(r(o)))}),oe(()=>r(b),()=>{w(T,te(r(b)))}),oe(()=>r(o),()=>{var f,Q;w(k,(Q=(f=r(o))==null?void 0:f.reviews)!=null?Q:void 0)}),oe(()=>{},()=>{w(y,"")}),Re(),ge();var xe=nu(),ot=ee(xe);ze(ot,{get value(){return l().desiredRetention},set value(f){Z(I,_(l).desiredRetention=f,_(l))},get defaultValue(){return W.desiredRetention},min:.7,max:.99,children:(f,Q)=>{X(f,{$$events:{click:()=>m()("desiredRetention")},children:(ae,ie)=>{var se=K();E(()=>G(se,Gr())),$(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var Qe=a(a(ot,!0));De(Qe,{get warning(){return r(p)},get className(){return r(g)},$$legacy:!0});var Ot=a(a(Qe,!0)),Qt=J(Ot);Ui(Qt,{get value(){return l().fsrsWeights},set value(f){Z(I,_(l).fsrsWeights=f,_(l))},defaultValue:[],get defaults(){return W.fsrsWeights},children:(f,Q)=>{X(f,{$$events:{click:()=>m()("modelWeights")},children:(ae,ie)=>{var se=K();E(()=>G(se,zr())),$(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var Ut=a(a(Qt,!0));Yi(Ut,{get value(){return l().weightSearch},set value(f){Z(I,_(l).weightSearch=f,_(l))},get placeholder(){return r(c)},$$legacy:!0});var it=a(a(Ut,!0)),es=J(it);we(es,()=>r(D),f=>{var Q=K();E(()=>G(Q,Nt())),$(f,Q)},f=>{var Q=K();E(()=>G(Q,Kn())),$(f,Q)}),j(it);var ut=a(a(it,!0)),ts=J(ut);we(ts,()=>r(x),f=>{var Q=K();E(()=>G(Q,Nt())),$(f,Q)},f=>{var Q=K();E(()=>G(Q,Yn())),$(f,Q)}),j(ut);var Tt=a(a(ut,!0)),rs=J(Tt);we(rs,()=>r(D)||r(x),f=>{var Q=K();E(()=>G(Q,r(O))),$(f,Q)},f=>{var Q=Ie(),ae=ee(Q);we(ae,()=>r(k)!==void 0,ie=>{var se=K();E(()=>G(se,Jn({reviews:r(k)}))),$(ie,se)},null,!0),$(f,Q)}),j(Tt);var ss=a(a(Tt,!0));De(ss,{get warning(){return r(u)},className:"alert-warning",$$legacy:!0}),j(Ot);var At=a(a(Ot,!0)),Kt=J(At);Le(Kt,{get value(){return v()},set value(f){Xe(L,f)},defaultValue:!1,children:(f,Q)=>{X(f,{$$events:{click:()=>m()("rescheduleCardsOnChange")},children:(ae,ie)=>{var se=ne(()=>Qr());Ct(ae,{get title(){return r(se)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var as=a(a(Kt,!0));we(as,v,f=>{var Q=ne(()=>nl());De(f,{get warning(){return r(Q)},$$legacy:!0})}),j(At);var Rt=a(a(At,!0)),Yt=J(Rt),Dt=J(Yt),ns=J(Dt);E(()=>G(ns,qr())),j(Dt);var Jt=a(a(Dt,!0));Ae(Jt,{get value(){return r(S).daysToSimulate},set value(f){ye(S,r(S).daysToSimulate=f)},defaultValue:365,min:1,max:3650,children:(f,Q)=>{X(f,{$$events:{click:()=>m()("computeOptimalRetention")},children:(ae,ie)=>{var se=Ji();$(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var ct=a(a(Jt,!0)),ls=J(ct);we(ls,()=>r(h),f=>{var Q=K();E(()=>G(Q,Nt())),$(f,Q)},f=>{var Q=K();E(()=>G(Q,Xn())),$(f,Q)}),j(ct);var Xt=a(a(ct,!0));we(Xt,()=>r(P),f=>{var Q=Xi(),ae=ee(Q,!0);E(()=>{var se;return G(ae,`${(se=pe(r(P)))!=null?se:""} `)});var ie=a(ae);we(ie,()=>r(P)-l().desiredRetention>=.01,se=>{var st=ne(()=>ll());De(se,{get warning(){return r(st)},className:"alert-warning",$$legacy:!0})}),$(f,Q)});var Zt=a(a(Xt,!0)),os=J(Zt);j(Zt),j(Yt),j(Rt);var er=a(a(Rt,!0)),tr=J(er),is=J(tr),rr=a(a(is,!0));Ae(rr,{get value(){return r(R).daysToSimulate},set value(f){ye(R,r(R).daysToSimulate=f)},defaultValue:365,min:1,max:3650,children:(f,Q)=>{X(f,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ae,ie)=>{var se=Zi();$(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var sr=a(a(rr,!0));Ae(sr,{get value(){return r(R).deckSize},set value(f){ye(R,r(R).deckSize=f)},defaultValue:0,min:1,max:1e5,children:(f,Q)=>{X(f,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ae,ie)=>{var se=eu();$(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var ar=a(a(sr,!0));Ae(ar,{get value(){return r(R).newLimit},set value(f){ye(R,r(R).newLimit=f)},get defaultValue(){return W.newPerDay},min:0,max:1e3,children:(f,Q)=>{X(f,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ae,ie)=>{var se=tu();$(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var nr=a(a(ar,!0));Ae(nr,{get value(){return r(R).reviewLimit},set value(f){ye(R,r(R).reviewLimit=f)},get defaultValue(){return W.reviewsPerDay},min:0,max:1e3,children:(f,Q)=>{X(f,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ae,ie)=>{var se=ru();$(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var lr=a(a(nr,!0));Ae(lr,{get value(){return r(R).maxInterval},set value(f){ye(R,r(R).maxInterval=f)},get defaultValue(){return W.maximumReviewInterval},min:1,max:36500,children:(f,Q)=>{X(f,{$$events:{click:()=>m()("simulateFsrsReview")},children:(ae,ie)=>{var se=su();$(ae,se)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var dt=a(a(lr,!0)),us=J(dt);us.nodeValue="Simulate",j(dt);var $t=a(a(dt,!0)),cs=J($t);cs.nodeValue="Clear last simulation",j($t);var It=a(a($t,!0)),ds=J(It);j(It);var $s=a(a(It,!0));co($s,{title:_t,children:(f,Q)=>{var ae=au(),ie=ee(ae);yt(ie,vs=>w(et,vs),()=>r(et));var se=J(ie);Co(se);var st=a(se);$o(st);var gt=a(st);go(gt,{bounds:Pe,$$legacy:!0});var gs=a(gt);fo(gs,{bounds:Pe,$$legacy:!0}),j(ie);var fs=a(ie);wo(fs,{get tableData(){return r(Me)},$$legacy:!0}),E(()=>je(ie,"viewBox",`0 0 ${Pe.width} ${Pe.height}`)),$(f,ae)},$$slots:{default:!0},$$legacy:!0}),j(tr),j(er),E(()=>{var f,Q,ae,ie,se;vt(it,`btn ${(f=r(D)?"btn-warning":"btn-primary")!=null?f:""}`),it.disabled=!r(D)&&r(i),vt(ut,`btn ${(Q=r(x)?"btn-warning":"btn-primary")!=null?Q:""}`),ut.disabled=!r(x)&&r(i),vt(ct,`btn ${(ae=r(h)?"btn-warning":"btn-primary")!=null?ae:""}`),ct.disabled=!r(h)&&r(i),G(os,r(T)),vt(dt,`btn ${(ie=r(i)?"btn-warning":"btn-primary")!=null?ie:""}`),dt.disabled=r(i),vt($t,`btn ${(se=r(i)?"btn-warning":"btn-primary")!=null?se:""}`),$t.disabled=r(i),G(ds,r(y))}),he("click",it,()=>z(),!1),he("click",ut,()=>F(),!1),he("click",ct,()=>fe(),!1),he("click",dt,()=>ve(),!1),he("click",$t,()=>rt(),!1),$(d,xe),$e()}var ou=q("<!> <!> <!>",1);function iu(d,t){de(t,!1);const n=ke(),e=()=>ce(u,"$fsrs",n),s=N();let l=V(t,"state"),v=V(t,"api");const u=l().fsrs,i={fsrs:{title:"FSRS",help:ol(),url:ue.DeckOptions.fsrs},desiredRetention:{title:Gr(),help:il(),sched:Te.FSRS},modelWeights:{title:zr(),help:ul()+`

`+cl(),sched:Te.FSRS},rescheduleCardsOnChange:{title:Qr(),help:dl(),sched:Te.FSRS},computeOptimalRetention:{title:qr(),help:$l(),sched:Te.FSRS}},c=Object.values(i);let C=N(),p=N();function g(O){r(C).show(),r(p).to(O)}oe(()=>e(),()=>{w(s,e()?gl():"")}),Re(),ge(),We(d,{title:"FSRS",children:(O,T)=>{Ge(O,{slotHost:U,get api(){return v()},children:(k,y)=>{var A=ou(),m=ee(A);U(m,{children:(W,L)=>{Le(W,{get value(){return e()},set value(M){Xe(u,M)},defaultValue:!1,children:(M,o)=>{X(M,{$$events:{click:()=>g(Object.keys(i).indexOf("fsrs"))},children:(D,x)=>{Ct(D,{get title(){return i.fsrs.title},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var H=a(a(m,!0));De(H,{get warning(){return r(s)},$$legacy:!0});var I=a(a(H,!0));we(I,e,W=>{lu(W,{get state(){return l()},openHelpModal:L=>g(Object.keys(i).indexOf(L)),$$legacy:!0})}),$(k,A)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(O,T)=>{Be(O,{title:"FSRS",get url(){return ue.DeckOptions.fsrs},slot:"tooltip",get fsrs(){return e()},helpSections:c,$$events:{mount:k=>{w(C,k.detail.modal),w(p,k.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}function uu(d,t){de(t,!1);let n=V(t,"html"),e=V(t,"mounted");Gt(e()),ge();var s=Ie(),l=ee(s);fl(l,n,!1,!1),$(d,s),$e()}function cu(d){switch(d){case Fe.Seconds:return"s";case Fe.Minutes:return"m";case Fe.Hours:return"h";case Fe.Days:return"d";default:return""}}function du(d){switch(d){case"s":return Fe.Seconds;case"h":return Fe.Hours;case"d":return Fe.Days;default:return Fe.Minutes}}function $u(d){const t=d*60;let n=ko(t);return[Fe.Months,Fe.Years].includes(n)&&(n=Fe.Days),`${Math.round(_o(n,t))}${cu(n)}`}function gu(d){const t=d.match(/(\d+)(.*)/);if(t){const[n,e,s]=t,l=du(s),v=bo(l)*parseInt(e,10);return Math.min(v,2**31)/60}else return 0}function fu(d){return d.map($u).join(" ")}function vu(d){return d.split(" ").map(gu).filter(t=>t)}var hu=q('<input type="text" class="svelte-f5c9s0">');function mu(d,t){de(t,!1);let n=V(t,"value",4),e=N();function s(){n(vu(this.value))}oe(()=>He(n()),()=>{w(e,fu(n()))}),Re(),ge();var l=hu();wt(l),E(()=>zt(l,r(e))),he("blur",l,s,!1),$(d,l),$e()}var pu=q('<div style="display: contents"><!></div> <div style="display: contents"><!></div>',1),yu=q('<div style="display: contents"><!></div>',1);function Zr(d,t){let n=V(t,"value",4),e=V(t,"defaultValue");var s=yu(),l=ee(s);be(l,()=>({"--cols":13})),Ce(l.lastChild,{children:(v,u)=>{var i=pu(),c=ee(i);be(c,()=>({"--col-size":7})),Ze(c.lastChild,{breakpoint:"xs",children:(p,g)=>{var O=Ie(),T=ee(O);Je(T,at(t),{}),$(p,O)},$$slots:{default:!0},$$legacy:!0}),j(c);var C=a(a(c,!0));be(C,()=>({"--col-size":6})),Ze(C.lastChild,{breakpoint:"xs",children:(p,g)=>{nt(p,{children:(O,T)=>{mu(O,{get value(){return n()},set value(k){n(k)},$$legacy:!0})},$$slots:{default:!0,revert:(O,T)=>{kt(O,{slot:"revert",get value(){return n()},set value(k){n(k)},get defaultValue(){return e()},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(C),$(v,i)},$$slots:{default:!0},$$legacy:!0}),j(l),$(d,s)}var Cu=q("<!> <!> <!> <!> <!> <!>",1);function wu(d,t){de(t,!1);const n=ke(),e=()=>ce(u,"$config",n),s=()=>ce(c,"$fsrs",n);let l=V(t,"state"),v=V(t,"api",8,()=>({}));const u=l().currentConfig,i=l().defaults,c=l().fsrs;let C=N(),p=N();const g={relearningSteps:{title:vl(),help:hl(),url:ue.DeckOptions.relearningSteps},minimumInterval:{title:ml(),help:pl(),url:ue.DeckOptions.minimumInterval,sched:Te.SM2},leechThreshold:{title:yl(),help:Cl(),url:ue.Leeches.leeches},leechAction:{title:wl(),help:kl(),url:ue.Leeches.waiting}},O=Object.values(g);let T=N(),k=N();function y(m){r(T).show(),r(k).to(m)}oe(()=>(e(),s()),()=>{const m=e().relearnSteps.length?e().relearnSteps[e().relearnSteps.length-1]/60/24:0;w(C,!s()&&m>e().minimumLapseInterval?_l():""),w(p,s()&&m>=1?Ur():"")}),Re(),ge();var A=ne(()=>wr());We(d,{get title(){return r(A)},children:(m,H)=>{Ge(m,{slotHost:U,get api(){return v()},children:(I,W)=>{var L=Cu(),M=ee(L);U(M,{children:(b,S)=>{Zr(b,{get value(){return e().relearnSteps},set value(R){Z(u,_(e).relearnSteps=R,_(e))},get defaultValue(){return i.relearnSteps},children:(R,B)=>{X(R,{$$events:{click:()=>y(Object.keys(g).indexOf("relearningSteps"))},children:(Y,re)=>{var z=K();E(()=>G(z,g.relearningSteps.title)),$(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var o=a(a(M,!0));U(o,{children:(b,S)=>{De(b,{get warning(){return r(p)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var D=a(a(o,!0));we(D,()=>!s(),b=>{U(b,{children:(S,R)=>{Ae(S,{get value(){return e().minimumLapseInterval},set value(B){Z(u,_(e).minimumLapseInterval=B,_(e))},get defaultValue(){return i.minimumLapseInterval},min:1,children:(B,Y)=>{X(B,{$$events:{click:()=>y(Object.keys(g).indexOf("minimumInterval"))},children:(re,z)=>{var F=K();E(()=>G(F,g.minimumInterval.title)),$(re,F)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})});var x=a(a(D,!0));U(x,{children:(b,S)=>{De(b,{get warning(){return r(C)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var h=a(a(x,!0));U(h,{children:(b,S)=>{Ae(b,{get value(){return e().leechThreshold},set value(R){Z(u,_(e).leechThreshold=R,_(e))},get defaultValue(){return i.leechThreshold},min:1,children:(R,B)=>{X(R,{$$events:{click:()=>y(Object.keys(g).indexOf("leechThreshold"))},children:(Y,re)=>{var z=K();E(()=>G(z,g.leechThreshold.title)),$(Y,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var P=a(a(h,!0));U(P,{children:(b,S)=>{var R=ne(mi);qe(b,{get value(){return e().leechAction},set value(B){Z(u,_(e).leechAction=B,_(e))},get defaultValue(){return i.leechAction},get choices(){return r(R)},breakpoint:"md",children:(B,Y)=>{X(B,{$$events:{click:()=>y(Object.keys(g).indexOf("leechAction"))},children:(re,z)=>{var F=K();E(()=>G(F,g.leechAction.title)),$(re,F)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(I,L)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(m,H)=>{var I=ne(()=>wr());Be(m,{get title(){return r(I)},get url(){return ue.DeckOptions.lapses},slot:"tooltip",get fsrs(){return s()},helpSections:O,$$events:{mount:W=>{w(T,W.detail.modal),w(k,W.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}var ku=q("<!> <!> <!> <!>",1),_u=q("<!> <!> <!> <!> <!>",1);function bu(d,t){de(t,!1);const n=ke(),e=()=>ce(c,"$config",n),s=()=>ce(p,"$fsrs",n),l=N(),v=N();let u=V(t,"state"),i=V(t,"api",8,()=>({}));const c=u().currentConfig,C=u().defaults,p=u().fsrs;let g=N(),O=N();const T={learningSteps:{title:bl(),help:Pl(),url:ue.DeckOptions.learningSteps},graduatingInterval:{title:xl(),help:Sl(),url:ue.DeckOptions.graduatingInterval,sched:Te.SM2},easyInterval:{title:Ol(),help:Tl(),url:ue.DeckOptions.easyInterval,sched:Te.SM2},insertionOrder:{title:Al(),help:Rl(),url:ue.DeckOptions.insertionOrder}},k=Object.values(T);let y=N(),A=N();function m(I){r(y).show(),r(A).to(I)}oe(()=>(e(),s()),()=>{const I=e().learnSteps.length?e().learnSteps[e().learnSteps.length-1]/60/24:0;w(g,I>e().graduatingIntervalGood?Dl():""),w(O,s()&&I>=1?Ur():"")}),oe(()=>e(),()=>{w(l,e().graduatingIntervalGood>e().graduatingIntervalEasy?Il():"")}),oe(()=>e(),()=>{w(v,e().newCardInsertOrder==Ft.RANDOM?Ll():"")}),Re(),ge();var H=ne(()=>kr());We(d,{get title(){return r(H)},children:(I,W)=>{Ge(I,{slotHost:U,get api(){return i()},children:(L,M)=>{var o=_u(),D=ee(o);U(D,{children:(S,R)=>{Zr(S,{get value(){return e().learnSteps},set value(B){Z(c,_(e).learnSteps=B,_(e))},get defaultValue(){return C.learnSteps},children:(B,Y)=>{X(B,{$$events:{click:()=>m(Object.keys(T).indexOf("learningSteps"))},children:(re,z)=>{var F=K();E(()=>G(F,T.learningSteps.title)),$(re,F)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var x=a(a(D,!0));U(x,{children:(S,R)=>{De(S,{get warning(){return r(O)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var h=a(a(x,!0));we(h,()=>!s(),S=>{var R=ku(),B=ee(R);U(B,{children:(F,fe)=>{Ae(F,{get value(){return e().graduatingIntervalGood},set value(me){Z(c,_(e).graduatingIntervalGood=me,_(e))},get defaultValue(){return C.graduatingIntervalGood},children:(me,te)=>{X(me,{$$events:{click:()=>m(Object.keys(T).indexOf("graduatingInterval"))},children:(pe,Me)=>{var Pe=K();E(()=>G(Pe,T.graduatingInterval.title)),$(pe,Pe)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var Y=a(a(B,!0));U(Y,{children:(F,fe)=>{De(F,{get warning(){return r(g)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var re=a(a(Y,!0));U(re,{children:(F,fe)=>{Ae(F,{get value(){return e().graduatingIntervalEasy},set value(me){Z(c,_(e).graduatingIntervalEasy=me,_(e))},get defaultValue(){return C.graduatingIntervalEasy},children:(me,te)=>{X(me,{$$events:{click:()=>m(Object.keys(T).indexOf("easyInterval"))},children:(pe,Me)=>{var Pe=K();E(()=>G(Pe,T.easyInterval.title)),$(pe,Pe)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var z=a(a(re,!0));U(z,{children:(F,fe)=>{De(F,{get warning(){return r(l)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(S,R)});var P=a(a(h,!0));U(P,{children:(S,R)=>{var B=ne(pi);qe(S,{get value(){return e().newCardInsertOrder},set value(Y){Z(c,_(e).newCardInsertOrder=Y,_(e))},get defaultValue(){return C.newCardInsertOrder},get choices(){return r(B)},breakpoint:"md",children:(Y,re)=>{X(Y,{$$events:{click:()=>m(Object.keys(T).indexOf("insertionOrder"))},children:(z,F)=>{var fe=K();E(()=>G(fe,T.insertionOrder.title)),$(z,fe)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var b=a(a(P,!0));U(b,{children:(S,R)=>{De(S,{get warning(){return r(v)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(L,o)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(I,W)=>{var L=ne(()=>kr());Be(I,{get title(){return r(L)},get url(){return ue.DeckOptions.newCards},slot:"tooltip",helpSections:k,get fsrs(){return s()},$$events:{mount:M=>{w(y,M.detail.modal),w(A,M.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}var Pu=q('<div class="show-timer-switch" style="display: contents;"><!></div>'),xu=q('<div class="show-timer-switch" style="display: contents;"><!></div>'),Su=q("<!> <!> <!> <!>",1);function Ou(d,t){de(t,!1);const n=ke(),e=()=>ce(u,"$config",n),s=N();let l=V(t,"state"),v=V(t,"api");const u=l().currentConfig,i=l().defaults,c={maximumAnswerSecs:{title:Ml(),help:Nl()},showAnswerTimer:{title:El(),help:Vl()},stopTimerOnAnswer:{title:Fl(),help:Wl()}},C=Object.values(c);let p=N(),g=N();function O(k){r(p).show(),r(g).to(k)}oe(()=>e(),()=>{w(s,e().capAnswerTimeToSecs>600?jl():"")}),Re(),ge();var T=ne(()=>_r());We(d,{get title(){return r(T)},children:(k,y)=>{Ge(k,{slotHost:U,get api(){return v()},children:(A,m)=>{var H=Su(),I=ee(H);U(I,{children:(o,D)=>{Ae(o,{get value(){return e().capAnswerTimeToSecs},set value(x){Z(u,_(e).capAnswerTimeToSecs=x,_(e))},get defaultValue(){return i.capAnswerTimeToSecs},min:1,max:7200,children:(x,h)=>{X(x,{$$events:{click:()=>O(Object.keys(c).indexOf("maximumAnswerSecs"))},children:(P,b)=>{var S=K();E(()=>G(S,c.maximumAnswerSecs.title)),$(P,S)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var W=a(a(I,!0));U(W,{children:(o,D)=>{De(o,{get warning(){return r(s)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var L=a(a(W,!0));U(L,{children:(o,D)=>{var x=Pu(),h=J(x);Le(h,{get value(){return e().showTimer},set value(P){Z(u,_(e).showTimer=P,_(e))},get defaultValue(){return i.showTimer},children:(P,b)=>{X(P,{$$events:{click:()=>O(Object.keys(c).indexOf("showAnswerTimer"))},children:(S,R)=>{var B=K();E(()=>G(B,c.showAnswerTimer.title)),$(S,B)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(x),$(o,x)},$$slots:{default:!0},$$legacy:!0});var M=a(a(L,!0));U(M,{children:(o,D)=>{var x=xu(),h=J(x);Le(h,{get value(){return e().stopTimerOnAnswer},set value(P){Z(u,_(e).stopTimerOnAnswer=P,_(e))},get defaultValue(){return i.stopTimerOnAnswer},children:(P,b)=>{X(P,{$$events:{click:()=>O(Object.keys(c).indexOf("stopTimerOnAnswer"))},children:(S,R)=>{var B=K();E(()=>G(B,c.stopTimerOnAnswer.title)),$(S,B)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(x),$(o,x)},$$slots:{default:!0},$$legacy:!0}),$(A,H)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(k,y)=>{var A=ne(()=>_r());Be(k,{get title(){return r(A)},get url(){return ue.DeckOptions.timer},slot:"tooltip",helpSections:C,$$events:{mount:m=>{w(p,m.detail.modal),w(g,m.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),$e()}var Tu=q("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!></div>",1),Au=q('<!> <div class="deck-options-page svelte-htbfcn"><div style="display: contents"><!></div></div>',1);function Ru(d,t){de(t,!1);const n=ke(),e=()=>ce(l,"$addons",n);let s=V(t,"state");const l=s().addonComponents;function v(){return s().currentAuxData}function u(M){Xe(l,[...e(),M])}function i(M,o){Xe(l,[...e(),{component:uu,html:M,mounted:o}])}const c={},C={},p={},g={},O={},T={},k={},y={},A={};let m=N();ge();var H=Au(),I=ee(H);Ei(I,{get state(){return s()},$$events:{presetchange(...M){const o=r(m);return o==null?void 0:o.apply(this,M)}},$$legacy:!0});var W=a(a(I,!0)),L=J(W);return be(L,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),Gs(L.lastChild,{breakpoint:"sm",class:"container-columns",children:(M,o)=>{var D=Tu(),x=ee(D),h=J(x);Ce(h,{class:"row-columns",children:(te,pe)=>{Hi(te,{get state(){return s()},api:C,get onPresetChange(){return r(m)},set onPresetChange(Me){w(m,Me)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var P=a(a(h,!0));Ce(P,{class:"row-columns",children:(te,pe)=>{bu(te,{get state(){return s()},api:p,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var b=a(a(P,!0));Ce(b,{class:"row-columns",children:(te,pe)=>{wu(te,{get state(){return s()},api:g,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var S=a(a(b,!0));Ce(S,{class:"row-columns",children:(te,pe)=>{Gi(te,{get state(){return s()},api:T,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var R=a(a(S,!0));Ce(R,{class:"row-columns",children:(te,pe)=>{bi(te,{get state(){return s()},api:O,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(x);var B=a(a(x,!0)),Y=J(B);Ce(Y,{class:"row-columns",children:(te,pe)=>{gi(te,{get state(){return s()},api:y,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var re=a(a(Y,!0));Ce(re,{class:"row-columns",children:(te,pe)=>{Ou(te,{get state(){return s()},api:k,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var z=a(a(re,!0));Ce(z,{class:"row-columns",children:(te,pe)=>{ki(te,{get state(){return s()},api:k,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var F=a(a(z,!0));we(F,()=>e().length,te=>{Ce(te,{class:"row-columns",children:(pe,Me)=>{Lo(pe,{get state(){return s()},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})});var fe=a(a(F,!0));Ce(fe,{class:"row-columns",children:(te,pe)=>{iu(te,{get state(){return s()},api:{},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var me=a(a(fe,!0));Ce(me,{class:"row-columns",children:(te,pe)=>{di(te,{get state(){return s()},api:A,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),j(B),$(M,D)},$$slots:{default:!0},$$legacy:!0}),j(L),j(W),$(d,H),Se(t,"auxData",v),Se(t,"addSvelteAddon",u),Se(t,"addHtmlAddon",i),Se(t,"options",c),Se(t,"dailyLimits",C),Se(t,"newOptions",p),Se(t,"lapseOptions",g),Se(t,"buryOptions",O),Se(t,"displayOrder",T),Se(t,"timerOptions",k),Se(t,"audioOptions",y),Se(t,"advancedOptions",A),$e({auxData:v,addSvelteAddon:u,addHtmlAddon:i,options:c,dailyLimits:C,newOptions:p,lapseOptions:g,buryOptions:O,displayOrder:T,timerOptions:k,audioOptions:y,advancedOptions:A})}function gc(d,t){de(t,!1);let n=V(t,"data"),e=N();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=()=>n().state.isModified(),Gt(()=>{globalThis.$deckOptions=new Promise((s,l)=>{s(r(e))}),Po()&&xo("deckOptionsReady")}),ge(),yt(Ru(d,{get state(){return n().state},$$legacy:!0}),s=>w(e,s),()=>r(e)),$e()}export{gc as component,$c as universal};
