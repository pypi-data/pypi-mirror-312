var _s=Object.defineProperty;var ks=(i,t,n)=>t in i?_s(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n;var le=(i,t,n)=>ks(i,typeof t!="symbol"?t+"":t,n);import{K as Ps,L as bs,M as Ss,N as xs,O as Os,s as Ze,d as nt,P as Je,Q as je,S as Fe,T as Mt,U as vr,V as qt,W as ht,X as mr,Y as yt,Z as As,_ as Ts,$ as Nt,a0 as Ds,a1 as Rs,a2 as Is,a3 as Ls,a4 as Es}from"../chunks/backend.CJ3aQY-w.mjs";import{l as Ms,w as Ns,a as Vs,b as Fs}from"../chunks/utils.CsQrVKie.mjs";import{V as Yt,p as ge,m as M,ag as he,b as fe,g as r,U as js,R as Jt,T as Hs,t as V,l as ie,a as Le,s as x,N as Ge,ah as we,E as _,a0 as ne}from"../chunks/runtime.BJSnJeWl.mjs";import{w as De,r as Bs,g as Oe,a as zs}from"../chunks/index.BB25h7Qo.mjs";import{c as Vt}from"../chunks/cloneDeep.WtUXUDTV.mjs";import{i as Ft,a as Ws,S as Gs}from"../chunks/Select.UH6e0ac-.mjs";import{D as Me,a as $,F as ee,d as Q,e as q,r as L,s,n as qs,t as J,M as Qs}from"../chunks/disclose-version.CXWUuFGG.mjs";import{b as wt}from"../chunks/this.C9pg2j_S.mjs";import{i as pe}from"../chunks/lifecycle.DW1_rEFA.mjs";import{p as j,i as Pe,s as Br}from"../chunks/props.fkJSEmZ6.mjs";import{s as Us,a as Qt,c as zr,o as Xt,b as Ks}from"../chunks/index-client.D9hOaSri.mjs";import{c as xe,C as Ys}from"../chunks/Container.Bejr1Sze.mjs";import{I as Js,b as Ae}from"../chunks/IconButton.CvR6ocQx.mjs";import{s as ke,a as ue,b as et,m as X}from"../chunks/store.CAPRemx4.mjs";import{ce as Wr,v as We,cf as Ut,cb as Gr,ar as Xe,cg as Zt,ch as Xs,ci as Zs,t as pt,cj as ea,ck as ta,cl as pr,cm as ra,cn as hr,co as sa,cp as aa,cq as na,cr as la,cs as oa,ct as ia,cu as ua,cv as ca,cw as da,cx as $a,cy as ga,cz as fa,cA as va,cB as yr,cC as ma,cD as pa,cE as ha,cF as ya,cG as Cr,cH as Ca,cI as wa,cJ as _a,cK as ka,cL as Pa,cM as ba,cN as Sa,cO as xa,cP as Oa,cQ as Aa,cR as qr,cS as Ta,cT as Da,cU as Ra,cV as Ia,cW as La,cX as Ea,cY as Ma,cZ as Na,c_ as Va,c$ as Fa,d0 as ja,d1 as Ha,d2 as Ba,d3 as za,d4 as Wa,d5 as Ga,d6 as qa,d7 as Qa,d8 as Ua,d9 as Ka,da as Ya,db as Ja,dc as Xa,dd as Za,de as en,df as tn,dg as rn,dh as sn,di as an,dj as nn,dk as ln,dl as on,dm as un,dn as cn,dp as dn,dq as $n,dr as wr,ds as gn,dt as fn,du as vn,dv as mn,dw as pn,dx as hn,dy as yn,dz as _r,dA as Cn,dB as wn,dC as _n,dD as kn,dE as Pn,dF as Qr,dG as Ur,dH as Kr,dI as bn,dJ as Sn,dK as xn,dL as On,dM as An,q as mt,dN as Tn,dO as Dn,dP as Rn,dQ as In,dR as Ln,dS as bt,dT as kr,dU as Pr,dV as En,dW as Mn,dX as Nn,dY as Vn,dZ as Fn,d_ as jn,d$ as Hn,e0 as br,e1 as Bn,e2 as zn,e3 as Wn,e4 as Gn,e5 as qn,e6 as Qn,e7 as Un,e8 as Kn,e9 as Yn,ea as Jn,eb as Xn,ec as Sr,ed as Zn,ee as el,ef as Yr,eg as Jr,eh as tl,ei as jt,ej as rl,ek as sl,el as Xr,em as al,en as nl,eo as Ht,ep as ll,eq as ol,er as il,es as ul,et as cl,eu as Zr,ev as dl,ew as $l,ex as gl,ey as fl,ez as vl,eA as ml,eB as pl,eC as hl,eD as yl,U as Cl,eE as wl,eF as _l,eG as kl,eH as Pl,eI as bl,eJ as Sl,eK as xl,eL as Ol,eM as Al,eN as es,eO as xr,eP as Tl,eQ as Dl,eR as Rl,eS as Il,eT as Ll,eU as El,eV as Ml,eW as Nl,eX as Vl,eY as Fl,eZ as jl,e_ as Or,e$ as Hl,f0 as Bl,f1 as zl,f2 as Wl,f3 as Gl,f4 as ql,f5 as Ql,f6 as Ar,f7 as Ul,f8 as Kl,f9 as Yl,fa as Jl,fb as Xl,fc as Zl,fd as eo,fe as to,ff as ro,fg as so,fh as Bt,fi as ao}from"../chunks/runtime-require.xejYRuTk.mjs";import{R as _e}from"../chunks/Row.Ctd7J_Qx.mjs";import{e as Ot,i as er,p as no}from"../chunks/theme.ChRgnSdP.mjs";import{T as Ve}from"../chunks/TitledContainer.DfIeXIZq.mjs";import{s as W,e as Ce}from"../chunks/render.CQvFnAiW.mjs";import{C as lt,R as kt,H as ce,c as Re,a as Z,b as qe,S as Ne,E as Ue,M as lo}from"../chunks/EnumSelectorRow.DUFhDjnj.mjs";import{d as oo,W as io,P as uo,D as vt,t as co}from"../chunks/Badge.B24_1Efz.mjs";import{a as At,b as zt}from"../chunks/input.05BvnVQv.mjs";import{I as xt,aa as $o,H as go,e as Tr,f as ts,ab as fo,S as vo,g as mo,p as po}from"../chunks/Shortcut.BXZvoA-p.mjs";import{C as tt}from"../chunks/Col.Db0-FNEI.mjs";import{m as rs}from"../chunks/context-keys.Dbye-yJ_.mjs";import{L as ho,S as yo}from"../chunks/LabelButton.tFek0keu.mjs";import{t as Dr,s as Rr}from"../chunks/index.DPGbUxyT.mjs";import{r as St}from"../chunks/progress._FIm6CT_.mjs";import{y as Ir,z as Lr,A as Er,C as Co,B as wo,D as _o,E as ko,H as Po,F as bo,G as So,b as xo,I as Oo,K as Ao,J as To,N as Do,L as Ro}from"../chunks/HoverColumns.iQYqBoln.mjs";import{t as Mr,b as He,c as Io,u as Lo,d as Eo}from"../chunks/time.DXBFJJA9.mjs";import{t as Mo}from"../chunks/time.ecLVQE0O.mjs";import{I as No,i as Vo,c as Fo,C as jo,T as Ho}from"../chunks/TableData.BacdFHl8.mjs";import{a as Nr,c as Wt}from"../chunks/bridgecommand.hyhg-qzd.mjs";function Bo(i,t,...n){return zo(i,Vo,t,n)}function zo(i,t,n,e){return function a(l,v){if(v>=e.length)return n(l);const u=new No,o=e[v++];let c=-1;for(const w of l){const b=o(w,++c,l),g=u.get(b);g?g.push(w):u.set(b,[w])}for(const[w,b]of u)u.set(w,a(b,v));return t(u)}(i,0)}const Wo=Fo("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Kt(){let i;return[new Promise(n=>i=n),i]}class Go{constructor(t,n){le(this,"currentConfig");le(this,"currentAuxData");le(this,"configList");le(this,"cardStateCustomizer");le(this,"currentDeck");le(this,"deckLimits");le(this,"defaults");le(this,"addonComponents");le(this,"newCardsIgnoreReviewLimit");le(this,"applyAllParentLimits");le(this,"fsrs");le(this,"fsrsReschedule",De(!1));le(this,"daysSinceLastOptimization");le(this,"currentPresetName");le(this,"originalConfigsPromise");le(this,"originalConfigsResolve");le(this,"targetDeckId");le(this,"configs");le(this,"selectedIdx");le(this,"configListSetter");le(this,"modifiedConfigs",new Set);le(this,"removedConfigs",[]);le(this,"schemaModified");le(this,"_presetAssignmentsChanged",!1);var e,a;this.targetDeckId=t,this.currentDeck=n.currentDeck,this.defaults=n.defaults.config,this.configs=n.allConfig.map(l=>({config:l.config,useCount:l.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(l=>l.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=De(n.cardStateCustomizer),this.deckLimits=De((a=(e=n.currentDeck)==null?void 0:e.limits)!=null?a:Qo()),this.newCardsIgnoreReviewLimit=De(n.newCardsIgnoreReviewLimit),this.applyAllParentLimits=De(n.applyAllParentLimits),this.fsrs=De(n.fsrs),this.daysSinceLastOptimization=De(n.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=De(this.getCurrentConfig()),this.currentAuxData=De(this.getCurrentAuxData()),this.currentPresetName=De(this.configs[this.selectedIdx].config.name),this.configList=Bs(this.getConfigList(),l=>{this.configListSetter=l}),this.schemaModified=n.schemaModified,this.addonComponents=De([]),Oe(this.configList),this.currentConfig.subscribe(l=>this.onCurrentConfigChanged(l)),this.currentAuxData.subscribe(l=>this.onCurrentAuxDataChanged(l)),[this.originalConfigsPromise,this.originalConfigsResolve]=Kt()}setCurrentIndex(t){this.selectedIdx=t,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList()}getCurrentName(){return this.configs[this.selectedIdx].config.name}setCurrentName(t){if(this.configs[this.selectedIdx].config.name===t)return;const n=this.ensureNewNameUnique(t),e=this.configs[this.selectedIdx].config;e.name=n,e.id&&this.modifiedConfigs.add(e.id),this.sortConfigs(),this.updateConfigList()}addConfig(t){this.addConfigFrom(t,this.defaults)}cloneConfig(t){this.addConfigFrom(t,this.configs[this.selectedIdx].config.config)}addConfigFrom(t,n){const e=this.ensureNewNameUnique(t),l={config:new Ps({id:0n,name:e,config:new bs(Vt(n))}),useCount:0};this.configs.push(l),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const t=this.configs[this.selectedIdx].config.id;if(t===1n)throw Error("can't remove default config");t!==0n&&(this.removedConfigs.push(t),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1),this.selectedIdx=Math.max(0,this.selectedIdx-1),this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList()}dataForSaving(t){const e=[...this.configs.map(a=>a.config).filter((a,l)=>l!==this.selectedIdx&&(a.id===0n||this.modifiedConfigs.has(a.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:e,mode:t,cardStateCustomizer:Oe(this.cardStateCustomizer),limits:Oe(this.deckLimits),newCardsIgnoreReviewLimit:Oe(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Oe(this.applyAllParentLimits),fsrs:Oe(this.fsrs),fsrsReschedule:Oe(this.fsrsReschedule)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(t){await Ss(this.dataForSaving(t))}onCurrentConfigChanged(t){const n=this.configs[this.selectedIdx].config;Ft(t,n.config)||(n.config=t,n.id&&this.modifiedConfigs.add(n.id))}onCurrentAuxDataChanged(t){const n=this.getCurrentAuxData();Ft(n,t)||this.currentConfig.update(e=>{const a=new TextEncoder().encode(JSON.stringify(t));return e.other=a,e})}ensureNewNameUnique(t){return this.configs.findIndex(e=>e.config.name===t)!==-1?t+(new Date().getTime()/1e3).toFixed(0):t}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var t;(t=this.configListSetter)==null||t.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return Vt(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const t=this.configs[this.selectedIdx].config.config;return qo(t.other)}sortConfigs(){const t=this.configs[this.selectedIdx].config.name;this.configs.sort((n,e)=>Ms(n.config.name,e.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(n=>n.config.name==t)}getConfigList(){return this.configs.map((n,e)=>{const a=n.useCount+(e===this.selectedIdx?1:0);return{name:n.config.name,current:e===this.selectedIdx,idx:e,useCount:a}})}getAllConfigs(){return Vt({configs:this.configs.map(t=>t.config),cardStateCustomizer:Oe(this.cardStateCustomizer),limits:Oe(this.deckLimits),newCardsIgnoreReviewLimit:Oe(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Oe(this.applyAllParentLimits),fsrs:Oe(this.fsrs),fsrsReschedule:Oe(this.fsrsReschedule),currentConfig:Oe(this.currentConfig)})}async isModified(){const t=await this.originalConfigsPromise,n=this.getAllConfigs();return!Ft(t,n)}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function qo(i){if(!i.length)return{};let t;try{t=JSON.parse(new TextDecoder().decode(i))}catch{return console.log("invalid json in deck config"),{}}return t.constructor!==Object?(console.log("invalid object in deck config"),{}):t}function Qo(){return new xs({})}class Ye{constructor(t,n,e,a,l){le(this,"title");le(this,"value");le(this,"setter");le(this,"disabledValue");le(this,"startValue");le(this,"initialValue");this.title=t,this.value=this.initialValue=n,this.setter=e,this.disabledValue=a,this.startValue=l}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(t){var n,e;this.value=(e=(n=this.value)!=null?n:this.startValue)!=null?e:t,this.setter(this.value)}setValue(t){this.value=t,this.setter(t)}}async function ss(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await Yt()}function Ct(i){return i.fsrsParams5?i.fsrsParams5:i.fsrsParams4}const Uo=async({params:i})=>{const t=Number(i.deckId),n=BigInt(t),e=await Os({did:n});return{state:new Go(BigInt(n),e)}},Dc=Object.freeze(Object.defineProperty({__proto__:null,load:Uo},Symbol.toStringTag,{value:"Module"}));Wr("svelte",Us);Wr("svelte/store",zs);function Ko(i,t){ge(t,!1);const n=ke(),e=()=>ue(r(v),"$components",n),a=()=>ue(u,"$auxData",n);let l=j(t,"state");const v=M(l().addonComponents),u=l().currentAuxData;pe();var o=Me(),c=ee(o);Pe(c,()=>e().length,w=>{Ve(w,{title:"Add-ons",children:(b,g)=>{var D=Me(),S=ee(D);Ot(S,1,e,er,(O,y,A)=>{var C=Me(),B=ee(C);Qt(B,()=>he(y).component,(R,H)=>{H(R,Br({get data(){return a()},set data(I){et(u,I)}},()=>he(y),{$$legacy:!0}))}),$(O,C)}),$(b,D)},$$slots:{default:!0},$$legacy:!0})}),$(i,o),fe()}function Gt(i,t){let n,e;if(t instanceof Element){if(n=t,e=Array.prototype.indexOf.call(i,n),e<0)return null}else if(typeof t=="string"){const a=i.namedItem(t);if(!a||(n=a,e=Array.prototype.indexOf.call(i,n),e<0))return null}else if(t<0){e=i.length+t;const a=i.item(e);if(!a)return null;n=a}else{e=t;const a=i.item(e);if(!a)return null;n=a}return[n,e]}class Yo{constructor(t){le(this,"parent");this.parent=t}insertElement(t,n){const e=Gt(this.parent.children,n);if(!e)return-1;const[a,l]=e;return this.parent.insertBefore(t,a[0]),l}appendElement(t,n){var u;const e=Gt(this.parent.children,n);if(!e)return-1;const[a,l]=e,v=(u=a.nextElementSibling)!=null?u:null;return this.parent.insertBefore(t,v),l+1}updateElement(t,n){const e=Gt(this.parent.children,n);return e?(t(...e),!0):!1}}function Jo(i){return new Yo(i)}function Xo(i){return i.nodeType===Node.ELEMENT_NODE}function Zo(i){function t(e){js(i,e)}return[{get(){return Jt(i)},available(){return Hs(i)}},t]}function ei(i,t,n,e){const a=De([]);a.subscribe(t);function l(S,O){a.update(y=>(y.splice(S,0,O),y))}const[v,u]=Kt(),o=v.then(Jo),c=De([]);async function w(S,O){const[y,A]=Kt(),C=await o,B=i();function R(d){return!S.id||d.id===S.id}async function H(d,N){for(const p of d)for(const k of p.addedNodes){if(!Xo(k)||!R(k))continue;const E=O(k,C);return E>=0&&l(E,B),A(void 0),N.disconnect()}}new MutationObserver(H).observe(C.parent,{childList:!0});const f={component:S,hostProps:B};return c.update(d=>(d.push(f),d)),await y,{destroy(){c.update(d=>(Ws(d,f),d))}}}async function b(S,O){return(await o).updateElement((A,C)=>{a.update(B=>(B[C]=S(B[C]),B))},O)}const g=e({addComponent:w,updateProps:b});function D(){const S=i();return a.update(O=>(O.push(S),O)),S}return n({getProps:D}),{dynamicSlotted:c,resolveSlotContainer:u,slotsInterface:g}}function ti(){return{detach:De(!1)}}function ri({addComponent:i,updateProps:t}){function n(u,o=0){return i(u,(c,w)=>w.insertElement(c,o))}function e(u,o=-1){return i(u,(c,w)=>w.appendElement(c,o))}function a(u){return t(o=>(o.detach.set(!1),o),u)}function l(u){return t(o=>(o.detach.set(!0),o),u)}function v(u){return t(o=>(o.detach.update(c=>!c),o),u)}return{insert:n,append:e,show:a,hide:l,toggle:v}}const si=Symbol("dynamicSlotting"),[Vr,ai]=Zo(si);var ni=Q('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function Be(i,t){ge(t,!1);const n=ke(),e=()=>ue(r(D),"$dynamicSlotted",n);function a(C){return C}let l=j(t,"slotHost"),v=j(t,"createProps",0,ti),u=j(t,"updatePropsList",0,a),o=j(t,"setSlotHostContext",0,ai),c=j(t,"createInterface",0,ri);const w=ei(v(),u(),o(),c()),b=w.slotsInterface,g=w.resolveSlotContainer,D=M(w.dynamicSlotted);let S=j(t,"api");Object.assign(S(),b),pe();var O=ni(),y=q(O);Ze(y,nt(t),{});var A=s(s(y,!0));Ot(A,7,e,(C,B)=>he(he(C)).component.id,(C,B,R)=>{let H=()=>he(he(B)).component,I=()=>he(he(B)).hostProps;var f=Me(),d=ee(f);Qt(d,l,(N,p)=>{p(N,{get id(){return H().id},get hostProps(){return I()},children:(k,h)=>{var E=Me(),T=ee(E);Qt(T,()=>H().component,(P,z)=>{z(P,Br(()=>H().props,{$$legacy:!0}))}),$(k,E)},$$slots:{default:!0},$$legacy:!0})}),$(C,f)}),L(O),oo(O,C=>g(C)),$(i,O),fe()}var li=Q('<div class="item svelte-u5rx4p"><!></div>');function K(i,t){var c;ge(t,!1);const n=ke(),e=()=>ue(v,"$detach",n);let a=j(t,"id",0,void 0),l=j(t,"hostProps",0,void 0);Vr.available()||console.log("Item: should always have a slotHostContext");const{detach:v}=(c=l())!=null?c:Vr.get().getProps();pe();var u=li(),o=q(u);Pe(o,()=>!e(),w=>{var b=Me(),g=ee(b);Ze(g,nt(t),{}),$(w,b)}),L(u),V(()=>We(u,"id",a())),$(i,u),fe()}var oi=Q(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function _t(i,t){ge(t,!1);let n=j(t,"title");pe(),qs();var e=oi(),a=ee(e,!0),l=s(a);V(()=>We(l,"title",Ut()));var v=q(l);xt(v,{icon:$o,$$legacy:!0}),L(l),V(()=>{var u;return W(a,`${(u=n())!=null?u:""} `)}),$(i,e),fe()}var ii=Q('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),ui=Q('<div class="m-2"><!></div>');function ci(i,t){let n=j(t,"value",4),e=j(t,"title");var a=ui(),l=q(a);lt(l,{children:(v,u)=>{var o=ii(),c=q(o),w=q(c);_t(w,{get title(){return e()},$$legacy:!0}),L(c);var b=s(s(c,!0)),g=q(b);Gr(g),L(b),L(o),At(g,n,D=>n(D)),$(v,o)},$$slots:{default:!0,revert:(v,u)=>{kt(v,{slot:"revert",get value(){return n()},set value(o){n(o)},defaultValue:"",$$legacy:!0})}},$$legacy:!0}),L(a),$(i,a)}var di=Q('<div class="spinner decrement svelte-1dakg3f" tabindex="-1" role="button"><!></div> <div class="spinner increment svelte-1dakg3f" tabindex="-1" role="button"><!></div>',1),$i=Q('<div class="spin-box svelte-1dakg3f"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-1dakg3f"> <!></div>');function as(i,t){ge(t,!1);let n=j(t,"value",4),e=j(t,"step",0,1),a=j(t,"min",0,1),l=j(t,"max",0,9999),v=M(),u=M(!1);function o(I){Number.isNaN(I)||n(Math.min(l(),Math.max(a(),I))),Yt().then(()=>we(v,r(v).value=r(w)))}function c(I){return Math.floor(I)===I?0:I.toString().split(".")[1].length||0}let w=M();function b(){o(parseFloat(this.value))}function g(I){r(u)&&(o(n()+(I.deltaY<0?e():-e())),I.preventDefault())}function D(I){o(n()+I),r(y)&&setTimeout(()=>D(I),A)}const S=[1500,1250,1e3,750,500,250];async function O(I){x(y,!0),A=128,x(C,setTimeout(I,250));for(const f of S)A=await new Promise(d=>setTimeout(()=>d(r(y)?A/2:128),f))}let y=M(!1),A,C=M();ie(()=>(Ge(n()),Ge(e())),()=>{x(w,n().toFixed(c(e())))}),Le(),pe();var B=$i(),R=q(B);wt(R,I=>x(v,I),()=>r(v)),Xe(R);var H=s(s(R,!0));Pe(H,go,I=>{var f=di(),d=ee(f);V(()=>We(d,"title",Xs()));var N=q(d);Tr(N,{children:(h,E)=>{xt(h,{icon:ts,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),L(d);var p=s(s(d,!0));V(()=>We(p,"title",Zs()));var k=q(p);Tr(k,{children:(h,E)=>{xt(h,{icon:fo,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),L(p),V(()=>{pt(d,"active",n()>a()),pt(p,"active",n()<l())}),Ce("click",d,()=>{r(v).focus(),n()>a()&&D(-e())},!1),Ce("mousedown",d,()=>O(()=>{n()>a()&&D(-e())}),!1),Ce("mouseup",d,()=>{clearTimeout(r(C)),x(y,!1)},!1),Ce("click",p,()=>{r(v).focus(),n()<l()&&D(e())},!1),Ce("mousedown",p,()=>O(()=>{n()<l()&&D(e())}),!1),Ce("mouseup",p,()=>{clearTimeout(r(C)),x(y,!1)},!1),$(I,f)}),L(B),V(()=>{We(R,"min",a()),We(R,"max",l()),We(R,"step",e()),Zt(R,r(w))}),Ce("wheel",B,g,!1,!0),Ce("blur",R,b,!1),Ce("focusin",R,()=>x(u,!0),!1),Ce("focusout",R,()=>x(u,!1),!1),$(i,B),fe()}var gi=Q('<div style="display: contents"><!></div> <div style="display: contents"><!></div>',1),fi=Q('<div style="display: contents"><!></div>',1);function Qe(i,t){let n=j(t,"value",4),e=j(t,"defaultValue"),a=j(t,"min",0,0),l=j(t,"max",0,9999),v=j(t,"step",0,.01);var u=fi(),o=ee(u);xe(o,()=>({"--cols":13})),_e(o.lastChild,{children:(c,w)=>{var b=gi(),g=ee(b);xe(g,()=>({"--col-size":7})),tt(g.lastChild,{breakpoint:"xs",children:(S,O)=>{var y=Me(),A=ee(y);Ze(A,nt(t),{}),$(S,y)},$$slots:{default:!0},$$legacy:!0}),L(g);var D=s(s(g,!0));xe(D,()=>({"--col-size":6})),tt(D.lastChild,{breakpoint:"xs",children:(S,O)=>{lt(S,{children:(y,A)=>{as(y,{get value(){return n()},set value(C){n(C)},get min(){return a()},get max(){return l()},get step(){return v()},$$legacy:!0})},$$slots:{default:!0,revert:(y,A)=>{kt(y,{slot:"revert",get value(){return n()},set value(C){n(C)},get defaultValue(){return e()},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),L(D),$(c,b)},$$slots:{default:!0},$$legacy:!0}),L(o),$(i,u)}var vi=Q("<!> <!>",1),mi=Q('<div style="display: contents"><!></div> <div style="display: contents"><!></div>',1),pi=Q('<div style="display: contents"><!></div>',1);function Ie(i,t){let n=j(t,"value",4),e=j(t,"defaultValue"),a=j(t,"min",0,0),l=j(t,"max",0,9999);var v=pi(),u=ee(v);xe(u,()=>({"--cols":13})),_e(u.lastChild,{children:(o,c)=>{var w=mi(),b=ee(w);xe(b,()=>({"--col-size":7})),tt(b.lastChild,{breakpoint:"xs",children:(D,S)=>{var O=Me(),y=ee(O);Ze(y,nt(t),{}),$(D,O)},$$slots:{default:!0},$$legacy:!0}),L(b);var g=s(s(b,!0));xe(g,()=>({"--col-size":6})),tt(g.lastChild,{breakpoint:"xs",children:(D,S)=>{_e(D,{class:"flex-grow-1",children:(O,y)=>{var R;var A=vi(),C=ee(A);Ze(C,(R=t.$$slots)==null?void 0:R.tabs,{});var B=s(s(C,!0));lt(B,{children:(H,I)=>{as(H,{get value(){return n()},set value(f){n(f)},get min(){return a()},get max(){return l()},$$legacy:!0})},$$slots:{default:!0,revert:(H,I)=>{kt(H,{slot:"revert",get value(){return n()},set value(f){n(f)},get defaultValue(){return e()},$$legacy:!0})}},$$legacy:!0}),$(O,A)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),L(g),$(o,w)},$$slots:{default:!0},$$legacy:!0}),L(u),$(i,v)}var hi=Q('<input type="date" class="svelte-ora9c4">'),yi=Q('<div style="display: contents"><!></div> <div style="display: contents"><!></div>',1),Ci=Q('<div style="display: contents"><!></div>',1),wi=Q("<div><!></div>");function _i(i,t){ge(t,!1);let n=j(t,"date",4);ie(()=>Ge(n()),()=>{n(n()?n():"1970-01-01")}),Le();var e=wi(),a=q(e);lt(a,{children:(l,v)=>{var u=Ci(),o=ee(u);xe(o,()=>({"--cols":13})),_e(o.lastChild,{children:(c,w)=>{var b=yi(),g=ee(b);xe(g,()=>({"--col-size":7})),tt(g.lastChild,{breakpoint:"xs",children:(S,O)=>{var y=Me(),A=ee(y);Ze(A,nt(t),{}),$(S,y)},$$slots:{default:!0},$$legacy:!0}),L(g);var D=s(s(g,!0));xe(D,()=>({"--col-size":6})),tt(D.lastChild,{breakpoint:"xs",children:(S,O)=>{var y=hi();Xe(y),At(y,n,A=>n(A)),$(S,y)},$$slots:{default:!0},$$legacy:!0}),L(D),$(c,b)},$$slots:{default:!0},$$legacy:!0}),L(o),$(l,u)},$$slots:{default:!0},$$legacy:!0}),L(e),$(i,e),fe()}var ki=Q("<!> <!> <!> <!> <!>",1),Pi=Q("<!> <!>",1),bi=Q("<!> <!> <!>",1);function Si(i,t){ge(t,!1);const n=ke(),e=()=>ue(b,"$fsrs",n),a=()=>ue(o,"$config",n),l=()=>ue(w,"$cardStateCustomizer",n);let v=j(t,"state"),u=j(t,"api");const o=v().currentConfig,c=v().defaults,w=v().cardStateCustomizer,b=v().fsrs,g={maximumInterval:{title:ea(),help:ta(),url:ce.DeckOptions.maximumInterval},historicalRetention:{title:pr(),help:ra(),sched:Re.FSRS},ignoreRevlogsBeforeMs:{title:hr(),help:sa(),sched:Re.FSRS},startingEase:{title:aa(),help:na(),url:ce.DeckOptions.startingEase,sched:Re.SM2},easyBonus:{title:la(),help:oa(),url:ce.DeckOptions.easyBonus,sched:Re.SM2},intervalModifier:{title:ia(),help:ua(),url:ce.DeckOptions.intervalModifier,sched:Re.SM2},hardInterval:{title:ca(),help:da(),url:ce.DeckOptions.hardInterval,sched:Re.SM2},newInterval:{title:$a(),help:ga(),url:ce.DeckOptions.newInterval,sched:Re.SM2},customScheduling:{title:fa(),help:va(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling"}},D=Object.values(g);let S=M(),O=M();function y(C){r(S).show(),r(O).to(C)}pe();var A=ne(()=>yr());Ve(i,{get title(){return r(A)},children:(C,B)=>{Be(C,{slotHost:K,get api(){return u()},children:(R,H)=>{var I=bi(),f=ee(I);K(f,{children:(p,k)=>{Ie(p,{get value(){return a().maximumReviewInterval},set value(h){X(o,_(a).maximumReviewInterval=h,_(a))},get defaultValue(){return c.maximumReviewInterval},min:1,max:365*100,children:(h,E)=>{Z(h,{$$events:{click:()=>y(Object.keys(g).indexOf("maximumInterval"))},children:(T,P)=>{var z=J();V(()=>W(z,g.maximumInterval.title)),$(T,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var d=s(s(f,!0));Pe(d,()=>!e(),p=>{var k=ki(),h=ee(k);K(h,{children:(Y,te)=>{Qe(Y,{get value(){return a().initialEase},set value(G){X(o,_(a).initialEase=G,_(a))},get defaultValue(){return c.initialEase},min:1.31,max:5,children:(G,F)=>{Z(G,{$$events:{click:()=>y(Object.keys(g).indexOf("startingEase"))},children:(ve,me)=>{var de=J();V(()=>W(de,g.startingEase.title)),$(ve,de)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var E=s(s(h,!0));K(E,{children:(Y,te)=>{Qe(Y,{get value(){return a().easyMultiplier},set value(G){X(o,_(a).easyMultiplier=G,_(a))},get defaultValue(){return c.easyMultiplier},min:1,max:5,children:(G,F)=>{Z(G,{$$events:{click:()=>y(Object.keys(g).indexOf("easyBonus"))},children:(ve,me)=>{var de=J();V(()=>W(de,g.easyBonus.title)),$(ve,de)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var T=s(s(E,!0));K(T,{children:(Y,te)=>{Qe(Y,{get value(){return a().intervalMultiplier},set value(G){X(o,_(a).intervalMultiplier=G,_(a))},get defaultValue(){return c.intervalMultiplier},min:.5,max:2,children:(G,F)=>{Z(G,{$$events:{click:()=>y(Object.keys(g).indexOf("intervalModifier"))},children:(ve,me)=>{var de=J();V(()=>W(de,g.intervalModifier.title)),$(ve,de)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var P=s(s(T,!0));K(P,{children:(Y,te)=>{Qe(Y,{get value(){return a().hardMultiplier},set value(G){X(o,_(a).hardMultiplier=G,_(a))},get defaultValue(){return c.hardMultiplier},min:.5,max:1.3,children:(G,F)=>{Z(G,{$$events:{click:()=>y(Object.keys(g).indexOf("hardInterval"))},children:(ve,me)=>{var de=J();V(()=>W(de,g.hardInterval.title)),$(ve,de)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var z=s(s(P,!0));K(z,{children:(Y,te)=>{Qe(Y,{get value(){return a().lapseMultiplier},set value(G){X(o,_(a).lapseMultiplier=G,_(a))},get defaultValue(){return c.lapseMultiplier},max:1,children:(G,F)=>{Z(G,{$$events:{click:()=>y(Object.keys(g).indexOf("newInterval"))},children:(ve,me)=>{var de=J();V(()=>W(de,g.newInterval.title)),$(ve,de)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(p,k)},p=>{var k=Pi(),h=ee(k);Qe(h,{get value(){return a().historicalRetention},set value(T){X(o,_(a).historicalRetention=T,_(a))},get defaultValue(){return c.historicalRetention},min:.5,max:1,children:(T,P)=>{Z(T,{$$events:{click:()=>y(Object.keys(g).indexOf("historicalRetention"))},children:(z,Y)=>{var te=J();V(()=>W(te,pr())),$(z,te)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var E=s(s(h,!0));K(E,{children:(T,P)=>{_i(T,{get date(){return a().ignoreRevlogsBeforeDate},set date(z){X(o,_(a).ignoreRevlogsBeforeDate=z,_(a))},children:(z,Y)=>{Z(z,{$$events:{click:()=>y(Object.keys(g).indexOf("ignoreRevlogsBeforeMs"))},children:(te,G)=>{var F=J();V(()=>W(F,hr())),$(te,F)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(p,k)});var N=s(s(d,!0));K(N,{children:(p,k)=>{ci(p,{get title(){return g.customScheduling.title},get value(){return l()},set value(h){et(w,h)},$$events:{click:()=>y(Object.keys(g).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(R,I)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(C,B)=>{var R=ne(()=>yr());qe(C,{get title(){return r(R)},get url(){return ce.DeckOptions.advanced},slot:"tooltip",get fsrs(){return e()},helpSections:D,$$events:{mount:H=>{x(S,H.detail.modal),x(O,H.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),fe()}var xi=Q("<!> <!>",1);function Oi(i,t){ge(t,!1);const n=ke(),e=()=>ue(v,"$config",n);let a=j(t,"state"),l=j(t,"api");const v=a().currentConfig,u=a().defaults,o={disableAutoplay:{title:ma(),help:pa()},skipQuestionWhenReplaying:{title:ha(),help:ya()}},c=Object.values(o);let w=M(),b=M();function g(S){r(w).show(),r(b).to(S)}pe();var D=ne(()=>Cr());Ve(i,{get title(){return r(D)},children:(S,O)=>{Be(S,{slotHost:K,get api(){return l()},children:(y,A)=>{var C=xi(),B=ee(C);K(B,{children:(H,I)=>{Ne(H,{get value(){return e().disableAutoplay},set value(f){X(v,_(e).disableAutoplay=f,_(e))},get defaultValue(){return u.disableAutoplay},children:(f,d)=>{Z(f,{$$events:{click:()=>g(Object.keys(o).indexOf("disableAutoplay"))},children:(N,p)=>{var k=J();V(()=>W(k,o.disableAutoplay.title)),$(N,k)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var R=s(s(B,!0));K(R,{children:(H,I)=>{Ne(H,{get value(){return e().skipQuestionWhenReplayingAnswer},set value(f){X(v,_(e).skipQuestionWhenReplayingAnswer=f,_(e))},get defaultValue(){return u.skipQuestionWhenReplayingAnswer},children:(f,d)=>{Z(f,{$$events:{click:()=>g(Object.keys(o).indexOf("skipQuestionWhenReplaying"))},children:(N,p)=>{var k=J();V(()=>W(k,o.skipQuestionWhenReplaying.title)),$(N,k)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(y,C)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(S,O)=>{var y=ne(()=>Cr());qe(S,{get title(){return r(y)},get url(){return ce.DeckOptions.audio},slot:"tooltip",helpSections:c,$$events:{mount:A=>{x(w,A.detail.modal),x(b,A.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),fe()}function Ai(){return[{label:Ca(),value:Je.DECK},{label:wa(),value:Je.DECK_THEN_RANDOM_NOTES},{label:_a(),value:Je.LOWEST_POSITION},{label:ka(),value:Je.HIGHEST_POSITION},{label:Pa(),value:Je.RANDOM_NOTES},{label:ba(),value:Je.RANDOM_CARDS}]}function Ti(){return[{label:Sa(),value:je.TEMPLATE},{label:xa(),value:je.NO_SORT},{label:Oa(),value:je.TEMPLATE_THEN_RANDOM},{label:Aa(),value:je.RANDOM_NOTE_THEN_TEMPLATE},{label:qr(),value:je.RANDOM_CARD}]}function Di(i){return[{label:Ta(),value:Fe.DAY},{label:Da(),value:Fe.DAY_THEN_DECK},{label:Ra(),value:Fe.DECK_THEN_DAY},{label:Ia(),value:Fe.INTERVALS_ASCENDING},{label:La(),value:Fe.INTERVALS_DESCENDING},...Mi(i),{label:Ea(),value:Fe.RELATIVE_OVERDUENESS},{label:qr(),value:Fe.RANDOM},{label:Ma(),value:Fe.ADDED},{label:Na(),value:Fe.REVERSE_ADDED}]}function Fr(){return[{label:Va(),value:Mt.MIX_WITH_REVIEWS},{label:Fa(),value:Mt.AFTER_REVIEWS},{label:ja(),value:Mt.BEFORE_REVIEWS}]}function Ri(){return[{label:Ha(),value:vr.SUSPEND},{label:Ba(),value:vr.TAG_ONLY}]}function Ii(){return[{label:za(),value:qt.DUE},{label:Wa(),value:qt.RANDOM}]}function Li(){return[{label:Ga(),value:ht.BURY_CARD},{label:qa(),value:ht.ANSWER_AGAIN},{label:Qa(),value:ht.ANSWER_GOOD},{label:Ua(),value:ht.ANSWER_HARD},{label:Ka(),value:ht.SHOW_REMINDER}]}function Ei(){return[{label:Ya(),value:mr.SHOW_ANSWER},{label:Ja(),value:mr.SHOW_REMINDER}]}function Mi(i){const t=[{label:i?Xa():Za(),value:Fe.EASE_ASCENDING},{label:i?en():tn(),value:Fe.EASE_DESCENDING}];return i&&t.reverse(),t}var Ni=Q("<!> <!> <!> <!> <!>",1);function Vi(i,t){ge(t,!1);const n=ke(),e=()=>ue(v,"$config",n);let a=j(t,"state"),l=j(t,"api");const v=a().currentConfig,u=a().defaults,o={secondsToShowQuestion:{title:rn(),help:sn()},secondsToShowAnswer:{title:an(),help:nn()},waitForAudio:{title:ln(),help:on()},questionAction:{title:un(),help:cn()},answerAction:{title:dn(),help:$n()}},c=Object.values(o);let w=M(),b=M();function g(S){r(w).show(),r(b).to(S)}pe();var D=ne(()=>wr());Ve(i,{get title(){return r(D)},children:(S,O)=>{Be(S,{slotHost:K,get api(){return l()},children:(y,A)=>{var C=Ni(),B=ee(C);K(B,{children:(d,N)=>{Qe(d,{get value(){return e().secondsToShowQuestion},set value(p){X(v,_(e).secondsToShowQuestion=p,_(e))},get defaultValue(){return u.secondsToShowQuestion},step:.1,children:(p,k)=>{Z(p,{$$events:{click:()=>g(Object.keys(o).indexOf("secondsToShowQuestion"))},children:(h,E)=>{var T=J();V(()=>W(T,o.secondsToShowQuestion.title)),$(h,T)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var R=s(s(B,!0));K(R,{children:(d,N)=>{Qe(d,{get value(){return e().secondsToShowAnswer},set value(p){X(v,_(e).secondsToShowAnswer=p,_(e))},get defaultValue(){return u.secondsToShowAnswer},step:.1,children:(p,k)=>{Z(p,{$$events:{click:()=>g(Object.keys(o).indexOf("secondsToShowAnswer"))},children:(h,E)=>{var T=J();V(()=>W(T,o.secondsToShowAnswer.title)),$(h,T)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var H=s(s(R,!0));K(H,{children:(d,N)=>{Ne(d,{get value(){return e().waitForAudio},set value(p){X(v,_(e).waitForAudio=p,_(e))},get defaultValue(){return u.waitForAudio},children:(p,k)=>{Z(p,{$$events:{click:()=>g(Object.keys(o).indexOf("waitForAudio"))},children:(h,E)=>{var T=J();V(()=>W(T,o.waitForAudio.title)),$(h,T)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var I=s(s(H,!0));K(I,{children:(d,N)=>{var p=ne(Ei);Ue(d,{get value(){return e().questionAction},set value(k){X(v,_(e).questionAction=k,_(e))},get defaultValue(){return u.questionAction},get choices(){return r(p)},children:(k,h)=>{Z(k,{$$events:{click:()=>g(Object.keys(o).indexOf("questionAction"))},children:(E,T)=>{var P=J();V(()=>W(P,o.questionAction.title)),$(E,P)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var f=s(s(I,!0));K(f,{children:(d,N)=>{var p=ne(Li);Ue(d,{get value(){return e().answerAction},set value(k){X(v,_(e).answerAction=k,_(e))},get defaultValue(){return u.answerAction},get choices(){return r(p)},children:(k,h)=>{Z(k,{$$events:{click:()=>g(Object.keys(o).indexOf("answerAction"))},children:(E,T)=>{var P=J();V(()=>W(P,o.answerAction.title)),$(E,P)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(y,C)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(S,O)=>{var y=ne(()=>wr());qe(S,{get title(){return r(y)},get url(){return ce.DeckOptions.autoAdvance},slot:"tooltip",helpSections:c,$$events:{mount:A=>{x(w,A.detail.modal),x(b,A.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),fe()}var Fi=Q("<!> <!> <!>",1);function ji(i,t){ge(t,!1);const n=ke(),e=()=>ue(v,"$config",n);let a=j(t,"state"),l=j(t,"api");const v=a().currentConfig,u=a().defaults,o=`

`+gn(),c={buryNewSiblings:{title:fn(),help:vn()+o},buryReviewSiblings:{title:mn(),help:pn()+o},buryInterdayLearningSiblings:{title:hn(),help:yn()+o}},w=Object.values(c);let b=M(),g=M();function D(O){r(b).show(),r(g).to(O)}pe();var S=ne(()=>_r());Ve(i,{get title(){return r(S)},children:(O,y)=>{Be(O,{slotHost:K,get api(){return l()},children:(A,C)=>{var B=Fi(),R=ee(B);K(R,{children:(f,d)=>{Ne(f,{get value(){return e().buryNew},set value(N){X(v,_(e).buryNew=N,_(e))},get defaultValue(){return u.buryNew},children:(N,p)=>{Z(N,{$$events:{click:()=>D(Object.keys(c).indexOf("buryNewSiblings"))},children:(k,h)=>{var E=J();V(()=>W(E,c.buryNewSiblings.title)),$(k,E)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var H=s(s(R,!0));K(H,{children:(f,d)=>{Ne(f,{get value(){return e().buryReviews},set value(N){X(v,_(e).buryReviews=N,_(e))},get defaultValue(){return u.buryReviews},children:(N,p)=>{Z(N,{$$events:{click:()=>D(Object.keys(c).indexOf("buryReviewSiblings"))},children:(k,h)=>{var E=J();V(()=>W(E,c.buryReviewSiblings.title)),$(k,E)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var I=s(s(H,!0));K(I,{children:(f,d)=>{Ne(f,{get value(){return e().buryInterdayLearning},set value(N){X(v,_(e).buryInterdayLearning=N,_(e))},get defaultValue(){return u.buryInterdayLearning},children:(N,p)=>{Z(N,{$$events:{click:()=>D(Object.keys(c).indexOf("buryInterdayLearningSiblings"))},children:(k,h)=>{var E=J();V(()=>W(E,c.buryInterdayLearningSiblings.title)),$(k,E)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(A,B)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(O,y)=>{var A=ne(()=>_r());qe(O,{get title(){return r(A)},get url(){return ce.Studying.siblingsAndBurying},slot:"tooltip",helpSections:w,$$events:{mount:C=>{x(b,C.detail.modal),x(g,C.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),fe()}function Hi(){}var Bi=Q('<hr class="dropdown-divider">');function zi(i){var t=Bi();$(i,t)}var Wi=Q('<div class="save svelte-ymxw35"> </div>'),Gi=Q('<div style="display: contents"><!></div>',1),qi=Q("<!> <!> <!> <!> <!> <!> <!>",1),Qi=Q('<div class="d-flex"><div style="display: contents"><!></div> <!> <!></div>');function Ui(i,t){ge(t,!1);const n=window.getComputedStyle(document.body).direction=="rtl",e=zr();let a=j(t,"state");async function l(){if(await Yt(),a().defaultConfigSelected()){alert(Cn());return}const S=(a().removalWilLForceFullSync()?wn()+" ":"")+_n({name:a().getCurrentName()});if(confirm(Ns(S)))try{a().removeCurrentConfig(),e("remove")}catch(O){alert(O)}}async function v(S){if(await ss(),S===yt.COMPUTE_ALL_PARAMS&&!Oe(a().fsrs)){alert(kn());return}a().save(S)}const u="Control+Enter";let o=M(!1);pe();var c=Qi(),w=q(c),b=ne(()=>mo(u));xe(w,()=>({"--border-left-radius":n?"0":"var(--border-radius)","--border-right-radius":n?"var(--border-radius)":"0"})),ho(w.lastChild,{primary:!0,get tooltip(){return r(b)},$$events:{click:()=>v(yt.NORMAL)},children:(S,O)=>{var y=Wi(),A=q(y);V(()=>W(A,Pn())),L(y),$(S,y)},$$slots:{default:!0},$$legacy:!0}),L(w);var g=s(s(w,!0));vo(g,{keyCombination:u,$$events:{action:()=>v(yt.NORMAL)},$$legacy:!0});var D=s(s(g,!0));io(D,{get show(){return r(o)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>x(o,!1)},$$slots:{reference:(S,O)=>{var y=Gi(),A=ee(y);xe(A,()=>({"--border-right-radius":n?"0":"var(--border-radius)","--border-left-radius":n?"var(--border-radius)":"0"})),Js(A.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>x(o,!r(o))},children:(C,B)=>{xt(C,{icon:ts,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),L(A),$(S,y)},floating:(S,O)=>{uo(S,{slot:"floating",children:(y,A)=>{var C=qi(),B=ee(C);vt(B,{$$events:{click:()=>e("add")},children:(p,k)=>{var h=J();V(()=>W(h,Qr())),$(p,h)},$$slots:{default:!0},$$legacy:!0});var R=s(s(B,!0));vt(R,{$$events:{click:()=>e("clone")},children:(p,k)=>{var h=J();V(()=>W(h,Ur())),$(p,h)},$$slots:{default:!0},$$legacy:!0});var H=s(s(R,!0));vt(H,{$$events:{click:()=>e("rename")},children:(p,k)=>{var h=J();V(()=>W(h,Kr())),$(p,h)},$$slots:{default:!0},$$legacy:!0});var I=s(s(H,!0));vt(I,{$$events:{click:l},children:(p,k)=>{var h=J();V(()=>W(h,bn())),$(p,h)},$$slots:{default:!0},$$legacy:!0});var f=s(s(I,!0));zi(f);var d=s(s(f,!0));vt(d,{$$events:{click:()=>v(yt.APPLY_TO_CHILDREN)},children:(p,k)=>{var h=J();V(()=>W(h,Sn())),$(p,h)},$$slots:{default:!0},$$legacy:!0});var N=s(s(d,!0));vt(N,{$$events:{click:()=>v(yt.COMPUTE_ALL_PARAMS)},children:(p,k)=>{var h=J();V(()=>W(h,xn())),$(p,h)},$$slots:{default:!0},$$legacy:!0}),$(y,C)},$$slots:{default:!0},$$legacy:!0})}},$$legacy:!0}),L(c),$(i,c),fe()}var Ki=Q('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content svelte-18qg9px"><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" class="btn-close svelte-18qg9px" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text" class="form-control svelte-18qg9px"></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function Yi(i,t){ge(t,!1);const n=ke(),e=()=>ue(no,"$pageTheme",n),a=M();let l=j(t,"title"),v=j(t,"prompt"),u=j(t,"initialValue",0,""),o=j(t,"onOk");const c=Math.random().toString(36).substring(2),w=Jt(rs);let b=M(),g,D=M();function S(){o()(r(D).value),g.hide(),x(a,u())}function O(){g.hide(),x(a,u())}function y(){r(D).focus(),C(!0)}function A(){C(!1)}const{set:C,remove:B}=co(O);Xt(()=>{r(b).addEventListener("shown.bs.modal",y),r(b).addEventListener("hidden.bs.modal",A),g=new lo(r(b),{keyboard:!1}),w.set(c,g)}),Ks(()=>{B(),r(b).removeEventListener("shown.bs.modal",y),r(b).removeEventListener("hidden.bs.modal",A)}),ie(()=>Ge(u()),()=>{x(a,u())}),Le(),pe();var R=Ki();wt(R,F=>x(b,F),()=>r(b));var H=q(R),I=q(H),f=q(I),d=q(f),N=q(d);L(d);var p=s(s(d,!0));L(f);var k=s(s(f,!0)),h=q(k),E=q(h),T=q(E),P=q(T);L(T);var z=s(s(T,!0));wt(z,F=>x(D,F),()=>r(D)),Xe(z),L(E),L(h),L(k);var Y=s(s(k,!0)),te=q(Y),G=s(s(te,!0));return L(Y),L(I),L(H),L(R),V(()=>{var F;pt(I,"default-colors",e().isDark),W(N,l()),pt(p,"invert",e().isDark),W(P,`${(F=v())!=null?F:""}:`),pt(z,"nightMode",e().isDark)}),Ce("submit",h,po(S),!1),At(z,()=>r(a),F=>x(a,F)),Ce("click",te,O,!1),Ce("click",G,S,!1),$(i,R),Ae(t,"modalKey",c),fe({modalKey:c})}var Ji=Q('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),Xi=Q('<!> <div style="display: contents"><!></div>',1);function Zi(i,t){ge(t,!1);const n=ke(),e=()=>ue(u,"$configList",n),a=M(),l=M();let v=j(t,"state");const u=v().configList,o=zr(),c=()=>o("presetchange");function w(k){const h=On({decks:k.useCount});return`${k.name} (${h})`}function b(k){v().setCurrentIndex(k.detail.value),c()}function g(k){const h=k.trim();h.length&&(v().addConfig(h),c())}function D(k){const h=k.trim();h.length&&(v().cloneConfig(h),c())}function S(k){v().setCurrentName(k)}const O=Jt(rs);let y=M(),A=M(""),C=M(""),B=M(Hi);function R(){x(C,Qr()),x(B,g),x(A,""),O.get(r(y)).show()}function H(){x(C,Ur()),x(B,D),x(A,v().getCurrentName()),O.get(r(y)).show()}function I(){x(C,Kr()),x(B,S),x(A,v().getCurrentName()),O.get(r(y)).show()}ie(()=>e(),()=>{x(a,e().findIndex(k=>k.current))}),ie(()=>(e(),r(a)),()=>{x(l,w(e()[r(a)]))}),Le(),pe();var f=Xi(),d=ee(f),N=ne(()=>An());Yi(d,{get title(){return r(C)},get prompt(){return r(N)},get initialValue(){return r(A)},get onOk(){return r(B)},get modalKey(){return r(y)},set modalKey(k){x(y,k)},$$legacy:!0});var p=s(s(d,!0));xe(p,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),yo(p.lastChild,{breakpoint:"sm",children:(k,h)=>{var E=Ji(),T=q(E);Gs(T,{class:"flex-grow-1 mr1",get value(){return r(a)},set value(z){x(a,z)},get label(){return r(l)},get list(){return e()},parser:z=>({content:w(z),value:z.idx}),$$events:{change:b},$$legacy:!0});var P=s(s(T,!0));Ui(P,{get state(){return v()},$$events:{add:R,clone:H,rename:I,remove:c},$$legacy:!0}),L(E),$(k,E)},$$slots:{default:!0},$$legacy:!0}),L(p),$(i,f),fe()}var eu=Q('<li class="svelte-1ibi4j8"><button class="svelte-1ibi4j8"> </button></li>'),tu=Q('<ul class="svelte-1ibi4j8"></ul>');function jr(i,t){ge(t,!1);let n=j(t,"tabs"),e=j(t,"value",4),a=M(l());function l(){const c=n().slice().reverse().findIndex(w=>w.value!==null);return c===-1?0:n().length-c-1}function v(c){for(const[w,b]of n().entries())c===w?b.enable(e()):c>w?b.reset():b.disable()}const u=c=>()=>x(a,c);ie(()=>r(a),()=>{v(r(a))}),ie(()=>(Ge(n()),r(a)),()=>{var c;e((c=n()[r(a)].value)!=null?c:0)}),ie(()=>(Ge(n()),r(a),Ge(e())),()=>{n()[r(a)].setValue(e())}),Le(),pe();var o=tu();Ot(o,9,n,er,(c,w,b)=>{var g=eu(),D=q(g),S=q(D);L(D),L(g),V(()=>{pt(g,"active",r(a)===he(b)),W(S,he(w).title)}),Ce("click",D,u(he(b)),!1),$(c,g)}),L(o),$(i,o),fe()}var ru=Q("<div> </div>");function Ee(i,t){ge(t,!1);let n=j(t,"warning"),e=j(t,"className",0,"alert-warning");pe();var a=Me(),l=ee(a);Pe(l,n,v=>{_e(v,{children:(u,o)=>{var c=ru();Dr(1,c,()=>Rr),Dr(2,c,()=>Rr);var w=q(c);V(()=>W(w,Vs(n()))),L(c),V(()=>{var b;return mt(c,`col-12 alert ${(b=e())!=null?b:""} mb-0`)}),$(u,c)},$$slots:{default:!0},$$legacy:!0})}),$(i,a),fe()}var su=Q("<!> <!> <!> <!> <!>",1);function au(i,t){var T,P,z,Y,te,G;ge(t,!1);const n=ke(),e=()=>ue(b,"$config",n),a=()=>ue(g,"$limits",n),l=()=>ue(S,"$newCardsIgnoreReviewLimit",n),v=()=>ue(O,"$applyAllParentLimits",n),u=M();let o=j(t,"state"),c=j(t,"api");function w(){we(R,r(R)[0]=new Ye(bt(),e().newPerDay,F=>X(b,_(e).newPerDay=F,_(e)),e().newPerDay,null)),we(H,r(H)[0]=new Ye(bt(),e().reviewsPerDay,F=>X(b,_(e).reviewsPerDay=F,_(e)),e().reviewsPerDay,null))}const b=o().currentConfig,g=o().deckLimits,D=o().defaults,S=o().newCardsIgnoreReviewLimit,O=o().applyAllParentLimits,y=`

`+Tn()+`

`+Dn(),A=`

`+Rn()+y,C=Ut()+`

`+In(),B=Ut()+`

`+Ln(),R=M([new Ye(bt(),e().newPerDay,F=>X(b,_(e).newPerDay=F,_(e)),e().newPerDay,null),new Ye(kr(),(T=a().new)!=null?T:null,F=>X(g,_(a).new=F!=null?F:void 0,_(a)),null,null),new Ye(Pr(),a().newTodayActive&&(P=a().newToday)!=null?P:null,F=>X(g,_(a).newToday=F!=null?F:void 0,_(a)),null,(z=a().newToday)!=null?z:null)]),H=M([new Ye(bt(),e().reviewsPerDay,F=>X(b,_(e).reviewsPerDay=F,_(e)),e().reviewsPerDay,null),new Ye(kr(),(Y=a().review)!=null?Y:null,F=>X(g,_(a).review=F!=null?F:void 0,_(a)),null,null),new Ye(Pr(),a().reviewTodayActive&&(te=a().reviewToday)!=null?te:null,F=>X(g,_(a).reviewToday=F!=null?F:void 0,_(a)),null,(G=a().reviewToday)!=null?G:null)]);let I=M(0),f=M(0);const d={newLimit:{title:En(),help:Mn()+y,url:ce.DeckOptions.newCardsday},reviewLimit:{title:Nn(),help:Vn()+A,url:ce.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:Fn(),help:C,url:ce.DeckOptions.newCardsday},applyAllParentLimits:{title:jn(),help:B,url:ce.DeckOptions.newCardsday}},N=Object.values(d);let p=M(),k=M();function h(F){r(p).show(),r(k).to(F)}ie(()=>(r(I),r(f)),()=>{x(u,Math.min(9999,r(I)*10)>r(f)?Hn({cards:r(I),expected:Math.min(9999,r(I)*10)}):"")}),Le(),pe();var E=ne(()=>br());return Ve(i,{get title(){return r(E)},children:(F,ve)=>{Be(F,{slotHost:K,get api(){return c()},children:(me,de)=>{var be=su(),se=ee(be);K(se,{children:(Se,ot)=>{Ie(Se,{get value(){return r(I)},set value(ye){x(I,ye)},get defaultValue(){return D.newPerDay},children:(ye,st)=>{Z(ye,{$$events:{click:()=>h(Object.keys(d).indexOf("newLimit"))},children:(Te,it)=>{var Ke=J();V(()=>W(Ke,d.newLimit.title)),$(Te,Ke)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tabs:(ye,st)=>{jr(ye,{slot:"tabs",get tabs(){return r(R)},get value(){return r(I)},set value(Te){x(I,Te)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var $e=s(s(se,!0));K($e,{children:(Se,ot)=>{Ie(Se,{get value(){return r(f)},set value(ye){x(f,ye)},get defaultValue(){return D.reviewsPerDay},children:(ye,st)=>{Z(ye,{$$events:{click:()=>h(Object.keys(d).indexOf("reviewLimit"))},children:(Te,it)=>{var Ke=J();V(()=>W(Ke,d.reviewLimit.title)),$(Te,Ke)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tabs:(ye,st)=>{jr(ye,{slot:"tabs",get tabs(){return r(H)},get value(){return r(f)},set value(Te){x(f,Te)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var ze=s(s($e,!0));K(ze,{children:(Se,ot)=>{Ee(Se,{get warning(){return r(u)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var Pt=s(s(ze,!0));K(Pt,{children:(Se,ot)=>{Ne(Se,{get value(){return l()},set value(ye){et(S,ye)},defaultValue:!1,children:(ye,st)=>{Z(ye,{$$events:{click:()=>h(Object.keys(d).indexOf("newCardsIgnoreReviewLimit"))},children:(Te,it)=>{_t(Te,{get title(){return d.newCardsIgnoreReviewLimit.title},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var rt=s(s(Pt,!0));K(rt,{children:(Se,ot)=>{Ne(Se,{get value(){return v()},set value(ye){et(O,ye)},defaultValue:!1,children:(ye,st)=>{Z(ye,{$$events:{click:()=>h(Object.keys(d).indexOf("applyAllParentLimits"))},children:(Te,it)=>{_t(Te,{get title(){return d.applyAllParentLimits.title},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(me,be)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(F,ve)=>{var me=ne(()=>br());qe(F,{get title(){return r(me)},get url(){return ce.DeckOptions.dailyLimits},slot:"tooltip",helpSections:N,$$events:{mount:de=>{x(p,de.detail.modal),x(k,de.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),Ae(t,"onPresetChange",w),fe({onPresetChange:w})}var nu=Q("<!> <!> <!> <!> <!>",1);function lu(i,t){ge(t,!1);const n=ke(),e=()=>ue(u,"$config",n),a=()=>ue(c,"$fsrs",n);let l=j(t,"state"),v=j(t,"api");const u=l().currentConfig,o=l().defaults,c=l().fsrs,w=`

`+Bn();let b=M([]);const g={newGatherPriority:{title:zn(),help:Wn()+w},newCardSortOrder:{title:Gn(),help:qn()+w},newReviewPriority:{title:Qn(),help:Un()+w},interdayStepPriority:{title:Kn(),help:Yn()+w},reviewSortOrder:{title:Jn(),help:Xn()+w}},D=Object.values(g);let S=M(),O=M();function y(C){r(S).show(),r(O).to(C)}ie(()=>(e(),r(b)),()=>{switch(e().newCardGatherPriority){case Je.RANDOM_NOTES:x(b,[je.TEMPLATE_THEN_RANDOM,je.RANDOM_NOTE_THEN_TEMPLATE]);break;case Je.RANDOM_CARDS:x(b,[je.TEMPLATE_THEN_RANDOM,je.RANDOM_NOTE_THEN_TEMPLATE,je.RANDOM_CARD]);break;default:x(b,[]);break}r(b).includes(e().newCardSortOrder)&&X(u,_(e).newCardSortOrder=0,_(e)),e().newCardSortOrder in je||X(u,_(e).newCardSortOrder=0,_(e))}),Le(),pe();var A=ne(()=>Sr());Ve(i,{get title(){return r(A)},children:(C,B)=>{Be(C,{slotHost:K,get api(){return v()},children:(R,H)=>{var I=nu(),f=ee(I);K(f,{children:(h,E)=>{var T=ne(Ai);Ue(h,{get value(){return e().newCardGatherPriority},set value(P){X(u,_(e).newCardGatherPriority=P,_(e))},get defaultValue(){return o.newCardGatherPriority},get choices(){return r(T)},children:(P,z)=>{Z(P,{$$events:{click:()=>y(Object.keys(g).indexOf("newGatherPriority"))},children:(Y,te)=>{var G=J();V(()=>W(G,g.newGatherPriority.title)),$(Y,G)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var d=s(s(f,!0));K(d,{children:(h,E)=>{var T=ne(Ti);Ue(h,{get value(){return e().newCardSortOrder},set value(P){X(u,_(e).newCardSortOrder=P,_(e))},get defaultValue(){return o.newCardSortOrder},get choices(){return r(T)},get disabledChoices(){return r(b)},children:(P,z)=>{Z(P,{$$events:{click:()=>y(Object.keys(g).indexOf("newCardSortOrder"))},children:(Y,te)=>{var G=J();V(()=>W(G,g.newCardSortOrder.title)),$(Y,G)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var N=s(s(d,!0));K(N,{children:(h,E)=>{var T=ne(Fr);Ue(h,{get value(){return e().newMix},set value(P){X(u,_(e).newMix=P,_(e))},get defaultValue(){return o.newMix},get choices(){return r(T)},children:(P,z)=>{Z(P,{$$events:{click:()=>y(Object.keys(g).indexOf("newReviewPriority"))},children:(Y,te)=>{var G=J();V(()=>W(G,g.newReviewPriority.title)),$(Y,G)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var p=s(s(N,!0));K(p,{children:(h,E)=>{var T=ne(Fr);Ue(h,{get value(){return e().interdayLearningMix},set value(P){X(u,_(e).interdayLearningMix=P,_(e))},get defaultValue(){return o.interdayLearningMix},get choices(){return r(T)},children:(P,z)=>{Z(P,{$$events:{click:()=>y(Object.keys(g).indexOf("interdayStepPriority"))},children:(Y,te)=>{var G=J();V(()=>W(G,g.interdayStepPriority.title)),$(Y,G)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var k=s(s(p,!0));K(k,{children:(h,E)=>{var T=ne(()=>Di(a()));Ue(h,{get value(){return e().reviewOrder},set value(P){X(u,_(e).reviewOrder=P,_(e))},get defaultValue(){return o.reviewOrder},get choices(){return r(T)},children:(P,z)=>{Z(P,{$$events:{click:()=>y(Object.keys(g).indexOf("reviewSortOrder"))},children:(Y,te)=>{var G=J();V(()=>W(G,g.reviewSortOrder.title)),$(Y,G)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(R,I)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(C,B)=>{var R=ne(()=>Sr());qe(C,{get title(){return r(R)},get url(){return ce.DeckOptions.displayOrder},slot:"tooltip",helpSections:D,$$events:{mount:H=>{x(S,H.detail.modal),x(O,H.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),fe()}var ou=Q('<textarea class="w-100"></textarea>');function iu(i,t){ge(t,!1);let n=j(t,"value",4),e=j(t,"defaults"),a=M();function l(o){return o.map(c=>c.toFixed(4)).join(", ")}function v(){n(this.value.replace(/ /g,"").split(",").filter(o=>o).map(o=>Number(o)))}ie(()=>Ge(n()),()=>{x(a,l(n()))}),Le(),pe();var u=ou();Gr(u),V(()=>We(u,"placeholder",l(e()))),V(()=>Zt(u,r(a))),Ce("blur",u,v,!1),$(i,u),fe()}var uu=Q("<!> <!>",1);function cu(i,t){let n=j(t,"value",4),e=j(t,"defaultValue"),a=j(t,"defaults");var l=uu(),v=ee(l);Ze(v,nt(t),{});var u=s(s(v,!0));lt(u,{children:(o,c)=>{iu(o,{get value(){return n()},set value(w){n(w)},get defaults(){return a()},$$legacy:!0})},$$slots:{default:!0,revert:(o,c)=>{kt(o,{slot:"revert",get value(){return n()},set value(w){n(w)},get defaultValue(){return e()},$$legacy:!0})}},$$legacy:!0}),$(i,l)}var du=Q('<input type="text" class="w-100 mb-1">');function $u(i,t){let n=j(t,"value",4),e=j(t,"placeholder");lt(i,{children:(a,l)=>{var v=du();Xe(v),V(()=>We(v,"placeholder",e())),At(v,n,u=>n(u)),$(a,v)},$$slots:{default:!0},$$legacy:!0})}function Hr(i,t,n){const e=Ir(i);if(e.selectAll(".lines").remove(),e.selectAll(".hover-columns").remove(),e.selectAll(".focus-line").remove(),e.selectAll(".legend").remove(),n.length==0)return Lr(e,!1),[];const a=e.transition().duration(600),l=new Date,v=n.map(f=>({...f,date:new Date(l.getTime()+f.x*24*60*60*1e3)})),u=l,o=Er(v,f=>f.date),c=Mo().domain([u,o]).range([t.marginLeft,t.width-t.marginRight]);e.select(".x-ticks").call(f=>f.transition(a).call(Co(c).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const w=f=>Mr(f,!0),b=Er(v,f=>f.y),g=wo().range([t.height-t.marginBottom,t.marginTop]).domain([0,b]).nice();e.select(".y-ticks").call(f=>f.transition(a).call(_o(g).ticks(t.height/50).tickSizeOuter(0).tickFormat(w))).attr("direction","ltr"),e.select(".y-ticks .y-axis-title").remove(),e.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-t.marginLeft).attr("x",0-t.height/2).attr("dy","1em").attr("fill","currentColor").style("text-anchor","middle").text("Review Time per day");const D=v.map(f=>[c(f.date),g(f.y),f.label]),S=Bo(D,f=>Object.assign(f,{z:f[0][2]}),f=>f[2]),O=Wo;e.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(S.entries())).join("path").attr("stroke",(f,d)=>O[d%O.length]).attr("d",f=>ko()(f[1].map(d=>[d[0],d[1]]))).attr("data-group",f=>f[0]);const y=e.append("line").attr("class","focus-line").attr("y1",t.marginTop).attr("y2",t.height-t.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),A=Array.from(S.values()).reduce((f,d)=>f.length>d.length?f:d),C=t.width/A.length;e.append("g").attr("class","hover-columns").selectAll("rect").data(A).join("rect").attr("x",f=>f[0]-C/2).attr("y",t.marginTop).attr("width",C).attr("height",t.height-t.marginTop-t.marginBottom).attr("fill","transparent").on("mousemove",B).on("mouseout",()=>{y.style("opacity",0),Po()});function B(f,d){bo(f,document.body);const N=c.invert(d[0]),p={};S.forEach((E,T)=>{const P=xo(te=>c.invert(te[0])).left,z=P(E,N),Y=E[z-1]||E[z];Y&&(p[T]=g.invert(Y[1]))}),y.attr("x1",d[0]).attr("x2",d[0]).style("opacity",1);const k=+((N.getTime()-Date.now())/(60*60*24*1e3)).toFixed();let h=`Date: ${Fs(N)}<br>In ${k} Days<br>`;for(const[E,T]of Object.entries(p))h+=`#${E}: ${Mr(T)}<br>`;So(h,f.pageX,f.pageY)}const R=e.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(S.keys())).join("g").attr("transform",(f,d)=>`translate(0,${d*20})`).attr("cursor","pointer").on("click",(f,d)=>H(f,d));R.append("rect").attr("x",t.width-t.marginRight+36).attr("width",12).attr("height",12).attr("fill",(f,d)=>O[d%O.length]),R.append("text").attr("x",t.width-t.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(f=>`#${f}`);const H=(f,d)=>{const N=d,p=e.select(`path[data-group="${N}"]`),k=p.classed("hidden"),h=f.currentTarget;p.classed("hidden",!k),p.style("display",()=>k?null:"none"),Ir(h).select("rect").style("opacity",k?1:.5)};return Lr(e,!0),[]}var gu=Q("Days to simulate",1),fu=Q(" <!>",1),vu=Q("Days to simulate",1),mu=Q("Additional new cards to simulate",1),pu=Q("New cards/day",1),hu=Q("Maximum reviews/day",1),yu=Q("Maximum interval",1),Cu=Qs("<svg><!><!><!><!></svg><!>",1),wu=Q('<!> <!> <div class="ms-1 me-1"><!> <!> <button><!></button> <button><!></button> <div><!></div> <!></div> <div class="m-2"><!> <!></div> <div class="m-2"><details><summary> </summary> <!> <button><!></button> <!> <div> </div></details></div> <div class="m-2"><details><summary>FSRS simulator (experimental)</summary> <!> <!> <!> <!> <!> <button> </button> <button> </button> <div> </div> <!></details></div>',1);function _u(i,t){ge(t,!1);const n=ke(),e=()=>ue(f,"$daysSinceLastOptimization",n),a=()=>ue(B,"$presetName",n),l=()=>ue(R,"$config",n),v=()=>ue(I,"$fsrsReschedule",n),u=M(),o=M(),c=M(),w=M(),b=M(),g=M(),D=M(),S=M(),O=M(),y=M();let A=j(t,"state"),C=j(t,"openHelpModal");const B=A().currentPresetName,R=A().currentConfig,H=A().defaults,I=A().fsrsReschedule,f=A().daysSinceLastOptimization;let d=M(),N=M(!1),p=M(!1),k=M(!1),h=M(0),E=M();const T=M(new As({daysToSimulate:365,lossAversion:2.5})),P=M(new Ts({params:Ct(l()),desiredRetention:l().desiredRetention,deckSize:0,daysToSimulate:365,newLimit:l().newPerDay,reviewLimit:l().reviewsPerDay,maxInterval:l().maximumReviewInterval,search:`preset:"${A().getCurrentName()}" -is:suspended`}));function z(m){const re=Math.round(100/.23456790123456783*(Math.pow(m,1/-.5)-1));return re===100?"":nl({days:re})}function Y(m){return m<.7||m>.97?"alert-danger":m<.8||m>.95?"alert-warning":"alert-info"}function te(){return BigInt(l().ignoreRevlogsBeforeDate?new Date(l().ignoreRevlogsBeforeDate).getTime():0)}async function G(){if(r(N)){await Nt({});return}if(A().presetAssignmentsChanged()){alert(Ht());return}x(N,!0),x(d,void 0);try{await St(async()=>{const m=Ct(l()),U=await Ds({search:l().paramSearch?l().paramSearch:r(c),ignoreRevlogsBeforeMs:te(),currentParams:m});m.length&&m.every((ae,oe)=>ae.toFixed(4)===U.params[oe].toFixed(4))||U.params.length===0?setTimeout(()=>alert(ll()),100):X(R,_(l).fsrsParams5=U.params,_(l)),r(d)&&we(d,r(d).current=r(d).total)},m=>{m.value.case==="computeParams"&&x(d,m.value.value)})}finally{x(N,!1)}}async function F(){if(r(p)){await Nt({});return}if(A().presetAssignmentsChanged()){alert(Ht());return}x(p,!0),x(d,void 0);try{await St(async()=>{const m=l().paramSearch?l().paramSearch:r(c),U=await Rs({params:Ct(l()),search:m,ignoreRevlogsBeforeMs:te()});r(d)&&we(d,r(d).current=r(d).total),setTimeout(()=>alert(`Log loss: ${U.logLoss.toFixed(4)}, RMSE(bins): ${(U.rmseBins*100).toFixed(2)}%. ${ol()}`),200)},m=>{m.value.case==="computeParams"&&x(d,m.value.value)})}finally{x(p,!1)}}async function ve(){if(r(k)){await Nt({});return}if(A().presetAssignmentsChanged()){alert(Ht());return}x(k,!0),x(E,void 0);try{await St(async()=>{we(T,r(T).maxInterval=l().maximumReviewInterval),we(T,r(T).params=Ct(l())),we(T,r(T).search=`preset:"${A().getCurrentName()}" -is:suspended`);const m=await Is(r(T));x(h,m.optimalRetention),x(E,void 0)},m=>{m.value.case==="computeRetention"&&x(E,m.value.value)})}finally{x(k,!1)}}function me(m){if(!m||!m.total)return"";const U=(m.current/m.total*100).toFixed(1);return m instanceof Ls?`${U}%`:il({pct:U,reviews:m.reviews})}function de(m){return m?ul({count:m.current}):""}function be(m){return m?cl({num:m.toFixed(2)}):""}let se=M([]);const $e=Ro();let ze=M(null);const Pt=Zn();let rt=0,Se=[];function ot(m,U){const ae=[];for(let oe=0;oe<m.length;oe++){let re=0,at=0;for(let ft=Math.max(0,oe-U+1);ft<=oe;ft++)re+=m[ft],at++;ae.push(re/at)}return ae}async function ye(){let m;rt+=1;try{await St(async()=>{we(P,r(P).params=Ct(l())),we(P,r(P).desiredRetention=l().desiredRetention),we(P,r(P).search=`preset:"${A().getCurrentName()}" -is:suspended`),x(y,"processing..."),m=await Es(r(P))},()=>{})}finally{if(x(y,""),m){const U=ot(m.dailyTimeCost,Math.ceil(r(P).daysToSimulate/50));Se=Se.concat(U.map((ae,oe)=>({x:oe,y:ae,label:rt}))),x(se,Hr(r(ze),$e,Se))}}}function st(){Se=Se.filter(m=>m.label!==rt),rt=Math.max(0,rt-1),x(se,Hr(r(ze),$e,Se))}ie(()=>e(),()=>{x(u,e()>30?el():"")}),ie(()=>a(),()=>{a()&&x(h,0)}),ie(()=>(r(N),r(p),r(k)),()=>{x(o,r(N)||r(p)||r(k))}),ie(()=>Ge(A()),()=>{x(c,`preset:"${A().getCurrentName()}" -is:suspended`)}),ie(()=>l(),()=>{x(w,Number(l().desiredRetention.toFixed(2)))}),ie(()=>r(w),()=>{x(b,z(r(w)))}),ie(()=>r(w),()=>{x(g,Y(r(w)))}),ie(()=>r(T),()=>{r(T).daysToSimulate>3650&&we(T,r(T).daysToSimulate=3650)}),ie(()=>r(d),()=>{x(D,me(r(d)))}),ie(()=>r(E),()=>{x(S,de(r(E)))}),ie(()=>r(d),()=>{var m,U;x(O,(U=(m=r(d))==null?void 0:m.reviews)!=null?U:void 0)}),ie(()=>{},()=>{x(y,"")}),Le(),pe();var Te=wu(),it=ee(Te);Qe(it,{get value(){return l().desiredRetention},set value(m){X(R,_(l).desiredRetention=m,_(l))},get defaultValue(){return H.desiredRetention},min:.7,max:.99,children:(m,U)=>{Z(m,{$$events:{click:()=>C()("desiredRetention")},children:(ae,oe)=>{var re=J();V(()=>W(re,Yr())),$(ae,re)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var Ke=s(s(it,!0));Ee(Ke,{get warning(){return r(b)},get className(){return r(g)},$$legacy:!0});var Tt=s(s(Ke,!0)),tr=q(Tt);cu(tr,{get value(){return l().fsrsParams5},set value(m){X(R,_(l).fsrsParams5=m,_(l))},defaultValue:[],get defaults(){return H.fsrsParams5},children:(m,U)=>{Z(m,{$$events:{click:()=>C()("modelParams")},children:(ae,oe)=>{var re=J();V(()=>W(re,Jr())),$(ae,re)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var rr=s(s(tr,!0));$u(rr,{get value(){return l().paramSearch},set value(m){X(R,_(l).paramSearch=m,_(l))},get placeholder(){return r(c)},$$legacy:!0});var ut=s(s(rr,!0)),ls=q(ut);Pe(ls,()=>r(N),m=>{var U=J();V(()=>W(U,jt())),$(m,U)},m=>{var U=J();V(()=>W(U,tl())),$(m,U)}),L(ut);var ct=s(s(ut,!0)),os=q(ct);Pe(os,()=>r(p),m=>{var U=J();V(()=>W(U,jt())),$(m,U)},m=>{var U=J();V(()=>W(U,rl())),$(m,U)}),L(ct);var Dt=s(s(ct,!0)),is=q(Dt);Pe(is,()=>r(N)||r(p),m=>{var U=J();V(()=>W(U,r(D))),$(m,U)},m=>{var U=Me(),ae=ee(U);Pe(ae,()=>r(O)!==void 0,oe=>{var re=J();V(()=>W(re,sl({reviews:r(O)}))),$(oe,re)},null,!0),$(m,U)}),L(Dt);var us=s(s(Dt,!0));Ee(us,{get warning(){return r(u)},className:"alert-warning",$$legacy:!0}),L(Tt);var Rt=s(s(Tt,!0)),sr=q(Rt);Ne(sr,{get value(){return v()},set value(m){et(I,m)},defaultValue:!1,children:(m,U)=>{Z(m,{$$events:{click:()=>C()("rescheduleCardsOnChange")},children:(ae,oe)=>{var re=ne(()=>Zr());_t(ae,{get title(){return r(re)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var cs=s(s(sr,!0));Pe(cs,v,m=>{var U=ne(()=>dl());Ee(m,{get warning(){return r(U)},$$legacy:!0})}),L(Rt);var It=s(s(Rt,!0)),ar=q(It),Lt=q(ar),ds=q(Lt);V(()=>W(ds,Xr())),L(Lt);var nr=s(s(Lt,!0));Ie(nr,{get value(){return r(T).daysToSimulate},set value(m){we(T,r(T).daysToSimulate=m)},defaultValue:365,min:1,max:3650,children:(m,U)=>{Z(m,{$$events:{click:()=>C()("computeOptimalRetention")},children:(ae,oe)=>{var re=gu();$(ae,re)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var dt=s(s(nr,!0)),$s=q(dt);Pe($s,()=>r(k),m=>{var U=J();V(()=>W(U,jt())),$(m,U)},m=>{var U=J();V(()=>W(U,al())),$(m,U)}),L(dt);var lr=s(s(dt,!0));Pe(lr,()=>r(h),m=>{var U=fu(),ae=ee(U,!0);V(()=>{var re;return W(ae,`${(re=be(r(h)))!=null?re:""} `)});var oe=s(ae);Pe(oe,()=>r(h)-l().desiredRetention>=.01,re=>{var at=ne(()=>$l());Ee(re,{get warning(){return r(at)},className:"alert-warning",$$legacy:!0})}),$(m,U)});var or=s(s(lr,!0)),gs=q(or);L(or),L(ar),L(It);var ir=s(s(It,!0)),ur=q(ir),fs=q(ur),cr=s(s(fs,!0));Ie(cr,{get value(){return r(P).daysToSimulate},set value(m){we(P,r(P).daysToSimulate=m)},defaultValue:365,min:1,max:3650,children:(m,U)=>{Z(m,{$$events:{click:()=>C()("simulateFsrsReview")},children:(ae,oe)=>{var re=vu();$(ae,re)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var dr=s(s(cr,!0));Ie(dr,{get value(){return r(P).deckSize},set value(m){we(P,r(P).deckSize=m)},defaultValue:0,min:1,max:1e5,children:(m,U)=>{Z(m,{$$events:{click:()=>C()("simulateFsrsReview")},children:(ae,oe)=>{var re=mu();$(ae,re)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var $r=s(s(dr,!0));Ie($r,{get value(){return r(P).newLimit},set value(m){we(P,r(P).newLimit=m)},get defaultValue(){return H.newPerDay},min:0,max:1e3,children:(m,U)=>{Z(m,{$$events:{click:()=>C()("simulateFsrsReview")},children:(ae,oe)=>{var re=pu();$(ae,re)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var gr=s(s($r,!0));Ie(gr,{get value(){return r(P).reviewLimit},set value(m){we(P,r(P).reviewLimit=m)},get defaultValue(){return H.reviewsPerDay},min:0,max:1e3,children:(m,U)=>{Z(m,{$$events:{click:()=>C()("simulateFsrsReview")},children:(ae,oe)=>{var re=hu();$(ae,re)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var fr=s(s(gr,!0));Ie(fr,{get value(){return r(P).maxInterval},set value(m){we(P,r(P).maxInterval=m)},get defaultValue(){return H.maximumReviewInterval},min:1,max:36500,children:(m,U)=>{Z(m,{$$events:{click:()=>C()("simulateFsrsReview")},children:(ae,oe)=>{var re=yu();$(ae,re)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var $t=s(s(fr,!0)),vs=q($t);vs.nodeValue="Simulate",L($t);var gt=s(s($t,!0)),ms=q(gt);ms.nodeValue="Clear last simulation",L(gt);var Et=s(s(gt,!0)),ps=q(Et);L(Et);var hs=s(s(Et,!0));Oo(hs,{title:Pt,children:(m,U)=>{var ae=Cu(),oe=ee(ae);wt(oe,ws=>x(ze,ws),()=>r(ze));var re=q(oe);jo(re);var at=s(re);Ao(at);var ft=s(at);To(ft,{bounds:$e,$$legacy:!0});var ys=s(ft);Do(ys,{bounds:$e,$$legacy:!0}),L(oe);var Cs=s(oe);Ho(Cs,{get tableData(){return r(se)},$$legacy:!0}),V(()=>We(oe,"viewBox",`0 0 ${$e.width} ${$e.height}`)),$(m,ae)},$$slots:{default:!0},$$legacy:!0}),L(ur),L(ir),V(()=>{var m,U,ae,oe,re;mt(ut,`btn ${(m=r(N)?"btn-warning":"btn-primary")!=null?m:""}`),ut.disabled=!r(N)&&r(o),mt(ct,`btn ${(U=r(p)?"btn-warning":"btn-primary")!=null?U:""}`),ct.disabled=!r(p)&&r(o),mt(dt,`btn ${(ae=r(k)?"btn-warning":"btn-primary")!=null?ae:""}`),dt.disabled=!r(k)&&r(o),W(gs,r(S)),mt($t,`btn ${(oe=r(o)?"btn-warning":"btn-primary")!=null?oe:""}`),$t.disabled=r(o),mt(gt,`btn ${(re=r(o)?"btn-warning":"btn-primary")!=null?re:""}`),gt.disabled=r(o),W(ps,r(y))}),Ce("click",ut,()=>G(),!1),Ce("click",ct,()=>F(),!1),Ce("click",dt,()=>ve(),!1),Ce("click",$t,()=>ye(),!1),Ce("click",gt,()=>st(),!1),$(i,Te),fe()}var ku=Q("<!> <!> <!>",1);function Pu(i,t){ge(t,!1);const n=ke(),e=()=>ue(u,"$fsrs",n),a=M();let l=j(t,"state"),v=j(t,"api");const u=l().fsrs,o={fsrs:{title:"FSRS",help:gl(),url:ce.DeckOptions.fsrs},desiredRetention:{title:Yr(),help:fl(),sched:Re.FSRS},modelParams:{title:Jr(),help:vl()+`

`+ml(),sched:Re.FSRS},rescheduleCardsOnChange:{title:Zr(),help:pl(),sched:Re.FSRS},computeOptimalRetention:{title:Xr(),help:hl(),sched:Re.FSRS}},c=Object.values(o);let w=M(),b=M();function g(D){r(w).show(),r(b).to(D)}ie(()=>e(),()=>{x(a,e()?yl():"")}),Le(),pe(),Ve(i,{title:"FSRS",children:(D,S)=>{Be(D,{slotHost:K,get api(){return v()},children:(O,y)=>{var A=ku(),C=ee(A);K(C,{children:(H,I)=>{Ne(H,{get value(){return e()},set value(f){et(u,f)},defaultValue:!1,children:(f,d)=>{Z(f,{$$events:{click:()=>g(Object.keys(o).indexOf("fsrs"))},children:(N,p)=>{_t(N,{get title(){return o.fsrs.title},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var B=s(s(C,!0));Ee(B,{get warning(){return r(a)},$$legacy:!0});var R=s(s(B,!0));Pe(R,e,H=>{_u(H,{get state(){return l()},openHelpModal:I=>g(Object.keys(o).indexOf(I)),$$legacy:!0})}),$(O,A)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(D,S)=>{qe(D,{title:"FSRS",get url(){return ce.DeckOptions.fsrs},slot:"tooltip",get fsrs(){return e()},helpSections:c,$$events:{mount:O=>{x(w,O.detail.modal),x(b,O.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),fe()}function bu(i,t){ge(t,!1);let n=j(t,"html"),e=j(t,"mounted");Xt(e()),pe();var a=Me(),l=ee(a);Cl(l,n,!1,!1),$(i,a),fe()}function Su(i){switch(i){case He.Seconds:return"s";case He.Minutes:return"m";case He.Hours:return"h";case He.Days:return"d";default:return""}}function xu(i){switch(i){case"s":return He.Seconds;case"h":return He.Hours;case"d":return He.Days;default:return He.Minutes}}function Ou(i){const t=i*60;let n=Io(t);return[He.Months,He.Years].includes(n)&&(n=He.Days),`${Math.round(Lo(n,t))}${Su(n)}`}function Au(i){const t=i.match(/(\d+)(.*)/);if(t){const[n,e,a]=t,l=xu(a),v=Eo(l)*parseInt(e,10);return Math.min(v,2**31)/60}else return 0}function Tu(i){return i.map(Ou).join(" ")}function Du(i){return i.split(" ").map(Au).filter(t=>t)}var Ru=Q('<input type="text" class="svelte-f5c9s0">');function Iu(i,t){ge(t,!1);let n=j(t,"value",4),e=M();function a(){n(Du(this.value))}ie(()=>Ge(n()),()=>{x(e,Tu(n()))}),Le(),pe();var l=Ru();Xe(l),V(()=>Zt(l,r(e))),Ce("blur",l,a,!1),$(i,l),fe()}var Lu=Q('<div style="display: contents"><!></div> <div style="display: contents"><!></div>',1),Eu=Q('<div style="display: contents"><!></div>',1);function ns(i,t){let n=j(t,"value",4),e=j(t,"defaultValue");var a=Eu(),l=ee(a);xe(l,()=>({"--cols":13})),_e(l.lastChild,{children:(v,u)=>{var o=Lu(),c=ee(o);xe(c,()=>({"--col-size":7})),tt(c.lastChild,{breakpoint:"xs",children:(b,g)=>{var D=Me(),S=ee(D);Ze(S,nt(t),{}),$(b,D)},$$slots:{default:!0},$$legacy:!0}),L(c);var w=s(s(c,!0));xe(w,()=>({"--col-size":6})),tt(w.lastChild,{breakpoint:"xs",children:(b,g)=>{lt(b,{children:(D,S)=>{Iu(D,{get value(){return n()},set value(O){n(O)},$$legacy:!0})},$$slots:{default:!0,revert:(D,S)=>{kt(D,{slot:"revert",get value(){return n()},set value(O){n(O)},get defaultValue(){return e()},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),L(w),$(v,o)},$$slots:{default:!0},$$legacy:!0}),L(l),$(i,a)}var Mu=Q("<!> <!> <!> <!> <!> <!>",1);function Nu(i,t){ge(t,!1);const n=ke(),e=()=>ue(u,"$config",n),a=()=>ue(c,"$fsrs",n);let l=j(t,"state"),v=j(t,"api",8,()=>({}));const u=l().currentConfig,o=l().defaults,c=l().fsrs;let w=M(),b=M();const g={relearningSteps:{title:wl(),help:_l(),url:ce.DeckOptions.relearningSteps},minimumInterval:{title:kl(),help:Pl(),url:ce.DeckOptions.minimumInterval,sched:Re.SM2},leechThreshold:{title:bl(),help:Sl(),url:ce.Leeches.leeches},leechAction:{title:xl(),help:Ol(),url:ce.Leeches.waiting}},D=Object.values(g);let S=M(),O=M();function y(C){r(S).show(),r(O).to(C)}ie(()=>(e(),a()),()=>{const C=e().relearnSteps.length?e().relearnSteps[e().relearnSteps.length-1]/60/24:0;x(w,!a()&&C>e().minimumLapseInterval?Al():""),x(b,a()&&C>=1?es():"")}),Le(),pe();var A=ne(()=>xr());Ve(i,{get title(){return r(A)},children:(C,B)=>{Be(C,{slotHost:K,get api(){return v()},children:(R,H)=>{var I=Mu(),f=ee(I);K(f,{children:(E,T)=>{ns(E,{get value(){return e().relearnSteps},set value(P){X(u,_(e).relearnSteps=P,_(e))},get defaultValue(){return o.relearnSteps},children:(P,z)=>{Z(P,{$$events:{click:()=>y(Object.keys(g).indexOf("relearningSteps"))},children:(Y,te)=>{var G=J();V(()=>W(G,g.relearningSteps.title)),$(Y,G)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var d=s(s(f,!0));K(d,{children:(E,T)=>{Ee(E,{get warning(){return r(b)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var N=s(s(d,!0));Pe(N,()=>!a(),E=>{K(E,{children:(T,P)=>{Ie(T,{get value(){return e().minimumLapseInterval},set value(z){X(u,_(e).minimumLapseInterval=z,_(e))},get defaultValue(){return o.minimumLapseInterval},min:1,children:(z,Y)=>{Z(z,{$$events:{click:()=>y(Object.keys(g).indexOf("minimumInterval"))},children:(te,G)=>{var F=J();V(()=>W(F,g.minimumInterval.title)),$(te,F)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})});var p=s(s(N,!0));K(p,{children:(E,T)=>{Ee(E,{get warning(){return r(w)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var k=s(s(p,!0));K(k,{children:(E,T)=>{Ie(E,{get value(){return e().leechThreshold},set value(P){X(u,_(e).leechThreshold=P,_(e))},get defaultValue(){return o.leechThreshold},min:1,children:(P,z)=>{Z(P,{$$events:{click:()=>y(Object.keys(g).indexOf("leechThreshold"))},children:(Y,te)=>{var G=J();V(()=>W(G,g.leechThreshold.title)),$(Y,G)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var h=s(s(k,!0));K(h,{children:(E,T)=>{var P=ne(Ri);Ue(E,{get value(){return e().leechAction},set value(z){X(u,_(e).leechAction=z,_(e))},get defaultValue(){return o.leechAction},get choices(){return r(P)},breakpoint:"md",children:(z,Y)=>{Z(z,{$$events:{click:()=>y(Object.keys(g).indexOf("leechAction"))},children:(te,G)=>{var F=J();V(()=>W(F,g.leechAction.title)),$(te,F)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(R,I)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(C,B)=>{var R=ne(()=>xr());qe(C,{get title(){return r(R)},get url(){return ce.DeckOptions.lapses},slot:"tooltip",get fsrs(){return a()},helpSections:D,$$events:{mount:H=>{x(S,H.detail.modal),x(O,H.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),fe()}var Vu=Q("<!> <!> <!> <!>",1),Fu=Q("<!> <!> <!> <!> <!>",1);function ju(i,t){ge(t,!1);const n=ke(),e=()=>ue(c,"$config",n),a=()=>ue(b,"$fsrs",n),l=M(),v=M();let u=j(t,"state"),o=j(t,"api",8,()=>({}));const c=u().currentConfig,w=u().defaults,b=u().fsrs;let g=M(),D=M();const S={learningSteps:{title:Tl(),help:Dl(),url:ce.DeckOptions.learningSteps},graduatingInterval:{title:Rl(),help:Il(),url:ce.DeckOptions.graduatingInterval,sched:Re.SM2},easyInterval:{title:Ll(),help:El(),url:ce.DeckOptions.easyInterval,sched:Re.SM2},insertionOrder:{title:Ml(),help:Nl(),url:ce.DeckOptions.insertionOrder}},O=Object.values(S);let y=M(),A=M();function C(R){r(y).show(),r(A).to(R)}ie(()=>(e(),a()),()=>{const R=e().learnSteps.length?e().learnSteps[e().learnSteps.length-1]/60/24:0;x(g,R>e().graduatingIntervalGood?Vl():""),x(D,a()&&R>=1?es():"")}),ie(()=>e(),()=>{x(l,e().graduatingIntervalGood>e().graduatingIntervalEasy?Fl():"")}),ie(()=>e(),()=>{x(v,e().newCardInsertOrder==qt.RANDOM?jl():"")}),Le(),pe();var B=ne(()=>Or());Ve(i,{get title(){return r(B)},children:(R,H)=>{Be(R,{slotHost:K,get api(){return o()},children:(I,f)=>{var d=Fu(),N=ee(d);K(N,{children:(T,P)=>{ns(T,{get value(){return e().learnSteps},set value(z){X(c,_(e).learnSteps=z,_(e))},get defaultValue(){return w.learnSteps},children:(z,Y)=>{Z(z,{$$events:{click:()=>C(Object.keys(S).indexOf("learningSteps"))},children:(te,G)=>{var F=J();V(()=>W(F,S.learningSteps.title)),$(te,F)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var p=s(s(N,!0));K(p,{children:(T,P)=>{Ee(T,{get warning(){return r(D)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var k=s(s(p,!0));Pe(k,()=>!a(),T=>{var P=Vu(),z=ee(P);K(z,{children:(F,ve)=>{Ie(F,{get value(){return e().graduatingIntervalGood},set value(me){X(c,_(e).graduatingIntervalGood=me,_(e))},get defaultValue(){return w.graduatingIntervalGood},children:(me,de)=>{Z(me,{$$events:{click:()=>C(Object.keys(S).indexOf("graduatingInterval"))},children:(be,se)=>{var $e=J();V(()=>W($e,S.graduatingInterval.title)),$(be,$e)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var Y=s(s(z,!0));K(Y,{children:(F,ve)=>{Ee(F,{get warning(){return r(g)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var te=s(s(Y,!0));K(te,{children:(F,ve)=>{Ie(F,{get value(){return e().graduatingIntervalEasy},set value(me){X(c,_(e).graduatingIntervalEasy=me,_(e))},get defaultValue(){return w.graduatingIntervalEasy},children:(me,de)=>{Z(me,{$$events:{click:()=>C(Object.keys(S).indexOf("easyInterval"))},children:(be,se)=>{var $e=J();V(()=>W($e,S.easyInterval.title)),$(be,$e)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var G=s(s(te,!0));K(G,{children:(F,ve)=>{Ee(F,{get warning(){return r(l)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(T,P)});var h=s(s(k,!0));K(h,{children:(T,P)=>{var z=ne(Ii);Ue(T,{get value(){return e().newCardInsertOrder},set value(Y){X(c,_(e).newCardInsertOrder=Y,_(e))},get defaultValue(){return w.newCardInsertOrder},get choices(){return r(z)},breakpoint:"md",children:(Y,te)=>{Z(Y,{$$events:{click:()=>C(Object.keys(S).indexOf("insertionOrder"))},children:(G,F)=>{var ve=J();V(()=>W(ve,S.insertionOrder.title)),$(G,ve)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var E=s(s(h,!0));K(E,{children:(T,P)=>{Ee(T,{get warning(){return r(v)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),$(I,d)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(R,H)=>{var I=ne(()=>Or());qe(R,{get title(){return r(I)},get url(){return ce.DeckOptions.newCards},slot:"tooltip",helpSections:O,get fsrs(){return a()},$$events:{mount:f=>{x(y,f.detail.modal),x(A,f.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),fe()}var Hu=Q('<div class="show-timer-switch" style="display: contents;"><!></div>'),Bu=Q('<div class="show-timer-switch" style="display: contents;"><!></div>'),zu=Q("<!> <!> <!> <!>",1);function Wu(i,t){ge(t,!1);const n=ke(),e=()=>ue(u,"$config",n),a=M();let l=j(t,"state"),v=j(t,"api");const u=l().currentConfig,o=l().defaults,c={maximumAnswerSecs:{title:Hl(),help:Bl()},showAnswerTimer:{title:zl(),help:Wl()},stopTimerOnAnswer:{title:Gl(),help:ql()}},w=Object.values(c);let b=M(),g=M();function D(O){r(b).show(),r(g).to(O)}ie(()=>e(),()=>{x(a,e().capAnswerTimeToSecs>600?Ql():"")}),Le(),pe();var S=ne(()=>Ar());Ve(i,{get title(){return r(S)},children:(O,y)=>{Be(O,{slotHost:K,get api(){return v()},children:(A,C)=>{var B=zu(),R=ee(B);K(R,{children:(d,N)=>{Ie(d,{get value(){return e().capAnswerTimeToSecs},set value(p){X(u,_(e).capAnswerTimeToSecs=p,_(e))},get defaultValue(){return o.capAnswerTimeToSecs},min:1,max:7200,children:(p,k)=>{Z(p,{$$events:{click:()=>D(Object.keys(c).indexOf("maximumAnswerSecs"))},children:(h,E)=>{var T=J();V(()=>W(T,c.maximumAnswerSecs.title)),$(h,T)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var H=s(s(R,!0));K(H,{children:(d,N)=>{Ee(d,{get warning(){return r(a)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var I=s(s(H,!0));K(I,{children:(d,N)=>{var p=Hu(),k=q(p);Ne(k,{get value(){return e().showTimer},set value(h){X(u,_(e).showTimer=h,_(e))},get defaultValue(){return o.showTimer},children:(h,E)=>{Z(h,{$$events:{click:()=>D(Object.keys(c).indexOf("showAnswerTimer"))},children:(T,P)=>{var z=J();V(()=>W(z,c.showAnswerTimer.title)),$(T,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),L(p),$(d,p)},$$slots:{default:!0},$$legacy:!0});var f=s(s(I,!0));K(f,{children:(d,N)=>{var p=Bu(),k=q(p);Ne(k,{get value(){return e().stopTimerOnAnswer},set value(h){X(u,_(e).stopTimerOnAnswer=h,_(e))},get defaultValue(){return o.stopTimerOnAnswer},children:(h,E)=>{Z(h,{$$events:{click:()=>D(Object.keys(c).indexOf("stopTimerOnAnswer"))},children:(T,P)=>{var z=J();V(()=>W(z,c.stopTimerOnAnswer.title)),$(T,z)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),L(p),$(d,p)},$$slots:{default:!0},$$legacy:!0}),$(A,B)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0,tooltip:(O,y)=>{var A=ne(()=>Ar());qe(O,{get title(){return r(A)},get url(){return ce.DeckOptions.timer},slot:"tooltip",helpSections:w,$$events:{mount:C=>{x(b,C.detail.modal),x(g,C.detail.carousel)}},$$legacy:!0})}},$$legacy:!0}),fe()}var Gu=Q('<tr><td class="svelte-9pdz93"> </td><td class="svelte-9pdz93"><input type="radio"></td><td class="svelte-9pdz93"><input type="radio"></td><td class="svelte-9pdz93"><input type="radio"></td></tr>'),qu=Q('<div class="easy-days-settings svelte-9pdz93"><table class="svelte-9pdz93"><thead><tr><th class="svelte-9pdz93"></th><th class="svelte-9pdz93"> </th><th class="svelte-9pdz93"> </th><th class="svelte-9pdz93"> </th></tr></thead><tbody></tbody></table></div>');function Qu(i,t){ge(t,!1);const n=ke(),e=()=>ue(u,"$config",n),a=[];let l=j(t,"state"),v=j(t,"api");const u=l().currentConfig,o=l().defaults;e().easyDaysPercentages.length!==7&&X(u,_(e).easyDaysPercentages=o.easyDaysPercentages,_(e));const c=M([Ul(),Kl(),Yl(),Jl(),Xl(),Zl(),eo()]);pe();var w=ne(()=>ao());Ve(i,{get title(){return r(w)},children:(b,g)=>{Be(b,{slotHost:K,get api(){return v()},children:(D,S)=>{K(D,{children:(O,y)=>{var A=qu(),C=q(A),B=q(C),R=q(B),H=q(R),I=s(H),f=q(I);V(()=>W(f,to())),L(I);var d=s(I),N=q(d);V(()=>W(N,ro())),L(d);var p=s(d),k=q(p);V(()=>W(k,so())),L(p),L(R),L(B);var h=s(B);Ot(h,9,()=>r(c),er,(E,T,P)=>{var z=Gu(),Y=q(z),te=q(Y);L(Y);var G=s(Y),F=q(G);Xe(F),F.value=(F.__value=1)==null?"":1,L(G);var ve=s(G),me=q(ve);Xe(me),me.value=(me.__value=.5)==null?"":.5,L(ve);var de=s(ve),be=q(de);Xe(be),be.value=(be.__value=0)==null?"":0,L(de),L(z),V(()=>{W(te,he(T)),Bt(F,e().easyDaysPercentages[he(P)]===1),Bt(me,e().easyDaysPercentages[he(P)]===.5),Bt(be,e().easyDaysPercentages[he(P)]===0)}),zt(a,[he(P)],F,()=>e().easyDaysPercentages[he(P)],se=>X(u,_(e).easyDaysPercentages[he(P)]=se,_(e))),zt(a,[he(P)],me,()=>e().easyDaysPercentages[he(P)],se=>X(u,_(e).easyDaysPercentages[he(P)]=se,_(e))),zt(a,[he(P)],be,()=>e().easyDaysPercentages[he(P)],se=>X(u,_(e).easyDaysPercentages[he(P)]=se,_(e))),$(E,z)}),L(h),L(C),L(A),$(O,A)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),fe()}var Uu=Q("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),Ku=Q('<!> <div class="deck-options-page svelte-htbfcn"><div style="display: contents"><!></div></div>',1);function Yu(i,t){ge(t,!1);const n=ke(),e=()=>ue(l,"$addons",n);let a=j(t,"state");const l=a().addonComponents;function v(){return a().currentAuxData}function u(d){et(l,[...e(),d])}function o(d,N){et(l,[...e(),{component:bu,html:d,mounted:N}])}const c={},w={},b={},g={},D={},S={},O={},y={},A={},C={};let B=M();pe();var R=Ku(),H=ee(R);Zi(H,{get state(){return a()},$$events:{presetchange(...d){const N=r(B);return N==null?void 0:N.apply(this,d)}},$$legacy:!0});var I=s(s(H,!0)),f=q(I);return xe(f,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),Ys(f.lastChild,{breakpoint:"sm",class:"container-columns",children:(d,N)=>{var p=Uu(),k=ee(p),h=q(k);_e(h,{class:"row-columns",children:(se,$e)=>{au(se,{get state(){return a()},api:w,get onPresetChange(){return r(B)},set onPresetChange(ze){x(B,ze)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var E=s(s(h,!0));_e(E,{class:"row-columns",children:(se,$e)=>{ju(se,{get state(){return a()},api:b,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var T=s(s(E,!0));_e(T,{class:"row-columns",children:(se,$e)=>{Nu(se,{get state(){return a()},api:g,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var P=s(s(T,!0));_e(P,{class:"row-columns",children:(se,$e)=>{lu(se,{get state(){return a()},api:S,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var z=s(s(P,!0));_e(z,{class:"row-columns",children:(se,$e)=>{Pu(se,{get state(){return a()},api:{},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),L(k);var Y=s(s(k,!0)),te=q(Y);_e(te,{class:"row-columns",children:(se,$e)=>{ji(se,{get state(){return a()},api:D,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var G=s(s(te,!0));_e(G,{class:"row-columns",children:(se,$e)=>{Oi(se,{get state(){return a()},api:y,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var F=s(s(G,!0));_e(F,{class:"row-columns",children:(se,$e)=>{Wu(se,{get state(){return a()},api:O,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var ve=s(s(F,!0));_e(ve,{class:"row-columns",children:(se,$e)=>{Vi(se,{get state(){return a()},api:O,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var me=s(s(ve,!0));Pe(me,()=>e().length,se=>{_e(se,{class:"row-columns",children:($e,ze)=>{Ko($e,{get state(){return a()},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})});var de=s(s(me,!0));_e(de,{class:"row-columns",children:(se,$e)=>{Qu(se,{get state(){return a()},api:C,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var be=s(s(de,!0));_e(be,{class:"row-columns",children:(se,$e)=>{Si(se,{get state(){return a()},api:A,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0}),L(Y),$(d,p)},$$slots:{default:!0},$$legacy:!0}),L(f),L(I),$(i,R),Ae(t,"auxData",v),Ae(t,"addSvelteAddon",u),Ae(t,"addHtmlAddon",o),Ae(t,"options",c),Ae(t,"dailyLimits",w),Ae(t,"newOptions",b),Ae(t,"lapseOptions",g),Ae(t,"buryOptions",D),Ae(t,"displayOrder",S),Ae(t,"timerOptions",O),Ae(t,"audioOptions",y),Ae(t,"advancedOptions",A),Ae(t,"easyDays",C),fe({auxData:v,addSvelteAddon:u,addHtmlAddon:o,options:c,dailyLimits:w,newOptions:b,lapseOptions:g,buryOptions:D,displayOrder:S,timerOptions:O,audioOptions:y,advancedOptions:A,easyDays:C})}function Rc(i,t){ge(t,!1);let n=j(t,"data"),e=M();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await ss(),Nr()&&(await n().state.isModified()?Wt("confirmDiscardChanges"):Wt("_close"))},Xt(()=>{globalThis.$deckOptions=new Promise((a,l)=>{a(r(e))}),n().state.resolveOriginalConfigs(),Nr()&&Wt("deckOptionsReady")}),pe(),wt(Yu(i,{get state(){return n().state},$$legacy:!0}),a=>x(e,a),()=>r(e)),fe()}export{Rc as component,Dc as universal};
