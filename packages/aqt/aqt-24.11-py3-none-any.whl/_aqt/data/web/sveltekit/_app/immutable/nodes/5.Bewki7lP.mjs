var Lr=Object.defineProperty;var Er=(l,t,n)=>t in l?Lr(l,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[t]=n;var le=(l,t,n)=>Er(l,typeof t!="symbol"?t+"":t,n);import{E as Mr,G as Nr,H as Vr,J as jr,K as Fr,s as tt,L as Ye,M as Be,N as He,O as Ft,P as Ps,Q as Xt,S as ht,T as bs,U as yt,V as Hr,W as Br,X as Ht,Y as zr,Z as Wr,_ as Gr,$ as qr,a0 as Qr}from"../chunks/backend.BdhjA4ya.mjs";import{l as Ur,w as Kr,a as Yr,b as Jr}from"../chunks/utils.DWJJeZi9.mjs";import{s as w,aL as Xr,C as Ys,b0 as Zr,g as s,$ as St,j as en,F as tn,p as ge,aM as se,b as ve,_ as sn,Y as ss,Z as rn,M as Q,O as $,N as M,t as L,n as Z,l as ie,a as Ie,m as j,K as qe,aZ as we,D as _,ay as oe,L as nn}from"../chunks/runtime.HDa-Uzkj.mjs";import{w as Se,g as Pe,d as an,r as Js,a as on}from"../chunks/index.BBTf1svy.mjs";import{c as Bt}from"../chunks/cloneDeep.B0oyMarN.mjs";import{i as zt,a as ln,S as cn}from"../chunks/Select.DEucYwSM.mjs";import{e as Ne,a as d,b as Y,t as K,n as dn}from"../chunks/disclose-version.CfFqPxFi.mjs";import{b as wt}from"../chunks/this.DuXIBV3p.mjs";import{i as me}from"../chunks/lifecycle.BeemcHx2.mjs";import{p as F,a as be,s as Xs}from"../chunks/props.QYk8O08b.mjs";import{s as un,a as Zt,c as Zs,o as rs,b as fn}from"../chunks/index-client.BU-Y10jg.mjs";import{c as Oe,C as gn}from"../chunks/Container.Bzc_5eLk.mjs";import{I as vn,b as Re}from"../chunks/IconButton.q3d51vME.mjs";import{s as ke,a as de,b as st,c as X}from"../chunks/store.CtPiLHV-.mjs";import{cf as er,v as Ge,cg as es,cc as tr,ar as Ze,ch as $n,ci as pn,t as gt,cj as ns,ck as sr,cl as mn,cm as xs,cn as hn,co as Ss,cp as yn,cq as Cn,cr as wn,cs as _n,ct as kn,cu as Pn,cv as bn,cw as xn,cx as Sn,cy as On,cz as An,cA as Rn,cB as Tn,cC as Os,cD as Dn,cE as In,cF as Ln,cG as En,cH as As,cI as Mn,cJ as Nn,cK as Vn,cL as jn,cM as Fn,cN as Hn,cO as Bn,cP as zn,cQ as Wn,cR as Gn,cS as rr,cT as qn,cU as Qn,cV as Un,cW as Kn,cX as Yn,cY as Jn,cZ as Xn,c_ as Zn,c$ as ea,d0 as ta,d1 as sa,d2 as ra,d3 as na,d4 as aa,d5 as oa,d6 as la,d7 as ia,d8 as ca,d9 as da,da as ua,db as fa,dc as ga,dd as va,de as $a,df as pa,dg as ma,dh as ha,di as ya,dj as Ca,dk as wa,dl as _a,dm as ka,dn as Pa,dp as ba,dq as xa,dr as Sa,ds as Rs,dt as Oa,du as Aa,dv as Ra,dw as Ta,dx as Da,dy as Ia,dz as La,dA as Ts,dB as Ea,dC as Ma,dD as Na,dE as Va,dF as ja,dG as nr,dH as ar,dI as or,dJ as Fa,dK as Ha,dL as Ba,dM as za,dN as Wa,q as ft,dO as Ga,dP as qa,dQ as Qa,dR as Ua,dS as Ka,dT as Pt,dU as Ds,dV as Is,dW as lr,dX as Ya,dY as ir,dZ as Ja,d_ as Xa,d$ as Za,e0 as eo,b1 as vt,e1 as Ls,e2 as to,e3 as so,e4 as ro,e5 as no,e6 as ao,e7 as oo,e8 as lo,e9 as io,ea as co,eb as uo,ec as fo,ed as Es,ee as cr,ef as go,eg as vo,eh as Wt,ei as $o,ej as po,ek as mo,el as dr,em as ur,en as ho,eo as Gt,ep as yo,eq as fr,er as Ms,es as Co,et as wo,eu as _o,ev as ko,ew as Po,ex as gr,ey as bo,ez as xo,eA as So,eB as Oo,eC as Ao,eD as Ro,eE as To,eF as Do,U as Io,eG as Lo,eH as Eo,eI as Mo,eJ as No,eK as Vo,eL as jo,eM as Fo,eN as Ho,eO as Bo,eP as vr,eQ as Ns,eR as zo,eS as Wo,eT as Go,eU as qo,eV as Qo,eW as Uo,eX as Ko,eY as Yo,eZ as Jo,e_ as Xo,e$ as Zo,f0 as Vs,f1 as el,f2 as tl,f3 as sl,f4 as rl,f5 as nl,f6 as al,f7 as ol,f8 as js,f9 as ll,fa as il,fb as cl,fc as dl,fd as ul,fe as fl,ff as gl,fg as vl,fh as $l,fi as pl,fj as qt,fk as ml}from"../chunks/runtime-require.BMNCZg22.mjs";import{R as _e}from"../chunks/Row.BE4FGQd0.mjs";import{e as Ot,i as as,p as hl}from"../chunks/theme.BSeXeARl.mjs";import{T as Fe}from"../chunks/TitledContainer.BeuAt8Yb.mjs";import{s as H,e as Ce}from"../chunks/render.dASvSx6G.mjs";import{C as ot,R as kt,H as ue,c as Te,a as te,b as Qe,S as je,E as Xe,M as yl}from"../chunks/EnumSelectorRow.D9Jfkjzz.mjs";import{d as Cl,W as wl,P as _l,D as ut,t as kl}from"../chunks/Badge.FR1O5yy2.mjs";import{a as At,c as Pl,b as Qt}from"../chunks/input.CCs2NzX5.mjs";import{I as xt,ab as bl,J as xl,f as Fs,h as $r,ac as Sl,S as Ol,g as Al,p as Rl}from"../chunks/Shortcut.BFIeUn9K.mjs";import{C as rt}from"../chunks/Col.CCildVHE.mjs";import{m as pr}from"../chunks/context-keys.Dbye-yJ_.mjs";import{L as Tl,S as Dl}from"../chunks/LabelButton.CfnB3KmN.mjs";import{t as Hs,s as Bs}from"../chunks/index.CZNoXIiT.mjs";import{r as bt}from"../chunks/progress.B5Fx36sa.mjs";import{y as zs,z as Ws,A as Ut,C as Il,B as Ll,D as El,E as Ml,H as Nl,F as Vl,G as jl,b as Fl,J as Hl,I as Bl,L as zl,K as Wl,N as Gl,M as ql}from"../chunks/HoverColumns.Bf-xtFmO.mjs";import{t as Gs,b as ze,c as Ql,u as Ul,d as Kl}from"../chunks/time.Dh4VeLPR.mjs";import{t as Yl}from"../chunks/time.DNdJm98A.mjs";import{I as Jl,i as Xl,c as Zl,C as ei,T as ti}from"../chunks/TableData.duXWVbAC.mjs";import{a as qs,c as Kt}from"../chunks/bridgecommand.7-pCMgb_.mjs";function si(l){w(l,l.v+1)}function ri(l,t){const n=Se(l(),e=>{let r=!1;const a=Xr(()=>{Ys(()=>{const g=l();r&&e(g)})});return r=!0,a});return t?{set:t,update:e=>t(e(l())),subscribe:n.subscribe}:{subscribe:n.subscribe}}function ni(l){let t,n=en(0),e=0,r=tn;function a(){return Zr()?(s(n),Ys(()=>{if(e===0){let g=!1;r=l.subscribe(c=>{t=c,g&&si(n)}),g=!0}return e+=1,()=>{e-=1,St().then(()=>{e===0&&r()})}}),t):Pe(l)}return"set"in l?{get current(){return a()},set current(g){l.set(g)}}:{get current(){return a()}}}const ai=Object.freeze(Object.defineProperty({__proto__:null,derived:an,fromStore:ni,get:Pe,readable:Js,readonly:on,toStore:ri,writable:Se},Symbol.toStringTag,{value:"Module"}));function oi(l,t,...n){return li(l,Xl,t,n)}function li(l,t,n,e){return function r(a,g){if(g>=e.length)return n(a);const c=new Jl,i=e[g++];let u=-1;for(const h of a){const P=i(h,++u,a),f=c.get(P);f?f.push(h):c.set(P,[h])}for(const[h,P]of c)c.set(h,r(P,g));return t(c)}(l,0)}const ii=Zl("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function ts(){let l;return[new Promise(n=>l=n),l]}class ci{constructor(t,n){le(this,"currentConfig");le(this,"currentAuxData");le(this,"configList");le(this,"cardStateCustomizer");le(this,"currentDeck");le(this,"deckLimits");le(this,"defaults");le(this,"addonComponents");le(this,"newCardsIgnoreReviewLimit");le(this,"applyAllParentLimits");le(this,"fsrs");le(this,"fsrsReschedule",Se(!1));le(this,"daysSinceLastOptimization");le(this,"currentPresetName");le(this,"originalConfigsPromise");le(this,"originalConfigsResolve");le(this,"targetDeckId");le(this,"configs");le(this,"selectedIdx");le(this,"configListSetter");le(this,"modifiedConfigs",new Set);le(this,"removedConfigs",[]);le(this,"schemaModified");le(this,"_presetAssignmentsChanged",!1);var e,r;this.targetDeckId=t,this.currentDeck=n.currentDeck,this.defaults=n.defaults.config,this.configs=n.allConfig.map(a=>({config:a.config,useCount:a.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(a=>a.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=Se(n.cardStateCustomizer),this.deckLimits=Se((r=(e=n.currentDeck)==null?void 0:e.limits)!=null?r:ui()),this.newCardsIgnoreReviewLimit=Se(n.newCardsIgnoreReviewLimit),this.applyAllParentLimits=Se(n.applyAllParentLimits),this.fsrs=Se(n.fsrs),this.daysSinceLastOptimization=Se(n.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=Se(this.getCurrentConfig()),this.currentAuxData=Se(this.getCurrentAuxData()),this.currentPresetName=Se(this.configs[this.selectedIdx].config.name),this.configList=Js(this.getConfigList(),a=>{this.configListSetter=a}),this.schemaModified=n.schemaModified,this.addonComponents=Se([]),Pe(this.configList),this.currentConfig.subscribe(a=>this.onCurrentConfigChanged(a)),this.currentAuxData.subscribe(a=>this.onCurrentAuxDataChanged(a)),[this.originalConfigsPromise,this.originalConfigsResolve]=ts()}setCurrentIndex(t){this.selectedIdx=t,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList()}getCurrentName(){return this.configs[this.selectedIdx].config.name}setCurrentName(t){if(this.configs[this.selectedIdx].config.name===t)return;const n=this.ensureNewNameUnique(t),e=this.configs[this.selectedIdx].config;e.name=n,e.id&&this.modifiedConfigs.add(e.id),this.sortConfigs(),this.updateConfigList()}addConfig(t){this.addConfigFrom(t,this.defaults)}cloneConfig(t){this.addConfigFrom(t,this.configs[this.selectedIdx].config.config)}addConfigFrom(t,n){const e=this.ensureNewNameUnique(t),a={config:new Mr({id:0n,name:e,config:new Nr(Bt(n))}),useCount:0};this.configs.push(a),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const t=this.configs[this.selectedIdx].config.id;if(t===1n)throw Error("can't remove default config");t!==0n&&(this.removedConfigs.push(t),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1),this.selectedIdx=Math.max(0,this.selectedIdx-1),this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList()}dataForSaving(t){const e=[...this.configs.map(r=>r.config).filter((r,a)=>a!==this.selectedIdx&&(r.id===0n||this.modifiedConfigs.has(r.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:e,mode:t,cardStateCustomizer:Pe(this.cardStateCustomizer),limits:Pe(this.deckLimits),newCardsIgnoreReviewLimit:Pe(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Pe(this.applyAllParentLimits),fsrs:Pe(this.fsrs),fsrsReschedule:Pe(this.fsrsReschedule)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(t){await Vr(this.dataForSaving(t))}onCurrentConfigChanged(t){const n=this.configs[this.selectedIdx].config;zt(t,n.config)||(n.config=t,n.id&&this.modifiedConfigs.add(n.id))}onCurrentAuxDataChanged(t){const n=this.getCurrentAuxData();zt(n,t)||this.currentConfig.update(e=>{const r=new TextEncoder().encode(JSON.stringify(t));return e.other=r,e})}ensureNewNameUnique(t){return this.configs.findIndex(e=>e.config.name===t)!==-1?t+(new Date().getTime()/1e3).toFixed(0):t}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var t;(t=this.configListSetter)==null||t.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return Bt(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const t=this.configs[this.selectedIdx].config.config;return di(t.other)}sortConfigs(){const t=this.configs[this.selectedIdx].config.name;this.configs.sort((n,e)=>Ur(n.config.name,e.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(n=>n.config.name==t)}getConfigList(){return this.configs.map((n,e)=>{const r=n.useCount+(e===this.selectedIdx?1:0);return{name:n.config.name,current:e===this.selectedIdx,idx:e,useCount:r}})}getAllConfigs(){return Bt({configs:this.configs.map(t=>t.config),cardStateCustomizer:Pe(this.cardStateCustomizer),limits:Pe(this.deckLimits),newCardsIgnoreReviewLimit:Pe(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Pe(this.applyAllParentLimits),fsrs:Pe(this.fsrs),fsrsReschedule:Pe(this.fsrsReschedule),currentConfig:Pe(this.currentConfig)})}async isModified(){const t=await this.originalConfigsPromise,n=this.getAllConfigs();return!zt(t,n)}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function di(l){if(!l.length)return{};let t;try{t=JSON.parse(new TextDecoder().decode(l))}catch{return console.log("invalid json in deck config"),{}}return t.constructor!==Object?(console.log("invalid object in deck config"),{}):t}function ui(){return new jr({})}class et{constructor(t,n,e,r,a){le(this,"title");le(this,"value");le(this,"setter");le(this,"disabledValue");le(this,"startValue");le(this,"initialValue");this.title=t,this.value=this.initialValue=n,this.setter=e,this.disabledValue=r,this.startValue=a}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(t){var n,e;this.value=(e=(n=this.value)!=null?n:this.startValue)!=null?e:t,this.setter(this.value)}setValue(t){this.value=t,this.setter(t)}}async function mr(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await St()}function Ct(l){return l.fsrsParams5?l.fsrsParams5:l.fsrsParams4}const fi=async({params:l})=>{const t=Number(l.deckId),n=BigInt(t),e=await Fr({did:n});return{state:new ci(BigInt(n),e)}},Gd=Object.freeze(Object.defineProperty({__proto__:null,load:fi},Symbol.toStringTag,{value:"Module"}));er("svelte",un);er("svelte/store",ai);function gi(l,t){ge(t,!1);const n=ke(),e=()=>de(g,"$components",n),r=()=>de(c,"$auxData",n);let a=F(t,"state",8);const g=a().addonComponents,c=a().currentAuxData;me();var i=Ne(),u=se(i);be(u,()=>e().length,h=>{Fe(h,{title:"Add-ons",children:(P,f)=>{var D=Ne(),C=se(D);Ot(C,1,e,as,(O,p)=>{var b=Ne(),x=se(b);Zt(x,()=>s(p).component,(z,I)=>{I(z,Xs({get data(){return r()},set data(W){st(c,W)}},()=>s(p),{$$legacy:!0}))}),d(O,b)}),d(P,D)},$$slots:{default:!0}})}),d(l,i),ve()}function Yt(l,t){let n,e;if(t instanceof Element){if(n=t,e=Array.prototype.indexOf.call(l,n),e<0)return null}else if(typeof t=="string"){const r=l.namedItem(t);if(!r||(n=r,e=Array.prototype.indexOf.call(l,n),e<0))return null}else if(t<0){e=l.length+t;const r=l.item(e);if(!r)return null;n=r}else{e=t;const r=l.item(e);if(!r)return null;n=r}return[n,e]}class vi{constructor(t){le(this,"parent");this.parent=t}insertElement(t,n){const e=Yt(this.parent.children,n);if(!e)return-1;const[r,a]=e;return this.parent.insertBefore(t,r[0]),a}appendElement(t,n){var c;const e=Yt(this.parent.children,n);if(!e)return-1;const[r,a]=e,g=(c=r.nextElementSibling)!=null?c:null;return this.parent.insertBefore(t,g),a+1}updateElement(t,n){const e=Yt(this.parent.children,n);return e?(t(...e),!0):!1}}function $i(l){return new vi(l)}function pi(l){return l.nodeType===Node.ELEMENT_NODE}function mi(l){function t(e){sn(l,e)}return[{get(){return ss(l)},available(){return rn(l)}},t]}function hi(l,t,n,e){const r=Se([]);r.subscribe(t);function a(C,O){r.update(p=>(p.splice(C,0,O),p))}const[g,c]=ts(),i=g.then($i),u=Se([]);async function h(C,O){const[p,b]=ts(),x=await i,z=l();function I(o){return!C.id||o.id===C.id}async function W(o,A){for(const k of o)for(const y of k.addedNodes){if(!pi(y)||!I(y))continue;const N=O(y,x);return N>=0&&a(N,z),b(void 0),A.disconnect()}}new MutationObserver(W).observe(x.parent,{childList:!0});const B={component:C,hostProps:z};return u.update(o=>(o.push(B),o)),await p,{destroy(){u.update(o=>(ln(o,B),o))}}}async function P(C,O){return(await i).updateElement((b,x)=>{r.update(z=>(z[x]=C(z[x]),z))},O)}const f=e({addComponent:h,updateProps:P});function D(){const C=l();return r.update(O=>(O.push(C),O)),C}return n({getProps:D}),{dynamicSlotted:u,resolveSlotContainer:c,slotsInterface:f}}function yi(){return{detach:Se(!1)}}function Ci({addComponent:l,updateProps:t}){function n(c,i=0){return l(c,(u,h)=>h.insertElement(u,i))}function e(c,i=-1){return l(c,(u,h)=>h.appendElement(u,i))}function r(c){return t(i=>(i.detach.set(!1),i),c)}function a(c){return t(i=>(i.detach.set(!0),i),c)}function g(c){return t(i=>(i.detach.update(u=>!u),i),c)}return{insert:n,append:e,show:r,hide:a,toggle:g}}const wi=Symbol("dynamicSlotting"),[Qs,_i]=mi(wi);var ki=Y('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function We(l,t){ge(t,!1);const n=ke(),e=()=>de(f,"$dynamicSlotted",n);function r(b){return b}let a=F(t,"slotHost",8),g=F(t,"createProps",8,yi),c=F(t,"updatePropsList",8,r),i=F(t,"setSlotHostContext",8,_i),u=F(t,"createInterface",8,Ci);const{slotsInterface:h,resolveSlotContainer:P,dynamicSlotted:f}=hi(g(),c(),i(),u());let D=F(t,"api",8);Object.assign(D(),h),me();var C=ki(),O=Q(C);tt(O,t,"default",{});var p=$(O,2);Ot(p,1,e,({component:b,hostProps:x})=>b.id,(b,x)=>{let z=()=>s(x).component,I=()=>s(x).hostProps;var W=Ne(),E=se(W);Zt(E,a,(B,o)=>{o(B,{get id(){return z().id},get hostProps(){return I()},children:(A,k)=>{var y=Ne(),m=se(y);Zt(m,()=>z().component,(N,R)=>{R(N,Xs(()=>z().props))}),d(A,y)},$$slots:{default:!0}})}),d(b,W)}),M(C),Cl(C,b=>P(b)),d(l,C),ve()}var Pi=Y('<div class="item svelte-u5rx4p"><!></div>');function U(l,t){var u;ge(t,!1);const n=ke(),e=()=>de(g,"$detach",n);let r=F(t,"id",8,void 0),a=F(t,"hostProps",8,void 0);Qs.available()||console.log("Item: should always have a slotHostContext");const{detach:g}=(u=a())!=null?u:Qs.get().getProps();me();var c=Pi(),i=Q(c);be(i,()=>!e(),h=>{var P=Ne(),f=se(P);tt(f,t,"default",{}),d(h,P)}),M(c),L(()=>Ge(c,"id",r())),d(l,c),ve()}var bi=Y(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function _t(l,t){ge(t,!1);let n=F(t,"title",8);me(),Z();var e=bi(),r=se(e),a=$(r);L(()=>Ge(a,"title",es()));var g=Q(a);xt(g,{icon:bl}),M(a),L(()=>{var c;return H(r,`${(c=n())!=null?c:""} `)}),d(l,e),ve()}var xi=Y('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),Si=Y('<div class="m-2"><!></div>');function Oi(l,t){let n=F(t,"value",12),e=F(t,"title",8);var r=Si(),a=Q(r);ot(a,{children:(g,c)=>{var i=xi(),u=Q(i),h=Q(u);_t(h,{get title(){return e()}}),M(u);var P=$(u,2),f=Q(P);tr(f),M(P),M(i),At(f,n),d(g,i)},$$slots:{default:!0,revert:(g,c)=>{kt(g,{slot:"revert",get value(){return n()},set value(i){n(i)},defaultValue:"",$$legacy:!0})}}}),M(r),d(l,r)}var Ai=Y('<div class="spinner decrement svelte-1dakg3f" tabindex="-1" role="button"><!></div> <div class="spinner increment svelte-1dakg3f" tabindex="-1" role="button"><!></div>',1),Ri=Y('<div class="spin-box svelte-1dakg3f"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-1dakg3f"> <!></div>');function hr(l,t){ge(t,!1);let n=F(t,"value",12),e=F(t,"step",8,1),r=F(t,"min",8,1),a=F(t,"max",8,9999),g=j(),c=j(!1);function i(E){Number.isNaN(E)||n(Math.min(a(),Math.max(r(),E))),St().then(()=>we(g,s(g).value=s(h)))}function u(E){return Math.floor(E)===E?0:E.toString().split(".")[1].length||0}let h=j();function P(){i(parseFloat(this.value))}function f(E){s(c)&&(i(n()+(E.deltaY<0?e():-e())),E.preventDefault())}function D(E){i(n()+E),s(p)&&setTimeout(()=>D(E),b)}const C=[1500,1250,1e3,750,500,250];async function O(E){w(p,!0),b=128,w(x,setTimeout(E,250));for(const B of C)b=await new Promise(o=>setTimeout(()=>o(s(p)?b/2:128),B))}let p=j(!1),b,x=j();ie(()=>(qe(n()),qe(e())),()=>{w(h,n().toFixed(u(e())))}),Ie(),me();var z=Ri(),I=Q(z);wt(I,E=>w(g,E),()=>s(g)),Ze(I);var W=$(I,2);be(W,xl,E=>{var B=Ai(),o=se(B);L(()=>Ge(o,"title",$n()));var A=Q(o);Fs(A,{children:(m,N)=>{xt(m,{icon:$r})},$$slots:{default:!0}}),M(o);var k=$(o,2);L(()=>Ge(k,"title",pn()));var y=Q(k);Fs(y,{children:(m,N)=>{xt(m,{icon:Sl})},$$slots:{default:!0}}),M(k),L(()=>{gt(o,"active",n()>r()),gt(k,"active",n()<a())}),Ce("click",o,()=>{s(g).focus(),n()>r()&&D(-e())}),Ce("mousedown",o,()=>O(()=>{n()>r()&&D(-e())})),Ce("mouseup",o,()=>{clearTimeout(s(x)),w(p,!1)}),Ce("click",k,()=>{s(g).focus(),n()<a()&&D(e())}),Ce("mousedown",k,()=>O(()=>{n()<a()&&D(e())})),Ce("mouseup",k,()=>{clearTimeout(s(x)),w(p,!1)}),d(E,B)}),M(z),L(()=>{Ge(I,"min",r()),Ge(I,"max",a()),Ge(I,"step",e()),ns(I,s(h))}),Ce("blur",I,P),Ce("focusin",I,()=>w(c,!0)),Ce("focusout",I,()=>w(c,!1)),Ce("wheel",z,f),d(l,z),ve()}var Ti=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Di=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Je(l,t){let n=F(t,"value",12),e=F(t,"defaultValue",8),r=F(t,"min",8,0),a=F(t,"max",8,9999),g=F(t,"step",8,.01);var c=Di(),i=se(c);Oe(i,()=>({"--cols":13})),_e(i.lastChild,{children:(u,h)=>{var P=Ti(),f=se(P);Oe(f,()=>({"--col-size":7})),rt(f.lastChild,{breakpoint:"xs",children:(C,O)=>{var p=Ne(),b=se(p);tt(b,t,"default",{}),d(C,p)},$$slots:{default:!0}}),M(f);var D=$(f,2);Oe(D,()=>({"--col-size":6})),rt(D.lastChild,{breakpoint:"xs",children:(C,O)=>{ot(C,{children:(p,b)=>{hr(p,{get value(){return n()},set value(x){n(x)},get min(){return r()},get max(){return a()},get step(){return g()},$$legacy:!0})},$$slots:{default:!0,revert:(p,b)=>{kt(p,{slot:"revert",get value(){return n()},set value(x){n(x)},get defaultValue(){return e()},$$legacy:!0})}}})},$$slots:{default:!0}}),M(D),d(u,P)},$$slots:{default:!0}}),M(i),d(l,c)}var Ii=Y("<!> <!>",1),Li=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ei=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function De(l,t){let n=F(t,"value",12),e=F(t,"defaultValue",8),r=F(t,"min",8,0),a=F(t,"max",8,9999);var g=Ei(),c=se(g);Oe(c,()=>({"--cols":13})),_e(c.lastChild,{children:(i,u)=>{var h=Li(),P=se(h);Oe(P,()=>({"--col-size":7})),rt(P.lastChild,{breakpoint:"xs",children:(D,C)=>{var O=Ne(),p=se(O);tt(p,t,"default",{}),d(D,O)},$$slots:{default:!0}}),M(P);var f=$(P,2);Oe(f,()=>({"--col-size":6})),rt(f.lastChild,{breakpoint:"xs",children:(D,C)=>{_e(D,{class:"flex-grow-1",children:(O,p)=>{var b=Ii(),x=se(b);tt(x,t,"tabs",{});var z=$(x,2);ot(z,{children:(I,W)=>{hr(I,{get value(){return n()},set value(E){n(E)},get min(){return r()},get max(){return a()},$$legacy:!0})},$$slots:{default:!0,revert:(I,W)=>{kt(I,{slot:"revert",get value(){return n()},set value(E){n(E)},get defaultValue(){return e()},$$legacy:!0})}}}),d(O,b)},$$slots:{default:!0}})},$$slots:{default:!0}}),M(f),d(i,h)},$$slots:{default:!0}}),M(c),d(l,g)}var Mi=Y('<input type="date" class="svelte-ora9c4">'),Ni=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Vi=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),ji=Y("<div><!></div>");function Fi(l,t){ge(t,!1);let n=F(t,"date",12);ie(()=>qe(n()),()=>{n(n()?n():"1970-01-01")}),Ie();var e=ji(),r=Q(e);ot(r,{children:(a,g)=>{var c=Vi(),i=se(c);Oe(i,()=>({"--cols":13})),_e(i.lastChild,{children:(u,h)=>{var P=Ni(),f=se(P);Oe(f,()=>({"--col-size":7})),rt(f.lastChild,{breakpoint:"xs",children:(C,O)=>{var p=Ne(),b=se(p);tt(b,t,"default",{}),d(C,p)},$$slots:{default:!0}}),M(f);var D=$(f,2);Oe(D,()=>({"--col-size":6})),rt(D.lastChild,{breakpoint:"xs",children:(C,O)=>{var p=Mi();Ze(p),At(p,n),d(C,p)},$$slots:{default:!0}}),M(D),d(u,P)},$$slots:{default:!0}}),M(i),d(a,c)},$$slots:{default:!0}}),M(e),d(l,e),ve()}var Hi=Y("<!> <!> <!> <!> <!>",1),Bi=Y("<!> <!>",1),zi=Y("<!> <!> <!>",1);function Wi(l,t){ge(t,!1);const n=ke(),e=()=>de(P,"$fsrs",n),r=()=>de(i,"$config",n),a=()=>de(h,"$cardStateCustomizer",n);let g=F(t,"state",8),c=F(t,"api",8);const i=g().currentConfig,u=g().defaults,h=g().cardStateCustomizer,P=g().fsrs,f={maximumInterval:{title:sr(),help:mn(),url:ue.DeckOptions.maximumInterval},historicalRetention:{title:xs(),help:hn(),sched:Te.FSRS},ignoreRevlogsBeforeMs:{title:Ss(),help:yn(),sched:Te.FSRS},startingEase:{title:Cn(),help:wn(),url:ue.DeckOptions.startingEase,sched:Te.SM2},easyBonus:{title:_n(),help:kn(),url:ue.DeckOptions.easyBonus,sched:Te.SM2},intervalModifier:{title:Pn(),help:bn(),url:ue.DeckOptions.intervalModifier,sched:Te.SM2},hardInterval:{title:xn(),help:Sn(),url:ue.DeckOptions.hardInterval,sched:Te.SM2},newInterval:{title:On(),help:An(),url:ue.DeckOptions.newInterval,sched:Te.SM2},customScheduling:{title:Rn(),help:Tn(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling"}},D=Object.values(f);let C=j(),O=j();function p(x){s(C).show(),s(O).to(x)}me();var b=oe(()=>Os());Fe(l,{get title(){return s(b)},children:(x,z)=>{We(x,{slotHost:U,get api(){return c()},children:(I,W)=>{var E=zi(),B=se(E);U(B,{children:(k,y)=>{De(k,{get value(){return r().maximumReviewInterval},set value(m){X(i,_(r).maximumReviewInterval=m,_(r))},get defaultValue(){return u.maximumReviewInterval},min:1,max:365*100,children:(m,N)=>{te(m,{$$events:{click:()=>p(Object.keys(f).indexOf("maximumInterval"))},children:(R,S)=>{Z();var T=K();L(()=>H(T,f.maximumInterval.title)),d(R,T)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var o=$(B,2);be(o,()=>!e(),k=>{var y=Hi(),m=se(y);U(m,{children:(J,re)=>{Je(J,{get value(){return r().initialEase},set value(G){X(i,_(r).initialEase=G,_(r))},get defaultValue(){return u.initialEase},min:1.31,max:5,children:(G,V)=>{te(G,{$$events:{click:()=>p(Object.keys(f).indexOf("startingEase"))},children:($e,pe)=>{Z();var fe=K();L(()=>H(fe,f.startingEase.title)),d($e,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var N=$(m,2);U(N,{children:(J,re)=>{Je(J,{get value(){return r().easyMultiplier},set value(G){X(i,_(r).easyMultiplier=G,_(r))},get defaultValue(){return u.easyMultiplier},min:1,max:5,children:(G,V)=>{te(G,{$$events:{click:()=>p(Object.keys(f).indexOf("easyBonus"))},children:($e,pe)=>{Z();var fe=K();L(()=>H(fe,f.easyBonus.title)),d($e,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var R=$(N,2);U(R,{children:(J,re)=>{Je(J,{get value(){return r().intervalMultiplier},set value(G){X(i,_(r).intervalMultiplier=G,_(r))},get defaultValue(){return u.intervalMultiplier},min:.5,max:2,children:(G,V)=>{te(G,{$$events:{click:()=>p(Object.keys(f).indexOf("intervalModifier"))},children:($e,pe)=>{Z();var fe=K();L(()=>H(fe,f.intervalModifier.title)),d($e,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var S=$(R,2);U(S,{children:(J,re)=>{Je(J,{get value(){return r().hardMultiplier},set value(G){X(i,_(r).hardMultiplier=G,_(r))},get defaultValue(){return u.hardMultiplier},min:.5,max:1.3,children:(G,V)=>{te(G,{$$events:{click:()=>p(Object.keys(f).indexOf("hardInterval"))},children:($e,pe)=>{Z();var fe=K();L(()=>H(fe,f.hardInterval.title)),d($e,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=$(S,2);U(T,{children:(J,re)=>{Je(J,{get value(){return r().lapseMultiplier},set value(G){X(i,_(r).lapseMultiplier=G,_(r))},get defaultValue(){return u.lapseMultiplier},max:1,children:(G,V)=>{te(G,{$$events:{click:()=>p(Object.keys(f).indexOf("newInterval"))},children:($e,pe)=>{Z();var fe=K();L(()=>H(fe,f.newInterval.title)),d($e,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(k,y)},k=>{var y=Bi(),m=se(y);Je(m,{get value(){return r().historicalRetention},set value(R){X(i,_(r).historicalRetention=R,_(r))},get defaultValue(){return u.historicalRetention},min:.5,max:1,children:(R,S)=>{te(R,{$$events:{click:()=>p(Object.keys(f).indexOf("historicalRetention"))},children:(T,J)=>{Z();var re=K();L(()=>H(re,xs())),d(T,re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var N=$(m,2);U(N,{children:(R,S)=>{Fi(R,{get date(){return r().ignoreRevlogsBeforeDate},set date(T){X(i,_(r).ignoreRevlogsBeforeDate=T,_(r))},children:(T,J)=>{te(T,{$$events:{click:()=>p(Object.keys(f).indexOf("ignoreRevlogsBeforeMs"))},children:(re,G)=>{Z();var V=K();L(()=>H(V,Ss())),d(re,V)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(k,y)});var A=$(o,2);U(A,{children:(k,y)=>{Oi(k,{get title(){return f.customScheduling.title},get value(){return a()},set value(m){st(h,m)},$$events:{click:()=>p(Object.keys(f).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0}}),d(I,E)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(x,z)=>{var I=oe(()=>Os());Qe(x,{get title(){return s(I)},get url(){return ue.DeckOptions.advanced},slot:"tooltip",get fsrs(){return e()},helpSections:D,$$events:{mount:W=>{w(C,W.detail.modal),w(O,W.detail.carousel)}}})}}}),ve()}var Gi=Y("<!> <!>",1);function qi(l,t){ge(t,!1);const n=ke(),e=()=>de(g,"$config",n);let r=F(t,"state",8),a=F(t,"api",8);const g=r().currentConfig,c=r().defaults,i={disableAutoplay:{title:Dn(),help:In()},skipQuestionWhenReplaying:{title:Ln(),help:En()}},u=Object.values(i);let h=j(),P=j();function f(C){s(h).show(),s(P).to(C)}me();var D=oe(()=>As());Fe(l,{get title(){return s(D)},children:(C,O)=>{We(C,{slotHost:U,get api(){return a()},children:(p,b)=>{var x=Gi(),z=se(x);U(z,{children:(W,E)=>{je(W,{get value(){return e().disableAutoplay},set value(B){X(g,_(e).disableAutoplay=B,_(e))},get defaultValue(){return c.disableAutoplay},children:(B,o)=>{te(B,{$$events:{click:()=>f(Object.keys(i).indexOf("disableAutoplay"))},children:(A,k)=>{Z();var y=K();L(()=>H(y,i.disableAutoplay.title)),d(A,y)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var I=$(z,2);U(I,{children:(W,E)=>{je(W,{get value(){return e().skipQuestionWhenReplayingAnswer},set value(B){X(g,_(e).skipQuestionWhenReplayingAnswer=B,_(e))},get defaultValue(){return c.skipQuestionWhenReplayingAnswer},children:(B,o)=>{te(B,{$$events:{click:()=>f(Object.keys(i).indexOf("skipQuestionWhenReplaying"))},children:(A,k)=>{Z();var y=K();L(()=>H(y,i.skipQuestionWhenReplaying.title)),d(A,y)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(p,x)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(C,O)=>{var p=oe(()=>As());Qe(C,{get title(){return s(p)},get url(){return ue.DeckOptions.audio},slot:"tooltip",helpSections:u,$$events:{mount:b=>{w(h,b.detail.modal),w(P,b.detail.carousel)}}})}}}),ve()}function Qi(){return[{label:Mn(),value:Ye.DECK},{label:Nn(),value:Ye.DECK_THEN_RANDOM_NOTES},{label:Vn(),value:Ye.LOWEST_POSITION},{label:jn(),value:Ye.HIGHEST_POSITION},{label:Fn(),value:Ye.RANDOM_NOTES},{label:Hn(),value:Ye.RANDOM_CARDS}]}function Ui(){return[{label:Bn(),value:Be.TEMPLATE},{label:zn(),value:Be.NO_SORT},{label:Wn(),value:Be.TEMPLATE_THEN_RANDOM},{label:Gn(),value:Be.RANDOM_NOTE_THEN_TEMPLATE},{label:rr(),value:Be.RANDOM_CARD}]}function Ki(l){return[{label:qn(),value:He.DAY},{label:Qn(),value:He.DAY_THEN_DECK},{label:Un(),value:He.DECK_THEN_DAY},{label:Kn(),value:He.INTERVALS_ASCENDING},{label:Yn(),value:He.INTERVALS_DESCENDING},...ec(l),{label:Jn(),value:He.RELATIVE_OVERDUENESS},{label:rr(),value:He.RANDOM},{label:Xn(),value:He.ADDED},{label:Zn(),value:He.REVERSE_ADDED}]}function Us(){return[{label:ea(),value:Ft.MIX_WITH_REVIEWS},{label:ta(),value:Ft.AFTER_REVIEWS},{label:sa(),value:Ft.BEFORE_REVIEWS}]}function Yi(){return[{label:ra(),value:Ps.SUSPEND},{label:na(),value:Ps.TAG_ONLY}]}function Ji(){return[{label:aa(),value:Xt.DUE},{label:oa(),value:Xt.RANDOM}]}function Xi(){return[{label:la(),value:ht.BURY_CARD},{label:ia(),value:ht.ANSWER_AGAIN},{label:ca(),value:ht.ANSWER_GOOD},{label:da(),value:ht.ANSWER_HARD},{label:ua(),value:ht.SHOW_REMINDER}]}function Zi(){return[{label:fa(),value:bs.SHOW_ANSWER},{label:ga(),value:bs.SHOW_REMINDER}]}function ec(l){const t=[{label:l?va():$a(),value:He.EASE_ASCENDING},{label:l?pa():ma(),value:He.EASE_DESCENDING}];return l&&t.reverse(),t}var tc=Y("<!> <!> <!> <!> <!>",1);function sc(l,t){ge(t,!1);const n=ke(),e=()=>de(g,"$config",n);let r=F(t,"state",8),a=F(t,"api",8);const g=r().currentConfig,c=r().defaults,i={secondsToShowQuestion:{title:ha(),help:ya()},secondsToShowAnswer:{title:Ca(),help:wa()},waitForAudio:{title:_a(),help:ka()},questionAction:{title:Pa(),help:ba()},answerAction:{title:xa(),help:Sa()}},u=Object.values(i);let h=j(),P=j();function f(C){s(h).show(),s(P).to(C)}me();var D=oe(()=>Rs());Fe(l,{get title(){return s(D)},children:(C,O)=>{We(C,{slotHost:U,get api(){return a()},children:(p,b)=>{var x=tc(),z=se(x);U(z,{children:(o,A)=>{Je(o,{get value(){return e().secondsToShowQuestion},set value(k){X(g,_(e).secondsToShowQuestion=k,_(e))},get defaultValue(){return c.secondsToShowQuestion},step:.1,children:(k,y)=>{te(k,{$$events:{click:()=>f(Object.keys(i).indexOf("secondsToShowQuestion"))},children:(m,N)=>{Z();var R=K();L(()=>H(R,i.secondsToShowQuestion.title)),d(m,R)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var I=$(z,2);U(I,{children:(o,A)=>{Je(o,{get value(){return e().secondsToShowAnswer},set value(k){X(g,_(e).secondsToShowAnswer=k,_(e))},get defaultValue(){return c.secondsToShowAnswer},step:.1,children:(k,y)=>{te(k,{$$events:{click:()=>f(Object.keys(i).indexOf("secondsToShowAnswer"))},children:(m,N)=>{Z();var R=K();L(()=>H(R,i.secondsToShowAnswer.title)),d(m,R)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=$(I,2);U(W,{children:(o,A)=>{je(o,{get value(){return e().waitForAudio},set value(k){X(g,_(e).waitForAudio=k,_(e))},get defaultValue(){return c.waitForAudio},children:(k,y)=>{te(k,{$$events:{click:()=>f(Object.keys(i).indexOf("waitForAudio"))},children:(m,N)=>{Z();var R=K();L(()=>H(R,i.waitForAudio.title)),d(m,R)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=$(W,2);U(E,{children:(o,A)=>{var k=oe(Zi);Xe(o,{get value(){return e().questionAction},set value(y){X(g,_(e).questionAction=y,_(e))},get defaultValue(){return c.questionAction},get choices(){return s(k)},children:(y,m)=>{te(y,{$$events:{click:()=>f(Object.keys(i).indexOf("questionAction"))},children:(N,R)=>{Z();var S=K();L(()=>H(S,i.questionAction.title)),d(N,S)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var B=$(E,2);U(B,{children:(o,A)=>{var k=oe(Xi);Xe(o,{get value(){return e().answerAction},set value(y){X(g,_(e).answerAction=y,_(e))},get defaultValue(){return c.answerAction},get choices(){return s(k)},children:(y,m)=>{te(y,{$$events:{click:()=>f(Object.keys(i).indexOf("answerAction"))},children:(N,R)=>{Z();var S=K();L(()=>H(S,i.answerAction.title)),d(N,S)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(p,x)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(C,O)=>{var p=oe(()=>Rs());Qe(C,{get title(){return s(p)},get url(){return ue.DeckOptions.autoAdvance},slot:"tooltip",helpSections:u,$$events:{mount:b=>{w(h,b.detail.modal),w(P,b.detail.carousel)}}})}}}),ve()}var rc=Y("<!> <!> <!>",1);function nc(l,t){ge(t,!1);const n=ke(),e=()=>de(g,"$config",n);let r=F(t,"state",8),a=F(t,"api",8);const g=r().currentConfig,c=r().defaults,i=`

`+Oa(),u={buryNewSiblings:{title:Aa(),help:Ra()+i},buryReviewSiblings:{title:Ta(),help:Da()+i},buryInterdayLearningSiblings:{title:Ia(),help:La()+i}},h=Object.values(u);let P=j(),f=j();function D(O){s(P).show(),s(f).to(O)}me();var C=oe(()=>Ts());Fe(l,{get title(){return s(C)},children:(O,p)=>{We(O,{slotHost:U,get api(){return a()},children:(b,x)=>{var z=rc(),I=se(z);U(I,{children:(B,o)=>{je(B,{get value(){return e().buryNew},set value(A){X(g,_(e).buryNew=A,_(e))},get defaultValue(){return c.buryNew},children:(A,k)=>{te(A,{$$events:{click:()=>D(Object.keys(u).indexOf("buryNewSiblings"))},children:(y,m)=>{Z();var N=K();L(()=>H(N,u.buryNewSiblings.title)),d(y,N)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=$(I,2);U(W,{children:(B,o)=>{je(B,{get value(){return e().buryReviews},set value(A){X(g,_(e).buryReviews=A,_(e))},get defaultValue(){return c.buryReviews},children:(A,k)=>{te(A,{$$events:{click:()=>D(Object.keys(u).indexOf("buryReviewSiblings"))},children:(y,m)=>{Z();var N=K();L(()=>H(N,u.buryReviewSiblings.title)),d(y,N)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=$(W,2);U(E,{children:(B,o)=>{je(B,{get value(){return e().buryInterdayLearning},set value(A){X(g,_(e).buryInterdayLearning=A,_(e))},get defaultValue(){return c.buryInterdayLearning},children:(A,k)=>{te(A,{$$events:{click:()=>D(Object.keys(u).indexOf("buryInterdayLearningSiblings"))},children:(y,m)=>{Z();var N=K();L(()=>H(N,u.buryInterdayLearningSiblings.title)),d(y,N)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(b,z)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(O,p)=>{var b=oe(()=>Ts());Qe(O,{get title(){return s(b)},get url(){return ue.Studying.siblingsAndBurying},slot:"tooltip",helpSections:h,$$events:{mount:x=>{w(P,x.detail.modal),w(f,x.detail.carousel)}}})}}}),ve()}function ac(){}var oc=Y('<hr class="dropdown-divider">');function lc(l){var t=oc();d(l,t)}var ic=Y('<div class="save svelte-ymxw35"> </div>'),cc=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),dc=Y("<!> <!> <!> <!> <!> <!> <!>",1),uc=Y('<div class="d-flex"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>');function fc(l,t){ge(t,!1);const n=window.getComputedStyle(document.body).direction=="rtl",e=Zs();let r=F(t,"state",8);async function a(){if(await St(),r().defaultConfigSelected()){alert(Ea());return}const C=(r().removalWilLForceFullSync()?Ma()+" ":"")+Na({name:r().getCurrentName()});if(confirm(Kr(C)))try{r().removeCurrentConfig(),e("remove")}catch(O){alert(O)}}async function g(C){if(await mr(),C===yt.COMPUTE_ALL_PARAMS&&!Pe(r().fsrs)){alert(Va());return}r().save(C)}const c="Control+Enter";let i=j(!1);me();var u=uc(),h=Q(u),P=oe(()=>Al(c));Oe(h,()=>({"--border-left-radius":n?"0":"var(--border-radius)","--border-right-radius":n?"var(--border-radius)":"0"})),Tl(h.lastChild,{primary:!0,get tooltip(){return s(P)},$$events:{click:()=>g(yt.NORMAL)},children:(C,O)=>{var p=ic(),b=Q(p);L(()=>H(b,ja())),M(p),d(C,p)},$$slots:{default:!0}}),M(h);var f=$(h,2);Ol(f,{keyCombination:c,$$events:{action:()=>g(yt.NORMAL)}});var D=$(f,2);wl(D,{get show(){return s(i)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>w(i,!1)},$$slots:{reference:(C,O)=>{var p=cc(),b=se(p);Oe(b,()=>({"--border-right-radius":n?"0":"var(--border-radius)","--border-left-radius":n?"var(--border-radius)":"0"})),vn(b.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>w(i,!s(i))},children:(x,z)=>{xt(x,{icon:$r})},$$slots:{default:!0}}),M(b),d(C,p)},floating:(C,O)=>{_l(C,{slot:"floating",children:(p,b)=>{var x=dc(),z=se(x);ut(z,{$$events:{click:()=>e("add")},children:(k,y)=>{Z();var m=K();L(()=>H(m,nr())),d(k,m)},$$slots:{default:!0}});var I=$(z,2);ut(I,{$$events:{click:()=>e("clone")},children:(k,y)=>{Z();var m=K();L(()=>H(m,ar())),d(k,m)},$$slots:{default:!0}});var W=$(I,2);ut(W,{$$events:{click:()=>e("rename")},children:(k,y)=>{Z();var m=K();L(()=>H(m,or())),d(k,m)},$$slots:{default:!0}});var E=$(W,2);ut(E,{$$events:{click:a},children:(k,y)=>{Z();var m=K();L(()=>H(m,Fa())),d(k,m)},$$slots:{default:!0}});var B=$(E,2);lc(B);var o=$(B,2);ut(o,{$$events:{click:()=>g(yt.APPLY_TO_CHILDREN)},children:(k,y)=>{Z();var m=K();L(()=>H(m,Ha())),d(k,m)},$$slots:{default:!0}});var A=$(o,2);ut(A,{$$events:{click:()=>g(yt.COMPUTE_ALL_PARAMS)},children:(k,y)=>{Z();var m=K();L(()=>H(m,Ba())),d(k,m)},$$slots:{default:!0}}),d(p,x)},$$slots:{default:!0}})}}}),M(u),d(l,u),ve()}var gc=Y('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content svelte-18qg9px"><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" class="btn-close svelte-18qg9px" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text" class="form-control svelte-18qg9px"></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function vc(l,t){ge(t,!1);const n=ke(),e=()=>de(hl,"$pageTheme",n),r=j();let a=F(t,"title",8),g=F(t,"prompt",8),c=F(t,"initialValue",8,""),i=F(t,"onOk",8);const u=Math.random().toString(36).substring(2),h=ss(pr);let P=j(),f,D=j();function C(){i()(s(D).value),f.hide(),w(r,c())}function O(){f.hide(),w(r,c())}function p(){s(D).focus(),x(!0)}function b(){x(!1)}const{set:x,remove:z}=kl(O);rs(()=>{s(P).addEventListener("shown.bs.modal",p),s(P).addEventListener("hidden.bs.modal",b),f=new yl(s(P),{keyboard:!1}),h.set(u,f)}),fn(()=>{z(),s(P).removeEventListener("shown.bs.modal",p),s(P).removeEventListener("hidden.bs.modal",b)}),ie(()=>qe(c()),()=>{w(r,c())}),Ie(),me();var I=gc();wt(I,V=>w(P,V),()=>s(P));var W=Q(I),E=Q(W),B=Q(E),o=Q(B),A=Q(o);M(o);var k=$(o,2);M(B);var y=$(B,2),m=Q(y),N=Q(m),R=Q(N),S=Q(R);M(R);var T=$(R,2);wt(T,V=>w(D,V),()=>s(D)),Ze(T),M(N),M(m),M(y);var J=$(y,2),re=Q(J),G=$(re,2);return M(J),M(E),M(W),M(I),L(()=>{var V;gt(E,"default-colors",e().isDark),H(A,a()),gt(k,"invert",e().isDark),H(S,`${(V=g())!=null?V:""}:`),gt(T,"nightMode",e().isDark)}),At(T,()=>s(r),V=>w(r,V)),Ce("submit",m,Rl(C)),Ce("click",re,O),Ce("click",G,C),d(l,I),Re(t,"modalKey",u),ve({modalKey:u})}var $c=Y('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),pc=Y('<!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function mc(l,t){ge(t,!1);const n=ke(),e=()=>de(c,"$configList",n),r=j(),a=j();let g=F(t,"state",8);const c=g().configList,i=Zs(),u=()=>i("presetchange");function h(y){const m=za({decks:y.useCount});return`${y.name} (${m})`}function P(y){g().setCurrentIndex(y.detail.value),u()}function f(y){const m=y.trim();m.length&&(g().addConfig(m),u())}function D(y){const m=y.trim();m.length&&(g().cloneConfig(m),u())}function C(y){g().setCurrentName(y)}const O=ss(pr);let p=j(),b=j(""),x=j(""),z=j(ac);function I(){w(x,nr()),w(z,f),w(b,""),O.get(s(p)).show()}function W(){w(x,ar()),w(z,D),w(b,g().getCurrentName()),O.get(s(p)).show()}function E(){w(x,or()),w(z,C),w(b,g().getCurrentName()),O.get(s(p)).show()}ie(()=>e(),()=>{w(r,e().findIndex(y=>y.current))}),ie(()=>(e(),s(r)),()=>{w(a,h(e()[s(r)]))}),Ie(),me();var B=pc(),o=se(B),A=oe(()=>Wa());vc(o,{get title(){return s(x)},get prompt(){return s(A)},get initialValue(){return s(b)},get onOk(){return s(z)},get modalKey(){return s(p)},set modalKey(y){w(p,y)},$$legacy:!0});var k=$(o,2);Oe(k,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),Dl(k.lastChild,{breakpoint:"sm",children:(y,m)=>{var N=$c(),R=Q(N);cn(R,{class:"flex-grow-1 mr1",get value(){return s(r)},set value(T){w(r,T)},get label(){return s(a)},get list(){return e()},parser:T=>({content:h(T),value:T.idx}),$$events:{change:P},$$legacy:!0});var S=$(R,2);fc(S,{get state(){return g()},$$events:{add:I,clone:W,rename:E,remove:u}}),M(N),d(y,N)},$$slots:{default:!0}}),M(k),d(l,B),ve()}var hc=Y('<li class="svelte-1ibi4j8"><button class="svelte-1ibi4j8"> </button></li>'),yc=Y('<ul class="svelte-1ibi4j8"></ul>');function Ks(l,t){ge(t,!1);let n=F(t,"tabs",8),e=F(t,"value",12),r=j(a());function a(){const u=n().slice().reverse().findIndex(h=>h.value!==null);return u===-1?0:n().length-u-1}function g(u){for(const[h,P]of n().entries())u===h?P.enable(e()):u>h?P.reset():P.disable()}const c=u=>()=>w(r,u);ie(()=>s(r),()=>{g(s(r))}),ie(()=>(qe(n()),s(r)),()=>{var u;e((u=n()[s(r)].value)!=null?u:0)}),ie(()=>(qe(n()),s(r),qe(e())),()=>{n()[s(r)].setValue(e())}),Ie(),me();var i=yc();Ot(i,5,n,as,(u,h,P)=>{var f=hc(),D=Q(f),C=nn(()=>c(P)),O=Q(D);M(D),M(f),L(()=>{gt(f,"active",s(r)===P),H(O,s(h).title)}),Ce("click",D,function(...p){var b;(b=s(C))==null||b.apply(this,p)}),d(u,f)}),M(i),d(l,i),ve()}var Cc=Y("<div> </div>");function Ve(l,t){ge(t,!1);let n=F(t,"warning",8),e=F(t,"className",8,"alert-warning");me();var r=Ne(),a=se(r);be(a,n,g=>{_e(g,{children:(c,i)=>{var u=Cc(),h=Q(u);L(()=>H(h,Yr(n()))),M(u),L(()=>{var P;return ft(u,`col-12 alert ${(P=e())!=null?P:""} mb-0`)}),Hs(1,u,()=>Bs),Hs(2,u,()=>Bs),d(c,u)},$$slots:{default:!0}})}),d(l,r),ve()}var wc=Y("<!> <!> <!> <!> <!>",1);function _c(l,t){var R,S,T,J,re,G;ge(t,!1);const n=ke(),e=()=>de(P,"$config",n),r=()=>de(f,"$limits",n),a=()=>de(C,"$newCardsIgnoreReviewLimit",n),g=()=>de(O,"$applyAllParentLimits",n),c=j();let i=F(t,"state",8),u=F(t,"api",8);function h(){we(I,s(I)[0]=new et(Pt(),e().newPerDay,V=>X(P,_(e).newPerDay=V,_(e)),e().newPerDay,null)),we(W,s(W)[0]=new et(Pt(),e().reviewsPerDay,V=>X(P,_(e).reviewsPerDay=V,_(e)),e().reviewsPerDay,null))}const P=i().currentConfig,f=i().deckLimits,D=i().defaults,C=i().newCardsIgnoreReviewLimit,O=i().applyAllParentLimits,p=`

`+Ga()+`

`+qa(),b=`

`+Qa()+p,x=es()+`

`+Ua(),z=es()+`

`+Ka(),I=j([new et(Pt(),e().newPerDay,V=>X(P,_(e).newPerDay=V,_(e)),e().newPerDay,null),new et(Ds(),(R=r().new)!=null?R:null,V=>X(f,_(r).new=V!=null?V:void 0,_(r)),null,null),new et(Is(),r().newTodayActive&&(S=r().newToday)!=null?S:null,V=>X(f,_(r).newToday=V!=null?V:void 0,_(r)),null,(T=r().newToday)!=null?T:null)]),W=j([new et(Pt(),e().reviewsPerDay,V=>X(P,_(e).reviewsPerDay=V,_(e)),e().reviewsPerDay,null),new et(Ds(),(J=r().review)!=null?J:null,V=>X(f,_(r).review=V!=null?V:void 0,_(r)),null,null),new et(Is(),r().reviewTodayActive&&(re=r().reviewToday)!=null?re:null,V=>X(f,_(r).reviewToday=V!=null?V:void 0,_(r)),null,(G=r().reviewToday)!=null?G:null)]);let E=j(0),B=j(0);const o={newLimit:{title:lr(),help:Ya()+p,url:ue.DeckOptions.newCardsday},reviewLimit:{title:ir(),help:Ja()+b,url:ue.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:Xa(),help:x,url:ue.DeckOptions.newCardsday},applyAllParentLimits:{title:Za(),help:z,url:ue.DeckOptions.newCardsday}},A=Object.values(o);let k=j(),y=j();function m(V){s(k).show(),s(y).to(V)}ie(()=>(s(E),s(B),vt),()=>{w(c,Math.min(9999,s(E)*10)>s(B)?eo({cards:s(E),expected:Math.min(9999,s(E)*10)}):"")}),Ie(),me();var N=oe(()=>Ls());return Fe(l,{get title(){return s(N)},children:(V,$e)=>{We(V,{slotHost:U,get api(){return u()},children:(pe,fe)=>{var xe=wc(),ae=se(xe);U(ae,{children:(Ae,Ee)=>{De(Ae,{get value(){return s(E)},set value(ye){w(E,ye)},get defaultValue(){return D.newPerDay},children:(ye,nt)=>{te(ye,{$$events:{click:()=>m(Object.keys(o).indexOf("newLimit"))},children:(Me,$t)=>{Z();var Ke=K();L(()=>H(Ke,o.newLimit.title)),d(Me,Ke)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(ye,nt)=>{Ks(ye,{slot:"tabs",get tabs(){return s(I)},get value(){return s(E)},set value(Me){w(E,Me)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var he=$(ae,2);U(he,{children:(Ae,Ee)=>{De(Ae,{get value(){return s(B)},set value(ye){w(B,ye)},get defaultValue(){return D.reviewsPerDay},children:(ye,nt)=>{te(ye,{$$events:{click:()=>m(Object.keys(o).indexOf("reviewLimit"))},children:(Me,$t)=>{Z();var Ke=K();L(()=>H(Ke,o.reviewLimit.title)),d(Me,Ke)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(ye,nt)=>{Ks(ye,{slot:"tabs",get tabs(){return s(W)},get value(){return s(B)},set value(Me){w(B,Me)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var Le=$(he,2);U(Le,{children:(Ae,Ee)=>{Ve(Ae,{get warning(){return s(c)}})},$$slots:{default:!0}});var Ue=$(Le,2);U(Ue,{children:(Ae,Ee)=>{je(Ae,{get value(){return a()},set value(ye){st(C,ye)},defaultValue:!1,children:(ye,nt)=>{te(ye,{$$events:{click:()=>m(Object.keys(o).indexOf("newCardsIgnoreReviewLimit"))},children:(Me,$t)=>{_t(Me,{get title(){return o.newCardsIgnoreReviewLimit.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Rt=$(Ue,2);U(Rt,{children:(Ae,Ee)=>{je(Ae,{get value(){return g()},set value(ye){st(O,ye)},defaultValue:!1,children:(ye,nt)=>{te(ye,{$$events:{click:()=>m(Object.keys(o).indexOf("applyAllParentLimits"))},children:(Me,$t)=>{_t(Me,{get title(){return o.applyAllParentLimits.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(pe,xe)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(V,$e)=>{var pe=oe(()=>Ls());Qe(V,{get title(){return s(pe)},get url(){return ue.DeckOptions.dailyLimits},slot:"tooltip",helpSections:A,$$events:{mount:fe=>{w(k,fe.detail.modal),w(y,fe.detail.carousel)}}})}}}),Re(t,"onPresetChange",h),ve({onPresetChange:h})}var kc=Y("<!> <!> <!> <!> <!>",1);function Pc(l,t){ge(t,!1);const n=ke(),e=()=>de(c,"$config",n),r=()=>de(u,"$fsrs",n);let a=F(t,"state",8),g=F(t,"api",8);const c=a().currentConfig,i=a().defaults,u=a().fsrs,h=`

`+to();let P=j([]);const f={newGatherPriority:{title:so(),help:ro()+h},newCardSortOrder:{title:no(),help:ao()+h},newReviewPriority:{title:oo(),help:lo()+h},interdayStepPriority:{title:io(),help:co()+h},reviewSortOrder:{title:uo(),help:fo()+h}},D=Object.values(f);let C=j(),O=j();function p(x){s(C).show(),s(O).to(x)}ie(()=>(e(),s(P),Ye),()=>{switch(e().newCardGatherPriority){case Ye.RANDOM_NOTES:w(P,[Be.TEMPLATE_THEN_RANDOM,Be.RANDOM_NOTE_THEN_TEMPLATE]);break;case Ye.RANDOM_CARDS:w(P,[Be.TEMPLATE_THEN_RANDOM,Be.RANDOM_NOTE_THEN_TEMPLATE,Be.RANDOM_CARD]);break;default:w(P,[]);break}s(P).includes(e().newCardSortOrder)&&X(c,_(e).newCardSortOrder=0,_(e)),e().newCardSortOrder in Be||X(c,_(e).newCardSortOrder=0,_(e))}),Ie(),me();var b=oe(()=>Es());Fe(l,{get title(){return s(b)},children:(x,z)=>{We(x,{slotHost:U,get api(){return g()},children:(I,W)=>{var E=kc(),B=se(E);U(B,{children:(m,N)=>{var R=oe(Qi);Xe(m,{get value(){return e().newCardGatherPriority},set value(S){X(c,_(e).newCardGatherPriority=S,_(e))},get defaultValue(){return i.newCardGatherPriority},get choices(){return s(R)},children:(S,T)=>{te(S,{$$events:{click:()=>p(Object.keys(f).indexOf("newGatherPriority"))},children:(J,re)=>{Z();var G=K();L(()=>H(G,f.newGatherPriority.title)),d(J,G)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var o=$(B,2);U(o,{children:(m,N)=>{var R=oe(Ui);Xe(m,{get value(){return e().newCardSortOrder},set value(S){X(c,_(e).newCardSortOrder=S,_(e))},get defaultValue(){return i.newCardSortOrder},get choices(){return s(R)},get disabledChoices(){return s(P)},children:(S,T)=>{te(S,{$$events:{click:()=>p(Object.keys(f).indexOf("newCardSortOrder"))},children:(J,re)=>{Z();var G=K();L(()=>H(G,f.newCardSortOrder.title)),d(J,G)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var A=$(o,2);U(A,{children:(m,N)=>{var R=oe(Us);Xe(m,{get value(){return e().newMix},set value(S){X(c,_(e).newMix=S,_(e))},get defaultValue(){return i.newMix},get choices(){return s(R)},children:(S,T)=>{te(S,{$$events:{click:()=>p(Object.keys(f).indexOf("newReviewPriority"))},children:(J,re)=>{Z();var G=K();L(()=>H(G,f.newReviewPriority.title)),d(J,G)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var k=$(A,2);U(k,{children:(m,N)=>{var R=oe(Us);Xe(m,{get value(){return e().interdayLearningMix},set value(S){X(c,_(e).interdayLearningMix=S,_(e))},get defaultValue(){return i.interdayLearningMix},get choices(){return s(R)},children:(S,T)=>{te(S,{$$events:{click:()=>p(Object.keys(f).indexOf("interdayStepPriority"))},children:(J,re)=>{Z();var G=K();L(()=>H(G,f.interdayStepPriority.title)),d(J,G)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var y=$(k,2);U(y,{children:(m,N)=>{var R=oe(()=>Ki(r()));Xe(m,{get value(){return e().reviewOrder},set value(S){X(c,_(e).reviewOrder=S,_(e))},get defaultValue(){return i.reviewOrder},get choices(){return s(R)},children:(S,T)=>{te(S,{$$events:{click:()=>p(Object.keys(f).indexOf("reviewSortOrder"))},children:(J,re)=>{Z();var G=K();L(()=>H(G,f.reviewSortOrder.title)),d(J,G)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(I,E)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(x,z)=>{var I=oe(()=>Es());Qe(x,{get title(){return s(I)},get url(){return ue.DeckOptions.displayOrder},slot:"tooltip",helpSections:D,$$events:{mount:W=>{w(C,W.detail.modal),w(O,W.detail.carousel)}}})}}}),ve()}var bc=Y('<textarea class="w-100"></textarea>');function xc(l,t){ge(t,!1);let n=F(t,"value",12),e=F(t,"defaults",8),r=j();function a(i){return i.map(u=>u.toFixed(4)).join(", ")}function g(){n(this.value.replace(/ /g,"").split(",").filter(i=>i).map(i=>Number(i)))}ie(()=>qe(n()),()=>{w(r,a(n()))}),Ie(),me();var c=bc();tr(c),L(()=>Ge(c,"placeholder",a(e()))),L(()=>ns(c,s(r))),Ce("blur",c,g),d(l,c),ve()}var Sc=Y("<!> <!>",1);function Oc(l,t){let n=F(t,"value",12),e=F(t,"defaultValue",8),r=F(t,"defaults",8);var a=Sc(),g=se(a);tt(g,t,"default",{});var c=$(g,2);ot(c,{children:(i,u)=>{xc(i,{get value(){return n()},set value(h){n(h)},get defaults(){return r()},$$legacy:!0})},$$slots:{default:!0,revert:(i,u)=>{kt(i,{slot:"revert",get value(){return n()},set value(h){n(h)},get defaultValue(){return e()},$$legacy:!0})}}}),d(l,a)}var Ac=Y('<input type="text" class="w-100 mb-1">');function Rc(l,t){let n=F(t,"value",12),e=F(t,"placeholder",8);ot(l,{children:(r,a)=>{var g=Ac();Ze(g),L(()=>Ge(g,"placeholder",e())),At(g,n),d(r,g)},$$slots:{default:!0}})}function Jt(l,t,n,e){const r=zs(l);if(r.selectAll(".lines").remove(),r.selectAll(".hover-columns").remove(),r.selectAll(".focus-line").remove(),r.selectAll(".legend").remove(),n.length==0)return Ws(r,!1),[];const a=r.transition().duration(600),g=new Date,c=n.map(o=>({...o,date:new Date(g.getTime()+o.x*24*60*60*1e3)})),i=g,u=Ut(c,o=>o.date),h=Yl().domain([i,u]).range([t.marginLeft,t.width-t.marginRight]);r.select(".x-ticks").call(o=>o.transition(a).call(Il(h).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const P=o=>e?Gs(o,!0):o.toString(),f=e?Ut(c,o=>o.timeCost):Ut(c,o=>o.count),D=Ll().range([t.height-t.marginBottom,t.marginTop]).domain([0,f]).nice();r.select(".y-ticks").call(o=>o.transition(a).call(El(D).ticks(t.height/50).tickSizeOuter(0).tickFormat(P))).attr("direction","ltr"),r.select(".y-ticks .y-axis-title").remove(),r.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-t.marginLeft).attr("x",0-t.height/2).attr("dy","1em").attr("fill","currentColor").style("text-anchor","middle").text(e?"Review Time per day":"Review Count per day");const C=c.map(o=>[h(o.date),D(e?o.timeCost:o.count),o.label]),O=oi(C,o=>Object.assign(o,{z:o[0][2]}),o=>o[2]),p=ii;r.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(O.entries())).join("path").attr("stroke",(o,A)=>p[A%p.length]).attr("d",o=>Ml()(o[1].map(A=>[A[0],A[1]]))).attr("data-group",o=>o[0]);const b=r.append("line").attr("class","focus-line").attr("y1",t.marginTop).attr("y2",t.height-t.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),x=Array.from(O.values()).reduce((o,A)=>o.length>A.length?o:A),z=t.width/x.length;r.append("g").attr("class","hover-columns").selectAll("rect").data(x).join("rect").attr("x",o=>o[0]-z/2).attr("y",t.marginTop).attr("width",z).attr("height",t.height-t.marginTop-t.marginBottom).attr("fill","transparent").on("mousemove",I).on("mouseout",()=>{b.style("opacity",0),Nl()});function I(o,A){Vl(o,document.body);const k=h.invert(A[0]),y={};O.forEach((R,S)=>{const T=Fl(G=>h.invert(G[0])).left,J=T(R,k),re=R[J-1]||R[J];re&&(y[S]=D.invert(re[1]))}),b.attr("x1",A[0]).attr("x2",A[0]).style("opacity",1);const m=+((k.getTime()-Date.now())/(60*60*24*1e3)).toFixed();let N=`Date: ${Jr(k)}<br>In ${m} Days<br>`;for(const[R,S]of Object.entries(y))N+=`#${R}: ${e?Gs(S):cr({reviews:Math.round(S)})}<br>`;jl(N,o.pageX,o.pageY)}const W=r.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(O.keys())).join("g").attr("transform",(o,A)=>`translate(0,${A*20})`).attr("cursor","pointer").on("click",(o,A)=>E(o,A));W.append("rect").attr("x",t.width-t.marginRight+36).attr("width",12).attr("height",12).attr("fill",(o,A)=>p[A%p.length]),W.append("text").attr("x",t.width-t.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(o=>`#${o}`);const E=(o,A)=>{const k=A,y=r.select(`path[data-group="${k}"]`),m=y.classed("hidden"),N=o.currentTarget;y.classed("hidden",!m),y.style("display",()=>m?null:"none"),zs(N).select("rect").style("opacity",m?1:.5)};return Ws(r,!0),[]}var Tc=Y(" <!>",1),Dc=Y('<label><input type="checkbox"> </label>'),Ic=dn("<!><svg><!><!><!><!></svg><!>",1),Lc=Y('<!> <!> <div class="ms-1 me-1"><!> <!> <button><!></button> <button><!></button> <div><!></div> <!></div> <div class="m-2"><!> <!></div> <div class="m-2"><details><summary> </summary> <!> <button><!></button> <!> <div> </div></details></div> <div class="m-2"><details><summary>FSRS simulator (experimental)</summary> <!> <!> <!> <!> <!> <button></button> <button></button> <div> </div> <!></details></div>',1);function Ec(l,t){ge(t,!1);const n=ke(),e=()=>de(B,"$daysSinceLastOptimization",n),r=()=>de(z,"$presetName",n),a=()=>de(I,"$config",n),g=()=>de(E,"$fsrsReschedule",n),c=j(),i=j(),u=j(),h=j(),P=j(),f=j(),D=j(),C=j(),O=j(),p=j();let b=F(t,"state",8),x=F(t,"openHelpModal",8);const z=b().currentPresetName,I=b().currentConfig,W=b().defaults,E=b().fsrsReschedule,B=b().daysSinceLastOptimization;let o=j(),A=j(!1),k=j(!1),y=j(!1),m=j(0),N=j(),R=j(!1);const S=j(new Hr({daysToSimulate:365,lossAversion:2.5})),T=j(new Br({params:Ct(a()),desiredRetention:a().desiredRetention,deckSize:0,daysToSimulate:365,newLimit:a().newPerDay,reviewLimit:a().reviewsPerDay,maxInterval:a().maximumReviewInterval,search:`preset:"${b().getCurrentName()}" -is:suspended`}));function J(v){const ee=Math.round(100/.23456790123456783*(Math.pow(v,1/-.5)-1));return ee===100?"":wo({days:ee})}function re(v){return v<.7||v>.97?"alert-danger":v<.8||v>.95?"alert-warning":"alert-info"}function G(){return BigInt(a().ignoreRevlogsBeforeDate?new Date(a().ignoreRevlogsBeforeDate).getTime():0)}async function V(){if(s(A)){await Ht({});return}if(b().presetAssignmentsChanged()){alert(Wt());return}w(A,!0),w(o,void 0);try{await bt(async()=>{const v=Ct(a()),q=await zr({search:a().paramSearch?a().paramSearch:s(u),ignoreRevlogsBeforeMs:G(),currentParams:v});v.length&&v.every((ne,ce)=>ne.toFixed(4)===q.params[ce].toFixed(4))||q.params.length===0?setTimeout(()=>alert($o()),100):X(I,_(a).fsrsParams5=q.params,_(a)),s(o)&&we(o,s(o).current=s(o).total)},v=>{v.value.case==="computeParams"&&w(o,v.value.value)})}finally{w(A,!1)}}async function $e(){if(s(k)){await Ht({});return}if(b().presetAssignmentsChanged()){alert(Wt());return}w(k,!0),w(o,void 0);try{await bt(async()=>{const v=a().paramSearch?a().paramSearch:s(u),q=await Wr({params:Ct(a()),search:v,ignoreRevlogsBeforeMs:G()});s(o)&&we(o,s(o).current=s(o).total),setTimeout(()=>alert(`Log loss: ${q.logLoss.toFixed(4)}, RMSE(bins): ${(q.rmseBins*100).toFixed(2)}%. ${po()}`),200)},v=>{v.value.case==="computeParams"&&w(o,v.value.value)})}finally{w(k,!1)}}async function pe(){if(s(y)){await Ht({});return}if(b().presetAssignmentsChanged()){alert(Wt());return}w(y,!0),w(N,void 0);try{await bt(async()=>{we(S,s(S).maxInterval=a().maximumReviewInterval),we(S,s(S).params=Ct(a())),we(S,s(S).search=`preset:"${b().getCurrentName()}" -is:suspended`);const v=await Gr(s(S));w(m,v.optimalRetention),w(N,void 0)},v=>{v.value.case==="computeRetention"&&w(N,v.value.value)})}finally{w(y,!1)}}function fe(v){if(!v||!v.total)return"";const q=(v.current/v.total*100).toFixed(1);return v instanceof Qr?`${q}%`:_o({pct:q,reviews:v.reviews})}function xe(v){return v?ko({count:v.current}):""}function ae(v){return v?Po({num:v.toFixed(2)}):""}let he=j([]);const Le=ql();let Ue=j(null);const Rt=go();let Ae=0,Ee=j([]);function ye(v,q){const ne=[];for(let ce=0;ce<v.length;(ce+=1)-1){let ee=0,at=0;for(let dt=Math.max(0,ce-q+1);dt<=ce;(dt+=1)-1)ee+=v[dt],at+=1;ne.push(ee/at)}return ne}function nt(v,q){return v.map((ne,ce)=>ne+q[ce])}async function Me(){let v;Ae+=1;try{await bt(async()=>{we(T,s(T).params=Ct(a())),we(T,s(T).desiredRetention=a().desiredRetention),we(T,s(T).search=`preset:"${b().getCurrentName()}" -is:suspended`),w(p,"processing..."),v=await qr(s(T))},()=>{})}finally{if(w(p,""),v){const q=ye(v.dailyTimeCost,Math.ceil(s(T).daysToSimulate/50)),ne=ye(nt(v.dailyReviewCount,v.dailyNewCount),Math.ceil(s(T).daysToSimulate/50));w(Ee,s(Ee).concat(q.map((ce,ee)=>({x:ee,timeCost:ce,count:ne[ee],label:Ae})))),w(he,Jt(s(Ue),Le,s(Ee),s(R)))}}}function $t(){w(Ee,s(Ee).filter(v=>v.label!==Ae)),Ae=Math.max(0,Ae-1),w(he,Jt(s(Ue),Le,s(Ee),s(R)))}const Ke=vo();ie(()=>(e(),vt),()=>{w(c,e()>30?mo():"")}),ie(()=>r(),()=>{r()&&w(m,0)}),ie(()=>(s(A),s(k),s(y)),()=>{w(i,s(A)||s(k)||s(y))}),ie(()=>qe(b()),()=>{w(u,`preset:"${b().getCurrentName()}" -is:suspended`)}),ie(()=>a(),()=>{w(h,Number(a().desiredRetention.toFixed(2)))}),ie(()=>s(h),()=>{w(P,J(s(h)))}),ie(()=>s(h),()=>{w(f,re(s(h)))}),ie(()=>s(S),()=>{s(S).daysToSimulate>3650&&we(S,s(S).daysToSimulate=3650)}),ie(()=>s(o),()=>{w(D,fe(s(o)))}),ie(()=>s(N),()=>{w(C,xe(s(N)))}),ie(()=>s(o),()=>{var v,q;w(O,(q=(v=s(o))==null?void 0:v.reviews)!=null?q:void 0)}),ie(()=>{},()=>{w(p,"")}),ie(()=>(s(Ue),s(Ee),s(R)),()=>{w(he,Jt(s(Ue),Le,s(Ee),s(R)))}),Ie(),me();var os=Lc(),ls=se(os);Je(ls,{get value(){return a().desiredRetention},set value(v){X(I,_(a).desiredRetention=v,_(a))},get defaultValue(){return W.desiredRetention},min:.7,max:.99,children:(v,q)=>{te(v,{$$events:{click:()=>x()("desiredRetention")},children:(ne,ce)=>{Z();var ee=K();L(()=>H(ee,dr())),d(ne,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var is=$(ls,2);Ve(is,{get warning(){return s(P)},get className(){return s(f)}});var Tt=$(is,2),cs=Q(Tt);Oc(cs,{get value(){return a().fsrsParams5},set value(v){X(I,_(a).fsrsParams5=v,_(a))},defaultValue:[],get defaults(){return W.fsrsParams5},children:(v,q)=>{te(v,{$$events:{click:()=>x()("modelParams")},children:(ne,ce)=>{Z();var ee=K();L(()=>H(ee,ur())),d(ne,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ds=$(cs,2);Rc(ds,{get value(){return a().paramSearch},set value(v){X(I,_(a).paramSearch=v,_(a))},get placeholder(){return s(u)},$$legacy:!0});var lt=$(ds,2),Cr=Q(lt);be(Cr,()=>s(A),v=>{var q=K();L(()=>H(q,Gt())),d(v,q)},v=>{var q=K();L(()=>H(q,ho())),d(v,q)}),M(lt);var it=$(lt,2),wr=Q(it);be(wr,()=>s(k),v=>{var q=K();L(()=>H(q,Gt())),d(v,q)},v=>{var q=K();L(()=>H(q,yo())),d(v,q)}),M(it);var Dt=$(it,2),_r=Q(Dt);be(_r,()=>s(A)||s(k),v=>{var q=K();L(()=>H(q,s(D))),d(v,q)},v=>{var q=Ne(),ne=se(q);be(ne,()=>s(O)!==void 0,ce=>{var ee=K();L(()=>H(ee,cr({reviews:s(O)}))),d(ce,ee)},null,!0),d(v,q)}),M(Dt);var kr=$(Dt,2);Ve(kr,{get warning(){return s(c)},className:"alert-warning"}),M(Tt);var It=$(Tt,2),us=Q(It);je(us,{get value(){return g()},set value(v){st(E,v)},defaultValue:!1,children:(v,q)=>{te(v,{$$events:{click:()=>x()("rescheduleCardsOnChange")},children:(ne,ce)=>{var ee=oe(()=>gr());_t(ne,{get title(){return s(ee)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Pr=$(us,2);be(Pr,g,v=>{var q=oe(()=>bo());Ve(v,{get warning(){return s(q)}})}),M(It);var Lt=$(It,2),fs=Q(Lt),Et=Q(fs),br=Q(Et);L(()=>H(br,fr())),M(Et);var gs=$(Et,2);De(gs,{get value(){return s(S).daysToSimulate},set value(v){we(S,s(S).daysToSimulate=v)},defaultValue:365,min:1,max:3650,children:(v,q)=>{te(v,{$$events:{click:()=>x()("computeOptimalRetention")},children:(ne,ce)=>{Z();var ee=K();L(()=>H(ee,Ms())),d(ne,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ct=$(gs,2),xr=Q(ct);be(xr,()=>s(y),v=>{var q=K();L(()=>H(q,Gt())),d(v,q)},v=>{var q=K();L(()=>H(q,Co())),d(v,q)}),M(ct);var vs=$(ct,2);be(vs,()=>s(m),v=>{var q=Tc(),ne=se(q);L(()=>{var ee;return H(ne,`${(ee=ae(s(m)))!=null?ee:""} `)});var ce=$(ne);be(ce,()=>s(m)-a().desiredRetention>=.01,ee=>{var at=oe(()=>xo());Ve(ee,{get warning(){return s(at)},className:"alert-warning"})}),d(v,q)});var $s=$(vs,2),Sr=Q($s);M($s),M(fs),M(Lt);var ps=$(Lt,2),ms=Q(ps),hs=$(Q(ms),2);De(hs,{get value(){return s(T).daysToSimulate},set value(v){we(T,s(T).daysToSimulate=v)},defaultValue:365,min:1,max:3650,children:(v,q)=>{te(v,{$$events:{click:()=>x()("simulateFsrsReview")},children:(ne,ce)=>{Z();var ee=K();L(()=>H(ee,Ms())),d(ne,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ys=$(hs,2);De(ys,{get value(){return s(T).deckSize},set value(v){we(T,s(T).deckSize=v)},defaultValue:0,min:1,max:1e5,children:(v,q)=>{te(v,{$$events:{click:()=>x()("simulateFsrsReview")},children:(ne,ce)=>{Z();var ee=K("Additional new cards to simulate");d(ne,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Cs=$(ys,2);De(Cs,{get value(){return s(T).newLimit},set value(v){we(T,s(T).newLimit=v)},get defaultValue(){return W.newPerDay},min:0,max:9999,children:(v,q)=>{te(v,{$$events:{click:()=>x()("simulateFsrsReview")},children:(ne,ce)=>{Z();var ee=K();L(()=>H(ee,lr())),d(ne,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ws=$(Cs,2);De(ws,{get value(){return s(T).reviewLimit},set value(v){we(T,s(T).reviewLimit=v)},get defaultValue(){return W.reviewsPerDay},min:0,max:9999,children:(v,q)=>{te(v,{$$events:{click:()=>x()("simulateFsrsReview")},children:(ne,ce)=>{Z();var ee=K();L(()=>H(ee,ir())),d(ne,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var _s=$(ws,2);De(_s,{get value(){return s(T).maxInterval},set value(v){we(T,s(T).maxInterval=v)},get defaultValue(){return W.maximumReviewInterval},min:1,max:36500,children:(v,q)=>{te(v,{$$events:{click:()=>x()("simulateFsrsReview")},children:(ne,ce)=>{Z();var ee=K();L(()=>H(ee,sr())),d(ne,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var pt=$(_s,2);pt.textContent="Simulate";var mt=$(pt,2);mt.textContent="Clear last simulation";var Mt=$(mt,2),Or=Q(Mt);M(Mt);var Ar=$(Mt,2);Hl(Ar,{title:Rt,children:(v,q)=>{var ne=Ic(),ce=se(ne);Bl(ce,{children:(Nt,dd)=>{var Vt=Dc(),jt=Q(Vt);Ze(jt);var Dr=$(jt);Dr.nodeValue=` ${Ke!=null?Ke:""}`,M(Vt),Pl(jt,()=>s(R),Ir=>w(R,Ir)),d(Nt,Vt)},$$slots:{default:!0}});var ee=$(ce);wt(ee,Nt=>w(Ue,Nt),()=>s(Ue));var at=Q(ee);ei(at);var dt=$(at);zl(dt);var ks=$(dt);Wl(ks,{bounds:Le});var Rr=$(ks);Gl(Rr,{bounds:Le}),M(ee);var Tr=$(ee);ti(Tr,{get tableData(){return s(he)}}),L(()=>Ge(ee,"viewBox",`0 0 ${Le.width} ${Le.height}`)),d(v,ne)},$$slots:{default:!0}}),M(ms),M(ps),L(()=>{var v,q,ne,ce,ee;ft(lt,`btn ${(v=s(A)?"btn-warning":"btn-primary")!=null?v:""}`),lt.disabled=!s(A)&&s(i),ft(it,`btn ${(q=s(k)?"btn-warning":"btn-primary")!=null?q:""}`),it.disabled=!s(k)&&s(i),ft(ct,`btn ${(ne=s(y)?"btn-warning":"btn-primary")!=null?ne:""}`),ct.disabled=!s(y)&&s(i),H(Sr,s(C)),ft(pt,`btn ${(ce=s(i)?"btn-warning":"btn-primary")!=null?ce:""}`),pt.disabled=s(i),ft(mt,`btn ${(ee=s(i)?"btn-warning":"btn-primary")!=null?ee:""}`),mt.disabled=s(i),H(Or,s(p))}),Ce("click",lt,()=>V()),Ce("click",it,()=>$e()),Ce("click",ct,()=>pe()),Ce("click",pt,()=>Me()),Ce("click",mt,()=>$t()),d(l,os),ve()}var Mc=Y("<!> <!>",1);function Nc(l,t){ge(t,!1);const n=ke(),e=()=>de(g,"$fsrs",n);let r=F(t,"state",8),a=F(t,"api",8);const g=r().fsrs,c={fsrs:{title:"FSRS",help:So(),url:ue.DeckOptions.fsrs},desiredRetention:{title:dr(),help:Oo(),sched:Te.FSRS},modelParams:{title:ur(),help:Ao()+`

`+Ro(),sched:Te.FSRS},rescheduleCardsOnChange:{title:gr(),help:To(),sched:Te.FSRS},computeOptimalRetention:{title:fr(),help:Do(),sched:Te.FSRS}},i=Object.values(c);let u=j(),h=j();function P(f){s(u).show(),s(h).to(f)}me(),Fe(l,{title:"FSRS",children:(f,D)=>{We(f,{slotHost:U,get api(){return a()},children:(C,O)=>{var p=Mc(),b=se(p);U(b,{children:(z,I)=>{je(z,{get value(){return e()},set value(W){st(g,W)},defaultValue:!1,children:(W,E)=>{te(W,{$$events:{click:()=>P(Object.keys(c).indexOf("fsrs"))},children:(B,o)=>{_t(B,{get title(){return c.fsrs.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var x=$(b,2);be(x,e,z=>{Ec(z,{get state(){return r()},openHelpModal:I=>P(Object.keys(c).indexOf(I))})}),d(C,p)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(f,D)=>{Qe(f,{title:"FSRS",get url(){return ue.DeckOptions.fsrs},slot:"tooltip",get fsrs(){return e()},helpSections:i,$$events:{mount:C=>{w(u,C.detail.modal),w(h,C.detail.carousel)}}})}}}),ve()}function Vc(l,t){ge(t,!1);let n=F(t,"html",8),e=F(t,"mounted",8);rs(e()),me();var r=Ne(),a=se(r);Io(a,n,!1,!1),d(l,r),ve()}function jc(l){switch(l){case ze.Seconds:return"s";case ze.Minutes:return"m";case ze.Hours:return"h";case ze.Days:return"d";default:return""}}function Fc(l){switch(l){case"s":return ze.Seconds;case"h":return ze.Hours;case"d":return ze.Days;default:return ze.Minutes}}function Hc(l){const t=l*60;let n=Ql(t);return[ze.Months,ze.Years].includes(n)&&(n=ze.Days),`${Math.round(Ul(n,t))}${jc(n)}`}function Bc(l){const t=l.match(/(\d+)(.*)/);if(t){const[n,e,r]=t,a=Fc(r),g=Kl(a)*parseInt(e,10);return Math.min(g,2**31)/60}else return 0}function zc(l){return l.map(Hc).join(" ")}function Wc(l){return l.split(" ").map(Bc).filter(t=>t)}var Gc=Y('<input type="text" class="svelte-f5c9s0">');function qc(l,t){ge(t,!1);let n=F(t,"value",12),e=j();function r(){n(Wc(this.value))}ie(()=>qe(n()),()=>{w(e,zc(n()))}),Ie(),me();var a=Gc();Ze(a),L(()=>ns(a,s(e))),Ce("blur",a,r),d(l,a),ve()}var Qc=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Uc=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function yr(l,t){let n=F(t,"value",12),e=F(t,"defaultValue",8);var r=Uc(),a=se(r);Oe(a,()=>({"--cols":13})),_e(a.lastChild,{children:(g,c)=>{var i=Qc(),u=se(i);Oe(u,()=>({"--col-size":7})),rt(u.lastChild,{breakpoint:"xs",children:(P,f)=>{var D=Ne(),C=se(D);tt(C,t,"default",{}),d(P,D)},$$slots:{default:!0}}),M(u);var h=$(u,2);Oe(h,()=>({"--col-size":6})),rt(h.lastChild,{breakpoint:"xs",children:(P,f)=>{ot(P,{children:(D,C)=>{qc(D,{get value(){return n()},set value(O){n(O)},$$legacy:!0})},$$slots:{default:!0,revert:(D,C)=>{kt(D,{slot:"revert",get value(){return n()},set value(O){n(O)},get defaultValue(){return e()},$$legacy:!0})}}})},$$slots:{default:!0}}),M(h),d(g,i)},$$slots:{default:!0}}),M(a),d(l,r)}var Kc=Y("<!> <!> <!> <!> <!> <!>",1);function Yc(l,t){ge(t,!1);const n=ke(),e=()=>de(c,"$config",n),r=()=>de(u,"$fsrs",n);let a=F(t,"state",8),g=F(t,"api",24,()=>({}));const c=a().currentConfig,i=a().defaults,u=a().fsrs;let h=j(),P=j();const f={relearningSteps:{title:Lo(),help:Eo(),url:ue.DeckOptions.relearningSteps},minimumInterval:{title:Mo(),help:No(),url:ue.DeckOptions.minimumInterval,sched:Te.SM2},leechThreshold:{title:Vo(),help:jo(),url:ue.Leeches.leeches},leechAction:{title:Fo(),help:Ho(),url:ue.Leeches.waiting}},D=Object.values(f);let C=j(),O=j();function p(x){s(C).show(),s(O).to(x)}ie(()=>(e(),r(),vt),()=>{const x=e().relearnSteps.length?e().relearnSteps[e().relearnSteps.length-1]/60/24:0;w(h,!r()&&x>e().minimumLapseInterval?Bo():""),w(P,r()&&x>=1?vr():"")}),Ie(),me();var b=oe(()=>Ns());Fe(l,{get title(){return s(b)},children:(x,z)=>{We(x,{slotHost:U,get api(){return g()},children:(I,W)=>{var E=Kc(),B=se(E);U(B,{children:(N,R)=>{yr(N,{get value(){return e().relearnSteps},set value(S){X(c,_(e).relearnSteps=S,_(e))},get defaultValue(){return i.relearnSteps},children:(S,T)=>{te(S,{$$events:{click:()=>p(Object.keys(f).indexOf("relearningSteps"))},children:(J,re)=>{Z();var G=K();L(()=>H(G,f.relearningSteps.title)),d(J,G)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var o=$(B,2);U(o,{children:(N,R)=>{Ve(N,{get warning(){return s(P)}})},$$slots:{default:!0}});var A=$(o,2);be(A,()=>!r(),N=>{U(N,{children:(R,S)=>{De(R,{get value(){return e().minimumLapseInterval},set value(T){X(c,_(e).minimumLapseInterval=T,_(e))},get defaultValue(){return i.minimumLapseInterval},min:1,children:(T,J)=>{te(T,{$$events:{click:()=>p(Object.keys(f).indexOf("minimumInterval"))},children:(re,G)=>{Z();var V=K();L(()=>H(V,f.minimumInterval.title)),d(re,V)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}})});var k=$(A,2);U(k,{children:(N,R)=>{Ve(N,{get warning(){return s(h)}})},$$slots:{default:!0}});var y=$(k,2);U(y,{children:(N,R)=>{De(N,{get value(){return e().leechThreshold},set value(S){X(c,_(e).leechThreshold=S,_(e))},get defaultValue(){return i.leechThreshold},min:1,children:(S,T)=>{te(S,{$$events:{click:()=>p(Object.keys(f).indexOf("leechThreshold"))},children:(J,re)=>{Z();var G=K();L(()=>H(G,f.leechThreshold.title)),d(J,G)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var m=$(y,2);U(m,{children:(N,R)=>{var S=oe(Yi);Xe(N,{get value(){return e().leechAction},set value(T){X(c,_(e).leechAction=T,_(e))},get defaultValue(){return i.leechAction},get choices(){return s(S)},breakpoint:"md",children:(T,J)=>{te(T,{$$events:{click:()=>p(Object.keys(f).indexOf("leechAction"))},children:(re,G)=>{Z();var V=K();L(()=>H(V,f.leechAction.title)),d(re,V)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),d(I,E)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(x,z)=>{var I=oe(()=>Ns());Qe(x,{get title(){return s(I)},get url(){return ue.DeckOptions.lapses},slot:"tooltip",get fsrs(){return r()},helpSections:D,$$events:{mount:W=>{w(C,W.detail.modal),w(O,W.detail.carousel)}}})}}}),ve()}var Jc=Y("<!> <!> <!> <!>",1),Xc=Y("<!> <!> <!> <!> <!>",1);function Zc(l,t){ge(t,!1);const n=ke(),e=()=>de(u,"$config",n),r=()=>de(P,"$fsrs",n),a=j(),g=j();let c=F(t,"state",8),i=F(t,"api",24,()=>({}));const u=c().currentConfig,h=c().defaults,P=c().fsrs;let f=j(),D=j();const C={learningSteps:{title:zo(),help:Wo(),url:ue.DeckOptions.learningSteps},graduatingInterval:{title:Go(),help:qo(),url:ue.DeckOptions.graduatingInterval,sched:Te.SM2},easyInterval:{title:Qo(),help:Uo(),url:ue.DeckOptions.easyInterval,sched:Te.SM2},insertionOrder:{title:Ko(),help:Yo(),url:ue.DeckOptions.insertionOrder}},O=Object.values(C);let p=j(),b=j();function x(I){s(p).show(),s(b).to(I)}ie(()=>(e(),r()),()=>{const I=e().learnSteps.length?e().learnSteps[e().learnSteps.length-1]/60/24:0;w(f,I>e().graduatingIntervalGood?Jo():""),w(D,r()&&I>=1?vr():"")}),ie(()=>(e(),vt),()=>{w(a,e().graduatingIntervalGood>e().graduatingIntervalEasy?Xo():"")}),ie(()=>(e(),vt),()=>{w(g,e().newCardInsertOrder==Xt.RANDOM?Zo():"")}),Ie(),me();var z=oe(()=>Vs());Fe(l,{get title(){return s(z)},children:(I,W)=>{We(I,{slotHost:U,get api(){return i()},children:(E,B)=>{var o=Xc(),A=se(o);U(A,{children:(R,S)=>{yr(R,{get value(){return e().learnSteps},set value(T){X(u,_(e).learnSteps=T,_(e))},get defaultValue(){return h.learnSteps},children:(T,J)=>{te(T,{$$events:{click:()=>x(Object.keys(C).indexOf("learningSteps"))},children:(re,G)=>{Z();var V=K();L(()=>H(V,C.learningSteps.title)),d(re,V)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var k=$(A,2);U(k,{children:(R,S)=>{Ve(R,{get warning(){return s(D)}})},$$slots:{default:!0}});var y=$(k,2);be(y,()=>!r(),R=>{var S=Jc(),T=se(S);U(T,{children:(V,$e)=>{De(V,{get value(){return e().graduatingIntervalGood},set value(pe){X(u,_(e).graduatingIntervalGood=pe,_(e))},get defaultValue(){return h.graduatingIntervalGood},children:(pe,fe)=>{te(pe,{$$events:{click:()=>x(Object.keys(C).indexOf("graduatingInterval"))},children:(xe,ae)=>{Z();var he=K();L(()=>H(he,C.graduatingInterval.title)),d(xe,he)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var J=$(T,2);U(J,{children:(V,$e)=>{Ve(V,{get warning(){return s(f)}})},$$slots:{default:!0}});var re=$(J,2);U(re,{children:(V,$e)=>{De(V,{get value(){return e().graduatingIntervalEasy},set value(pe){X(u,_(e).graduatingIntervalEasy=pe,_(e))},get defaultValue(){return h.graduatingIntervalEasy},children:(pe,fe)=>{te(pe,{$$events:{click:()=>x(Object.keys(C).indexOf("easyInterval"))},children:(xe,ae)=>{Z();var he=K();L(()=>H(he,C.easyInterval.title)),d(xe,he)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var G=$(re,2);U(G,{children:(V,$e)=>{Ve(V,{get warning(){return s(a)}})},$$slots:{default:!0}}),d(R,S)});var m=$(y,2);U(m,{children:(R,S)=>{var T=oe(Ji);Xe(R,{get value(){return e().newCardInsertOrder},set value(J){X(u,_(e).newCardInsertOrder=J,_(e))},get defaultValue(){return h.newCardInsertOrder},get choices(){return s(T)},breakpoint:"md",children:(J,re)=>{te(J,{$$events:{click:()=>x(Object.keys(C).indexOf("insertionOrder"))},children:(G,V)=>{Z();var $e=K();L(()=>H($e,C.insertionOrder.title)),d(G,$e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var N=$(m,2);U(N,{children:(R,S)=>{Ve(R,{get warning(){return s(g)}})},$$slots:{default:!0}}),d(E,o)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(I,W)=>{var E=oe(()=>Vs());Qe(I,{get title(){return s(E)},get url(){return ue.DeckOptions.newCards},slot:"tooltip",helpSections:O,get fsrs(){return r()},$$events:{mount:B=>{w(p,B.detail.modal),w(b,B.detail.carousel)}}})}}}),ve()}var ed=Y('<div class="show-timer-switch" style="display: contents;"><!></div>'),td=Y('<div class="show-timer-switch" style="display: contents;"><!></div>'),sd=Y("<!> <!> <!> <!>",1);function rd(l,t){ge(t,!1);const n=ke(),e=()=>de(c,"$config",n),r=j();let a=F(t,"state",8),g=F(t,"api",8);const c=a().currentConfig,i=a().defaults,u={maximumAnswerSecs:{title:el(),help:tl()},showAnswerTimer:{title:sl(),help:rl()},stopTimerOnAnswer:{title:nl(),help:al()}},h=Object.values(u);let P=j(),f=j();function D(O){s(P).show(),s(f).to(O)}ie(()=>(e(),vt),()=>{w(r,e().capAnswerTimeToSecs>600?ol():"")}),Ie(),me();var C=oe(()=>js());Fe(l,{get title(){return s(C)},children:(O,p)=>{We(O,{slotHost:U,get api(){return g()},children:(b,x)=>{var z=sd(),I=se(z);U(I,{children:(o,A)=>{De(o,{get value(){return e().capAnswerTimeToSecs},set value(k){X(c,_(e).capAnswerTimeToSecs=k,_(e))},get defaultValue(){return i.capAnswerTimeToSecs},min:1,max:7200,children:(k,y)=>{te(k,{$$events:{click:()=>D(Object.keys(u).indexOf("maximumAnswerSecs"))},children:(m,N)=>{Z();var R=K();L(()=>H(R,u.maximumAnswerSecs.title)),d(m,R)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=$(I,2);U(W,{children:(o,A)=>{Ve(o,{get warning(){return s(r)}})},$$slots:{default:!0}});var E=$(W,2);U(E,{children:(o,A)=>{var k=ed(),y=Q(k);je(y,{get value(){return e().showTimer},set value(m){X(c,_(e).showTimer=m,_(e))},get defaultValue(){return i.showTimer},children:(m,N)=>{te(m,{$$events:{click:()=>D(Object.keys(u).indexOf("showAnswerTimer"))},children:(R,S)=>{Z();var T=K();L(()=>H(T,u.showAnswerTimer.title)),d(R,T)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),M(k),d(o,k)},$$slots:{default:!0}});var B=$(E,2);U(B,{children:(o,A)=>{var k=td(),y=Q(k);je(y,{get value(){return e().stopTimerOnAnswer},set value(m){X(c,_(e).stopTimerOnAnswer=m,_(e))},get defaultValue(){return i.stopTimerOnAnswer},children:(m,N)=>{te(m,{$$events:{click:()=>D(Object.keys(u).indexOf("stopTimerOnAnswer"))},children:(R,S)=>{Z();var T=K();L(()=>H(T,u.stopTimerOnAnswer.title)),d(R,T)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),M(k),d(o,k)},$$slots:{default:!0}}),d(b,z)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(O,p)=>{var b=oe(()=>js());Qe(O,{get title(){return s(b)},get url(){return ue.DeckOptions.timer},slot:"tooltip",helpSections:h,$$events:{mount:x=>{w(P,x.detail.modal),w(f,x.detail.carousel)}}})}}}),ve()}var nd=Y('<tr><td class="svelte-9pdz93"> </td><td class="svelte-9pdz93"><input type="radio"></td><td class="svelte-9pdz93"><input type="radio"></td><td class="svelte-9pdz93"><input type="radio"></td></tr>'),ad=Y('<div class="easy-days-settings svelte-9pdz93"><table class="svelte-9pdz93"><thead><tr><th class="svelte-9pdz93"></th><th class="svelte-9pdz93"> </th><th class="svelte-9pdz93"> </th><th class="svelte-9pdz93"> </th></tr></thead><tbody></tbody></table></div>');function od(l,t){ge(t,!1);const n=ke(),e=()=>de(c,"$config",n),r=[];let a=F(t,"state",8),g=F(t,"api",8);const c=a().currentConfig,i=a().defaults,u=[ll(),il(),cl(),dl(),ul(),fl(),gl()];ie(()=>e(),()=>{e().easyDaysPercentages.length!==7&&X(c,_(e).easyDaysPercentages=i.easyDaysPercentages,_(e))}),Ie(),me();var h=oe(()=>ml());Fe(l,{get title(){return s(h)},children:(P,f)=>{We(P,{slotHost:U,get api(){return g()},children:(D,C)=>{U(D,{children:(O,p)=>{var b=ad(),x=Q(b),z=Q(x),I=Q(z),W=$(Q(I)),E=Q(W);L(()=>H(E,vl())),M(W);var B=$(W),o=Q(B);L(()=>H(o,$l())),M(B);var A=$(B),k=Q(A);L(()=>H(k,pl())),M(A),M(I),M(z);var y=$(z);Ot(y,5,()=>u,as,(m,N,R)=>{let S=R;var T=nd(),J=Q(T),re=Q(J);M(J);var G=$(J),V=Q(G);Ze(V),V.value=(V.__value=1)==null?"":1,M(G);var $e=$(G),pe=Q($e);Ze(pe),pe.value=(pe.__value=.5)==null?"":.5,M($e);var fe=$($e),xe=Q(fe);Ze(xe),xe.value=(xe.__value=0)==null?"":0,M(fe),M(T),L(()=>{H(re,s(N)),qt(V,e().easyDaysPercentages[S]===1),qt(pe,e().easyDaysPercentages[S]===.5),qt(xe,e().easyDaysPercentages[S]===0)}),Qt(r,[R],V,()=>e().easyDaysPercentages[S],ae=>X(c,_(e).easyDaysPercentages[S]=ae,_(e))),Qt(r,[R],pe,()=>e().easyDaysPercentages[S],ae=>X(c,_(e).easyDaysPercentages[S]=ae,_(e))),Qt(r,[R],xe,()=>e().easyDaysPercentages[S],ae=>X(c,_(e).easyDaysPercentages[S]=ae,_(e))),d(m,T)}),M(y),M(x),M(b),d(O,b)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),ve()}var ld=Y("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),id=Y('<!> <div class="deck-options-page svelte-htbfcn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1);function cd(l,t){ge(t,!1);const n=ke(),e=()=>de(a,"$addons",n);let r=F(t,"state",8);const a=r().addonComponents;function g(){return r().currentAuxData}function c(o){st(a,[...e(),o])}function i(o,A){st(a,[...e(),{component:Vc,html:o,mounted:A}])}const u={},h={},P={},f={},D={},C={},O={},p={},b={},x={};let z=j();me();var I=id(),W=se(I);mc(W,{get state(){return r()},$$events:{presetchange(...o){var A;(A=s(z))==null||A.apply(this,o)}}});var E=$(W,2),B=Q(E);return Oe(B,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),gn(B.lastChild,{breakpoint:"sm",class:"container-columns",children:(o,A)=>{var k=ld(),y=se(k),m=Q(y);_e(m,{class:"row-columns",children:(ae,he)=>{_c(ae,{get state(){return r()},api:h,get onPresetChange(){return s(z)},set onPresetChange(Le){w(z,Le)},$$legacy:!0})},$$slots:{default:!0}});var N=$(m,2);_e(N,{class:"row-columns",children:(ae,he)=>{Zc(ae,{get state(){return r()},api:P})},$$slots:{default:!0}});var R=$(N,2);_e(R,{class:"row-columns",children:(ae,he)=>{Yc(ae,{get state(){return r()},api:f})},$$slots:{default:!0}});var S=$(R,2);_e(S,{class:"row-columns",children:(ae,he)=>{Pc(ae,{get state(){return r()},api:C})},$$slots:{default:!0}});var T=$(S,2);_e(T,{class:"row-columns",children:(ae,he)=>{Nc(ae,{get state(){return r()},api:{}})},$$slots:{default:!0}}),M(y);var J=$(y,2),re=Q(J);_e(re,{class:"row-columns",children:(ae,he)=>{nc(ae,{get state(){return r()},api:D})},$$slots:{default:!0}});var G=$(re,2);_e(G,{class:"row-columns",children:(ae,he)=>{qi(ae,{get state(){return r()},api:p})},$$slots:{default:!0}});var V=$(G,2);_e(V,{class:"row-columns",children:(ae,he)=>{rd(ae,{get state(){return r()},api:O})},$$slots:{default:!0}});var $e=$(V,2);_e($e,{class:"row-columns",children:(ae,he)=>{sc(ae,{get state(){return r()},api:O})},$$slots:{default:!0}});var pe=$($e,2);be(pe,()=>e().length,ae=>{_e(ae,{class:"row-columns",children:(he,Le)=>{gi(he,{get state(){return r()}})},$$slots:{default:!0}})});var fe=$(pe,2);_e(fe,{class:"row-columns",children:(ae,he)=>{od(ae,{get state(){return r()},api:x})},$$slots:{default:!0}});var xe=$(fe,2);_e(xe,{class:"row-columns",children:(ae,he)=>{Wi(ae,{get state(){return r()},api:b})},$$slots:{default:!0}}),M(J),d(o,k)},$$slots:{default:!0}}),M(B),M(E),d(l,I),Re(t,"auxData",g),Re(t,"addSvelteAddon",c),Re(t,"addHtmlAddon",i),Re(t,"options",u),Re(t,"dailyLimits",h),Re(t,"newOptions",P),Re(t,"lapseOptions",f),Re(t,"buryOptions",D),Re(t,"displayOrder",C),Re(t,"timerOptions",O),Re(t,"audioOptions",p),Re(t,"advancedOptions",b),Re(t,"easyDays",x),ve({auxData:g,addSvelteAddon:c,addHtmlAddon:i,options:u,dailyLimits:h,newOptions:P,lapseOptions:f,buryOptions:D,displayOrder:C,timerOptions:O,audioOptions:p,advancedOptions:b,easyDays:x})}function qd(l,t){ge(t,!1);let n=F(t,"data",8),e=j();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await mr(),qs()&&(await n().state.isModified()?Kt("confirmDiscardChanges"):Kt("_close"))},rs(()=>{globalThis.$deckOptions=new Promise((r,a)=>{r(s(e))}),n().state.resolveOriginalConfigs(),qs()&&Kt("deckOptionsReady")}),me(),wt(cd(l,{get state(){return n().state},$$legacy:!0}),r=>w(e,r),()=>s(e)),ve()}export{qd as component,Gd as universal};
