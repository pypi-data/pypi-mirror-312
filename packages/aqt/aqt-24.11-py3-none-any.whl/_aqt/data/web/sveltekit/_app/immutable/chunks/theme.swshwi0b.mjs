import{h as S,g as H,m as re,b as ae,H as ne,f as V,i as N,c as C,o as te,E as I,p as k,q as O,u as se,v as X,w as le,x as ie}from"./disclose-version.CXWUuFGG.mjs";import{c as fe,B as oe,r as Z,k as G,o as ue,a4 as ve,q as ce,D as z,s as K,m as _e,e as Q,a5 as de,a6 as he,a7 as pe,w as Ee,S as me,x as ge}from"./runtime.BJSnJeWl.mjs";import{r as Te}from"./runtime-require.AM6bqlff.mjs";import{r as Ae,g as ye}from"./index.BB25h7Qo.mjs";let L=null;function He(n,e){return e}function Se(n,e,r,u){for(var i=[],v=e.length,f=0;f<v;f++)de(e[f].e,i,!0);var p=v>0&&i.length===0&&r!==null;if(p){var E=r.parentNode;se(E),E.append(r),u.clear(),y(n,e[0].prev,e[v-1].next)}he(i,()=>{for(var h=0;h<v;h++){var c=e[h];p||(u.delete(c.k),y(n,c.prev,c.next)),pe(c.e,!p)}})}function Ne(n,e,r,u,i,v=null){var f=n,p={flags:e,items:new Map,first:null},E=(e&X)!==0;if(E){var h=n;f=S?H(h.firstChild):h.appendChild(re())}S&&ae();var c=null;fe(()=>{var t=r(),_=oe(t)?t:t==null?[]:Array.from(t),s=_.length,o=p.flags;o&O&&!Ee(_)&&!(me in _)&&!(ge in _)&&(o^=O,o&ie&&!(o&I)&&(o^=I));let d=!1;if(S){var g=f.data===ne;g!==(s===0)&&(f=V(),H(f),N(!1),d=!0)}if(S){for(var T=null,m,a=0;a<s;a++){if(C.nodeType===8&&C.data===te){f=C,d=!0,N(!1);break}var l=_[a],b=u(l,a);m=J(C,p,T,null,l,b,a,i,o),p.items.set(b,m),T=m}s>0&&H(V())}S||xe(_,p,f,i,o,u),v!==null&&(s===0?c?Z(c):c=G(()=>v(f)):c!==null&&ue(c,()=>{c=null})),d&&N(!0)}),S&&(f=C)}function xe(n,e,r,u,i,v){var P,Y,q,B;var f=(i&le)!==0,p=(i&(I|k))!==0,E=n.length,h=e.items,c=e.first,t=c,_=new Set,s=null,o=new Set,d=[],g=[],T,m,a,l;if(f)for(l=0;l<E;l+=1)T=n[l],m=v(T,l),a=h.get(m),a!==void 0&&((P=a.a)==null||P.measure(),o.add(a));for(l=0;l<E;l+=1){if(T=n[l],m=v(T,l),a=h.get(m),a===void 0){var b=t?t.e.nodes.start:r;s=J(b,e,s,s===null?e.first:s.next,T,m,l,u,i),h.set(m,s),d=[],g=[],t=s.next;continue}if(p&&Ce(a,T,l,i),a.e.f&ve&&(Z(a.e),f&&((Y=a.a)==null||Y.unfix(),o.delete(a))),a!==t){if(_.has(a)){if(d.length<g.length){var R=g[0],A;s=R.prev;var M=d[0],w=d[d.length-1];for(A=0;A<d.length;A+=1)U(d[A],R,r);for(A=0;A<g.length;A+=1)_.delete(g[A]);y(e,M.prev,w.next),y(e,s,M),y(e,w,R),t=R,s=w,l-=1,d=[],g=[]}else _.delete(a),U(a,t,r),y(e,a.prev,a.next),y(e,a,s===null?e.first:s.next),y(e,s,a),s=a;continue}for(d=[],g=[];t!==null&&t.k!==m;)_.add(t),g.push(t),t=t.next;if(t===null)continue;a=t}d.push(a),s=a,t=a.next}const x=Array.from(_);for(;t!==null;)x.push(t),t=t.next;var D=x.length;if(D>0){var ee=i&X&&E===0?r:null;if(f){for(l=0;l<D;l+=1)(q=x[l].a)==null||q.measure();for(l=0;l<D;l+=1)(B=x[l].a)==null||B.fix()}Se(e,x,ee,h)}f&&ce(()=>{var F;for(a of o)(F=a.a)==null||F.apply()}),z.first=e.first&&e.first.e,z.last=s&&s.e}function Ce(n,e,r,u){u&I&&K(n.v,e),u&k?K(n.i,r):n.i=r}function J(n,e,r,u,i,v,f,p,E){var h=L;try{var c=(E&I)!==0,t=(E&O)===0,_=c?t?_e(i):Q(i):i,s=E&k?Q(f):f,o={i:s,v:_,k:v,a:null,e:null,prev:r,next:u};return L=o,o.e=G(()=>p(n,_,s),S),o.e.prev=r&&r.e,o.e.next=u&&u.e,r===null?e.first=o:(r.next=o,r.e.next=o.e),u!==null&&(u.prev=o,u.e.prev=o.e),o}finally{L=h}}function U(n,e,r){for(var u=n.next?n.next.e.nodes.start:r,i=e?e.e.nodes.start:r,v=n.e.nodes.start;v!==u;){var f=v.nextSibling;i.before(v),v=f}}function y(n,e,r){e===null?n.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Le(n,e,r,u){const i=n.style,v=i.getPropertyValue(e);r==null?v!==""&&i.removeProperty(e):v!==r&&i.setProperty(e,r,"")}function W(){return{isDark:document.documentElement.classList.contains("night-mode")}}let $=null;const j=Ae(W(),n=>{$=n});ye(j);const Ie=new MutationObserver((n,e)=>{$(W())});Ie.observe(document.documentElement,{attributeFilter:["class"]});Te("anki/theme",{pageTheme:j});export{Ne as e,He as i,j as p,Le as s};
