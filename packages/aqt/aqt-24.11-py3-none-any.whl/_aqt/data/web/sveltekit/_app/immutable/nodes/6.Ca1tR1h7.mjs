import{r as Y,a as L,d as J,e as j,s as x,F as E,M as Jt,D as At,n as we}from"../chunks/disclose-version.CXWUuFGG.mjs";import{p as ct,l as K,a as vt,t as lt,b as ut,N as ot,g as m,s as C,m as N,ah as ce,a1 as ua,E as Kt,ag as St,a0 as be}from"../chunks/runtime.BJSnJeWl.mjs";import{i as ft}from"../chunks/lifecycle.DW1_rEFA.mjs";import{p as O,i as Mt}from"../chunks/props.fkJSEmZ6.mjs";import{s as Dt,a as pt,m as Ze,b as se}from"../chunks/store.CAPRemx4.mjs";import{f6 as ta,f7 as xe,f8 as _a,f9 as Xa,fa as Te,fb as ea,aq as it,v as Pt,fc as Ka,fd as Ja,fe as Re,ff as Se,fg as aa,fh as Za,fi as tn,fj as en,fk as an,fl as nn,ej as ue,fm as rn,fn as sn,fo as on,fp as wa,fq as ln,fr as cn,fs as un,ft as ka,fu as fn,fv as dn,fw as gn,fx as vn,fy as hn,fz as mn,fA as pn,fB as yn,fC as We,fD as bn,fE as $n,fF as xn,fG as _n,fH as wn,fI as kn,fJ as Dn,fK as An,fL as Mn,fM as Cn,t as Tn,fN as Rn,fO as Sn,fP as Pn,fQ as Fn,fR as Bn,fS as Nn,fT as Yn,fU as qn,fV as jn,fW as Ln,fX as On,fY as zn,fZ as Vn,f_ as Gn,f$ as In,g0 as En,g1 as Hn,g2 as Qn,g3 as fa,g4 as Wn,g5 as Un,g6 as Xn,g7 as Kn,g8 as Jn,g9 as Zn,ga as tr,ec as Da,gb as er,gc as ar,gd as nr,ge as rr,gf as sr,gg as or,gh as ir,gi as lr,gj as cr,gk as ur,gl as fr,gm as dr,gn as gr,go as Ve,gp as Ge,gq as Ie,gr as vr,gs as hr,gt as mr,gu as pr,gv as yr,gw as br,gx as $r,gy as xr,U as _r}from"../chunks/runtime-require.B9u3s4Mi.mjs";import{c as Bt,a as da}from"../chunks/index-client.D9hOaSri.mjs";import{e as na,t as Ft,M as ke,Y as wr,s as kr}from"../chunks/time.c7TpusB-.mjs";import{M as ga,O as Ue,P as Dr,Q as Ar,R as Mr,A as De,v as Aa,S as Wt,T as Ma,U as Ca,V as Ta,W as Cr,X as Tr,Y as Ra,Z as U,_ as Rr,$ as Sr,a0 as Pr,a1 as Sa,E as Fr,a2 as Nt,a3 as q,B as at,a4 as gt,a5 as xt,a6 as dt,y as Zt,z as Rt,C as Pe,D as Fe,a7 as ra,F as ge,G as ve,H as he,K as Be,J as me,N as pe,L as te,I as _t,l as Ht,k as Br,f as oe,m as Nr,a8 as Yr,a9 as qr,o as jr,aa as Pa}from"../chunks/HoverColumns.DcrenFWk.mjs";import{m as Ae,I as Ct}from"../chunks/InputBox.DOsvhiCa.mjs";import{i as Lr,I as va,c as ee,C as sa,T as qt}from"../chunks/TableData.SXvMF5vK.mjs";import{b as mt,c as oa,a as Or}from"../chunks/input.DyT1M9sw.mjs";import{b as ae}from"../chunks/this.C9pg2j_S.mjs";import{b as X,c as zr,e as Vr}from"../chunks/utils.D-97yPDv.mjs";import{s as Ot,e as fe}from"../chunks/render.CQvFnAiW.mjs";import{j as Gr,a5 as zt,a6 as Ir,a7 as Er,s as Hr,d as Qr,a8 as Wr}from"../chunks/backend.AWOyeTAw.mjs";import{e as Ne,i as Ye,p as Ur}from"../chunks/theme.BMK9KvBa.mjs";import{c as Xr}from"../chunks/bridgecommand.DCJGkGSy.mjs";import{w as Xe}from"../chunks/index.BB25h7Qo.mjs";import{a as Kr}from"../chunks/await.BrCVEzOe.mjs";function Jr(t,e){let a=0;for(let r of t)r!=null&&(r=+r)>=r&&++a;return a}function ia(t,e){var a=0,r=0;return Float64Array.from(t,e===void 0?n=>a+=+n||0:n=>a+=+e(n,r++,t)||0)}function Xt(t,e){let a,r;if(e===void 0)for(const n of t)n!=null&&(a===void 0?n>=n&&(a=r=n):(a>n&&(a=n),r<n&&(r=n)));else{let n=-1;for(let o of t)(o=e(o,++n,t))!=null&&(a===void 0?o>=o&&(a=r=o):(a>o&&(a=o),r<o&&(r=o)))}return[a,r]}function Zr(t=ga){if(t===ga)return Fa;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,a)=>{const r=t(e,a);return r||r===0?r:(t(a,a)===0)-(t(e,e)===0)}}function Fa(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var ts=Array.prototype,es=ts.slice;function Ee(t){return()=>t}function as(t,e,a){let r;for(;;){const n=Ue(t,e,a);if(n===r||n===0||!isFinite(n))return[t,e];n>0?(t=Math.floor(t/n)*n,e=Math.ceil(e/n)*n):n<0&&(t=Math.ceil(t*n)/n,e=Math.floor(e*n)/n),r=n}}function ns(t){return Math.max(1,Math.ceil(Math.log(Jr(t))/Math.LN2)+1)}function Yt(){var t=Lr,e=Xt,a=ns;function r(n){Array.isArray(n)||(n=Array.from(n));var o,u=n.length,s,d,c=new Array(u);for(o=0;o<u;++o)c[o]=t(n[o],o,n);var f=e(c),i=f[0],l=f[1],v=a(c,i,l);if(!Array.isArray(v)){const p=l,w=+v;if(e===Xt&&([i,l]=as(i,l,w)),v=Dr(i,l,w),v[0]<=i&&(d=Ue(i,l,w)),v[v.length-1]>=l)if(p>=l&&e===Xt){const M=Ue(i,l,w);isFinite(M)&&(M>0?l=(Math.floor(l/M)+1)*M:M<0&&(l=(Math.ceil(l*-M)+1)/-M))}else v.pop()}for(var b=v.length,$=0,g=b;v[$]<=i;)++$;for(;v[g-1]>l;)--g;($||g<b)&&(v=v.slice($,g),b=g-$);var y=new Array(b+1),h;for(o=0;o<=b;++o)h=y[o]=[],h.x0=o>0?v[o-1]:i,h.x1=o<b?v[o]:l;if(isFinite(d)){if(d>0)for(o=0;o<u;++o)(s=c[o])!=null&&i<=s&&s<=l&&y[Math.min(b,Math.floor((s-i)/d))].push(n[o]);else if(d<0){for(o=0;o<u;++o)if((s=c[o])!=null&&i<=s&&s<=l){const p=Math.floor((i-s)*d);y[Math.min(b,p+(v[p]<=s))].push(n[o])}}}else for(o=0;o<u;++o)(s=c[o])!=null&&i<=s&&s<=l&&y[Ar(v,s,0,b)].push(n[o]);return y}return r.value=function(n){return arguments.length?(t=typeof n=="function"?n:Ee(n),r):t},r.domain=function(n){return arguments.length?(e=typeof n=="function"?n:Ee([n[0],n[1]]),r):e},r.thresholds=function(n){return arguments.length?(a=typeof n=="function"?n:Ee(Array.isArray(n)?es.call(n):n),r):a},r}function Ba(t,e,a=0,r=1/0,n){if(e=Math.floor(e),a=Math.floor(Math.max(0,a)),r=Math.floor(Math.min(t.length-1,r)),!(a<=e&&e<=r))return t;for(n=n===void 0?Fa:Zr(n);r>a;){if(r-a>600){const d=r-a+1,c=e-a+1,f=Math.log(d),i=.5*Math.exp(2*f/3),l=.5*Math.sqrt(f*i*(d-i)/d)*(c-d/2<0?-1:1),v=Math.max(a,Math.floor(e-c*i/d+l)),b=Math.min(r,Math.floor(e+(d-c)*i/d+l));Ba(t,e,v,b,n)}const o=t[e];let u=a,s=r;for(ie(t,a,e),n(t[r],o)>0&&ie(t,a,r);u<s;){for(ie(t,u,s),++u,--s;n(t[u],o)<0;)++u;for(;n(t[s],o)>0;)--s}n(t[a],o)===0?ie(t,a,s):(++s,ie(t,s,r)),s<=e&&(a=s+1),e<=s&&(r=s-1)}return t}function ie(t,e,a){const r=t[e];t[e]=t[a],t[a]=r}function ha(t,e,a){if(t=Float64Array.from(Mr(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Ae(t);if(e>=1)return De(t);var r,n=(r-1)*e,o=Math.floor(n),u=De(Ba(t,o).subarray(0,o+1)),s=Ae(t.subarray(o+1));return u+(s-u)*(n-o)}}function rs(t,e){let a=0,r=0;for(let n of t)n!=null&&(n=+n)>=n&&(++a,r+=n);if(a)return r/a}function ss(t,e,a){t=+t,e=+e,a=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+a;for(var r=-1,n=Math.max(0,Math.ceil((e-t)/a))|0,o=new Array(n);++r<n;)o[r]=t+r*a;return o}const ma=Symbol("implicit");function Na(){var t=new va,e=[],a=[],r=ma;function n(o){let u=t.get(o);if(u===void 0){if(r!==ma)return r;t.set(o,u=e.push(o)-1)}return a[u%a.length]}return n.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new va;for(const u of o)t.has(u)||t.set(u,e.push(u)-1);return n},n.range=function(o){return arguments.length?(a=Array.from(o),n):a.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return Na(e,a).unknown(r)},Aa.apply(n,arguments),n}function Me(){var t=Na().unknown(void 0),e=t.domain,a=t.range,r=0,n=1,o,u,s=!1,d=0,c=0,f=.5;delete t.unknown;function i(){var l=e().length,v=n<r,b=v?n:r,$=v?r:n;o=($-b)/Math.max(1,l-d+c*2),s&&(o=Math.floor(o)),b+=($-b-o*(l-d))*f,u=o*(1-d),s&&(b=Math.round(b),u=Math.round(u));var g=ss(l).map(function(y){return b+o*y});return a(v?g.reverse():g)}return t.domain=function(l){return arguments.length?(e(l),i()):e()},t.range=function(l){return arguments.length?([r,n]=l,r=+r,n=+n,i()):[r,n]},t.rangeRound=function(l){return[r,n]=l,r=+r,n=+n,s=!0,i()},t.bandwidth=function(){return u},t.step=function(){return o},t.round=function(l){return arguments.length?(s=!!l,i()):s},t.padding=function(l){return arguments.length?(d=Math.min(1,c=+l),i()):d},t.paddingInner=function(l){return arguments.length?(d=Math.min(1,l),i()):d},t.paddingOuter=function(l){return arguments.length?(c=+l,i()):c},t.align=function(l){return arguments.length?(f=Math.max(0,Math.min(1,l)),i()):f},t.copy=function(){return Me(e(),[r,n]).round(s).paddingInner(d).paddingOuter(c).align(f)},Aa.apply(i(),arguments)}function pa(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function os(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function is(t){return t<0?-t*t:t*t}function ls(t){var e=t(Wt,Wt),a=1;function r(){return a===1?t(Wt,Wt):a===.5?t(os,is):t(pa(a),pa(1/a))}return e.exponent=function(n){return arguments.length?(a=+n,r()):a},Ma(e)}function Ya(){var t=0,e=1,a,r,n,o,u=Wt,s=!1,d;function c(i){return i==null||isNaN(i=+i)?d:u(n===0?.5:(i=(o(i)-a)*n,s?Math.max(0,Math.min(1,i)):i))}c.domain=function(i){return arguments.length?([t,e]=i,a=o(t=+t),r=o(e=+e),n=a===r?0:1/(r-a),c):[t,e]},c.clamp=function(i){return arguments.length?(s=!!i,c):s},c.interpolator=function(i){return arguments.length?(u=i,c):u};function f(i){return function(l){var v,b;return arguments.length?([v,b]=l,u=i(v,b),c):[u(0),u(1)]}}return c.range=f(Ta),c.rangeRound=f(Cr),c.unknown=function(i){return arguments.length?(d=i,c):d},function(i){return o=i,a=i(t),r=i(e),n=a===r?0:1/(r-a),c}}function qa(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function $t(){var t=Ma(Ya()(Wt));return t.copy=function(){return qa(t,$t())},Ca.apply(t,arguments)}function ja(){var t=ls(Ya());return t.copy=function(){return qa(t,ja()).exponent(t.exponent())},Ca.apply(t,arguments)}function cs(){return ja.apply(null,arguments).exponent(.5)}const ne=t=>Tr(t[t.length-1]);var us=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ee);const qe=ne(us);var La=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ee);const je=ne(La);var Ke=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ee);const Je=ne(Ke);var fs=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ee);const ds=ne(fs);var Oa=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ee);const gs=ne(Oa);var za=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ee);const vs=ne(za),ya=Math.abs,ht=Math.atan2,Lt=Math.cos,hs=Math.max,He=Math.min,Tt=Math.sin,Ut=Math.sqrt,bt=1e-12,de=Math.PI,Ce=de/2,_e=2*de;function ms(t){return t>1?0:t<-1?de:Math.acos(t)}function ba(t){return t>=1?Ce:t<=-1?-Ce:Math.asin(t)}function ps(t){return t.innerRadius}function ys(t){return t.outerRadius}function bs(t){return t.startAngle}function $s(t){return t.endAngle}function xs(t){return t&&t.padAngle}function _s(t,e,a,r,n,o,u,s){var d=a-t,c=r-e,f=u-n,i=s-o,l=i*d-f*c;if(!(l*l<bt))return l=(f*(e-o)-i*(t-n))/l,[t+l*d,e+l*c]}function $e(t,e,a,r,n,o,u){var s=t-a,d=e-r,c=(u?o:-o)/Ut(s*s+d*d),f=c*d,i=-c*s,l=t+f,v=e+i,b=a+f,$=r+i,g=(l+b)/2,y=(v+$)/2,h=b-l,p=$-v,w=h*h+p*p,M=n-o,F=l*$-b*v,_=(p<0?-1:1)*Ut(hs(0,M*M*w-F*F)),k=(F*p-h*_)/w,D=(-F*h-p*_)/w,S=(F*p+h*_)/w,P=(-F*h+p*_)/w,B=k-g,A=D-y,T=S-g,V=P-y;return B*B+A*A>T*T+V*V&&(k=S,D=P),{cx:k,cy:D,x01:-f,y01:-i,x11:k*(n/M-1),y11:D*(n/M-1)}}function ws(){var t=ps,e=ys,a=U(0),r=null,n=bs,o=$s,u=xs,s=null,d=Ra(c);function c(){var f,i,l=+t.apply(this,arguments),v=+e.apply(this,arguments),b=n.apply(this,arguments)-Ce,$=o.apply(this,arguments)-Ce,g=ya($-b),y=$>b;if(s||(s=f=d()),v<l&&(i=v,v=l,l=i),!(v>bt))s.moveTo(0,0);else if(g>_e-bt)s.moveTo(v*Lt(b),v*Tt(b)),s.arc(0,0,v,b,$,!y),l>bt&&(s.moveTo(l*Lt($),l*Tt($)),s.arc(0,0,l,$,b,y));else{var h=b,p=$,w=b,M=$,F=g,_=g,k=u.apply(this,arguments)/2,D=k>bt&&(r?+r.apply(this,arguments):Ut(l*l+v*v)),S=He(ya(v-l)/2,+a.apply(this,arguments)),P=S,B=S,A,T;if(D>bt){var V=ba(D/l*Tt(k)),H=ba(D/v*Tt(k));(F-=V*2)>bt?(V*=y?1:-1,w+=V,M-=V):(F=0,w=M=(b+$)/2),(_-=H*2)>bt?(H*=y?1:-1,h+=H,p-=H):(_=0,h=p=(b+$)/2)}var z=v*Lt(h),Q=v*Tt(h),tt=l*Lt(M),I=l*Tt(M);if(S>bt){var Z=v*Lt(p),yt=v*Tt(p),nt=l*Lt(w),wt=l*Tt(w),rt;if(g<de)if(rt=_s(z,Q,nt,wt,Z,yt,tt,I)){var et=z-rt[0],kt=Q-rt[1],jt=Z-rt[0],Gt=yt-rt[1],R=1/Tt(ms((et*jt+kt*Gt)/(Ut(et*et+kt*kt)*Ut(jt*jt+Gt*Gt)))/2),W=Ut(rt[0]*rt[0]+rt[1]*rt[1]);P=He(S,(l-W)/(R-1)),B=He(S,(v-W)/(R+1))}else P=B=0}_>bt?B>bt?(A=$e(nt,wt,z,Q,v,B,y),T=$e(Z,yt,tt,I,v,B,y),s.moveTo(A.cx+A.x01,A.cy+A.y01),B<S?s.arc(A.cx,A.cy,B,ht(A.y01,A.x01),ht(T.y01,T.x01),!y):(s.arc(A.cx,A.cy,B,ht(A.y01,A.x01),ht(A.y11,A.x11),!y),s.arc(0,0,v,ht(A.cy+A.y11,A.cx+A.x11),ht(T.cy+T.y11,T.cx+T.x11),!y),s.arc(T.cx,T.cy,B,ht(T.y11,T.x11),ht(T.y01,T.x01),!y))):(s.moveTo(z,Q),s.arc(0,0,v,h,p,!y)):s.moveTo(z,Q),!(l>bt)||!(F>bt)?s.lineTo(tt,I):P>bt?(A=$e(tt,I,Z,yt,l,-P,y),T=$e(z,Q,nt,wt,l,-P,y),s.lineTo(A.cx+A.x01,A.cy+A.y01),P<S?s.arc(A.cx,A.cy,P,ht(A.y01,A.x01),ht(T.y01,T.x01),!y):(s.arc(A.cx,A.cy,P,ht(A.y01,A.x01),ht(A.y11,A.x11),!y),s.arc(0,0,l,ht(A.cy+A.y11,A.cx+A.x11),ht(T.cy+T.y11,T.cx+T.x11),y),s.arc(T.cx,T.cy,P,ht(T.y11,T.x11),ht(T.y01,T.x01),!y))):s.arc(0,0,l,M,w,y)}if(s.closePath(),f)return s=null,f+""||null}return c.centroid=function(){var f=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+n.apply(this,arguments)+ +o.apply(this,arguments))/2-de/2;return[Lt(i)*f,Tt(i)*f]},c.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:U(+f),c):t},c.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:U(+f),c):e},c.cornerRadius=function(f){return arguments.length?(a=typeof f=="function"?f:U(+f),c):a},c.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:U(+f),c):r},c.startAngle=function(f){return arguments.length?(n=typeof f=="function"?f:U(+f),c):n},c.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:U(+f),c):o},c.padAngle=function(f){return arguments.length?(u=typeof f=="function"?f:U(+f),c):u},c.context=function(f){return arguments.length?(s=f==null?null:f,c):s},c}function la(t,e,a){var r=null,n=U(!0),o=null,u=Rr,s=null,d=Ra(c);t=typeof t=="function"?t:t===void 0?Sr:U(+t),e=typeof e=="function"?e:e===void 0?U(0):U(+e),a=typeof a=="function"?a:a===void 0?Pr:U(+a);function c(i){var l,v,b,$=(i=Sa(i)).length,g,y=!1,h,p=new Array($),w=new Array($);for(o==null&&(s=u(h=d())),l=0;l<=$;++l){if(!(l<$&&n(g=i[l],l,i))===y)if(y=!y)v=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),b=l-1;b>=v;--b)s.point(p[b],w[b]);s.lineEnd(),s.areaEnd()}y&&(p[l]=+t(g,l,i),w[l]=+e(g,l,i),s.point(r?+r(g,l,i):p[l],a?+a(g,l,i):w[l]))}if(h)return s=null,h+""||null}function f(){return Fr().defined(n).curve(u).context(o)}return c.x=function(i){return arguments.length?(t=typeof i=="function"?i:U(+i),r=null,c):t},c.x0=function(i){return arguments.length?(t=typeof i=="function"?i:U(+i),c):t},c.x1=function(i){return arguments.length?(r=i==null?null:typeof i=="function"?i:U(+i),c):r},c.y=function(i){return arguments.length?(e=typeof i=="function"?i:U(+i),a=null,c):e},c.y0=function(i){return arguments.length?(e=typeof i=="function"?i:U(+i),c):e},c.y1=function(i){return arguments.length?(a=i==null?null:typeof i=="function"?i:U(+i),c):a},c.lineX0=c.lineY0=function(){return f().x(t).y(e)},c.lineY1=function(){return f().x(t).y(a)},c.lineX1=function(){return f().x(r).y(e)},c.defined=function(i){return arguments.length?(n=typeof i=="function"?i:U(!!i),c):n},c.curve=function(i){return arguments.length?(u=i,o!=null&&(s=u(o)),c):u},c.context=function(i){return arguments.length?(i==null?o=s=null:s=u(o=i),c):o},c}function ks(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Ds(t){return t}function As(){var t=Ds,e=ks,a=null,r=U(0),n=U(_e),o=U(0);function u(s){var d,c=(s=Sa(s)).length,f,i,l=0,v=new Array(c),b=new Array(c),$=+r.apply(this,arguments),g=Math.min(_e,Math.max(-_e,n.apply(this,arguments)-$)),y,h=Math.min(Math.abs(g)/c,o.apply(this,arguments)),p=h*(g<0?-1:1),w;for(d=0;d<c;++d)(w=b[v[d]=d]=+t(s[d],d,s))>0&&(l+=w);for(e!=null?v.sort(function(M,F){return e(b[M],b[F])}):a!=null&&v.sort(function(M,F){return a(s[M],s[F])}),d=0,i=l?(g-c*p)/l:0;d<c;++d,$=y)f=v[d],w=b[f],y=$+(w>0?w*i:0)+p,b[f]={data:s[f],index:d,value:w,startAngle:$,endAngle:y,padAngle:h};return b}return u.value=function(s){return arguments.length?(t=typeof s=="function"?s:U(+s),u):t},u.sortValues=function(s){return arguments.length?(e=s,a=null,u):e},u.sort=function(s){return arguments.length?(a=s,e=null,u):a},u.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:U(+s),u):r},u.endAngle=function(s){return arguments.length?(n=typeof s=="function"?s:U(+s),u):n},u.padAngle=function(s){return arguments.length?(o=typeof s=="function"?s:U(+s),u):o},u}function $a(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function Va(t){this._context=t}Va.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$a(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$a(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ca(t){return new Va(t)}function Ms(t){return{daysAdded:Nt(t.added.added)}}function Cs(t,e){const a=`"added:${t}"`;if(t===1)return a;const r=`-"added:${e}"`;return`${a} AND ${r}`}function Ts(t,e,a,r){if(!t.daysAdded.size)return[null,[]];let o;switch(e){case q.Month:o=-31;break;case q.ThreeMonths:o=-90;break;case q.Year:o=-365;break;case q.AllTime:o=Ae(t.daysAdded.keys());break}const u=1,s=Math.min(70,Math.abs(o)),d=at().domain([o,u]),c=Yt().value(p=>p[0]).domain(d.domain()).thresholds(d.ticks(s))(t.daysAdded.entries()),f=xt;if(!gt(c,f))return[null,[]];const i=at().range([.7,.3]),l=$t(p=>je(i(p))).domain([u,o]),v=gt(c,f),b=Math.abs(o),$=Math.round(v/b),g=[{label:ta(),value:xe({cards:v})},{label:_a(),value:Xa({count:$})}];function y(p,w,M){const F=na(p.x0,p.x1),_=xe({cards:f(p)}),k=Te(),D=xe({cards:w});return`${F}:<br>${_}<br>${k}: ${D}`}function h(p){const w=Math.abs(p.x0)+1,M=Math.abs(p.x1)+1,F=Cs(w,M);a("search",{query:F})}return[{scale:d,bins:c,total:v,hoverText:y,onClick:r?h:null,colourScale:l,binValue:xt,showArea:!0},g]}var Rs=J('<label><input type="radio"> </label>'),Ss=J('<label><input type="radio"> </label> <label><input type="radio"> </label> <label><input type="radio"> </label> <!>',1);function ye(t,e){ct(e,!1);const a=[];let r=O(e,"revlogRange"),n=O(e,"graphRange",4),o=O(e,"followRevlog",0,!1);function u(D){D===dt.All?n(q.AllTime):n()===q.AllTime&&n(q.Year)}const s=Ft(1*ke),d=Ft(3*ke),c=Ft(1*wr),f=ea();K(()=>(ot(o()),ot(r())),()=>{o()&&u(r())}),vt(),ft();var i=Ss(),l=E(i),v=j(l);it(v);var b,$=x(v,!0);$.nodeValue=` ${s!=null?s:""}`,Y(l);var g=x(x(l,!0)),y=j(g);it(y);var h,p=x(y,!0);p.nodeValue=` ${d!=null?d:""}`,Y(g);var w=x(x(g,!0)),M=j(w);it(M);var F,_=x(M,!0);_.nodeValue=` ${c!=null?c:""}`,Y(w);var k=x(x(w,!0));Mt(k,()=>r()===dt.All,D=>{var S=Rs(),P=j(S);it(P);var B,A=x(P,!0);A.nodeValue=` ${f!=null?f:""}`,Y(S),lt(()=>{B!==(B=q.AllTime)&&(P.value=(P.__value=q.AllTime)==null?"":q.AllTime)}),mt(a,[],P,()=>(q.AllTime,n()),T=>n(T)),L(D,S)}),lt(()=>{b!==(b=q.Month)&&(v.value=(v.__value=q.Month)==null?"":q.Month),h!==(h=q.ThreeMonths)&&(y.value=(y.__value=q.ThreeMonths)==null?"":q.ThreeMonths),F!==(F=q.Year)&&(M.value=(M.__value=q.Year)==null?"":q.Year)}),mt(a,[],v,()=>(q.Month,n()),D=>n(D)),mt(a,[],y,()=>(q.ThreeMonths,n()),D=>n(D)),mt(a,[],M,()=>(q.Year,n()),D=>n(D)),L(t,i),ut()}const Ps="tick-odd",Ga="graph-element-clickable";function Fs(t,e,a){var y;const r=Zt(t),n=r.transition().duration(600),o=h=>X(h);if(a)Rt(r,!0);else{Rt(r,!1);return}const u=(y=a.binValue)!=null?y:h=>h.length,s=a.scale.range([e.marginLeft,e.width-e.marginRight]);r.select(".x-ticks").call(h=>{var p;return h.transition(n).call(Pe(s).ticks(7).tickSizeOuter(0).tickFormat((p=a.xTickFormat)!=null?p:o))}).attr("direction","ltr");const d=De(a.bins,h=>u(h)),c=at().range([e.height-e.marginBottom,e.marginTop]).domain([0,d]).nice();r.select(".y-ticks").call(h=>h.transition(n).call(Fe(c).ticks(e.height/50).tickSizeOuter(0).tickFormat(o))).attr("direction","ltr");function f(h){const p=Math.max(0,s(h.x1)-s(h.x0)-1);return p!=null?p:0}const i=h=>h.attr("width",f).transition(n).attr("x",p=>s(p.x0)).attr("y",p=>c(u(p))).attr("height",p=>c(0)-c(u(p))).attr("fill",p=>a.colourScale(p.x1));r.select("g.bars").selectAll("rect").data(a.bins).join(h=>h.append("rect").attr("rx",1).attr("x",p=>s(p.x0)).attr("y",c(0)).attr("height",0).call(i),h=>h.call(i),h=>h.call(p=>p.transition(n).attr("height",0).attr("y",c(0))));const l=a.bins.map(h=>u(h));l.unshift(0);const v=ia(l),b=c.copy().domain([0,a.total]).nice();a.showArea&&a.bins.length&&v.slice(-1)[0]&&(r.select(".y2-ticks").call(h=>h.transition(n).call(ra(b).ticks(e.height/50).tickSizeOuter(0).tickFormat(o))).attr("direction","ltr"),r.select("path.cumulative-overlay").datum(v).attr("d",la().curve(ca).x((h,p)=>s(p===0?a.bins[0].x0:a.bins[p-1].x1)).y0(e.height-e.marginBottom).y1(h=>b(h))));const $=a.bins.map((h,p)=>[h,v[p+1]]),g=r.select("g.hover-columns").selectAll("rect").data($).join("rect").attr("x",([h])=>s(h.x0)).attr("y",()=>c(d)).attr("width",([h])=>f(h)).attr("height",()=>c(0)-c(d)).on("mousemove",(h,[p,w])=>{const[M,F]=ge(h,document.body),_=a.showArea?w/a.total*100:0;ve(a.hoverText(p,w,_),M,F)}).on("mouseout",he);a.onClick&&g.filter(([h])=>h.length>0).attr("class",Ga).on("click",(h,[p])=>a.onClick(p))}var Bs=Jt('<svg><g class="bars"></g><!><!><!><!></svg>');function Vt(t,e){ct(e,!1);let a=O(e,"data",0,null);const r=te();let n=N(null);K(()=>(m(n),ot(a())),()=>{Fs(m(n),r,a())}),vt(),ft();var o=Bs();ae(o,i=>C(n,i),()=>m(n));var u=j(o),s=x(u);Be(s);var d=x(s);sa(d);var c=x(d);me(c,{bounds:r,$$legacy:!0});var f=x(c);pe(f,{bounds:r,$$legacy:!0}),Y(o),lt(()=>Pt(o,"viewBox",`0 0 ${r.width} ${r.height}`)),L(t,o),ut()}var Ns=J("<!> <!> <!>",1);function Ys(t,e){ct(e,!1);const a=Dt(),r=()=>pt(o(),"$prefs",a);let n=O(e,"sourceData",0,null),o=O(e,"prefs"),u=N(null),s=N([]),d=N(q.Month);const c=Bt();let f=N(null);const i=Ka(),l=Ja();K(()=>ot(n()),()=>{n()&&C(f,Ms(n()))}),K(()=>(m(f),m(u),m(s),m(d),r()),()=>{m(f)&&(()=>{const v=Ts(m(f),m(d),c,r().browserLinksSupported);return C(u,v[0]),C(s,v[1]),v})()}),vt(),ft(),_t(t,{title:i,subtitle:l,children:(v,b)=>{var $=Ns(),g=E($);Ct(g,{children:(p,w)=>{ye(p,{get graphRange(){return m(d)},set graphRange(M){C(d,M)},get revlogRange(){return dt.All},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var y=x(x(g,!0));Vt(y,{get data(){return m(u)},$$legacy:!0});var h=x(x(y,!0));qt(h,{get tableData(){return m(s)},$$legacy:!0}),L(v,$)},$$slots:{default:!0},$$legacy:!0}),ut()}function qs(t,e){const a=t.buttons;switch(e){case q.Month:return a.oneMonth;case q.ThreeMonths:return a.threeMonths;case q.Year:return a.oneYear;case q.AllTime:return a.allTime}}function js(t,e,a,r){const n=qs(a,r),o=[...n.learning.map((h,p)=>({buttonNum:p+1,group:"learning",count:h})),...n.young.map((h,p)=>({buttonNum:p+1,group:"young",count:h})),...n.mature.map((h,p)=>({buttonNum:p+1,group:"mature",count:h}))],u=h=>{const p=o.filter(_=>_.group==h),w=gt(p,_=>_.count),M=gt(p.filter(_=>_.buttonNum>1),_=>_.count),F=w?X(M/w*100):"0";return{total:w,correct:M,percent:F}},s=h=>{const p=u(h.group).total,w=h.count,M=p?X(w/p*100):"0";return`${X(w)} (${M}%)`},d=Math.max(...o.map(h=>h.count)),c=Zt(t),f=c.transition().duration(600);if(d)Rt(c,!0);else{Rt(c,!1);return}const i=Me().domain(["learning","young","mature"]).range([e.marginLeft,e.width-e.marginRight]);c.select(".x-ticks").call(h=>h.transition(f).call(Pe(i).tickFormat(p=>{let w;switch(p){case"learning":w=aa();break;case"young":w=Se();break;case"mature":default:w=Re();break}return`${w} ‎(${u(p).percent}%)`}).tickSizeOuter(0))).attr("direction","ltr");const l=Me().domain(["1","2","3","4"]).range([0,i.bandwidth()]).paddingOuter(1).paddingInner(.1),v=$t(qe).domain([1,4]),b=h=>X(h),$=at().range([e.height-e.marginBottom,e.marginTop]).domain([0,d]);c.select(".y-ticks").call(h=>h.transition(f).call(Fe($).ticks(e.height/50).tickSizeOuter(0).tickFormat(b))).attr("direction","ltr");const g=h=>h.attr("width",l.bandwidth()).attr("opacity",.8).transition(f).attr("x",p=>i(p.group)+l(p.buttonNum.toString())).attr("y",p=>$(p.count)).attr("height",p=>$(0)-$(p.count)).attr("fill",p=>v(p.buttonNum));c.select("g.bars").selectAll("rect").data(o).join(h=>h.append("rect").attr("rx",1).attr("x",p=>i(p.group)+l(p.buttonNum.toString())).attr("y",$(0)).attr("height",0).call(g),h=>h.call(g),h=>h.call(p=>p.transition(f).attr("height",0).attr("y",$(0))));function y(h){const p=Za(),w=tn(),M=en(u(h.group)),F=`${w}: ${s(h)}`;return`${p}: ${h.buttonNum}<br>${F}<br>${M}`}c.select("g.hover-columns").selectAll("rect").data(o).join("rect").attr("x",h=>i(h.group)+l(h.buttonNum.toString())).attr("y",()=>$(d)).attr("width",l.bandwidth()).attr("height",()=>$(0)-$(d)).on("mousemove",(h,p)=>{const[w,M]=ge(h,document.body);ve(y(p),w,M)}).on("mouseout",he)}var Ls=Jt('<!><svg><g class="bars"></g><!><!><!></svg>',1);function Os(t,e){ct(e,!1);let a=O(e,"sourceData",0,null),r=O(e,"revlogRange"),n=N(q.Year);const o=te();let u=N(null);const s=an(),d=nn();K(()=>(ot(a()),m(u),m(n)),()=>{a()&&js(m(u),o,a(),m(n))}),vt(),ft(),_t(t,{title:s,subtitle:d,children:(c,f)=>{var i=Ls(),l=E(i);Ct(l,{children:(h,p)=>{ye(h,{get graphRange(){return m(n)},set graphRange(w){C(n,w)},get revlogRange(){return r()},followRevlog:!0,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var v=x(l);ae(v,h=>C(u,h),()=>m(u));var b=j(v),$=x(b);Be($);var g=x($);me(g,{bounds:o,$$legacy:!0});var y=x(g);pe(y,{bounds:o,$$legacy:!0}),Y(v),lt(()=>Pt(v,"viewBox",`0 0 ${o.width} ${o.height}`)),L(c,i)},$$slots:{default:!0},$$legacy:!0}),ut()}function zs(t,e){const a=new Map(Object.entries(t.reviews.count).map(([o,u])=>[Number(o),u.learn+u.relearn+u.mature+u.filtered+u.young])),r=Gs(e),n=[];for(let o=0;o<7;o++)n.push((e+o)%7);return{reviewCount:a,timeFunction:r,weekdayLabels:n,rolloverHour:t.rolloverHour}}function Vs(t,e,a,r,n,o,u,s){const d=Zt(t),c=new Date,f=new Date;f.setFullYear(n);const i=at().range([e.marginLeft,e.width-e.marginRight]).domain([-1,53]),l=new Map;let v=0;for(const[_,k]of a.reviewCount.entries()){let D=Ht.offset(c,_);if(D=Br.offset(D,-1*a.rolloverHour),k>v&&(v=k),D.getFullYear()!=n)continue;const S=a.timeFunction.count(oe(D),D),P=Ht.count(a.timeFunction(D),D),B=Ht.count(oe(D),D);l.set(B,{day:_,count:k,weekNumber:S,weekDay:P,date:D})}if(v)Rt(d,!0);else{Rt(d,!1);return}const b=oe(f),$=new Date(c);$.setFullYear(c.getFullYear()-1);for(let _=0;_<365;_++){const k=Ht.offset(b,_);if(k>c||u==dt.Year&&k<$)continue;const D=Ht.count(oe(k),k);if(!l.has(D)){const S=a.timeFunction.count(oe(k),k),P=Ht.count(a.timeFunction(k),k);l.set(D,{day:D,count:0,weekNumber:S,weekDay:P,date:k})}}const g=Array.from(l.values()),y=at().range([.2,o?.8:1]),h=cs().domain([0,v]).interpolator(_=>je(y(_)));function p(_){const k=Vr(_.date,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),D=ue({reviews:_.count});return`${k}<br>${D}`}const w=e.height/10,M=o?"#333":"#ddd",F=Gr();d.select("g.weekdays").selectAll("text").data(a.weekdayLabels).join("text").text(_=>zr(_)).attr("width",i(-1)-2).attr("height",w-2).attr("x",i(1)-3).attr("y",(_,k)=>e.marginTop+k*w).attr("fill",o?"#ddd":"black").attr("dominant-baseline","hanging").attr("text-anchor","end").attr("font-size",F.includes("zh")?"xx-small":"small").attr("font-family","monospace").attr("direction","ltr").style("user-select","none").on("click",null).filter(_=>[zt.SUNDAY,zt.MONDAY,zt.FRIDAY,zt.SATURDAY].includes(_)).on("click",(_,k)=>s(k)),d.select("g.days").selectAll("rect").data(g).join("rect").attr("fill",M).attr("width",_=>i(_.weekNumber+1)-i(_.weekNumber)-2).attr("height",w-2).attr("x",_=>i(_.weekNumber+1)).attr("y",_=>e.marginTop+_.weekDay*w).on("mousemove",(_,k)=>{const[D,S]=ge(_,document.body);ve(p(k),D,S)}).on("mouseout",he).attr("class",_=>_.count>0?Ga:"").on("click",function(_,k){k.count>0&&r("search",{query:`"prop:rated=${k.day}"`})}).transition().duration(800).attr("fill",_=>_.count===0?M:h(_.count))}function Gs(t){switch(t){case zt.MONDAY:return jr;case zt.FRIDAY:return qr;case zt.SATURDAY:return Yr;default:return Nr}}var Is=J("<span><button>◄</button></span> <span> </span> <span><button>►</button></span>",1),Es=Jt('<!><svg><g class="weekdays"></g><g class="days"></g><!><!></svg>',1);function Hs(t,e){ct(e,!1);const a=Dt(),r=()=>pt(o(),"$prefs",a);let n=O(e,"sourceData"),o=O(e,"prefs"),u=O(e,"revlogRange"),s=O(e,"nightMode");const d=Bt();let c=N(null);const f=N(te());ce(f,m(f).height=120),ce(f,m(f).marginLeft=20),ce(f,m(f).marginRight=20);let i=N(null);const l=new Date().getFullYear();let v=N(0),b=N(l);const $=rn();K(()=>(ot(u()),m(v),m(b)),()=>{u()<dt.Year?C(v,l):u()===dt.Year?C(v,l-1):C(v,2e3),m(b)<m(v)&&C(b,m(v))}),K(()=>(ot(n()),m(c),r(),m(i),m(f),m(b),ot(s()),ot(u())),()=>{n()&&(C(c,zs(n(),r().calendarFirstDayOfWeek)),Vs(m(i),m(f),m(c),d,m(b),s(),u(),g=>Ze(o(),Kt(r).calendarFirstDayOfWeek=g,Kt(r))))}),vt(),ft(),_t(t,{title:$,children:(g,y)=>{var h=Es(),p=E(h);Ct(p,{children:(D,S)=>{var P=Is(),B=E(P),A=j(B);Y(B);var T=x(x(B,!0)),V=j(T);Y(T);var H=x(x(T,!0)),z=j(H);Y(H),lt(()=>{A.disabled=m(v)>=m(b),Ot(V,m(b)),z.disabled=m(b)>=l}),fe("click",A,()=>ua(b,-1),!1),fe("click",z,()=>ua(b),!1),L(D,P)},$$slots:{default:!0},$$legacy:!0});var w=x(p);ae(w,D=>C(i,D),()=>m(i));var M=j(w),F=x(M),_=x(F);me(_,{get bounds(){return m(f)},$$legacy:!0});var k=x(_);pe(k,{get bounds(){return m(f)},$$legacy:!0}),Y(w),lt(()=>Pt(w,"viewBox",`0 0 ${m(f).width} ${m(f).height}`)),L(g,h)},$$slots:{default:!0},$$legacy:!0}),ut()}const xa=[La[5][2],za[5][2],Oa[5][2],Ke[5][2],Ke[5][3],"#FFDC41","grey"];function Qs(t,e){const a=e?t.cardCounts.excludingInactive:t.cardCounts.includingInactive,r=e?'AND -("is:buried" OR "is:suspended")':"";return[[on(),a.newCards,!0,`"is:new"${r}`],[aa(),a.learn,!0,`(-"is:review" AND "is:learn")${r}`],[wa(),a.relearn,!0,`("is:review" AND "is:learn")${r}`],[Se(),a.young,!0,`("is:review" AND -"is:learn") AND "prop:ivl<21"${r}`],[Re(),a.mature,!0,`("is:review" -"is:learn") AND "prop:ivl>=21"${r}`],[ln(),a.suspended,e,'"is:suspended"'],[cn(),a.buried,e,'"is:buried"']]}function Ws(t,e){const a=Qs(t,e),r=X(gt(a,n=>n[1]));return{title:sn(),counts:a,totalCards:r}}function Us(t,e,a){const r=ia(a.counts,b=>b[1]),n=Array.from(r).map((b,$)=>{const g=a.counts[$];return{label:g[0],count:g[1],show:g[2],query:g[3],idx:$,total:b}}),o=Math.max(1,r.slice(-1)[0]),u=at().domain([0,o]),s=Zt(t),d=s.select(".counts"),c=As()(a.counts.map(b=>b[1])),f=e.height/2-e.marginTop-e.marginBottom,i=ws().innerRadius(0).outerRadius(f),l=s.transition().duration(600);return d.attr("transform",`translate(${f},${f+e.marginTop})`).selectAll("path").data(c).join(b=>b.append("path").attr("fill",($,g)=>xa[g]).attr("d",i),function(b){return b.call($=>$.transition(l).attrTween("d",g=>{const y=Ta({startAngle:0,endAngle:0},g);return h=>i(y(h))}))}),u.range([e.marginLeft,e.width-e.marginRight]),n.flatMap((b,$)=>{const g=X(b.count/o*100,2);return b.show?{label:b.label,count:X(b.count),percent:`${g}%`,colour:xa[$],query:b.query}:[]})}var Xs=J('<label><input type="checkbox"> </label>'),Ks=J('<button class="search-link svelte-o8j8wx"> </button>'),Js=J("<span> </span>"),Zs=J('<tr><td class="svelte-o8j8wx"><span>■&nbsp;</span> <!></td><td class="right svelte-o8j8wx"> </td><td class="right svelte-o8j8wx"> </td></tr>'),to=J('<!> <div class="counts-outer svelte-o8j8wx"><div class="svg-container svelte-o8j8wx"><svg class="svelte-o8j8wx"><g class="counts"></g></svg></div> <div class="counts-table svelte-o8j8wx"><table class="svelte-o8j8wx"><tbody><!><tr><td class="svelte-o8j8wx"><span style="visibility: hidden;">■</span> </td><td class="right svelte-o8j8wx"> </td><td class="svelte-o8j8wx"></td></tr></tbody></table></div></div>',1);function eo(t,e){ct(e,!1);const a=Dt(),r=()=>pt(o(),"$prefs",a);let n=O(e,"sourceData"),o=O(e,"prefs");const u=Bt();let s=N(null);const d=N(te());ce(d,m(d).width=225),ce(d,m(d).marginBottom=0);let c=N(null),f=N(null);const i=un(),l=ka();K(()=>(m(c),ot(n()),r(),m(s),m(d)),()=>{C(c,Ws(n(),r().cardCountsSeparateInactive)),C(f,Us(m(s),m(d),m(c)))}),vt(),ft(),_t(t,{get title(){return m(c).title},children:(v,b)=>{var $=to(),g=E($);Ct(g,{children:(T,V)=>{var H=Xs(),z=j(H);it(z);var Q=x(z,!0);Q.nodeValue=` ${i!=null?i:""}`,Y(H),oa(z,()=>r().cardCountsSeparateInactive,tt=>Ze(o(),Kt(r).cardCountsSeparateInactive=tt,Kt(r))),L(T,H)},$$slots:{default:!0},$$legacy:!0});var y=x(x(g,!0)),h=j(y),p=j(h);ae(p,T=>C(s,T),()=>m(s)),Y(p),Y(h);var w=x(x(h,!0)),M=j(w),F=j(M),_=j(F);Ne(_,1,()=>m(f),Ye,(T,V,H)=>{var z=Zs(),Q=j(z),tt=j(Q),I=x(x(tt,!0));Mt(I,()=>r().browserLinksSupported,rt=>{var et=Ks(),kt=j(et);Y(et),lt(()=>Ot(kt,St(V).label)),fe("click",et,()=>u("search",{query:St(V).query}),!1),L(rt,et)},rt=>{var et=Js(),kt=j(et);Y(et),lt(()=>Ot(kt,St(V).label)),L(rt,et)}),Y(Q);var Z=x(Q),yt=j(Z);Y(Z);var nt=x(Z),wt=j(nt);Y(nt),Y(z),lt(()=>{var rt;Pt(tt,"style",`color: ${(rt=St(V).colour)!=null?rt:""};`),Ot(yt,St(V).count),Ot(wt,St(V).percent)}),L(T,z)});var k=x(_),D=j(k),S=j(D),P=x(S,!0);P.nodeValue=` ${l!=null?l:""}`,Y(D);var B=x(D),A=j(B);Y(B),Y(k),Y(F),Y(M),Y(w),Y(y),lt(()=>{var T;Pt(p,"viewBox",`0 0 ${m(d).width} ${m(d).height}`),Pt(p,"style",`opacity: ${(T=m(c).totalCards?1:0)!=null?T:""}`),Ot(A,m(c).totalCards)}),L(v,$)},$$slots:{default:!0},$$legacy:!0}),ut()}function ao(t){return{eases:Nt(t.difficulty.eases),average:t.difficulty.average}}function no(t,e){const a=`"prop:d>=${t/100}"`;let r=`"prop:d<${(e+1)/100}"`;return e===99&&(r=r.replace("<","<=")),`${a} AND ${r}`}function ro(t,e,a){const r=at().domain([t,e]).nice(),n=r.ticks(a),o=r.domain(),u=t-o[0],s=n[1]-n[0];if(u===0||u%s!==0&&s%u!==0)return[r,n];const d=c=>c+u;return[at().domain(o.map(d)),n.map(d)]}function so(t,e,a){const r=t.eases;if(!r.size)return[null,[]];const n=0,o=100,u=20,[s,d]=ro(n,o,u),c=Yt().value(g=>g[0]).domain(s.domain()).thresholds(d)(r.entries()),f=gt(c,xt),i=$t(qe).domain([100,0]);function l(g,y){const h=`${g.x0}%-${g.x1}%`;return dn({cards:xt(g),percent:h})}function v(g){const y=g.x0,h=g.x1-1,p=no(y,h);e("search",{query:p})}const b=g=>X(g,0)+"%",$=[{label:fn(),value:b(t.average)}];return[{scale:s,bins:c,total:f,hoverText:l,onClick:a?v:null,colourScale:i,showArea:!1,binValue:xt,xTickFormat:b},$]}var oo=J("<!> <!>",1);function io(t,e){ct(e,!1);const a=Dt(),r=()=>pt(o(),"$prefs",a);let n=O(e,"sourceData",0,null),o=O(e,"prefs");const u=Bt();let s=N(null),d=N([]);const c=gn(),f=vn();K(()=>(ot(n()),m(s),m(d),r()),()=>{n()&&(()=>{const v=so(ao(n()),u,r().browserLinksSupported);return C(s,v[0]),C(d,v[1]),v})()}),vt(),ft();var i=At(),l=E(i);Mt(l,()=>{var v;return(v=n())==null?void 0:v.fsrs},v=>{_t(v,{title:c,subtitle:f,children:(b,$)=>{var g=oo(),y=E(g);Vt(y,{get data(){return m(s)},$$legacy:!0});var h=x(x(y,!0));qt(h,{get tableData(){return m(d)},$$legacy:!0}),L(b,g)},$$slots:{default:!0},$$legacy:!0})}),L(t,i),ut()}function lo(t){return{eases:Nt(t.eases.eases),average:t.eases.average}}function co(t,e){if(t===e)return`"prop:ease=${t/100}"`;const a=`"prop:ease>=${t/100}"`,r=`"prop:ease<${(e+1)/100}"`;return`${a} AND ${r}`}function uo(t,e,a){const r=at().domain([t,e]).nice(),n=r.ticks(a),o=r.domain(),u=t-o[0],s=n[1]-n[0];if(u===0||u%s!==0&&s%u!==0)return[r,n];const d=c=>c+u;return[at().domain(o.map(d)),n.map(d)]}function fo(t,e,a){const r=t.eases;if(!r.size)return[null,[]];const[,n]=Xt(r.keys()),o=130,u=n+1,s=20,[d,c]=uo(o,u,s),f=Yt().value(y=>y[0]).domain(d.domain()).thresholds(c)(r.entries()),i=gt(f,xt),l=$t(qe).domain([o,300]);function v(y,h){const p=Math.floor(y.x0),M=Math.floor(y.x1)-p<=10?`${y.x0}%`:`${y.x0}%-${y.x1}%`;return mn({cards:xt(y),percent:M})}function b(y){const h=y.x0,p=y.x1-1,w=co(h,p);e("search",{query:w})}const $=y=>X(y,0)+"%",g=[{label:hn(),value:$(gt(Array.from(r.entries()).map(([y,h])=>(y+2.5)*h))/i)}];return[{scale:d,bins:f,total:i,hoverText:v,onClick:a?b:null,colourScale:l,showArea:!1,binValue:xt,xTickFormat:$},g]}var go=J("<!> <!>",1);function vo(t,e){ct(e,!1);const a=Dt(),r=()=>pt(o(),"$prefs",a);let n=O(e,"sourceData",0,null),o=O(e,"prefs");const u=Bt();let s=N(null),d=N([]);const c=pn(),f=yn();K(()=>(ot(n()),m(s),m(d),r()),()=>{n()&&(()=>{const v=fo(lo(n()),u,r().browserLinksSupported);return C(s,v[0]),C(d,v[1]),v})()}),vt(),ft();var i=At(),l=E(i);Mt(l,()=>{var v,b;return!((b=(v=n())==null?void 0:v.fsrs)!=null&&b)},v=>{_t(v,{title:c,subtitle:f,children:(b,$)=>{var g=go(),y=E(g);Vt(y,{get data(){return m(s)},$$legacy:!0});var h=x(x(y,!0));qt(h,{get tableData(){return m(d)},$$legacy:!0}),L(b,g)},$$slots:{default:!0},$$legacy:!0})}),L(t,i),ut()}function ho(t){const e=t.futureDue;return{dueCounts:Nt(e.futureDue),haveBacklog:e.haveBacklog}}function mo(t,e){if(t===e)return`"prop:due=${t}"`;{const a=`"prop:due>=${t}"`,r=`"prop:due<=${e}"`;return`${a} AND ${r}`}}function po(t,e,a,r,n){var F;const o={histogramData:null,tableData:[]},u=t.dueCounts;if(!u)return o;const[s,d]=Xt(u.keys());let c=s;a||(c=0);let f=d;switch(e){case q.Month:f=31;break;case q.ThreeMonths:f=90;break;case q.Year:f=365;break;case q.AllTime:break}const i=Math.min(70,f-c),l=at().domain([c,f]),v=Yt().value(_=>_[0]).domain(l.domain()).thresholds(l.ticks(i))(u.entries());if(!gt(v,_=>_.length))return o;const b=_=>X(_),$=at().range([.7,.3]),g=$t(_=>Je($(_))).domain([c,f]),y=gt(v,xt);function h(_,k,D){const S=na(_.x0,_.x1===f?_.x1+1:_.x1),P=$n({cards:xt(_)}),B=Te();return`${S}:<br>${P}<br>${B}: ${X(k)}`}function p(_){const k=_.x0,D=_.x1===f?_.x1:_.x1-1,S=mo(k,D);r("search",{query:S})}const w=f-c,M=[{label:ta(),value:ue({reviews:y})},{label:_a(),value:We({count:Math.round(y/w)})},{label:bn(),value:ue({reviews:(F=t.dueCounts.get(1))!=null?F:0})}];return{histogramData:{scale:l,bins:v,total:y,hoverText:h,onClick:n?p:null,showArea:!0,colourScale:g,binValue:xt,xTickFormat:b},tableData:M}}var yo=J('<label><input type="checkbox"> </label>'),bo=J("<!> <!>",1),$o=J("<!> <!> <!>",1);function xo(t,e){ct(e,!1);const a=Dt(),r=()=>pt(o(),"$prefs",a);let n=O(e,"sourceData",0,null),o=O(e,"prefs");const u=Bt();let s=N(null),d=N(null),c=N([]),f=N(q.Month);const i=xn(),l=_n(),v=wn();K(()=>ot(n()),()=>{n()&&C(s,ho(n()))}),K(()=>(m(s),m(d),m(c),m(f),r()),()=>{m(s)&&(()=>{const b=po(m(s),m(f),r().futureDueShowBacklog,u,r().browserLinksSupported);return C(d,b.histogramData),C(c,b.tableData),b})()}),vt(),ft(),_t(t,{title:i,subtitle:l,children:(b,$)=>{var g=$o(),y=E(g);Ct(y,{children:(w,M)=>{var F=bo(),_=E(F);Mt(_,()=>m(s)&&m(s).haveBacklog,D=>{var S=yo(),P=j(S);it(P);var B=x(P,!0);B.nodeValue=` ${v!=null?v:""}`,Y(S),oa(P,()=>r().futureDueShowBacklog,A=>Ze(o(),Kt(r).futureDueShowBacklog=A,Kt(r))),L(D,S)});var k=x(x(_,!0));ye(k,{get graphRange(){return m(f)},set graphRange(D){C(f,D)},get revlogRange(){return dt.All},$$legacy:!0}),L(w,F)},$$slots:{default:!0},$$legacy:!0});var h=x(x(y,!0));Vt(h,{get data(){return m(d)},$$legacy:!0});var p=x(x(h,!0));qt(p,{get tableData(){return m(c)},$$legacy:!0}),L(b,g)},$$slots:{default:!0},$$legacy:!0}),ut()}var _o=J('<label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label> <label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label> <input type="text" id="statisticsSearchText" class="svelte-19q2rko">',1),wo=J('<label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label> <label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label>',1),ko=J('<div class="range-box svelte-19q2rko"><div class="spin svelte-19q2rko">◐</div> <!> <!></div> <div class="range-box-pad svelte-19q2rko"></div>',1);function Ia(t,e){ct(e,!1);const a=Dt(),r=()=>pt(c(),"$days",a),n=()=>pt(f(),"$search",a),o=[],u=[];var s=N();(function(D){D[D.Deck=1]="Deck",D[D.Collection=2]="Collection",D[D.Custom=3]="Custom"})(m(s)||C(s,{}));let d=O(e,"loading"),c=O(e,"days"),f=O(e,"search"),i=N(Pa(r())),l=N();n()==="deck:current"?C(l,m(s).Deck):n()===""?C(l,m(s).Collection):C(l,m(s).Custom);let v=N(n());function b(){se(f(),m(v))}const $=kn(),g=Dn(),y=An(),h=Mn(),p=Cn();K(()=>(m(l),m(s)),()=>{switch(m(l)){case m(s).Deck:se(f(),C(v,"deck:current"));break;case m(s).Collection:se(f(),C(v,""));break}}),K(()=>m(i),()=>{switch(m(i)){case dt.Year:se(c(),365);break;case dt.All:se(c(),0);break}}),vt(),ft();var w=ko(),M=E(w),F=j(M),_=x(x(F,!0));Ct(_,{children:(D,S)=>{var P=_o(),B=E(P),A=j(B);it(A);var T,V=x(A,!0);V.nodeValue=` ${g!=null?g:""}`,Y(B);var H=x(x(B,!0)),z=j(H);it(z);var Q,tt=x(z,!0);tt.nodeValue=` ${y!=null?y:""}`,Y(H);var I=x(x(H,!0));it(I),Pt(I,"placeholder",h),lt(()=>{T!==(T=m(s).Deck)&&(A.value=(A.__value=m(s).Deck)==null?"":m(s).Deck),Q!==(Q=m(s).Collection)&&(z.value=(z.__value=m(s).Collection)==null?"":m(s).Collection)}),mt(o,[],A,()=>(m(s).Deck,m(l)),Z=>C(l,Z)),mt(o,[],z,()=>(m(s).Collection,m(l)),Z=>C(l,Z)),Or(I,()=>m(v),Z=>C(v,Z)),fe("change",I,b,!1),fe("focus",I,()=>{C(l,m(s).Custom)},!1),L(D,P)},$$slots:{default:!0},$$legacy:!0});var k=x(x(_,!0));Ct(k,{children:(D,S)=>{var P=wo(),B=E(P),A=j(B);it(A);var T,V=x(A,!0);V.nodeValue=` ${$!=null?$:""}`,Y(B);var H=x(x(B,!0)),z=j(H);it(z);var Q,tt=x(z,!0);tt.nodeValue=` ${p!=null?p:""}`,Y(H),lt(()=>{T!==(T=dt.Year)&&(A.value=(A.__value=dt.Year)==null?"":dt.Year),Q!==(Q=dt.All)&&(z.value=(z.__value=dt.All)==null?"":dt.All)}),mt(u,[],A,()=>(dt.Year,m(i)),I=>C(i,I)),mt(u,[],z,()=>(dt.All,m(i)),I=>C(i,I)),L(D,P)},$$slots:{default:!0},$$legacy:!0}),Y(M),lt(()=>Tn(F,"loading",d())),L(t,w),ut()}async function Do(t,e){let a=await t();const{subscribe:r,set:n}=Xe(a);function o(s){a=s,n(s),e(s)}function u(s){o(s(a))}return{subscribe:r,set:o,update:u}}function Ao(t,e){ct(e,!1);const a=Dt(),r=()=>pt(u(),"$search",a),n=()=>pt(s(),"$days",a),o=N();let u=O(e,"search"),s=O(e,"days");const d=Do(()=>Ir({}),Er);let c=N(null),f=N(!0);async function i(b,$){await d,C(f,!0);try{C(c,await Wr({search:b,days:$}))}finally{C(f,!1)}}K(()=>(r(),n()),()=>{i(r(),n())}),K(()=>n(),()=>{C(o,Pa(n()))}),vt(),ft();var l=At(),v=E(l);Kr(v,()=>d,null,(b,$)=>{var g=At(),y=E(g);Hr(y,Qr(e),{get revlogRange(){return m(o)},get prefs(){return m($)},get sourceData(){return m(c)},get loading(){return m(f)}}),L(b,g)}),L(t,l),ut()}var Mo=J('<!> <div class="graphs-container svelte-n9umk6"><!></div> <div class="spacer svelte-n9umk6"></div>',1);function Co(t,e){ct(e,!1);const a=Dt(),r=()=>pt(s,"$search",a),n=()=>pt(Ur,"$pageTheme",a);let o=O(e,"initialSearch"),u=O(e,"initialDays");const s=Xe(o()),d=Xe(u());let c=O(e,"graphs"),f=O(e,"controller",0,Ia);function i(l){Xr(`browserSearch: ${r()} ${l.detail.query}`)}ft(),Ao(t,{search:s,days:d,children:(l,v)=>{const b=be(()=>v.sourceData),$=be(()=>v.loading),g=be(()=>v.prefs),y=be(()=>v.revlogRange);var h=Mo(),p=E(h);Mt(p,f,F=>{var _=At(),k=E(_);da(k,f,(D,S)=>{S(D,{search:s,days:d,get loading(){return m($)},$$legacy:!0})}),L(F,_)});var w=x(x(p,!0)),M=j(w);Mt(M,()=>m(b)&&m(y),F=>{var _=At(),k=E(_);Ne(k,1,c,Ye,(D,S,P)=>{var B=At(),A=E(B);da(A,()=>St(S),(T,V)=>{V(T,{get sourceData(){return m(b)},get prefs(){return m(g)},get revlogRange(){return m(y)},get nightMode(){return n().isDark},$$events:{search:i},$$legacy:!0})}),L(D,B)}),L(F,_)}),Y(w),L(l,h)},$$slots:{default:!0},$$legacy:!0}),ut()}function To(t,e){function a(r){return r.map((n,o)=>({hour:o,totalCount:n.total,correctCount:n.correct}))}switch(e){case q.Month:return a(t.hours.oneMonth);case q.ThreeMonths:return a(t.hours.threeMonths);case q.Year:return a(t.hours.oneYear);case q.AllTime:return a(t.hours.allTime)}}function Ro(t,e,a,r){const n=To(a,r),o=Math.max(...n.map(g=>g.totalCount)),u=Zt(t),s=u.transition().duration(600);if(o)Rt(u,!0);else{Rt(u,!1);return}const d=Me().domain(n.map(g=>g.hour.toString())).range([e.marginLeft,e.width-e.marginRight]).paddingInner(.1);u.select(".x-ticks").call(g=>g.transition(s).call(Pe(d).tickSizeOuter(0))).selectAll(".tick").selectAll("text").classed(Ps,g=>g%2!=0).attr("direction","ltr");const c=at().range([.1,.8]),f=$t(g=>je(c(g))).domain([0,o]),i=g=>X(g),l=at().range([e.height-e.marginBottom,e.marginTop]).domain([0,o]).nice();u.select(".y-ticks").call(g=>g.transition(s).call(Fe(l).ticks(e.height/50).tickSizeOuter(0).tickFormat(i))).attr("direction","ltr");const v=l.copy().domain([0,1]),b=g=>g.attr("width",d.bandwidth()).transition(s).attr("x",y=>d(y.hour.toString())).attr("y",y=>l(y.totalCount)).attr("height",y=>l(0)-l(y.totalCount)).attr("fill",y=>f(y.totalCount));u.select("g.bars").selectAll("rect").data(n).join(g=>g.append("rect").attr("rx",1).attr("x",y=>d(y.hour.toString())).attr("y",l(0)).attr("height",0).call(b),g=>g.call(b),g=>g.call(y=>y.transition(s).attr("height",0).attr("y",l(0)))),u.select(".y2-ticks").call(g=>g.transition(s).call(ra(v).ticks(e.height/50).tickFormat(y=>`${Math.round(y*100)}%`).tickSizeOuter(0))).attr("direction","ltr"),u.select("path.cumulative-overlay").datum(n).attr("d",la().curve(ca).defined(g=>g.totalCount>0).x(g=>d(g.hour.toString())+d.bandwidth()/2).y0(e.height-e.marginBottom).y1(g=>{const y=g.correctCount/g.totalCount;return v(isNaN(y)?0:y)}));function $(g){const y=Rn({hourStart:g.hour,hourEnd:g.hour+1}),h=Sn({reviews:g.totalCount}),p=Pn({percent:g.totalCount?g.correctCount/g.totalCount*100:0,reviews:g.correctCount});return`${y}<br>${h}<br>${p}`}u.select("g.hover-columns").selectAll("rect").data(n).join("rect").attr("x",g=>d(g.hour.toString())).attr("y",()=>l(o)).attr("width",d.bandwidth()).attr("height",()=>l(0)-l(o)).on("mousemove",(g,y)=>{const[h,p]=ge(g,document.body);ve($(y),h,p)}).on("mouseout",he)}var So=Jt('<!><svg><g class="bars"></g><!><!><!><!></svg>',1);function Po(t,e){ct(e,!1);let a=O(e,"sourceData",0,null),r=O(e,"revlogRange"),n=N(q.Year);const o=te();let u=N(null);const s=Fn(),d=Bn();K(()=>(ot(a()),m(u),m(n)),()=>{a()&&Ro(m(u),o,a(),m(n))}),vt(),ft(),_t(t,{title:s,subtitle:d,children:(c,f)=>{var i=So(),l=E(i);Ct(l,{children:(p,w)=>{ye(p,{get graphRange(){return m(n)},set graphRange(M){C(n,M)},get revlogRange(){return r()},followRevlog:!0,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var v=x(l);ae(v,p=>C(u,p),()=>m(u));var b=j(v),$=x(b);sa($);var g=x($);Be(g);var y=x(g);me(y,{bounds:o,$$legacy:!0});var h=x(y);pe(h,{bounds:o,$$legacy:!0}),Y(v),lt(()=>Pt(v,"viewBox",`0 0 ${o.width} ${o.height}`)),L(c,i)},$$slots:{default:!0},$$legacy:!0}),ut()}var G=(t=>(t[t.Month=0]="Month",t[t.Percentile50=1]="Percentile50",t[t.Percentile95=2]="Percentile95",t[t.All=3]="All",t))(G||{});function Ea(t){const e=Nt(t.intervals),a=gt(e,([o,u])=>u),r=Array(a);let n=0;for(const o of e.entries())r.fill(o[0],n,n+o[1]),n+=o[1];return r.sort((o,u)=>o-u),{intervals:r}}function Fo(t,e,a,r){return e-t<=1?(r?qn:jn)({day:t,cards:a}):(r?Ln:On)({daysStart:t,daysEnd:e-1,cards:a})}function Bo(t,e){if(t===e)return`"prop:ivl=${t}"`;const a=`"prop:ivl>=${t}"`,r=`"prop:ivl<=${e}"`;return`${a} ${r}`}function No(t,e){t===0&&(t=.5);const a=`"prop:s>=${t-.5}"`,r=`"prop:s<${e+.5}"`;return`${a} ${r}`}function Ha(t,e,a,r,n){var _;const o=t.intervals;if(!o.length)return[null,[]];const u=0;let[,s]=Xt(o),d=!1;switch(e){case 0:s=Math.min(s,30);break;case 1:s=ha(o,.5),d=!0;break;case 2:s=ha(o,.95),d=!0;break;case 3:d=!0;break}s=s+1;const c=n?k=>k:k=>k+1,f=(k,D,S)=>D===S.length-1?[k-(S[0]-1),k+1]:[k-(S[0]-1)],i=Math.min(70,s-u),l=at().domain([u,s]),v=at().domain((d?l.nice():l).domain().map(c)),b=Yt().domain(v.domain()).thresholds(v.ticks(i).flatMap(f))(o),$=gt(b,k=>k.length);if(!$)return[null,[]];const g=at().range([.7,.3]),y=$t(k=>je(g(k))).domain([s,u]);function h(k,D,S){const P=Fo(k.x0,k.x1,k.length,n),B=Te();return`${P}<br>${B}: ‎${X(S,1)}%`}function p(k){const D=k.x0,S=k.x1-1,P=(n?No:Bo)(D,S);a("search",{query:P})}const w=Math.round((_=rs(o))!=null?_:0),M=Ft(w*86400,!1),F=[{label:n?Nn():Yn(),value:M}];return[{scale:v,bins:b,total:$,hoverText:h,onClick:r?p:null,colourScale:y,showArea:!0},F]}var Yo=J('<label><input type="radio"> </label> <label><input type="radio"> 50%</label> <label><input type="radio"> 95%</label> <label><input type="radio"> </label>',1),qo=J("<!> <!> <!>",1);function jo(t,e){ct(e,!1);const a=Dt(),r=()=>pt(u(),"$prefs",a),n=[];let o=O(e,"sourceData",0,null),u=O(e,"prefs");const s=Bt();let d=N(null),c=N(null),f=N([]),i=N(G.Percentile95);const l=zn(),v=Vn(),b=Ft(1*ke),$=ea();K(()=>ot(o()),()=>{o()&&C(d,Ea(o().intervals))}),K(()=>(m(d),m(c),m(f),m(i),r()),()=>{m(d)&&(()=>{const g=Ha(m(d),m(i),s,r().browserLinksSupported,!1);return C(c,g[0]),C(f,g[1]),g})()}),vt(),ft(),_t(t,{title:l,subtitle:v,children:(g,y)=>{var h=qo(),p=E(h);Ct(p,{children:(F,_)=>{var k=Yo(),D=E(k),S=j(D);it(S);var P,B=x(S,!0);B.nodeValue=` ${b!=null?b:""}`,Y(D);var A=x(x(D,!0)),T=j(A);it(T);var V;we(),Y(A);var H=x(x(A,!0)),z=j(H);it(z);var Q;we(),Y(H);var tt=x(x(H,!0)),I=j(tt);it(I);var Z,yt=x(I,!0);yt.nodeValue=` ${$!=null?$:""}`,Y(tt),lt(()=>{P!==(P=G.Month)&&(S.value=(S.__value=G.Month)==null?"":G.Month),V!==(V=G.Percentile50)&&(T.value=(T.__value=G.Percentile50)==null?"":G.Percentile50),Q!==(Q=G.Percentile95)&&(z.value=(z.__value=G.Percentile95)==null?"":G.Percentile95),Z!==(Z=G.All)&&(I.value=(I.__value=G.All)==null?"":G.All)}),mt(n,[],S,()=>(G.Month,m(i)),nt=>C(i,nt)),mt(n,[],T,()=>(G.Percentile50,m(i)),nt=>C(i,nt)),mt(n,[],z,()=>(G.Percentile95,m(i)),nt=>C(i,nt)),mt(n,[],I,()=>(G.All,m(i)),nt=>C(i,nt)),L(F,k)},$$slots:{default:!0},$$legacy:!0});var w=x(x(p,!0));Vt(w,{get data(){return m(c)},$$legacy:!0});var M=x(x(w,!0));qt(M,{get tableData(){return m(f)},$$legacy:!0}),L(g,h)},$$slots:{default:!0},$$legacy:!0}),ut()}function Lo(t){return{retrievability:Nt(t.retrievability.retrievability),average:t.retrievability.average,sum:t.retrievability.sum}}function Oo(t,e){const a=`"prop:r>=${t/100}"`;let r=`"prop:r<${(e+1)/100}"`;return e===99&&(r=r.replace("<","<=")),`${a} AND ${r}`}function zo(t,e,a){const r=at().domain([t,e]).nice(),n=r.ticks(a),o=r.domain(),u=t-o[0],s=n[1]-n[0];if(u===0||u%s!==0&&s%u!==0)return[r,n];const d=c=>c+u;return[at().domain(o.map(d)),n.map(d)]}function Vo(t,e,a){const r=t.retrievability;if(!r.size)return[null,[]];const n=0,o=100,u=20,[s,d]=zo(n,o,u),c=Yt().value(g=>g[0]).domain(s.domain()).thresholds(d)(r.entries()),f=gt(c,xt),i=$t(qe).domain([0,100]);function l(g,y){const h=`${g.x0}%-${g.x1}%`;return En({cards:xt(g),percent:h})}function v(g){const y=g.x0,h=g.x1-1,p=Oo(y,h);e("search",{query:p})}const b=g=>X(g,0)+"%",$=[{label:Gn(),value:b(t.average)},{label:In(),value:xe({cards:t.sum})}];return[{scale:s,bins:c,total:f,hoverText:l,onClick:a?v:null,colourScale:i,showArea:!1,binValue:xt,xTickFormat:b},$]}var Go=J("<!> <!>",1);function Io(t,e){ct(e,!1);const a=Dt(),r=()=>pt(o(),"$prefs",a);let n=O(e,"sourceData",0,null),o=O(e,"prefs");const u=Bt();let s=N(null),d=N([]);const c=Hn(),f=Qn();K(()=>(ot(n()),m(s),m(d),r()),()=>{n()&&(()=>{const v=Vo(Lo(n()),u,r().browserLinksSupported);return C(s,v[0]),C(d,v[1]),v})()}),vt(),ft();var i=At(),l=E(i);Mt(l,()=>{var v;return(v=n())==null?void 0:v.fsrs},v=>{_t(v,{title:c,subtitle:f,children:(b,$)=>{var g=Go(),y=E(g);Vt(y,{get data(){return m(s)},$$legacy:!0});var h=x(x(y,!0));qt(h,{get tableData(){return m(d)},$$legacy:!0}),L(b,g)},$$slots:{default:!0},$$legacy:!0})}),L(t,i),ut()}function Eo(t){return{reviewCount:Nt(t.reviews.count),reviewTime:Nt(t.reviews.time)}}function Qa(t){const e=[0,0,0,0,0];for(const a of t)e[0]+=a[1].mature,e[1]+=a[1].young,e[2]+=a[1].relearn,e[3]+=a[1].learn,e[4]+=a[1].filtered;return e}function le(t,e){return gt(Qa(t).slice(0,e+1))}function Ho(t,e,a,r,n){const o=Zt(t),u=o.transition().duration(600),s=1;let d=0;switch(r){case q.Month:d=-30;break;case q.ThreeMonths:d=-89;break;case q.Year:d=-364;break;case q.AllTime:d=Ae(a.reviewCount.keys());break}const c=Math.min(70,Math.abs(d)),f=at().domain([d,s]);r===q.AllTime&&f.nice(c);const i=n?a.reviewTime:a.reviewCount,l=Yt().value(R=>R[0]).domain(f.domain()).thresholds(f.ticks(c))(i.entries());if(gt(l,R=>R.length))Rt(o,!0);else return Rt(o,!1),[];f.range([e.marginLeft,e.width-e.marginRight]),o.select(".x-ticks").call(R=>R.transition(u).call(Pe(f).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const b=R=>n?Ft(R/1e3,!0):Math.round(R)!=R?"":X(R),$=De(l,R=>le(R,4)),g=at().range([e.height-e.marginBottom,e.marginTop]).domain([0,$]).nice();o.select(".y-ticks").call(R=>R.transition(u).call(Fe(g).ticks(e.height/50).tickSizeOuter(0).tickFormat(b))).attr("direction","ltr");function y(R){const W=Math.max(0,f(R.x1)-f(R.x0)-1);return W!=null?W:0}const h=at().range([.3,.5]),p=at().range([.4,.7]),w=$t(R=>Je(p(R))).domain(f.domain()),M=$t(R=>Je(h(R))).domain(f.domain()),F=$t(R=>gs(h(R))).domain(f.domain()),_=$t(R=>vs(h(R))).domain(f.domain()),k=$t(R=>ds(h(R))).domain(f.domain());function D(R){switch(R){case 0:return w;case 1:return M;case 3:return _;case 2:return F;case 4:return k}}function S(R){return n?Ft(R/1e3):ue({reviews:R})}function P(R,W){const st=na(R.x0,R.x1),It=Qa(R),re=S(gt(It));let Et=`<table><tr><td>${st}</td><td align=end>${re}</td></tr>`;const Wa=[[4,tr()],[3,aa()],[2,wa()],[1,Se()],[0,Re()],[null,Te()]];for(const[Le,Ua]of Wa){let Oe,ze;Le==null?(Oe="transparent",ze=S(W)):(Oe=D(Le)(1),ze=S(It[Le])),Et+=`<tr>
            <td><span style="color: ${Oe};">■</span> ${Ua}</td>
            <td align=end>${ze}</td>
            </tr>`}return Et}const B=(R,W)=>R.attr("width",y).transition(u).attr("x",st=>f(st.x0)).attr("y",st=>g(le(st,W))).attr("height",st=>g(0)-g(le(st,W))).attr("fill",st=>D(W)(st.x0));for(const R of[0,1,2,3,4])o.select(`g.bars${R}`).selectAll("rect").data(l).join(W=>W.append("rect").attr("rx",1).attr("x",st=>f(st.x0)).attr("y",g(0)).attr("height",0).call(st=>B(st,R)),W=>W.call(st=>B(st,R)),W=>W.call(st=>st.transition(u).attr("height",0).attr("y",g(0))));const A=l.map(R=>le(R,4));A.unshift(0);const T=ia(A),V=T.slice(-1)[0],H=g.copy().domain([0,V]).nice();V&&(o.select(".y2-ticks").call(R=>R.transition(u).call(ra(H).ticks(e.height/50).tickFormat(b).tickSizeOuter(0))).attr("direction","ltr"),o.select("path.cumulative-overlay").datum(T).attr("d",la().curve(ca).x((R,W)=>f(W===0?l[0].x0:l[W-1].x1)).y0(e.height-e.marginBottom).y1(R=>H(R))));const z=l.map((R,W)=>[R,T[W+1]]);o.select("g.hover-columns").selectAll("rect").data(z).join("rect").attr("x",([R])=>f(R.x0)).attr("y",()=>g($)).attr("width",([R])=>y(R)).attr("height",()=>g(0)-g($)).on("mousemove",(R,[W,st])=>{const[It,re]=ge(R,document.body);ve(P(W,st),It,re)}).on("mouseout",he);const Q=-d+1,tt=gt(l,R=>R.length),I=tt/Q*100,Z=V,yt=Z/Q,nt=Z/tt;let wt,rt,et,kt,jt;if(n){wt=Ft(Z/1e3,!1),rt=fa({count:Math.round(nt/1e3/60)}),et=fa({count:Math.round(yt/1e3/60)}),jt=Wn();const R=Yt().value(Et=>Et[0]).domain(f.domain())(a.reviewCount.entries()),W=gt(R,Et=>le(Et,4)),st=Z/1e3,It=st/W,re=W*60/st;kt=Un({averageSeconds:It,cardsPerMinute:re})}else wt=ue({reviews:Z}),rt=We({count:Math.round(nt)}),et=We({count:Math.round(yt)}),kt=jt="";const Gt=[{label:Xn(),value:Kn({amount:tt,total:Q,percent:I<99.5?X(I):I<99.95?X(I,1):I<100?X(I,2):"100"})},{label:ta(),value:wt},{label:Jn(),value:rt},{label:Zn(),value:et}];return kt&&Gt.push({label:jt,value:kt}),Gt}var Qo=J('<label><input type="checkbox"> </label> <!>',1),Wo=Jt("<g></g>"),Uo=Jt("<!><svg><!><!><!><!><!></svg><!>",1);function Xo(t,e){ct(e,!1);let a=O(e,"sourceData",0,null),r=O(e,"revlogRange"),n=N(null);const o=te();let u=N(null),s=N(q.Month),d=N(!1),c=N([]);const f=Da(),i=er();let l=N("");K(()=>ot(a()),()=>{a()&&C(n,Eo(a()))}),K(()=>(m(n),m(u),m(s),m(d)),()=>{m(n)&&C(c,Ho(m(u),o,m(n),m(s),m(d)))}),K(()=>m(d),()=>{m(d)?C(l,ar()):C(l,nr())}),vt(),ft(),_t(t,{title:f,get subtitle(){return m(l)},children:(v,b)=>{var $=Uo(),g=E($);Ct(g,{children:(k,D)=>{var S=Qo(),P=E(S),B=j(P);it(B);var A=x(B,!0);A.nodeValue=` ${i!=null?i:""}`,Y(P);var T=x(x(P,!0));ye(T,{get graphRange(){return m(s)},set graphRange(V){C(s,V)},get revlogRange(){return r()},followRevlog:!0,$$legacy:!0}),oa(B,()=>m(d),V=>C(d,V)),L(k,S)},$$slots:{default:!0},$$legacy:!0});var y=x(g);ae(y,k=>C(u,k),()=>m(u));var h=j(y);Ne(h,1,()=>[4,3,2,1,0],Ye,(k,D,S)=>{var P=Wo();lt(()=>{var B;return rr(P,`bars${(B=St(D))!=null?B:""}`)}),L(k,P)});var p=x(h);sa(p);var w=x(p);Be(w);var M=x(w);me(M,{bounds:o,$$legacy:!0});var F=x(M);pe(F,{bounds:o,$$legacy:!0}),Y(y);var _=x(y);qt(_,{get tableData(){return m(c)},$$legacy:!0}),lt(()=>Pt(y,"viewBox",`0 0 ${o.width} ${o.height}`)),L(v,$)},$$slots:{default:!0},$$legacy:!0}),ut()}var Ko=J('<label><input type="radio"> </label> <label><input type="radio"> 50%</label> <label><input type="radio"> 95%</label> <label><input type="radio"> </label>',1),Jo=J("<!> <!> <!>",1);function Zo(t,e){ct(e,!1);const a=Dt(),r=()=>pt(u(),"$prefs",a),n=[];let o=O(e,"sourceData",0,null),u=O(e,"prefs");const s=Bt();let d=N(null),c=N(null),f=N([]),i=N(G.Percentile95);const l=sr(),v=or(),b=Ft(1*ke),$=ea();K(()=>ot(o()),()=>{o()&&C(d,Ea(o().stability))}),K(()=>(m(d),m(c),m(f),m(i),r()),()=>{m(d)&&(()=>{const h=Ha(m(d),m(i),s,r().browserLinksSupported,!0);return C(c,h[0]),C(f,h[1]),h})()}),vt(),ft();var g=At(),y=E(g);Mt(y,()=>{var h;return(h=o())==null?void 0:h.fsrs},h=>{_t(h,{title:l,subtitle:v,children:(p,w)=>{var M=Jo(),F=E(M);Ct(F,{children:(D,S)=>{var P=Ko(),B=E(P),A=j(B);it(A);var T,V=x(A,!0);V.nodeValue=` ${b!=null?b:""}`,Y(B);var H=x(x(B,!0)),z=j(H);it(z);var Q;we(),Y(H);var tt=x(x(H,!0)),I=j(tt);it(I);var Z;we(),Y(tt);var yt=x(x(tt,!0)),nt=j(yt);it(nt);var wt,rt=x(nt,!0);rt.nodeValue=` ${$!=null?$:""}`,Y(yt),lt(()=>{T!==(T=G.Month)&&(A.value=(A.__value=G.Month)==null?"":G.Month),Q!==(Q=G.Percentile50)&&(z.value=(z.__value=G.Percentile50)==null?"":G.Percentile50),Z!==(Z=G.Percentile95)&&(I.value=(I.__value=G.Percentile95)==null?"":G.Percentile95),wt!==(wt=G.All)&&(nt.value=(nt.__value=G.All)==null?"":G.All)}),mt(n,[],A,()=>(G.Month,m(i)),et=>C(i,et)),mt(n,[],z,()=>(G.Percentile50,m(i)),et=>C(i,et)),mt(n,[],I,()=>(G.Percentile95,m(i)),et=>C(i,et)),mt(n,[],nt,()=>(G.All,m(i)),et=>C(i,et)),L(D,P)},$$slots:{default:!0},$$legacy:!0});var _=x(x(F,!0));Vt(_,{get data(){return m(c)},$$legacy:!0});var k=x(x(_,!0));qt(k,{get tableData(){return m(f)},$$legacy:!0}),L(p,M)},$$slots:{default:!0},$$legacy:!0})}),L(t,g),ut()}function ti(t){let e;const a=t.today;if(a.answerCount){const r=kr(a.answerCount,a.answerMillis/1e3),n=a.answerCount-a.correctCount;let o=ir();o+=` ${n} (${X(n/a.answerCount*100)}%)`;const u=lr({learnCount:a.learnCount,reviewCount:a.reviewCount,relearnCount:a.relearnCount,filteredCount:a.earlyReviewCount});let s;a.matureCount?s=cr({correct:a.matureCorrect,total:a.matureCount,percent:a.matureCorrect/a.matureCount*100}):s=ur(),e=[r,o,u,s]}else e=[fr()];return{title:dr(),lines:e}}var ei=J("<div> </div>"),ai=J('<div class="legend svelte-2llkqb"></div>');function ni(t,e){ct(e,!1);let a=O(e,"sourceData",0,null),r=N(null);K(()=>ot(a()),()=>{a()&&C(r,ti(a()))}),vt(),ft();var n=At(),o=E(n);Mt(o,()=>m(r),u=>{_t(u,{get title(){return m(r).title},children:(s,d)=>{var c=ai();Ne(c,9,()=>m(r).lines,Ye,(f,i,l)=>{var v=ei(),b=j(v);Y(v),lt(()=>Ot(b,St(i))),L(f,v)}),Y(c),L(s,c)},$$slots:{default:!0},$$legacy:!0})}),L(t,n),ut()}function Qe(t,e){const a=t+e;return a===0?"0%":X(t/a*100)+"%"}function Qt(t,e){const a=Qe(e.youngPassed,e.youngFailed),r=Qe(e.maturePassed,e.matureFailed),n=e.youngPassed+e.maturePassed,o=e.youngFailed+e.matureFailed,u=Qe(n,o);return`
        <tr>
            <td class="trl">${t}</td>
            <td class="trr">${X(e.youngPassed)}</td>
            <td class="trr">${X(e.youngFailed)}</td>
            <td class="trr">${a}</td>
            <td class="trr">${X(e.maturePassed)}</td>
            <td class="trr">${X(e.matureFailed)}</td>
            <td class="trr">${r}</td>
            <td class="trr">${X(n)}</td>
            <td class="trr">${X(o)}</td>
            <td class="trr">${u}</td>
        </tr>`}function ri(t,e){const a=t.trueRetention;return`
        <style>
            td.trl { border: 1px solid; text-align: left; padding: 5px; }
            td.trr { border: 1px solid; text-align: right; padding: 5px; }
            td.trc { border: 1px solid; text-align: center; padding: 5px; }
        </style>
        <table style="border-collapse: collapse;" cellspacing="0" cellpadding="2">
            <tr>
                <td class="trl" rowspan=3><b>${gr()}</b></td>
                <td class="trc" colspan=9><b>${Da()}</b></td>
            </tr>
            <tr>
                <td class="trc" colspan=3><b>${Se()}</b></td>
                <td class="trc" colspan=3><b>${Re()}</b></td>
                <td class="trc" colspan=3><b>${ka()}</b></td>
            </tr>
            <tr>
                <td class="trc">${Ve()}</td>
                <td class="trc">${Ge()}</td>
                <td class="trc">${Ie()}</td>
                <td class="trc">${Ve()}</td>
                <td class="trc">${Ge()}</td>
                <td class="trc">${Ie()}</td>
                <td class="trc">${Ve()}</td>
                <td class="trc">${Ge()}</td>
                <td class="trc">${Ie()}</td>
            </tr>
            ${Qt(vr(),a.today)}
            ${Qt(hr(),a.yesterday)}
            ${Qt(mr(),a.week)}
            ${Qt(pr(),a.month)}
            ${e===dt.Year?Qt(yr(),a.year):Qt(br(),a.allTime)}
        </table>`}var si=J('<div class="true-retention-table svelte-1s73ut4"><!></div>');function oi(t,e){ct(e,!1);let a=O(e,"revlogRange"),r=O(e,"sourceData",0,null),n=N();const o=$r(),u=xr();K(()=>(ot(r()),ot(a())),()=>{r()&&C(n,ri(r(),a()))}),vt(),ft(),_t(t,{title:o,subtitle:u,children:(s,d)=>{var c=At(),f=E(c);Mt(f,()=>m(n),i=>{var l=si(),v=j(l);_r(v,()=>m(n),!1,!1),Y(l),L(i,l)}),L(s,c)},$$slots:{default:!0},$$legacy:!0}),ut()}function Mi(t){Co(t,{graphs:[ni,xo,Hs,Xo,eo,jo,Zo,vo,io,Io,Po,Os,Ys,oi],initialSearch:"deck:current",initialDays:365,controller:Ia,$$legacy:!0})}export{Mi as component};
