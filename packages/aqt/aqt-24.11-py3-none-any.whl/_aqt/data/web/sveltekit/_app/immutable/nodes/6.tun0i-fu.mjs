import{r as Y,a as L,d as K,e as j,s as x,F as E,M as Jt,D as At,n as we}from"../chunks/disclose-version.CXWUuFGG.mjs";import{p as ct,l as X,a as vt,t as lt,b as ut,N as ot,g as m,s as C,m as N,ah as ce,a1 as ia,E as Kt,ag as St,a0 as be}from"../chunks/runtime.BJSnJeWl.mjs";import{i as dt}from"../chunks/lifecycle.DW1_rEFA.mjs";import{p as O,i as Mt}from"../chunks/props.fkJSEmZ6.mjs";import{s as Dt,a as pt,m as Ke,b as se}from"../chunks/store.CAPRemx4.mjs";import{cd as Te,ce as xe,cf as ba,cg as Ha,ch as Re,ci as Je,aq as it,v as Pt,cj as Qa,ck as Wa,cl as Se,cm as Pe,cn as Ze,co as Ua,cp as Xa,cq as Ka,cr as Ja,cs as Za,ct as ue,cu as tn,cv as en,cw as an,cx as $a,cy as nn,cz as rn,cA as sn,cB as on,cC as ln,cD as cn,cE as un,cF as dn,cG as fn,cH as gn,cI as vn,cJ as hn,cK as He,cL as mn,cM as pn,cN as yn,cO as bn,cP as $n,cQ as xn,cR as _n,cS as wn,cT as kn,cU as Dn,t as An,cV as Mn,cW as Cn,cX as Tn,cY as Rn,cZ as Sn,c_ as Pn,c$ as Fn,d0 as Bn,d1 as Nn,d2 as Yn,d3 as qn,d4 as jn,d5 as Ln,d6 as On,d7 as zn,d8 as Gn,d9 as Vn,da as In,db as la,dc as En,dd as Hn,de as Qn,df as Wn,dg as Un,dh as Xn,di as Kn,dj as Jn,dk as Zn,dl as tr,dm as er,dn as ar,dp as nr,dq as rr,dr as sr,ds as or,dt as ir,du as lr,dv as cr,dw as ur,dx as dr,dy as fr,dz as gr,dA as vr,dB as hr,dC as mr,dD as pr,dE as yr,dF as br,dG as $r,dH as xr,U as _r}from"../chunks/runtime-require.XfVPIJtJ.mjs";import{c as Bt,a as ca}from"../chunks/index-client.D9hOaSri.mjs";import{d as ta,t as Ft,M as ke,Y as wr,s as kr}from"../chunks/time.BdBxgeyd.mjs";import{M as ua,O as Qe,P as Dr,Q as Ar,R as Mr,A as De,v as xa,S as Wt,T as _a,U as wa,V as ka,W as Cr,X as Tr,Y as Da,Z as U,_ as Rr,$ as Sr,a0 as Pr,a1 as Aa,E as Fr,a2 as Nt,a3 as q,B as et,a4 as gt,a5 as xt,a6 as ft,y as Zt,z as Rt,C as Fe,D as Be,a7 as ea,F as ge,G as ve,H as he,K as Ne,J as me,N as pe,L as te,I as _t,l as Ht,k as Br,f as oe,m as Nr,a8 as Yr,a9 as qr,o as jr,aa as Ma}from"../chunks/HoverColumns.Do1LJyhv.mjs";import{m as Ae,I as Ct}from"../chunks/InputBox.BlOEgdEi.mjs";import{i as Lr,I as da,c as ee,C as aa,T as qt}from"../chunks/TableData.AIIYlGUU.mjs";import{b as mt,c as na,a as Or}from"../chunks/input.CShFEa0B.mjs";import{b as ae}from"../chunks/this.C9pg2j_S.mjs";import{l as nt,w as zr,a as Gr}from"../chunks/utils.CGySJu8o.mjs";import{s as Ot,e as de}from"../chunks/render.CQvFnAiW.mjs";import{j as Vr,K as zt,L as Ir,M as Er,s as Hr,d as Qr,N as Wr}from"../chunks/backend.DRML5B1x.mjs";import{e as Ye,i as qe,p as Ur}from"../chunks/theme.B6Eko5I8.mjs";import{a as Xr}from"../chunks/bridgecommand.CiNld-ld.mjs";import{w as We}from"../chunks/index.BB25h7Qo.mjs";import{a as Kr}from"../chunks/await.BrCVEzOe.mjs";function Jr(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function ra(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?a=>n+=+a||0:a=>n+=+e(a,r++,t)||0)}function Xt(t,e){let n,r;if(e===void 0)for(const a of t)a!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)));else{let a=-1;for(let s of t)(s=e(s,++a,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}function Zr(t=ua){if(t===ua)return Ca;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Ca(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var ts=Array.prototype,es=ts.slice;function Ve(t){return()=>t}function as(t,e,n){let r;for(;;){const a=Qe(t,e,n);if(a===r||a===0||!isFinite(a))return[t,e];a>0?(t=Math.floor(t/a)*a,e=Math.ceil(e/a)*a):a<0&&(t=Math.ceil(t*a)/a,e=Math.floor(e*a)/a),r=a}}function ns(t){return Math.max(1,Math.ceil(Math.log(Jr(t))/Math.LN2)+1)}function Yt(){var t=Lr,e=Xt,n=ns;function r(a){Array.isArray(a)||(a=Array.from(a));var s,d=a.length,o,f,c=new Array(d);for(s=0;s<d;++s)c[s]=t(a[s],s,a);var u=e(c),i=u[0],l=u[1],v=n(c,i,l);if(!Array.isArray(v)){const p=l,w=+v;if(e===Xt&&([i,l]=as(i,l,w)),v=Dr(i,l,w),v[0]<=i&&(f=Qe(i,l,w)),v[v.length-1]>=l)if(p>=l&&e===Xt){const M=Qe(i,l,w);isFinite(M)&&(M>0?l=(Math.floor(l/M)+1)*M:M<0&&(l=(Math.ceil(l*-M)+1)/-M))}else v.pop()}for(var b=v.length,$=0,g=b;v[$]<=i;)++$;for(;v[g-1]>l;)--g;($||g<b)&&(v=v.slice($,g),b=g-$);var y=new Array(b+1),h;for(s=0;s<=b;++s)h=y[s]=[],h.x0=s>0?v[s-1]:i,h.x1=s<b?v[s]:l;if(isFinite(f)){if(f>0)for(s=0;s<d;++s)(o=c[s])!=null&&i<=o&&o<=l&&y[Math.min(b,Math.floor((o-i)/f))].push(a[s]);else if(f<0){for(s=0;s<d;++s)if((o=c[s])!=null&&i<=o&&o<=l){const p=Math.floor((i-o)*f);y[Math.min(b,p+(v[p]<=o))].push(a[s])}}}else for(s=0;s<d;++s)(o=c[s])!=null&&i<=o&&o<=l&&y[Ar(v,o,0,b)].push(a[s]);return y}return r.value=function(a){return arguments.length?(t=typeof a=="function"?a:Ve(a),r):t},r.domain=function(a){return arguments.length?(e=typeof a=="function"?a:Ve([a[0],a[1]]),r):e},r.thresholds=function(a){return arguments.length?(n=typeof a=="function"?a:Ve(Array.isArray(a)?es.call(a):a),r):n},r}function Ta(t,e,n=0,r=1/0,a){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(a=a===void 0?Ca:Zr(a);r>n;){if(r-n>600){const f=r-n+1,c=e-n+1,u=Math.log(f),i=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*i*(f-i)/f)*(c-f/2<0?-1:1),v=Math.max(n,Math.floor(e-c*i/f+l)),b=Math.min(r,Math.floor(e+(f-c)*i/f+l));Ta(t,e,v,b,a)}const s=t[e];let d=n,o=r;for(ie(t,n,e),a(t[r],s)>0&&ie(t,n,r);d<o;){for(ie(t,d,o),++d,--o;a(t[d],s)<0;)++d;for(;a(t[o],s)>0;)--o}a(t[n],s)===0?ie(t,n,o):(++o,ie(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function ie(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function fa(t,e,n){if(t=Float64Array.from(Mr(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Ae(t);if(e>=1)return De(t);var r,a=(r-1)*e,s=Math.floor(a),d=De(Ta(t,s).subarray(0,s+1)),o=Ae(t.subarray(s+1));return d+(o-d)*(a-s)}}function rs(t,e){let n=0,r=0;for(let a of t)a!=null&&(a=+a)>=a&&(++n,r+=a);if(n)return r/n}function ss(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(a);++r<a;)s[r]=t+r*n;return s}const ga=Symbol("implicit");function Ra(){var t=new da,e=[],n=[],r=ga;function a(s){let d=t.get(s);if(d===void 0){if(r!==ga)return r;t.set(s,d=e.push(s)-1)}return n[d%n.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new da;for(const d of s)t.has(d)||t.set(d,e.push(d)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Ra(e,n).unknown(r)},xa.apply(a,arguments),a}function Me(){var t=Ra().unknown(void 0),e=t.domain,n=t.range,r=0,a=1,s,d,o=!1,f=0,c=0,u=.5;delete t.unknown;function i(){var l=e().length,v=a<r,b=v?a:r,$=v?r:a;s=($-b)/Math.max(1,l-f+c*2),o&&(s=Math.floor(s)),b+=($-b-s*(l-f))*u,d=s*(1-f),o&&(b=Math.round(b),d=Math.round(d));var g=ss(l).map(function(y){return b+s*y});return n(v?g.reverse():g)}return t.domain=function(l){return arguments.length?(e(l),i()):e()},t.range=function(l){return arguments.length?([r,a]=l,r=+r,a=+a,i()):[r,a]},t.rangeRound=function(l){return[r,a]=l,r=+r,a=+a,o=!0,i()},t.bandwidth=function(){return d},t.step=function(){return s},t.round=function(l){return arguments.length?(o=!!l,i()):o},t.padding=function(l){return arguments.length?(f=Math.min(1,c=+l),i()):f},t.paddingInner=function(l){return arguments.length?(f=Math.min(1,l),i()):f},t.paddingOuter=function(l){return arguments.length?(c=+l,i()):c},t.align=function(l){return arguments.length?(u=Math.max(0,Math.min(1,l)),i()):u},t.copy=function(){return Me(e(),[r,a]).round(o).paddingInner(f).paddingOuter(c).align(u)},xa.apply(i(),arguments)}function va(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function os(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function is(t){return t<0?-t*t:t*t}function ls(t){var e=t(Wt,Wt),n=1;function r(){return n===1?t(Wt,Wt):n===.5?t(os,is):t(va(n),va(1/n))}return e.exponent=function(a){return arguments.length?(n=+a,r()):n},_a(e)}function Sa(){var t=0,e=1,n,r,a,s,d=Wt,o=!1,f;function c(i){return i==null||isNaN(i=+i)?f:d(a===0?.5:(i=(s(i)-n)*a,o?Math.max(0,Math.min(1,i)):i))}c.domain=function(i){return arguments.length?([t,e]=i,n=s(t=+t),r=s(e=+e),a=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(i){return arguments.length?(o=!!i,c):o},c.interpolator=function(i){return arguments.length?(d=i,c):d};function u(i){return function(l){var v,b;return arguments.length?([v,b]=l,d=i(v,b),c):[d(0),d(1)]}}return c.range=u(ka),c.rangeRound=u(Cr),c.unknown=function(i){return arguments.length?(f=i,c):f},function(i){return s=i,n=i(t),r=i(e),a=n===r?0:1/(r-n),c}}function Pa(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function $t(){var t=_a(Sa()(Wt));return t.copy=function(){return Pa(t,$t())},wa.apply(t,arguments)}function Fa(){var t=ls(Sa());return t.copy=function(){return Pa(t,Fa()).exponent(t.exponent())},wa.apply(t,arguments)}function cs(){return Fa.apply(null,arguments).exponent(.5)}const ne=t=>Tr(t[t.length-1]);var us=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ee);const je=ne(us);var Ba=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ee);const Le=ne(Ba);var Ue=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ee);const Xe=ne(Ue);var ds=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ee);const fs=ne(ds);var Na=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ee);const gs=ne(Na);var Ya=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ee);const vs=ne(Ya),ha=Math.abs,ht=Math.atan2,Lt=Math.cos,hs=Math.max,Ie=Math.min,Tt=Math.sin,Ut=Math.sqrt,bt=1e-12,fe=Math.PI,Ce=fe/2,_e=2*fe;function ms(t){return t>1?0:t<-1?fe:Math.acos(t)}function ma(t){return t>=1?Ce:t<=-1?-Ce:Math.asin(t)}function ps(t){return t.innerRadius}function ys(t){return t.outerRadius}function bs(t){return t.startAngle}function $s(t){return t.endAngle}function xs(t){return t&&t.padAngle}function _s(t,e,n,r,a,s,d,o){var f=n-t,c=r-e,u=d-a,i=o-s,l=i*f-u*c;if(!(l*l<bt))return l=(u*(e-s)-i*(t-a))/l,[t+l*f,e+l*c]}function $e(t,e,n,r,a,s,d){var o=t-n,f=e-r,c=(d?s:-s)/Ut(o*o+f*f),u=c*f,i=-c*o,l=t+u,v=e+i,b=n+u,$=r+i,g=(l+b)/2,y=(v+$)/2,h=b-l,p=$-v,w=h*h+p*p,M=a-s,F=l*$-b*v,_=(p<0?-1:1)*Ut(hs(0,M*M*w-F*F)),k=(F*p-h*_)/w,D=(-F*h-p*_)/w,S=(F*p+h*_)/w,P=(-F*h+p*_)/w,B=k-g,A=D-y,T=S-g,G=P-y;return B*B+A*A>T*T+G*G&&(k=S,D=P),{cx:k,cy:D,x01:-u,y01:-i,x11:k*(a/M-1),y11:D*(a/M-1)}}function ws(){var t=ps,e=ys,n=U(0),r=null,a=bs,s=$s,d=xs,o=null,f=Da(c);function c(){var u,i,l=+t.apply(this,arguments),v=+e.apply(this,arguments),b=a.apply(this,arguments)-Ce,$=s.apply(this,arguments)-Ce,g=ha($-b),y=$>b;if(o||(o=u=f()),v<l&&(i=v,v=l,l=i),!(v>bt))o.moveTo(0,0);else if(g>_e-bt)o.moveTo(v*Lt(b),v*Tt(b)),o.arc(0,0,v,b,$,!y),l>bt&&(o.moveTo(l*Lt($),l*Tt($)),o.arc(0,0,l,$,b,y));else{var h=b,p=$,w=b,M=$,F=g,_=g,k=d.apply(this,arguments)/2,D=k>bt&&(r?+r.apply(this,arguments):Ut(l*l+v*v)),S=Ie(ha(v-l)/2,+n.apply(this,arguments)),P=S,B=S,A,T;if(D>bt){var G=ma(D/l*Tt(k)),H=ma(D/v*Tt(k));(F-=G*2)>bt?(G*=y?1:-1,w+=G,M-=G):(F=0,w=M=(b+$)/2),(_-=H*2)>bt?(H*=y?1:-1,h+=H,p-=H):(_=0,h=p=(b+$)/2)}var z=v*Lt(h),Q=v*Tt(h),Z=l*Lt(M),I=l*Tt(M);if(S>bt){var J=v*Lt(p),yt=v*Tt(p),at=l*Lt(w),wt=l*Tt(w),rt;if(g<fe)if(rt=_s(z,Q,at,wt,J,yt,Z,I)){var tt=z-rt[0],kt=Q-rt[1],jt=J-rt[0],Vt=yt-rt[1],R=1/Tt(ms((tt*jt+kt*Vt)/(Ut(tt*tt+kt*kt)*Ut(jt*jt+Vt*Vt)))/2),W=Ut(rt[0]*rt[0]+rt[1]*rt[1]);P=Ie(S,(l-W)/(R-1)),B=Ie(S,(v-W)/(R+1))}else P=B=0}_>bt?B>bt?(A=$e(at,wt,z,Q,v,B,y),T=$e(J,yt,Z,I,v,B,y),o.moveTo(A.cx+A.x01,A.cy+A.y01),B<S?o.arc(A.cx,A.cy,B,ht(A.y01,A.x01),ht(T.y01,T.x01),!y):(o.arc(A.cx,A.cy,B,ht(A.y01,A.x01),ht(A.y11,A.x11),!y),o.arc(0,0,v,ht(A.cy+A.y11,A.cx+A.x11),ht(T.cy+T.y11,T.cx+T.x11),!y),o.arc(T.cx,T.cy,B,ht(T.y11,T.x11),ht(T.y01,T.x01),!y))):(o.moveTo(z,Q),o.arc(0,0,v,h,p,!y)):o.moveTo(z,Q),!(l>bt)||!(F>bt)?o.lineTo(Z,I):P>bt?(A=$e(Z,I,J,yt,l,-P,y),T=$e(z,Q,at,wt,l,-P,y),o.lineTo(A.cx+A.x01,A.cy+A.y01),P<S?o.arc(A.cx,A.cy,P,ht(A.y01,A.x01),ht(T.y01,T.x01),!y):(o.arc(A.cx,A.cy,P,ht(A.y01,A.x01),ht(A.y11,A.x11),!y),o.arc(0,0,l,ht(A.cy+A.y11,A.cx+A.x11),ht(T.cy+T.y11,T.cx+T.x11),y),o.arc(T.cx,T.cy,P,ht(T.y11,T.x11),ht(T.y01,T.x01),!y))):o.arc(0,0,l,M,w,y)}if(o.closePath(),u)return o=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-fe/2;return[Lt(i)*u,Tt(i)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:U(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:U(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:U(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:U(+u),c):r},c.startAngle=function(u){return arguments.length?(a=typeof u=="function"?u:U(+u),c):a},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:U(+u),c):s},c.padAngle=function(u){return arguments.length?(d=typeof u=="function"?u:U(+u),c):d},c.context=function(u){return arguments.length?(o=u==null?null:u,c):o},c}function sa(t,e,n){var r=null,a=U(!0),s=null,d=Rr,o=null,f=Da(c);t=typeof t=="function"?t:t===void 0?Sr:U(+t),e=typeof e=="function"?e:e===void 0?U(0):U(+e),n=typeof n=="function"?n:n===void 0?Pr:U(+n);function c(i){var l,v,b,$=(i=Aa(i)).length,g,y=!1,h,p=new Array($),w=new Array($);for(s==null&&(o=d(h=f())),l=0;l<=$;++l){if(!(l<$&&a(g=i[l],l,i))===y)if(y=!y)v=l,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=l-1;b>=v;--b)o.point(p[b],w[b]);o.lineEnd(),o.areaEnd()}y&&(p[l]=+t(g,l,i),w[l]=+e(g,l,i),o.point(r?+r(g,l,i):p[l],n?+n(g,l,i):w[l]))}if(h)return o=null,h+""||null}function u(){return Fr().defined(a).curve(d).context(s)}return c.x=function(i){return arguments.length?(t=typeof i=="function"?i:U(+i),r=null,c):t},c.x0=function(i){return arguments.length?(t=typeof i=="function"?i:U(+i),c):t},c.x1=function(i){return arguments.length?(r=i==null?null:typeof i=="function"?i:U(+i),c):r},c.y=function(i){return arguments.length?(e=typeof i=="function"?i:U(+i),n=null,c):e},c.y0=function(i){return arguments.length?(e=typeof i=="function"?i:U(+i),c):e},c.y1=function(i){return arguments.length?(n=i==null?null:typeof i=="function"?i:U(+i),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(i){return arguments.length?(a=typeof i=="function"?i:U(!!i),c):a},c.curve=function(i){return arguments.length?(d=i,s!=null&&(o=d(s)),c):d},c.context=function(i){return arguments.length?(i==null?s=o=null:o=d(s=i),c):s},c}function ks(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Ds(t){return t}function As(){var t=Ds,e=ks,n=null,r=U(0),a=U(_e),s=U(0);function d(o){var f,c=(o=Aa(o)).length,u,i,l=0,v=new Array(c),b=new Array(c),$=+r.apply(this,arguments),g=Math.min(_e,Math.max(-_e,a.apply(this,arguments)-$)),y,h=Math.min(Math.abs(g)/c,s.apply(this,arguments)),p=h*(g<0?-1:1),w;for(f=0;f<c;++f)(w=b[v[f]=f]=+t(o[f],f,o))>0&&(l+=w);for(e!=null?v.sort(function(M,F){return e(b[M],b[F])}):n!=null&&v.sort(function(M,F){return n(o[M],o[F])}),f=0,i=l?(g-c*p)/l:0;f<c;++f,$=y)u=v[f],w=b[u],y=$+(w>0?w*i:0)+p,b[u]={data:o[u],index:f,value:w,startAngle:$,endAngle:y,padAngle:h};return b}return d.value=function(o){return arguments.length?(t=typeof o=="function"?o:U(+o),d):t},d.sortValues=function(o){return arguments.length?(e=o,n=null,d):e},d.sort=function(o){return arguments.length?(n=o,e=null,d):n},d.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:U(+o),d):r},d.endAngle=function(o){return arguments.length?(a=typeof o=="function"?o:U(+o),d):a},d.padAngle=function(o){return arguments.length?(s=typeof o=="function"?o:U(+o),d):s},d}function pa(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function qa(t){this._context=t}qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function oa(t){return new qa(t)}function Ms(t){return{daysAdded:Nt(t.added.added)}}function Cs(t,e){const n=`"added:${t}"`;if(t===1)return n;const r=`-"added:${e}"`;return`${n} AND ${r}`}function Ts(t,e,n,r){if(!t.daysAdded.size)return[null,[]];let s;switch(e){case q.Month:s=-31;break;case q.ThreeMonths:s=-90;break;case q.Year:s=-365;break;case q.AllTime:s=Ae(t.daysAdded.keys());break}const d=1,o=Math.min(70,Math.abs(s)),f=et().domain([s,d]),c=Yt().value(p=>p[0]).domain(f.domain()).thresholds(f.ticks(o))(t.daysAdded.entries()),u=xt;if(!gt(c,u))return[null,[]];const i=et().range([.7,.3]),l=$t(p=>Le(i(p))).domain([d,s]),v=gt(c,u),b=Math.abs(s),$=Math.round(v/b),g=[{label:Te(),value:xe({cards:v})},{label:ba(),value:Ha({count:$})}];function y(p,w,M){const F=ta(p.x0,p.x1),_=xe({cards:u(p)}),k=Re(),D=xe({cards:w});return`${F}:<br>${_}<br>${k}: ${D}`}function h(p){const w=Math.abs(p.x0)+1,M=Math.abs(p.x1)+1,F=Cs(w,M);n("search",{query:F})}return[{scale:f,bins:c,total:v,hoverText:y,onClick:r?h:null,colourScale:l,binValue:xt,showArea:!0},g]}var Rs=K('<label><input type="radio"> </label>'),Ss=K('<label><input type="radio"> </label> <label><input type="radio"> </label> <label><input type="radio"> </label> <!>',1);function ye(t,e){ct(e,!1);const n=[];let r=O(e,"revlogRange"),a=O(e,"graphRange",4),s=O(e,"followRevlog",0,!1);function d(D){D===ft.All?a(q.AllTime):a()===q.AllTime&&a(q.Year)}const o=Ft(1*ke),f=Ft(3*ke),c=Ft(1*wr),u=Je();X(()=>(ot(s()),ot(r())),()=>{s()&&d(r())}),vt(),dt();var i=Ss(),l=E(i),v=j(l);it(v);var b,$=x(v,!0);$.nodeValue=` ${o!=null?o:""}`,Y(l);var g=x(x(l,!0)),y=j(g);it(y);var h,p=x(y,!0);p.nodeValue=` ${f!=null?f:""}`,Y(g);var w=x(x(g,!0)),M=j(w);it(M);var F,_=x(M,!0);_.nodeValue=` ${c!=null?c:""}`,Y(w);var k=x(x(w,!0));Mt(k,()=>r()===ft.All,D=>{var S=Rs(),P=j(S);it(P);var B,A=x(P,!0);A.nodeValue=` ${u!=null?u:""}`,Y(S),lt(()=>{B!==(B=q.AllTime)&&(P.value=(P.__value=q.AllTime)==null?"":q.AllTime)}),mt(n,[],P,()=>(q.AllTime,a()),T=>a(T)),L(D,S)}),lt(()=>{b!==(b=q.Month)&&(v.value=(v.__value=q.Month)==null?"":q.Month),h!==(h=q.ThreeMonths)&&(y.value=(y.__value=q.ThreeMonths)==null?"":q.ThreeMonths),F!==(F=q.Year)&&(M.value=(M.__value=q.Year)==null?"":q.Year)}),mt(n,[],v,()=>(q.Month,a()),D=>a(D)),mt(n,[],y,()=>(q.ThreeMonths,a()),D=>a(D)),mt(n,[],M,()=>(q.Year,a()),D=>a(D)),L(t,i),ut()}const Ps="tick-odd",ja="graph-element-clickable";function Fs(t,e,n){var y;const r=Zt(t),a=r.transition().duration(600),s=h=>nt(h);if(n)Rt(r,!0);else{Rt(r,!1);return}const d=(y=n.binValue)!=null?y:h=>h.length,o=n.scale.range([e.marginLeft,e.width-e.marginRight]);r.select(".x-ticks").call(h=>{var p;return h.transition(a).call(Fe(o).ticks(7).tickSizeOuter(0).tickFormat((p=n.xTickFormat)!=null?p:s))}).attr("direction","ltr");const f=De(n.bins,h=>d(h)),c=et().range([e.height-e.marginBottom,e.marginTop]).domain([0,f]).nice();r.select(".y-ticks").call(h=>h.transition(a).call(Be(c).ticks(e.height/50).tickSizeOuter(0).tickFormat(s))).attr("direction","ltr");function u(h){const p=Math.max(0,o(h.x1)-o(h.x0)-1);return p!=null?p:0}const i=h=>h.attr("width",u).transition(a).attr("x",p=>o(p.x0)).attr("y",p=>c(d(p))).attr("height",p=>c(0)-c(d(p))).attr("fill",p=>n.colourScale(p.x1));r.select("g.bars").selectAll("rect").data(n.bins).join(h=>h.append("rect").attr("rx",1).attr("x",p=>o(p.x0)).attr("y",c(0)).attr("height",0).call(i),h=>h.call(i),h=>h.call(p=>p.transition(a).attr("height",0).attr("y",c(0))));const l=n.bins.map(h=>d(h));l.unshift(0);const v=ra(l),b=c.copy().domain([0,n.total]).nice();n.showArea&&n.bins.length&&v.slice(-1)[0]&&(r.select(".y2-ticks").call(h=>h.transition(a).call(ea(b).ticks(e.height/50).tickSizeOuter(0).tickFormat(s))).attr("direction","ltr"),r.select("path.cumulative-overlay").datum(v).attr("d",sa().curve(oa).x((h,p)=>o(p===0?n.bins[0].x0:n.bins[p-1].x1)).y0(e.height-e.marginBottom).y1(h=>b(h))));const $=n.bins.map((h,p)=>[h,v[p+1]]),g=r.select("g.hover-columns").selectAll("rect").data($).join("rect").attr("x",([h])=>o(h.x0)).attr("y",()=>c(f)).attr("width",([h])=>u(h)).attr("height",()=>c(0)-c(f)).on("mousemove",(h,[p,w])=>{const[M,F]=ge(h,document.body),_=n.showArea?w/n.total*100:0;ve(n.hoverText(p,w,_),M,F)}).on("mouseout",he);n.onClick&&g.filter(([h])=>h.length>0).attr("class",ja).on("click",(h,[p])=>n.onClick(p))}var Bs=Jt('<svg><g class="bars"></g><!><!><!><!></svg>');function Gt(t,e){ct(e,!1);let n=O(e,"data",0,null);const r=te();let a=N(null);X(()=>(m(a),ot(n())),()=>{Fs(m(a),r,n())}),vt(),dt();var s=Bs();ae(s,i=>C(a,i),()=>m(a));var d=j(s),o=x(d);Ne(o);var f=x(o);aa(f);var c=x(f);me(c,{bounds:r,$$legacy:!0});var u=x(c);pe(u,{bounds:r,$$legacy:!0}),Y(s),lt(()=>Pt(s,"viewBox",`0 0 ${r.width} ${r.height}`)),L(t,s),ut()}var Ns=K("<!> <!> <!>",1);function Ys(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData",0,null),s=O(e,"prefs"),d=N(null),o=N([]),f=N(q.Month);const c=Bt();let u=N(null);const i=Qa(),l=Wa();X(()=>ot(a()),()=>{a()&&C(u,Ms(a()))}),X(()=>(m(u),m(d),m(o),m(f),r()),()=>{m(u)&&(()=>{const v=Ts(m(u),m(f),c,r().browserLinksSupported);return C(d,v[0]),C(o,v[1]),v})()}),vt(),dt(),_t(t,{title:i,subtitle:l,children:(v,b)=>{var $=Ns(),g=E($);Ct(g,{children:(p,w)=>{ye(p,{get graphRange(){return m(f)},set graphRange(M){C(f,M)},get revlogRange(){return ft.All},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var y=x(x(g,!0));Gt(y,{get data(){return m(d)},$$legacy:!0});var h=x(x(y,!0));qt(h,{get tableData(){return m(o)},$$legacy:!0}),L(v,$)},$$slots:{default:!0},$$legacy:!0}),ut()}function qs(t,e){const n=t.buttons;switch(e){case q.Month:return n.oneMonth;case q.ThreeMonths:return n.threeMonths;case q.Year:return n.oneYear;case q.AllTime:return n.allTime}}function js(t,e,n,r){const a=qs(n,r),s=[...a.learning.map((h,p)=>({buttonNum:p+1,group:"learning",count:h})),...a.young.map((h,p)=>({buttonNum:p+1,group:"young",count:h})),...a.mature.map((h,p)=>({buttonNum:p+1,group:"mature",count:h}))],d=h=>{const p=s.filter(_=>_.group==h),w=gt(p,_=>_.count),M=gt(p.filter(_=>_.buttonNum>1),_=>_.count),F=w?nt(M/w*100):"0";return{total:w,correct:M,percent:F}},o=h=>{const p=d(h.group).total,w=h.count,M=p?nt(w/p*100):"0";return`${nt(w)} (${M}%)`},f=Math.max(...s.map(h=>h.count)),c=Zt(t),u=c.transition().duration(600);if(f)Rt(c,!0);else{Rt(c,!1);return}const i=Me().domain(["learning","young","mature"]).range([e.marginLeft,e.width-e.marginRight]);c.select(".x-ticks").call(h=>h.transition(u).call(Fe(i).tickFormat(p=>{let w;switch(p){case"learning":w=Ze();break;case"young":w=Pe();break;case"mature":default:w=Se();break}return`${w} ‎(${d(p).percent}%)`}).tickSizeOuter(0))).attr("direction","ltr");const l=Me().domain(["1","2","3","4"]).range([0,i.bandwidth()]).paddingOuter(1).paddingInner(.1),v=$t(je).domain([1,4]),b=h=>nt(h),$=et().range([e.height-e.marginBottom,e.marginTop]).domain([0,f]);c.select(".y-ticks").call(h=>h.transition(u).call(Be($).ticks(e.height/50).tickSizeOuter(0).tickFormat(b))).attr("direction","ltr");const g=h=>h.attr("width",l.bandwidth()).attr("opacity",.8).transition(u).attr("x",p=>i(p.group)+l(p.buttonNum.toString())).attr("y",p=>$(p.count)).attr("height",p=>$(0)-$(p.count)).attr("fill",p=>v(p.buttonNum));c.select("g.bars").selectAll("rect").data(s).join(h=>h.append("rect").attr("rx",1).attr("x",p=>i(p.group)+l(p.buttonNum.toString())).attr("y",$(0)).attr("height",0).call(g),h=>h.call(g),h=>h.call(p=>p.transition(u).attr("height",0).attr("y",$(0))));function y(h){const p=Ua(),w=Xa(),M=Ka(d(h.group)),F=`${w}: ${o(h)}`;return`${p}: ${h.buttonNum}<br>${F}<br>${M}`}c.select("g.hover-columns").selectAll("rect").data(s).join("rect").attr("x",h=>i(h.group)+l(h.buttonNum.toString())).attr("y",()=>$(f)).attr("width",l.bandwidth()).attr("height",()=>$(0)-$(f)).on("mousemove",(h,p)=>{const[w,M]=ge(h,document.body);ve(y(p),w,M)}).on("mouseout",he)}var Ls=Jt('<!><svg><g class="bars"></g><!><!><!></svg>',1);function Os(t,e){ct(e,!1);let n=O(e,"sourceData",0,null),r=O(e,"revlogRange"),a=N(q.Year);const s=te();let d=N(null);const o=Ja(),f=Za();X(()=>(ot(n()),m(d),m(a)),()=>{n()&&js(m(d),s,n(),m(a))}),vt(),dt(),_t(t,{title:o,subtitle:f,children:(c,u)=>{var i=Ls(),l=E(i);Ct(l,{children:(h,p)=>{ye(h,{get graphRange(){return m(a)},set graphRange(w){C(a,w)},get revlogRange(){return r()},followRevlog:!0,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var v=x(l);ae(v,h=>C(d,h),()=>m(d));var b=j(v),$=x(b);Ne($);var g=x($);me(g,{bounds:s,$$legacy:!0});var y=x(g);pe(y,{bounds:s,$$legacy:!0}),Y(v),lt(()=>Pt(v,"viewBox",`0 0 ${s.width} ${s.height}`)),L(c,i)},$$slots:{default:!0},$$legacy:!0}),ut()}function zs(t,e){const n=new Map(Object.entries(t.reviews.count).map(([s,d])=>[Number(s),d.learn+d.relearn+d.mature+d.filtered+d.young])),r=Vs(e),a=[];for(let s=0;s<7;s++)a.push((e+s)%7);return{reviewCount:n,timeFunction:r,weekdayLabels:a,rolloverHour:t.rolloverHour}}function Gs(t,e,n,r,a,s,d,o){const f=Zt(t),c=new Date,u=new Date;u.setFullYear(a);const i=et().range([e.marginLeft,e.width-e.marginRight]).domain([-1,53]),l=new Map;let v=0;for(const[_,k]of n.reviewCount.entries()){let D=Ht.offset(c,_);if(D=Br.offset(D,-1*n.rolloverHour),k>v&&(v=k),D.getFullYear()!=a)continue;const S=n.timeFunction.count(oe(D),D),P=Ht.count(n.timeFunction(D),D),B=Ht.count(oe(D),D);l.set(B,{day:_,count:k,weekNumber:S,weekDay:P,date:D})}if(v)Rt(f,!0);else{Rt(f,!1);return}const b=oe(u),$=new Date(c);$.setFullYear(c.getFullYear()-1);for(let _=0;_<365;_++){const k=Ht.offset(b,_);if(k>c||d==ft.Year&&k<$)continue;const D=Ht.count(oe(k),k);if(!l.has(D)){const S=n.timeFunction.count(oe(k),k),P=Ht.count(n.timeFunction(k),k);l.set(D,{day:D,count:0,weekNumber:S,weekDay:P,date:k})}}const g=Array.from(l.values()),y=et().range([.2,s?.8:1]),h=cs().domain([0,v]).interpolator(_=>Le(y(_)));function p(_){const k=Gr(_.date,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),D=ue({reviews:_.count});return`${k}<br>${D}`}const w=e.height/10,M=s?"#333":"#ddd",F=Vr();f.select("g.weekdays").selectAll("text").data(n.weekdayLabels).join("text").text(_=>zr(_)).attr("width",i(-1)-2).attr("height",w-2).attr("x",i(1)-3).attr("y",(_,k)=>e.marginTop+k*w).attr("fill",s?"#ddd":"black").attr("dominant-baseline","hanging").attr("text-anchor","end").attr("font-size",F.includes("zh")?"xx-small":"small").attr("font-family","monospace").attr("direction","ltr").style("user-select","none").on("click",null).filter(_=>[zt.SUNDAY,zt.MONDAY,zt.FRIDAY,zt.SATURDAY].includes(_)).on("click",(_,k)=>o(k)),f.select("g.days").selectAll("rect").data(g).join("rect").attr("fill",M).attr("width",_=>i(_.weekNumber+1)-i(_.weekNumber)-2).attr("height",w-2).attr("x",_=>i(_.weekNumber+1)).attr("y",_=>e.marginTop+_.weekDay*w).on("mousemove",(_,k)=>{const[D,S]=ge(_,document.body);ve(p(k),D,S)}).on("mouseout",he).attr("class",_=>_.count>0?ja:"").on("click",function(_,k){k.count>0&&r("search",{query:`"prop:rated=${k.day}"`})}).transition().duration(800).attr("fill",_=>_.count===0?M:h(_.count))}function Vs(t){switch(t){case zt.MONDAY:return jr;case zt.FRIDAY:return qr;case zt.SATURDAY:return Yr;default:return Nr}}var Is=K("<span><button>◄</button></span> <span> </span> <span><button>►</button></span>",1),Es=Jt('<!><svg><g class="weekdays"></g><g class="days"></g><!><!></svg>',1);function Hs(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData"),s=O(e,"prefs"),d=O(e,"revlogRange"),o=O(e,"nightMode");const f=Bt();let c=N(null);const u=N(te());ce(u,m(u).height=120),ce(u,m(u).marginLeft=20),ce(u,m(u).marginRight=20);let i=N(null);const l=new Date().getFullYear();let v=N(0),b=N(l);const $=tn();X(()=>(ot(d()),m(v),m(b)),()=>{d()<ft.Year?C(v,l):d()===ft.Year?C(v,l-1):C(v,2e3),m(b)<m(v)&&C(b,m(v))}),X(()=>(ot(a()),m(c),r(),m(i),m(u),m(b),ot(o()),ot(d())),()=>{a()&&(C(c,zs(a(),r().calendarFirstDayOfWeek)),Gs(m(i),m(u),m(c),f,m(b),o(),d(),g=>Ke(s(),Kt(r).calendarFirstDayOfWeek=g,Kt(r))))}),vt(),dt(),_t(t,{title:$,children:(g,y)=>{var h=Es(),p=E(h);Ct(p,{children:(D,S)=>{var P=Is(),B=E(P),A=j(B);Y(B);var T=x(x(B,!0)),G=j(T);Y(T);var H=x(x(T,!0)),z=j(H);Y(H),lt(()=>{A.disabled=m(v)>=m(b),Ot(G,m(b)),z.disabled=m(b)>=l}),de("click",A,()=>ia(b,-1),!1),de("click",z,()=>ia(b),!1),L(D,P)},$$slots:{default:!0},$$legacy:!0});var w=x(p);ae(w,D=>C(i,D),()=>m(i));var M=j(w),F=x(M),_=x(F);me(_,{get bounds(){return m(u)},$$legacy:!0});var k=x(_);pe(k,{get bounds(){return m(u)},$$legacy:!0}),Y(w),lt(()=>Pt(w,"viewBox",`0 0 ${m(u).width} ${m(u).height}`)),L(g,h)},$$slots:{default:!0},$$legacy:!0}),ut()}const ya=[Ba[5][2],Ya[5][2],Na[5][2],Ue[5][2],Ue[5][3],"#FFDC41","grey"];function Qs(t,e){const n=e?t.cardCounts.excludingInactive:t.cardCounts.includingInactive,r=e?'AND -("is:buried" OR "is:suspended")':"";return[[an(),n.newCards,!0,`"is:new"${r}`],[Ze(),n.learn,!0,`(-"is:review" AND "is:learn")${r}`],[$a(),n.relearn,!0,`("is:review" AND "is:learn")${r}`],[Pe(),n.young,!0,`("is:review" AND -"is:learn") AND "prop:ivl<21"${r}`],[Se(),n.mature,!0,`("is:review" -"is:learn") AND "prop:ivl>=21"${r}`],[nn(),n.suspended,e,'"is:suspended"'],[rn(),n.buried,e,'"is:buried"']]}function Ws(t,e){const n=Qs(t,e),r=nt(gt(n,a=>a[1]));return{title:en(),counts:n,totalCards:r}}function Us(t,e,n){const r=ra(n.counts,b=>b[1]),a=Array.from(r).map((b,$)=>{const g=n.counts[$];return{label:g[0],count:g[1],show:g[2],query:g[3],idx:$,total:b}}),s=Math.max(1,r.slice(-1)[0]),d=et().domain([0,s]),o=Zt(t),f=o.select(".counts"),c=As()(n.counts.map(b=>b[1])),u=e.height/2-e.marginTop-e.marginBottom,i=ws().innerRadius(0).outerRadius(u),l=o.transition().duration(600);return f.attr("transform",`translate(${u},${u+e.marginTop})`).selectAll("path").data(c).join(b=>b.append("path").attr("fill",($,g)=>ya[g]).attr("d",i),function(b){return b.call($=>$.transition(l).attrTween("d",g=>{const y=ka({startAngle:0,endAngle:0},g);return h=>i(y(h))}))}),d.range([e.marginLeft,e.width-e.marginRight]),a.flatMap((b,$)=>{const g=nt(b.count/s*100,2);return b.show?{label:b.label,count:nt(b.count),percent:`${g}%`,colour:ya[$],query:b.query}:[]})}var Xs=K('<label><input type="checkbox"> </label>'),Ks=K('<button class="search-link svelte-o8j8wx"> </button>'),Js=K("<span> </span>"),Zs=K('<tr><td class="svelte-o8j8wx"><span>■&nbsp;</span> <!></td><td class="right svelte-o8j8wx"> </td><td class="right svelte-o8j8wx"> </td></tr>'),to=K('<!> <div class="counts-outer svelte-o8j8wx"><div class="svg-container svelte-o8j8wx"><svg class="svelte-o8j8wx"><g class="counts"></g></svg></div> <div class="counts-table svelte-o8j8wx"><table class="svelte-o8j8wx"><tbody><!><tr><td class="svelte-o8j8wx"><span style="visibility: hidden;">■</span> </td><td class="right svelte-o8j8wx"> </td><td class="svelte-o8j8wx"></td></tr></tbody></table></div></div>',1);function eo(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData"),s=O(e,"prefs");const d=Bt();let o=N(null);const f=N(te());ce(f,m(f).width=225),ce(f,m(f).marginBottom=0);let c=N(null),u=N(null);const i=sn(),l=on();X(()=>(m(c),ot(a()),r(),m(o),m(f)),()=>{C(c,Ws(a(),r().cardCountsSeparateInactive)),C(u,Us(m(o),m(f),m(c)))}),vt(),dt(),_t(t,{get title(){return m(c).title},children:(v,b)=>{var $=to(),g=E($);Ct(g,{children:(T,G)=>{var H=Xs(),z=j(H);it(z);var Q=x(z,!0);Q.nodeValue=` ${i!=null?i:""}`,Y(H),na(z,()=>r().cardCountsSeparateInactive,Z=>Ke(s(),Kt(r).cardCountsSeparateInactive=Z,Kt(r))),L(T,H)},$$slots:{default:!0},$$legacy:!0});var y=x(x(g,!0)),h=j(y),p=j(h);ae(p,T=>C(o,T),()=>m(o)),Y(p),Y(h);var w=x(x(h,!0)),M=j(w),F=j(M),_=j(F);Ye(_,1,()=>m(u),qe,(T,G,H)=>{var z=Zs(),Q=j(z),Z=j(Q),I=x(x(Z,!0));Mt(I,()=>r().browserLinksSupported,rt=>{var tt=Ks(),kt=j(tt);Y(tt),lt(()=>Ot(kt,St(G).label)),de("click",tt,()=>d("search",{query:St(G).query}),!1),L(rt,tt)},rt=>{var tt=Js(),kt=j(tt);Y(tt),lt(()=>Ot(kt,St(G).label)),L(rt,tt)}),Y(Q);var J=x(Q),yt=j(J);Y(J);var at=x(J),wt=j(at);Y(at),Y(z),lt(()=>{var rt;Pt(Z,"style",`color: ${(rt=St(G).colour)!=null?rt:""};`),Ot(yt,St(G).count),Ot(wt,St(G).percent)}),L(T,z)});var k=x(_),D=j(k),S=j(D),P=x(S,!0);P.nodeValue=` ${l!=null?l:""}`,Y(D);var B=x(D),A=j(B);Y(B),Y(k),Y(F),Y(M),Y(w),Y(y),lt(()=>{var T;Pt(p,"viewBox",`0 0 ${m(f).width} ${m(f).height}`),Pt(p,"style",`opacity: ${(T=m(c).totalCards?1:0)!=null?T:""}`),Ot(A,m(c).totalCards)}),L(v,$)},$$slots:{default:!0},$$legacy:!0}),ut()}function ao(t){return{eases:Nt(t.difficulty.eases),average:t.difficulty.average}}function no(t,e){const n=`"prop:d>=${t/100}"`;let r=`"prop:d<${(e+1)/100}"`;return e===99&&(r=r.replace("<","<=")),`${n} AND ${r}`}function ro(t,e,n){const r=et().domain([t,e]).nice(),a=r.ticks(n),s=r.domain(),d=t-s[0],o=a[1]-a[0];if(d===0||d%o!==0&&o%d!==0)return[r,a];const f=c=>c+d;return[et().domain(s.map(f)),a.map(f)]}function so(t,e,n){const r=t.eases;if(!r.size)return[null,[]];const a=0,s=100,d=20,[o,f]=ro(a,s,d),c=Yt().value(g=>g[0]).domain(o.domain()).thresholds(f)(r.entries()),u=gt(c,xt),i=$t(je).domain([100,0]);function l(g,y){const h=`${g.x0}%-${g.x1}%`;return cn({cards:xt(g),percent:h})}function v(g){const y=g.x0,h=g.x1-1,p=no(y,h);e("search",{query:p})}const b=g=>nt(g,0)+"%",$=[{label:ln(),value:b(t.average)}];return[{scale:o,bins:c,total:u,hoverText:l,onClick:n?v:null,colourScale:i,showArea:!1,binValue:xt,xTickFormat:b},$]}var oo=K("<!> <!>",1);function io(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData",0,null),s=O(e,"prefs");const d=Bt();let o=N(null),f=N([]);const c=un(),u=dn();X(()=>(ot(a()),m(o),m(f),r()),()=>{a()&&(()=>{const v=so(ao(a()),d,r().browserLinksSupported);return C(o,v[0]),C(f,v[1]),v})()}),vt(),dt();var i=At(),l=E(i);Mt(l,()=>{var v;return(v=a())==null?void 0:v.fsrs},v=>{_t(v,{title:c,subtitle:u,children:(b,$)=>{var g=oo(),y=E(g);Gt(y,{get data(){return m(o)},$$legacy:!0});var h=x(x(y,!0));qt(h,{get tableData(){return m(f)},$$legacy:!0}),L(b,g)},$$slots:{default:!0},$$legacy:!0})}),L(t,i),ut()}function lo(t){return{eases:Nt(t.eases.eases),average:t.eases.average}}function co(t,e){if(t===e)return`"prop:ease=${t/100}"`;const n=`"prop:ease>=${t/100}"`,r=`"prop:ease<${(e+1)/100}"`;return`${n} AND ${r}`}function uo(t,e,n){const r=et().domain([t,e]).nice(),a=r.ticks(n),s=r.domain(),d=t-s[0],o=a[1]-a[0];if(d===0||d%o!==0&&o%d!==0)return[r,a];const f=c=>c+d;return[et().domain(s.map(f)),a.map(f)]}function fo(t,e,n){const r=t.eases;if(!r.size)return[null,[]];const[,a]=Xt(r.keys()),s=130,d=a+1,o=20,[f,c]=uo(s,d,o),u=Yt().value(y=>y[0]).domain(f.domain()).thresholds(c)(r.entries()),i=gt(u,xt),l=$t(je).domain([s,300]);function v(y,h){const p=Math.floor(y.x0),M=Math.floor(y.x1)-p<=10?`${y.x0}%`:`${y.x0}%-${y.x1}%`;return gn({cards:xt(y),percent:M})}function b(y){const h=y.x0,p=y.x1-1,w=co(h,p);e("search",{query:w})}const $=y=>nt(y,0)+"%",g=[{label:fn(),value:$(gt(Array.from(r.entries()).map(([y,h])=>(y+2.5)*h))/i)}];return[{scale:f,bins:u,total:i,hoverText:v,onClick:n?b:null,colourScale:l,showArea:!1,binValue:xt,xTickFormat:$},g]}var go=K("<!> <!>",1);function vo(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData",0,null),s=O(e,"prefs");const d=Bt();let o=N(null),f=N([]);const c=vn(),u=hn();X(()=>(ot(a()),m(o),m(f),r()),()=>{a()&&(()=>{const v=fo(lo(a()),d,r().browserLinksSupported);return C(o,v[0]),C(f,v[1]),v})()}),vt(),dt();var i=At(),l=E(i);Mt(l,()=>{var v,b;return!((b=(v=a())==null?void 0:v.fsrs)!=null&&b)},v=>{_t(v,{title:c,subtitle:u,children:(b,$)=>{var g=go(),y=E(g);Gt(y,{get data(){return m(o)},$$legacy:!0});var h=x(x(y,!0));qt(h,{get tableData(){return m(f)},$$legacy:!0}),L(b,g)},$$slots:{default:!0},$$legacy:!0})}),L(t,i),ut()}function ho(t){const e=t.futureDue;return{dueCounts:Nt(e.futureDue),haveBacklog:e.haveBacklog}}function mo(t,e){if(t===e)return`"prop:due=${t}"`;{const n=`"prop:due>=${t}"`,r=`"prop:due<=${e}"`;return`${n} AND ${r}`}}function po(t,e,n,r,a){var F;const s={histogramData:null,tableData:[]},d=t.dueCounts;if(!d)return s;const[o,f]=Xt(d.keys());let c=o;n||(c=0);let u=f;switch(e){case q.Month:u=31;break;case q.ThreeMonths:u=90;break;case q.Year:u=365;break;case q.AllTime:break}const i=Math.min(70,u-c),l=et().domain([c,u]),v=Yt().value(_=>_[0]).domain(l.domain()).thresholds(l.ticks(i))(d.entries());if(!gt(v,_=>_.length))return s;const b=_=>nt(_),$=et().range([.7,.3]),g=$t(_=>Xe($(_))).domain([c,u]),y=gt(v,xt);function h(_,k,D){const S=ta(_.x0,_.x1===u?_.x1+1:_.x1),P=pn({cards:xt(_)}),B=Re();return`${S}:<br>${P}<br>${B}: ${nt(k)}`}function p(_){const k=_.x0,D=_.x1===u?_.x1:_.x1-1,S=mo(k,D);r("search",{query:S})}const w=u-c,M=[{label:Te(),value:ue({reviews:y})},{label:ba(),value:He({count:Math.round(y/w)})},{label:mn(),value:ue({reviews:(F=t.dueCounts.get(1))!=null?F:0})}];return{histogramData:{scale:l,bins:v,total:y,hoverText:h,onClick:a?p:null,showArea:!0,colourScale:g,binValue:xt,xTickFormat:b},tableData:M}}var yo=K('<label><input type="checkbox"> </label>'),bo=K("<!> <!>",1),$o=K("<!> <!> <!>",1);function xo(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData",0,null),s=O(e,"prefs");const d=Bt();let o=N(null),f=N(null),c=N([]),u=N(q.Month);const i=yn(),l=bn(),v=$n();X(()=>ot(a()),()=>{a()&&C(o,ho(a()))}),X(()=>(m(o),m(f),m(c),m(u),r()),()=>{m(o)&&(()=>{const b=po(m(o),m(u),r().futureDueShowBacklog,d,r().browserLinksSupported);return C(f,b.histogramData),C(c,b.tableData),b})()}),vt(),dt(),_t(t,{title:i,subtitle:l,children:(b,$)=>{var g=$o(),y=E(g);Ct(y,{children:(w,M)=>{var F=bo(),_=E(F);Mt(_,()=>m(o)&&m(o).haveBacklog,D=>{var S=yo(),P=j(S);it(P);var B=x(P,!0);B.nodeValue=` ${v!=null?v:""}`,Y(S),na(P,()=>r().futureDueShowBacklog,A=>Ke(s(),Kt(r).futureDueShowBacklog=A,Kt(r))),L(D,S)});var k=x(x(_,!0));ye(k,{get graphRange(){return m(u)},set graphRange(D){C(u,D)},get revlogRange(){return ft.All},$$legacy:!0}),L(w,F)},$$slots:{default:!0},$$legacy:!0});var h=x(x(y,!0));Gt(h,{get data(){return m(f)},$$legacy:!0});var p=x(x(h,!0));qt(p,{get tableData(){return m(c)},$$legacy:!0}),L(b,g)},$$slots:{default:!0},$$legacy:!0}),ut()}var _o=K('<label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label> <label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label> <input type="text" id="statisticsSearchText" class="svelte-19q2rko">',1),wo=K('<label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label> <label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label>',1),ko=K('<div class="range-box svelte-19q2rko"><div class="spin svelte-19q2rko">◐</div> <!> <!></div> <div class="range-box-pad svelte-19q2rko"></div>',1);function La(t,e){ct(e,!1);const n=Dt(),r=()=>pt(c(),"$days",n),a=()=>pt(u(),"$search",n),s=[],d=[];var o=N();(function(D){D[D.Deck=1]="Deck",D[D.Collection=2]="Collection",D[D.Custom=3]="Custom"})(m(o)||C(o,{}));let f=O(e,"loading"),c=O(e,"days"),u=O(e,"search"),i=N(Ma(r())),l=N();a()==="deck:current"?C(l,m(o).Deck):a()===""?C(l,m(o).Collection):C(l,m(o).Custom);let v=N(a());function b(){se(u(),m(v))}const $=xn(),g=_n(),y=wn(),h=kn(),p=Dn();X(()=>(m(l),m(o)),()=>{switch(m(l)){case m(o).Deck:se(u(),C(v,"deck:current"));break;case m(o).Collection:se(u(),C(v,""));break}}),X(()=>m(i),()=>{switch(m(i)){case ft.Year:se(c(),365);break;case ft.All:se(c(),0);break}}),vt(),dt();var w=ko(),M=E(w),F=j(M),_=x(x(F,!0));Ct(_,{children:(D,S)=>{var P=_o(),B=E(P),A=j(B);it(A);var T,G=x(A,!0);G.nodeValue=` ${g!=null?g:""}`,Y(B);var H=x(x(B,!0)),z=j(H);it(z);var Q,Z=x(z,!0);Z.nodeValue=` ${y!=null?y:""}`,Y(H);var I=x(x(H,!0));it(I),Pt(I,"placeholder",h),lt(()=>{T!==(T=m(o).Deck)&&(A.value=(A.__value=m(o).Deck)==null?"":m(o).Deck),Q!==(Q=m(o).Collection)&&(z.value=(z.__value=m(o).Collection)==null?"":m(o).Collection)}),mt(s,[],A,()=>(m(o).Deck,m(l)),J=>C(l,J)),mt(s,[],z,()=>(m(o).Collection,m(l)),J=>C(l,J)),Or(I,()=>m(v),J=>C(v,J)),de("change",I,b,!1),de("focus",I,()=>{C(l,m(o).Custom)},!1),L(D,P)},$$slots:{default:!0},$$legacy:!0});var k=x(x(_,!0));Ct(k,{children:(D,S)=>{var P=wo(),B=E(P),A=j(B);it(A);var T,G=x(A,!0);G.nodeValue=` ${$!=null?$:""}`,Y(B);var H=x(x(B,!0)),z=j(H);it(z);var Q,Z=x(z,!0);Z.nodeValue=` ${p!=null?p:""}`,Y(H),lt(()=>{T!==(T=ft.Year)&&(A.value=(A.__value=ft.Year)==null?"":ft.Year),Q!==(Q=ft.All)&&(z.value=(z.__value=ft.All)==null?"":ft.All)}),mt(d,[],A,()=>(ft.Year,m(i)),I=>C(i,I)),mt(d,[],z,()=>(ft.All,m(i)),I=>C(i,I)),L(D,P)},$$slots:{default:!0},$$legacy:!0}),Y(M),lt(()=>An(F,"loading",f())),L(t,w),ut()}async function Do(t,e){let n=await t();const{subscribe:r,set:a}=We(n);function s(o){n=o,a(o),e(o)}function d(o){s(o(n))}return{subscribe:r,set:s,update:d}}function Ao(t,e){ct(e,!1);const n=Dt(),r=()=>pt(d(),"$search",n),a=()=>pt(o(),"$days",n),s=N();let d=O(e,"search"),o=O(e,"days");const f=Do(()=>Ir({}),Er);let c=N(null),u=N(!0);async function i(b,$){await f,C(u,!0);try{C(c,await Wr({search:b,days:$}))}finally{C(u,!1)}}X(()=>(r(),a()),()=>{i(r(),a())}),X(()=>a(),()=>{C(s,Ma(a()))}),vt(),dt();var l=At(),v=E(l);Kr(v,()=>f,null,(b,$)=>{var g=At(),y=E(g);Hr(y,Qr(e),{get revlogRange(){return m(s)},get prefs(){return m($)},get sourceData(){return m(c)},get loading(){return m(u)}}),L(b,g)}),L(t,l),ut()}var Mo=K('<!> <div class="graphs-container svelte-n9umk6"><!></div> <div class="spacer svelte-n9umk6"></div>',1);function Co(t,e){ct(e,!1);const n=Dt(),r=()=>pt(o,"$search",n),a=()=>pt(Ur,"$pageTheme",n);let s=O(e,"initialSearch"),d=O(e,"initialDays");const o=We(s()),f=We(d());let c=O(e,"graphs"),u=O(e,"controller",0,La);function i(l){Xr(`browserSearch: ${r()} ${l.detail.query}`)}dt(),Ao(t,{search:o,days:f,children:(l,v)=>{const b=be(()=>v.sourceData),$=be(()=>v.loading),g=be(()=>v.prefs),y=be(()=>v.revlogRange);var h=Mo(),p=E(h);Mt(p,u,F=>{var _=At(),k=E(_);ca(k,u,(D,S)=>{S(D,{search:o,days:f,get loading(){return m($)},$$legacy:!0})}),L(F,_)});var w=x(x(p,!0)),M=j(w);Mt(M,()=>m(b)&&m(y),F=>{var _=At(),k=E(_);Ye(k,1,c,qe,(D,S,P)=>{var B=At(),A=E(B);ca(A,()=>St(S),(T,G)=>{G(T,{get sourceData(){return m(b)},get prefs(){return m(g)},get revlogRange(){return m(y)},get nightMode(){return a().isDark},$$events:{search:i},$$legacy:!0})}),L(D,B)}),L(F,_)}),Y(w),L(l,h)},$$slots:{default:!0},$$legacy:!0}),ut()}function To(t,e){function n(r){return r.map((a,s)=>({hour:s,totalCount:a.total,correctCount:a.correct}))}switch(e){case q.Month:return n(t.hours.oneMonth);case q.ThreeMonths:return n(t.hours.threeMonths);case q.Year:return n(t.hours.oneYear);case q.AllTime:return n(t.hours.allTime)}}function Ro(t,e,n,r){const a=To(n,r),s=Math.max(...a.map(g=>g.totalCount)),d=Zt(t),o=d.transition().duration(600);if(s)Rt(d,!0);else{Rt(d,!1);return}const f=Me().domain(a.map(g=>g.hour.toString())).range([e.marginLeft,e.width-e.marginRight]).paddingInner(.1);d.select(".x-ticks").call(g=>g.transition(o).call(Fe(f).tickSizeOuter(0))).selectAll(".tick").selectAll("text").classed(Ps,g=>g%2!=0).attr("direction","ltr");const c=et().range([.1,.8]),u=$t(g=>Le(c(g))).domain([0,s]),i=g=>nt(g),l=et().range([e.height-e.marginBottom,e.marginTop]).domain([0,s]).nice();d.select(".y-ticks").call(g=>g.transition(o).call(Be(l).ticks(e.height/50).tickSizeOuter(0).tickFormat(i))).attr("direction","ltr");const v=l.copy().domain([0,1]),b=g=>g.attr("width",f.bandwidth()).transition(o).attr("x",y=>f(y.hour.toString())).attr("y",y=>l(y.totalCount)).attr("height",y=>l(0)-l(y.totalCount)).attr("fill",y=>u(y.totalCount));d.select("g.bars").selectAll("rect").data(a).join(g=>g.append("rect").attr("rx",1).attr("x",y=>f(y.hour.toString())).attr("y",l(0)).attr("height",0).call(b),g=>g.call(b),g=>g.call(y=>y.transition(o).attr("height",0).attr("y",l(0)))),d.select(".y2-ticks").call(g=>g.transition(o).call(ea(v).ticks(e.height/50).tickFormat(y=>`${Math.round(y*100)}%`).tickSizeOuter(0))).attr("direction","ltr"),d.select("path.cumulative-overlay").datum(a).attr("d",sa().curve(oa).defined(g=>g.totalCount>0).x(g=>f(g.hour.toString())+f.bandwidth()/2).y0(e.height-e.marginBottom).y1(g=>{const y=g.correctCount/g.totalCount;return v(isNaN(y)?0:y)}));function $(g){const y=Mn({hourStart:g.hour,hourEnd:g.hour+1}),h=Cn({reviews:g.totalCount}),p=Tn({percent:g.totalCount?g.correctCount/g.totalCount*100:0,reviews:g.correctCount});return`${y}<br>${h}<br>${p}`}d.select("g.hover-columns").selectAll("rect").data(a).join("rect").attr("x",g=>f(g.hour.toString())).attr("y",()=>l(s)).attr("width",f.bandwidth()).attr("height",()=>l(0)-l(s)).on("mousemove",(g,y)=>{const[h,p]=ge(g,document.body);ve($(y),h,p)}).on("mouseout",he)}var So=Jt('<!><svg><g class="bars"></g><!><!><!><!></svg>',1);function Po(t,e){ct(e,!1);let n=O(e,"sourceData",0,null),r=O(e,"revlogRange"),a=N(q.Year);const s=te();let d=N(null);const o=Rn(),f=Sn();X(()=>(ot(n()),m(d),m(a)),()=>{n()&&Ro(m(d),s,n(),m(a))}),vt(),dt(),_t(t,{title:o,subtitle:f,children:(c,u)=>{var i=So(),l=E(i);Ct(l,{children:(p,w)=>{ye(p,{get graphRange(){return m(a)},set graphRange(M){C(a,M)},get revlogRange(){return r()},followRevlog:!0,$$legacy:!0})},$$slots:{default:!0},$$legacy:!0});var v=x(l);ae(v,p=>C(d,p),()=>m(d));var b=j(v),$=x(b);aa($);var g=x($);Ne(g);var y=x(g);me(y,{bounds:s,$$legacy:!0});var h=x(y);pe(h,{bounds:s,$$legacy:!0}),Y(v),lt(()=>Pt(v,"viewBox",`0 0 ${s.width} ${s.height}`)),L(c,i)},$$slots:{default:!0},$$legacy:!0}),ut()}var V=(t=>(t[t.Month=0]="Month",t[t.Percentile50=1]="Percentile50",t[t.Percentile95=2]="Percentile95",t[t.All=3]="All",t))(V||{});function Oa(t){const e=Nt(t.intervals),n=gt(e,([s,d])=>d),r=Array(n);let a=0;for(const s of e.entries())r.fill(s[0],a,a+s[1]),a+=s[1];return r.sort((s,d)=>s-d),{intervals:r}}function Fo(t,e,n,r){return e-t<=1?(r?Bn:Nn)({day:t,cards:n}):(r?Yn:qn)({daysStart:t,daysEnd:e-1,cards:n})}function Bo(t,e){if(t===e)return`"prop:ivl=${t}"`;const n=`"prop:ivl>=${t}"`,r=`"prop:ivl<=${e}"`;return`${n} ${r}`}function No(t,e){t===0&&(t=.5);const n=`"prop:s>=${t-.5}"`,r=`"prop:s<${e+.5}"`;return`${n} ${r}`}function za(t,e,n,r,a){var _;const s=t.intervals;if(!s.length)return[null,[]];const d=0;let[,o]=Xt(s),f=!1;switch(e){case 0:o=Math.min(o,30);break;case 1:o=fa(s,.5),f=!0;break;case 2:o=fa(s,.95),f=!0;break;case 3:f=!0;break}o=o+1;const c=a?k=>k:k=>k+1,u=(k,D,S)=>D===S.length-1?[k-(S[0]-1),k+1]:[k-(S[0]-1)],i=Math.min(70,o-d),l=et().domain([d,o]),v=et().domain((f?l.nice():l).domain().map(c)),b=Yt().domain(v.domain()).thresholds(v.ticks(i).flatMap(u))(s),$=gt(b,k=>k.length);if(!$)return[null,[]];const g=et().range([.7,.3]),y=$t(k=>Le(g(k))).domain([o,d]);function h(k,D,S){const P=Fo(k.x0,k.x1,k.length,a),B=Re();return`${P}<br>${B}: ‎${nt(S,1)}%`}function p(k){const D=k.x0,S=k.x1-1,P=(a?No:Bo)(D,S);n("search",{query:P})}const w=Math.round((_=rs(s))!=null?_:0),M=Ft(w*86400,!1),F=[{label:a?Pn():Fn(),value:M}];return[{scale:v,bins:b,total:$,hoverText:h,onClick:r?p:null,colourScale:y,showArea:!0},F]}var Yo=K('<label><input type="radio"> </label> <label><input type="radio"> 50%</label> <label><input type="radio"> 95%</label> <label><input type="radio"> </label>',1),qo=K("<!> <!> <!>",1);function jo(t,e){ct(e,!1);const n=Dt(),r=()=>pt(d(),"$prefs",n),a=[];let s=O(e,"sourceData",0,null),d=O(e,"prefs");const o=Bt();let f=N(null),c=N(null),u=N([]),i=N(V.Percentile95);const l=jn(),v=Ln(),b=Ft(1*ke),$=Je();X(()=>ot(s()),()=>{s()&&C(f,Oa(s().intervals))}),X(()=>(m(f),m(c),m(u),m(i),r()),()=>{m(f)&&(()=>{const g=za(m(f),m(i),o,r().browserLinksSupported,!1);return C(c,g[0]),C(u,g[1]),g})()}),vt(),dt(),_t(t,{title:l,subtitle:v,children:(g,y)=>{var h=qo(),p=E(h);Ct(p,{children:(F,_)=>{var k=Yo(),D=E(k),S=j(D);it(S);var P,B=x(S,!0);B.nodeValue=` ${b!=null?b:""}`,Y(D);var A=x(x(D,!0)),T=j(A);it(T);var G;we(),Y(A);var H=x(x(A,!0)),z=j(H);it(z);var Q;we(),Y(H);var Z=x(x(H,!0)),I=j(Z);it(I);var J,yt=x(I,!0);yt.nodeValue=` ${$!=null?$:""}`,Y(Z),lt(()=>{P!==(P=V.Month)&&(S.value=(S.__value=V.Month)==null?"":V.Month),G!==(G=V.Percentile50)&&(T.value=(T.__value=V.Percentile50)==null?"":V.Percentile50),Q!==(Q=V.Percentile95)&&(z.value=(z.__value=V.Percentile95)==null?"":V.Percentile95),J!==(J=V.All)&&(I.value=(I.__value=V.All)==null?"":V.All)}),mt(a,[],S,()=>(V.Month,m(i)),at=>C(i,at)),mt(a,[],T,()=>(V.Percentile50,m(i)),at=>C(i,at)),mt(a,[],z,()=>(V.Percentile95,m(i)),at=>C(i,at)),mt(a,[],I,()=>(V.All,m(i)),at=>C(i,at)),L(F,k)},$$slots:{default:!0},$$legacy:!0});var w=x(x(p,!0));Gt(w,{get data(){return m(c)},$$legacy:!0});var M=x(x(w,!0));qt(M,{get tableData(){return m(u)},$$legacy:!0}),L(g,h)},$$slots:{default:!0},$$legacy:!0}),ut()}function Lo(t){return{retrievability:Nt(t.retrievability.retrievability),average:t.retrievability.average,sum:t.retrievability.sum}}function Oo(t,e){const n=`"prop:r>=${t/100}"`;let r=`"prop:r<${(e+1)/100}"`;return e===99&&(r=r.replace("<","<=")),`${n} AND ${r}`}function zo(t,e,n){const r=et().domain([t,e]).nice(),a=r.ticks(n),s=r.domain(),d=t-s[0],o=a[1]-a[0];if(d===0||d%o!==0&&o%d!==0)return[r,a];const f=c=>c+d;return[et().domain(s.map(f)),a.map(f)]}function Go(t,e,n){const r=t.retrievability;if(!r.size)return[null,[]];const a=0,s=100,d=20,[o,f]=zo(a,s,d),c=Yt().value(g=>g[0]).domain(o.domain()).thresholds(f)(r.entries()),u=gt(c,xt),i=$t(je).domain([0,100]);function l(g,y){const h=`${g.x0}%-${g.x1}%`;return Gn({cards:xt(g),percent:h})}function v(g){const y=g.x0,h=g.x1-1,p=Oo(y,h);e("search",{query:p})}const b=g=>nt(g,0)+"%",$=[{label:On(),value:b(t.average)},{label:zn(),value:xe({cards:+t.sum.toFixed(0)})}];return[{scale:o,bins:c,total:u,hoverText:l,onClick:n?v:null,colourScale:i,showArea:!1,binValue:xt,xTickFormat:b},$]}var Vo=K("<!> <!>",1);function Io(t,e){ct(e,!1);const n=Dt(),r=()=>pt(s(),"$prefs",n);let a=O(e,"sourceData",0,null),s=O(e,"prefs");const d=Bt();let o=N(null),f=N([]);const c=Vn(),u=In();X(()=>(ot(a()),m(o),m(f),r()),()=>{a()&&(()=>{const v=Go(Lo(a()),d,r().browserLinksSupported);return C(o,v[0]),C(f,v[1]),v})()}),vt(),dt();var i=At(),l=E(i);Mt(l,()=>{var v;return(v=a())==null?void 0:v.fsrs},v=>{_t(v,{title:c,subtitle:u,children:(b,$)=>{var g=Vo(),y=E(g);Gt(y,{get data(){return m(o)},$$legacy:!0});var h=x(x(y,!0));qt(h,{get tableData(){return m(f)},$$legacy:!0}),L(b,g)},$$slots:{default:!0},$$legacy:!0})}),L(t,i),ut()}function Eo(t){return{reviewCount:Nt(t.reviews.count),reviewTime:Nt(t.reviews.time)}}function Ga(t){const e=[0,0,0,0,0];for(const n of t)e[0]+=n[1].mature,e[1]+=n[1].young,e[2]+=n[1].relearn,e[3]+=n[1].learn,e[4]+=n[1].filtered;return e}function le(t,e){return gt(Ga(t).slice(0,e+1))}function Ho(t,e,n,r,a){const s=Zt(t),d=s.transition().duration(600),o=1;let f=0;switch(r){case q.Month:f=-30;break;case q.ThreeMonths:f=-89;break;case q.Year:f=-364;break;case q.AllTime:f=Ae(n.reviewCount.keys());break}const c=Math.min(70,Math.abs(f)),u=et().domain([f,o]);r===q.AllTime&&u.nice(c);const i=a?n.reviewTime:n.reviewCount,l=Yt().value(R=>R[0]).domain(u.domain()).thresholds(u.ticks(c))(i.entries());if(gt(l,R=>R.length))Rt(s,!0);else return Rt(s,!1),[];u.range([e.marginLeft,e.width-e.marginRight]),s.select(".x-ticks").call(R=>R.transition(d).call(Fe(u).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const b=R=>a?Ft(R/1e3,!0):Math.round(R)!=R?"":nt(R),$=De(l,R=>le(R,4)),g=et().range([e.height-e.marginBottom,e.marginTop]).domain([0,$]).nice();s.select(".y-ticks").call(R=>R.transition(d).call(Be(g).ticks(e.height/50).tickSizeOuter(0).tickFormat(b))).attr("direction","ltr");function y(R){const W=Math.max(0,u(R.x1)-u(R.x0)-1);return W!=null?W:0}const h=et().range([.3,.5]),p=et().range([.4,.7]),w=$t(R=>Xe(p(R))).domain(u.domain()),M=$t(R=>Xe(h(R))).domain(u.domain()),F=$t(R=>gs(h(R))).domain(u.domain()),_=$t(R=>vs(h(R))).domain(u.domain()),k=$t(R=>fs(h(R))).domain(u.domain());function D(R){switch(R){case 0:return w;case 1:return M;case 3:return _;case 2:return F;case 4:return k}}function S(R){return a?Ft(R/1e3):ue({reviews:R})}function P(R,W){const st=ta(R.x0,R.x1),It=Ga(R),re=S(gt(It));let Et=`<table><tr><td>${st}</td><td align=end>${re}</td></tr>`;const Ia=[[4,Kn()],[3,Ze()],[2,$a()],[1,Pe()],[0,Se()],[null,Re()]];for(const[Oe,Ea]of Ia){let ze,Ge;Oe==null?(ze="transparent",Ge=S(W)):(ze=D(Oe)(1),Ge=S(It[Oe])),Et+=`<tr>
            <td><span style="color: ${ze};">■</span> ${Ea}</td>
            <td align=end>${Ge}</td>
            </tr>`}return Et}const B=(R,W)=>R.attr("width",y).transition(d).attr("x",st=>u(st.x0)).attr("y",st=>g(le(st,W))).attr("height",st=>g(0)-g(le(st,W))).attr("fill",st=>D(W)(st.x0));for(const R of[0,1,2,3,4])s.select(`g.bars${R}`).selectAll("rect").data(l).join(W=>W.append("rect").attr("rx",1).attr("x",st=>u(st.x0)).attr("y",g(0)).attr("height",0).call(st=>B(st,R)),W=>W.call(st=>B(st,R)),W=>W.call(st=>st.transition(d).attr("height",0).attr("y",g(0))));const A=l.map(R=>le(R,4));A.unshift(0);const T=ra(A),G=T.slice(-1)[0],H=g.copy().domain([0,G]).nice();G&&(s.select(".y2-ticks").call(R=>R.transition(d).call(ea(H).ticks(e.height/50).tickFormat(b).tickSizeOuter(0))).attr("direction","ltr"),s.select("path.cumulative-overlay").datum(T).attr("d",sa().curve(oa).x((R,W)=>u(W===0?l[0].x0:l[W-1].x1)).y0(e.height-e.marginBottom).y1(R=>H(R))));const z=l.map((R,W)=>[R,T[W+1]]);s.select("g.hover-columns").selectAll("rect").data(z).join("rect").attr("x",([R])=>u(R.x0)).attr("y",()=>g($)).attr("width",([R])=>y(R)).attr("height",()=>g(0)-g($)).on("mousemove",(R,[W,st])=>{const[It,re]=ge(R,document.body);ve(P(W,st),It,re)}).on("mouseout",he);const Q=-f+1,Z=gt(l,R=>R.length),I=Z/Q*100,J=G,yt=J/Q,at=J/Z;let wt,rt,tt,kt,jt;if(a){wt=Ft(J/1e3,!1),rt=la({count:Math.round(at/1e3/60)}),tt=la({count:Math.round(yt/1e3/60)}),jt=En();const R=Yt().value(Et=>Et[0]).domain(u.domain())(n.reviewCount.entries()),W=gt(R,Et=>le(Et,4)),st=J/1e3,It=st/W,re=W*60/st;kt=Hn({averageSeconds:It,cardsPerMinute:re})}else wt=ue({reviews:J}),rt=He({count:Math.round(at)}),tt=He({count:Math.round(yt)}),kt=jt="";const Vt=[{label:Qn(),value:Wn({amount:Z,total:Q,percent:I<99.5?nt(I):I<99.95?nt(I,1):I<100?nt(I,2):"100"})},{label:Te(),value:wt},{label:Un(),value:rt},{label:Xn(),value:tt}];return kt&&Vt.push({label:jt,value:kt}),Vt}var Qo=K('<label><input type="checkbox"> </label> <!>',1),Wo=Jt("<g></g>"),Uo=Jt("<!><svg><!><!><!><!><!></svg><!>",1);function Xo(t,e){ct(e,!1);let n=O(e,"sourceData",0,null),r=O(e,"revlogRange"),a=N(null);const s=te();let d=N(null),o=N(q.Month),f=N(!1),c=N([]);const u=Jn(),i=Zn();let l=N("");X(()=>ot(n()),()=>{n()&&C(a,Eo(n()))}),X(()=>(m(a),m(d),m(o),m(f)),()=>{m(a)&&C(c,Ho(m(d),s,m(a),m(o),m(f)))}),X(()=>m(f),()=>{m(f)?C(l,tr()):C(l,er())}),vt(),dt(),_t(t,{title:u,get subtitle(){return m(l)},children:(v,b)=>{var $=Uo(),g=E($);Ct(g,{children:(k,D)=>{var S=Qo(),P=E(S),B=j(P);it(B);var A=x(B,!0);A.nodeValue=` ${i!=null?i:""}`,Y(P);var T=x(x(P,!0));ye(T,{get graphRange(){return m(o)},set graphRange(G){C(o,G)},get revlogRange(){return r()},followRevlog:!0,$$legacy:!0}),na(B,()=>m(f),G=>C(f,G)),L(k,S)},$$slots:{default:!0},$$legacy:!0});var y=x(g);ae(y,k=>C(d,k),()=>m(d));var h=j(y);Ye(h,1,()=>[4,3,2,1,0],qe,(k,D,S)=>{var P=Wo();lt(()=>{var B;return ar(P,`bars${(B=St(D))!=null?B:""}`)}),L(k,P)});var p=x(h);aa(p);var w=x(p);Ne(w);var M=x(w);me(M,{bounds:s,$$legacy:!0});var F=x(M);pe(F,{bounds:s,$$legacy:!0}),Y(y);var _=x(y);qt(_,{get tableData(){return m(c)},$$legacy:!0}),lt(()=>Pt(y,"viewBox",`0 0 ${s.width} ${s.height}`)),L(v,$)},$$slots:{default:!0},$$legacy:!0}),ut()}var Ko=K('<label><input type="radio"> </label> <label><input type="radio"> 50%</label> <label><input type="radio"> 95%</label> <label><input type="radio"> </label>',1),Jo=K("<!> <!> <!>",1);function Zo(t,e){ct(e,!1);const n=Dt(),r=()=>pt(d(),"$prefs",n),a=[];let s=O(e,"sourceData",0,null),d=O(e,"prefs");const o=Bt();let f=N(null),c=N(null),u=N([]),i=N(V.Percentile95);const l=nr(),v=rr(),b=Ft(1*ke),$=Je();X(()=>ot(s()),()=>{s()&&C(f,Oa(s().stability))}),X(()=>(m(f),m(c),m(u),m(i),r()),()=>{m(f)&&(()=>{const h=za(m(f),m(i),o,r().browserLinksSupported,!0);return C(c,h[0]),C(u,h[1]),h})()}),vt(),dt();var g=At(),y=E(g);Mt(y,()=>{var h;return(h=s())==null?void 0:h.fsrs},h=>{_t(h,{title:l,subtitle:v,children:(p,w)=>{var M=Jo(),F=E(M);Ct(F,{children:(D,S)=>{var P=Ko(),B=E(P),A=j(B);it(A);var T,G=x(A,!0);G.nodeValue=` ${b!=null?b:""}`,Y(B);var H=x(x(B,!0)),z=j(H);it(z);var Q;we(),Y(H);var Z=x(x(H,!0)),I=j(Z);it(I);var J;we(),Y(Z);var yt=x(x(Z,!0)),at=j(yt);it(at);var wt,rt=x(at,!0);rt.nodeValue=` ${$!=null?$:""}`,Y(yt),lt(()=>{T!==(T=V.Month)&&(A.value=(A.__value=V.Month)==null?"":V.Month),Q!==(Q=V.Percentile50)&&(z.value=(z.__value=V.Percentile50)==null?"":V.Percentile50),J!==(J=V.Percentile95)&&(I.value=(I.__value=V.Percentile95)==null?"":V.Percentile95),wt!==(wt=V.All)&&(at.value=(at.__value=V.All)==null?"":V.All)}),mt(a,[],A,()=>(V.Month,m(i)),tt=>C(i,tt)),mt(a,[],z,()=>(V.Percentile50,m(i)),tt=>C(i,tt)),mt(a,[],I,()=>(V.Percentile95,m(i)),tt=>C(i,tt)),mt(a,[],at,()=>(V.All,m(i)),tt=>C(i,tt)),L(D,P)},$$slots:{default:!0},$$legacy:!0});var _=x(x(F,!0));Gt(_,{get data(){return m(c)},$$legacy:!0});var k=x(x(_,!0));qt(k,{get tableData(){return m(u)},$$legacy:!0}),L(p,M)},$$slots:{default:!0},$$legacy:!0})}),L(t,g),ut()}function ti(t){let e;const n=t.today;if(n.answerCount){const r=kr(n.answerCount,n.answerMillis/1e3),a=n.answerCount-n.correctCount;let s=sr();s+=` ${a} (${nt(a/n.answerCount*100)}%)`;const d=or({learnCount:n.learnCount,reviewCount:n.reviewCount,relearnCount:n.relearnCount,filteredCount:n.earlyReviewCount});let o;n.matureCount?o=ir({correct:n.matureCorrect,total:n.matureCount,percent:n.matureCorrect/n.matureCount*100}):o=lr(),e=[r,s,d,o]}else e=[cr()];return{title:ur(),lines:e}}var ei=K("<div> </div>"),ai=K('<div class="legend svelte-2llkqb"></div>');function ni(t,e){ct(e,!1);let n=O(e,"sourceData",0,null),r=N(null);X(()=>ot(n()),()=>{n()&&C(r,ti(n()))}),vt(),dt();var a=At(),s=E(a);Mt(s,()=>m(r),d=>{_t(d,{get title(){return m(r).title},children:(o,f)=>{var c=ai();Ye(c,9,()=>m(r).lines,qe,(u,i,l)=>{var v=ei(),b=j(v);Y(v),lt(()=>Ot(b,St(i))),L(u,v)}),Y(c),L(o,c)},$$slots:{default:!0},$$legacy:!0})}),L(t,a),ut()}function Ee(t,e){const n=t+e;return n===0?"0%":nt(t/n*100,1)+"%"}var Va=(t=>(t[t.Young=0]="Young",t[t.Mature=1]="Mature",t[t.Total=2]="Total",t))(Va||{});function Qt(t,e,n){let r,a,s;switch(n){case 0:r=e.youngPassed,a=e.youngFailed,s=Ee(e.youngPassed,e.youngFailed);break;case 1:r=e.maturePassed,a=e.matureFailed,s=Ee(e.maturePassed,e.matureFailed);break;case 2:r=e.youngPassed+e.maturePassed,a=e.youngFailed+e.matureFailed,s=Ee(r,a);break}return`
        <tr>
            <td class="trl">${t}</td>
            <td class="trr">${nt(r)}</td>
            <td class="trr">${nt(a)}</td>
            <td class="trr">${s}</td>
        </tr>`}function ri(t,e){const n=t.trueRetention;let r="";for(const a of Object.values(Va)){if(typeof a=="string")continue;const s=`
        <style>
            td.trl { border: 1px solid; text-align: left; }
            td.trr { border: 1px solid; text-align: right; }
            td.trc { border: 1px solid; text-align: center; }
            table { width: 100%; table-layout: fixed; }
            colgroup col:first-child { width: 40% }
        </style>
        <table cellspacing="0" cellpadding="2">
        <colgroup><col><col><col></colgroup>
            <tr>
                <td class="trl"><b>${si(a)}</b></td>
                <td class="trr">${dr()}</td>
                <td class="trr">${fr()}</td>
                <td class="trr">${gr()}</td>
            </tr>
            ${Qt(vr(),n.today,a)}
            ${Qt(hr(),n.yesterday,a)}
            ${Qt(mr(),n.week,a)}
            ${Qt(pr(),n.month,a)}
            ${e===ft.Year?Qt(yr(),n.year,a):Qt(br(),n.allTime,a)}
        </table>`;r+=s}return r}function si(t){switch(t){case 0:return Pe();case 1:return Se();case 2:return Te()}}var oi=K('<div class="true-retention-table svelte-2xnk54"><!></div>');function ii(t,e){ct(e,!1);let n=O(e,"revlogRange"),r=O(e,"sourceData",0,null),a=N();const s=$r(),d=xr();X(()=>(ot(r()),ot(n())),()=>{r()&&C(a,ri(r(),n()))}),vt(),dt(),_t(t,{title:s,subtitle:d,children:(o,f)=>{var c=At(),u=E(c);Mt(u,()=>m(a),i=>{var l=oi(),v=j(l);_r(v,()=>m(a),!1,!1),Y(l),L(i,l)}),L(o,c)},$$slots:{default:!0},$$legacy:!0}),ut()}function Ci(t){Co(t,{graphs:[ni,xo,Hs,Xo,eo,jo,Zo,vo,io,Io,Po,Os,Ys,ii],initialSearch:"deck:current",initialDays:365,controller:La,$$legacy:!0})}export{Ci as component};
