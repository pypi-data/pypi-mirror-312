import{a as j,b as K,n as Zt,e as At}from"../chunks/disclose-version.CfFqPxFi.mjs";import{p as ut,l as X,a as vt,aM as H,M as L,O as M,N as Y,t as ct,b as ft,K as rt,g as m,s as C,m as N,aZ as ue,aC as cn,D as Jt,n as Gt,b1 as ht,aY as Kn,ay as xe}from"../chunks/runtime.HDa-Uzkj.mjs";import{i as dt}from"../chunks/lifecycle.BeemcHx2.mjs";import{p as O,a as Mt}from"../chunks/props.QYk8O08b.mjs";import{s as Dt,a as yt,c as Je,b as oe}from"../chunks/store.CtPiLHV-.mjs";import{fl as Se,fm as $e,fn as Dn,fo as Jn,fp as Pe,fq as Ze,ar as st,v as St,fr as Zn,fs as ta,ft as Fe,fu as Be,fv as tn,fw as ea,fx as na,fy as aa,fz as ra,fA as sa,ee as fe,fB as oa,fC as ia,fD as la,fE as An,fF as ca,fG as ua,fH as fa,fI as da,fJ as ga,fK as va,fL as ha,fM as ma,fN as pa,fO as ba,fP as ya,fQ as xa,fR as ke,fS as _a,fT as $a,fU as wa,fV as ka,fW as Da,fX as Aa,fY as Ma,fZ as Ca,f_ as Ta,f$ as Ra,g0 as Sa,t as Pa,g1 as Fa,g2 as Ba,g3 as Na,g4 as Ya,g5 as qa,g6 as La,g7 as ja,g8 as Oa,g9 as za,ga as Ga,gb as Va,gc as Ia,gd as Ha,ge as Ea,gf as Qa,gg as Wa,gh as Ua,gi as Xa,gj as Ka,gk as un,gl as Ja,gm as Za,gn as tr,go as er,gp as nr,gq as ar,gr as rr,ef as sr,eg as or,gs as ir,gt as lr,b1 as cr,gu as ur,gv as fr,gw as dr,gx as gr,gy as vr,gz as hr,gA as mr,gB as pr,gC as br,gD as yr,gE as xr,gF as _r,gG as $r,gH as wr,gI as kr,gJ as Dr,gK as Ar,gL as Mr,gM as Cr,gN as Tr,U as Rr}from"../chunks/runtime-require.BMNCZg22.mjs";import{c as Ft,a as fn}from"../chunks/index-client.BU-Y10jg.mjs";import{e as en,t as Pt,M as De,Y as Sr,s as Pr}from"../chunks/time.Dh4VeLPR.mjs";import{O as dn,P as We,Q as Fr,R as Br,S as Nr,A as Ae,v as Mn,T as Ut,U as Cn,V as Tn,W as Rn,X as Yr,Y as qr,Z as Sn,_ as U,$ as Lr,a0 as jr,a1 as Or,a2 as Pn,E as zr,a3 as Nt,a4 as q,B as tt,a5 as gt,a6 as wt,a7 as lt,y as te,z as Rt,C as Ne,D as Ye,a8 as nn,F as ve,G as he,H as me,L as qe,K as pe,N as be,M as ee,J as kt,I as Ct,l as Qt,k as Gr,f as ie,m as Vr,a9 as Ir,aa as Hr,o as Er,ab as Fn}from"../chunks/HoverColumns.Bf-xtFmO.mjs";import{m as Me}from"../chunks/min.D1slsF82.mjs";import{i as Qr,I as gn,c as ne,C as an,T as qt}from"../chunks/TableData.duXWVbAC.mjs";import{b as pt,c as rn,a as Wr}from"../chunks/input.CCs2NzX5.mjs";import{b as ae}from"../chunks/this.DuXIBV3p.mjs";import{c as nt,e as Ur,b as Xr}from"../chunks/utils.DWJJeZi9.mjs";import{e as de,s as Ot}from"../chunks/render.dASvSx6G.mjs";import{f as Kr,a1 as zt,a2 as Jr,a3 as Zr,s as ts,a4 as es}from"../chunks/backend.BdhjA4ya.mjs";import{e as Le,i as je,p as ns}from"../chunks/theme.BSeXeARl.mjs";import{c as as}from"../chunks/bridgecommand.7-pCMgb_.mjs";import{w as Ue}from"../chunks/index.BBTf1svy.mjs";import{a as rs}from"../chunks/await.4h1frlsJ.mjs";function ss(t,e){let a=0;for(let r of t)r!=null&&(r=+r)>=r&&++a;return a}function sn(t,e){var a=0,r=0;return Float64Array.from(t,e===void 0?n=>a+=+n||0:n=>a+=+e(n,r++,t)||0)}function Kt(t,e){let a,r;if(e===void 0)for(const n of t)n!=null&&(a===void 0?n>=n&&(a=r=n):(a>n&&(a=n),r<n&&(r=n)));else{let n=-1;for(let s of t)(s=e(s,++n,t))!=null&&(a===void 0?s>=s&&(a=r=s):(a>s&&(a=s),r<s&&(r=s)))}return[a,r]}function os(t=dn){if(t===dn)return Bn;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,a)=>{const r=t(e,a);return r||r===0?r:(t(a,a)===0)-(t(e,e)===0)}}function Bn(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var is=Array.prototype,ls=is.slice;function He(t){return()=>t}function cs(t,e,a){let r;for(;;){const n=We(t,e,a);if(n===r||n===0||!isFinite(n))return[t,e];n>0?(t=Math.floor(t/n)*n,e=Math.ceil(e/n)*n):n<0&&(t=Math.ceil(t*n)/n,e=Math.floor(e*n)/n),r=n}}function us(t){return Math.max(1,Math.ceil(Math.log(ss(t))/Math.LN2)+1)}function Yt(){var t=Qr,e=Kt,a=us;function r(n){Array.isArray(n)||(n=Array.from(n));var s,u=n.length,o,d,c=new Array(u);for(s=0;s<u;++s)c[s]=t(n[s],s,n);var f=e(c),i=f[0],l=f[1],h=a(c,i,l);if(!Array.isArray(h)){const b=l,$=+h;if(e===Kt&&([i,l]=cs(i,l,$)),h=Fr(i,l,$),h[0]<=i&&(d=We(i,l,$)),h[h.length-1]>=l)if(b>=l&&e===Kt){const A=We(i,l,$);isFinite(A)&&(A>0?l=(Math.floor(l/A)+1)*A:A<0&&(l=(Math.ceil(l*-A)+1)/-A))}else h.pop()}for(var y=h.length,x=0,g=y;h[x]<=i;)++x;for(;h[g-1]>l;)--g;(x||g<y)&&(h=h.slice(x,g),y=g-x);var p=new Array(y+1),v;for(s=0;s<=y;++s)v=p[s]=[],v.x0=s>0?h[s-1]:i,v.x1=s<y?h[s]:l;if(isFinite(d)){if(d>0)for(s=0;s<u;++s)(o=c[s])!=null&&i<=o&&o<=l&&p[Math.min(y,Math.floor((o-i)/d))].push(n[s]);else if(d<0){for(s=0;s<u;++s)if((o=c[s])!=null&&i<=o&&o<=l){const b=Math.floor((i-o)*d);p[Math.min(y,b+(h[b]<=o))].push(n[s])}}}else for(s=0;s<u;++s)(o=c[s])!=null&&i<=o&&o<=l&&p[Br(h,o,0,y)].push(n[s]);return p}return r.value=function(n){return arguments.length?(t=typeof n=="function"?n:He(n),r):t},r.domain=function(n){return arguments.length?(e=typeof n=="function"?n:He([n[0],n[1]]),r):e},r.thresholds=function(n){return arguments.length?(a=typeof n=="function"?n:He(Array.isArray(n)?ls.call(n):n),r):a},r}function Nn(t,e,a=0,r=1/0,n){if(e=Math.floor(e),a=Math.floor(Math.max(0,a)),r=Math.floor(Math.min(t.length-1,r)),!(a<=e&&e<=r))return t;for(n=n===void 0?Bn:os(n);r>a;){if(r-a>600){const d=r-a+1,c=e-a+1,f=Math.log(d),i=.5*Math.exp(2*f/3),l=.5*Math.sqrt(f*i*(d-i)/d)*(c-d/2<0?-1:1),h=Math.max(a,Math.floor(e-c*i/d+l)),y=Math.min(r,Math.floor(e+(d-c)*i/d+l));Nn(t,e,h,y,n)}const s=t[e];let u=a,o=r;for(le(t,a,e),n(t[r],s)>0&&le(t,a,r);u<o;){for(le(t,u,o),++u,--o;n(t[u],s)<0;)++u;for(;n(t[o],s)>0;)--o}n(t[a],s)===0?le(t,a,o):(++o,le(t,o,r)),o<=e&&(a=o+1),e<=o&&(r=o-1)}return t}function le(t,e,a){const r=t[e];t[e]=t[a],t[a]=r}function vn(t,e,a){if(t=Float64Array.from(Nr(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Me(t);if(e>=1)return Ae(t);var r,n=(r-1)*e,s=Math.floor(n),u=Ae(Nn(t,s).subarray(0,s+1)),o=Me(t.subarray(s+1));return u+(o-u)*(n-s)}}function fs(t,e){let a=0,r=0;for(let n of t)n!=null&&(n=+n)>=n&&(++a,r+=n);if(a)return r/a}function ds(t,e,a){t=+t,e=+e,a=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+a;for(var r=-1,n=Math.max(0,Math.ceil((e-t)/a))|0,s=new Array(n);++r<n;)s[r]=t+r*a;return s}const hn=Symbol("implicit");function Yn(){var t=new gn,e=[],a=[],r=hn;function n(s){let u=t.get(s);if(u===void 0){if(r!==hn)return r;t.set(s,u=e.push(s)-1)}return a[u%a.length]}return n.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new gn;for(const u of s)t.has(u)||t.set(u,e.push(u)-1);return n},n.range=function(s){return arguments.length?(a=Array.from(s),n):a.slice()},n.unknown=function(s){return arguments.length?(r=s,n):r},n.copy=function(){return Yn(e,a).unknown(r)},Mn.apply(n,arguments),n}function Ce(){var t=Yn().unknown(void 0),e=t.domain,a=t.range,r=0,n=1,s,u,o=!1,d=0,c=0,f=.5;delete t.unknown;function i(){var l=e().length,h=n<r,y=h?n:r,x=h?r:n;s=(x-y)/Math.max(1,l-d+c*2),o&&(s=Math.floor(s)),y+=(x-y-s*(l-d))*f,u=s*(1-d),o&&(y=Math.round(y),u=Math.round(u));var g=ds(l).map(function(p){return y+s*p});return a(h?g.reverse():g)}return t.domain=function(l){return arguments.length?(e(l),i()):e()},t.range=function(l){return arguments.length?([r,n]=l,r=+r,n=+n,i()):[r,n]},t.rangeRound=function(l){return[r,n]=l,r=+r,n=+n,o=!0,i()},t.bandwidth=function(){return u},t.step=function(){return s},t.round=function(l){return arguments.length?(o=!!l,i()):o},t.padding=function(l){return arguments.length?(d=Math.min(1,c=+l),i()):d},t.paddingInner=function(l){return arguments.length?(d=Math.min(1,l),i()):d},t.paddingOuter=function(l){return arguments.length?(c=+l,i()):c},t.align=function(l){return arguments.length?(f=Math.max(0,Math.min(1,l)),i()):f},t.copy=function(){return Ce(e(),[r,n]).round(o).paddingInner(d).paddingOuter(c).align(f)},Mn.apply(i(),arguments)}function mn(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function gs(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function vs(t){return t<0?-t*t:t*t}function hs(t){var e=t(Ut,Ut),a=1;function r(){return a===1?t(Ut,Ut):a===.5?t(gs,vs):t(mn(a),mn(1/a))}return e.exponent=function(n){return arguments.length?(a=+n,r()):a},Cn(e)}function qn(){var t=0,e=1,a,r,n,s,u=Ut,o=!1,d;function c(i){return i==null||isNaN(i=+i)?d:u(n===0?.5:(i=(s(i)-a)*n,o?Math.max(0,Math.min(1,i)):i))}c.domain=function(i){return arguments.length?([t,e]=i,a=s(t=+t),r=s(e=+e),n=a===r?0:1/(r-a),c):[t,e]},c.clamp=function(i){return arguments.length?(o=!!i,c):o},c.interpolator=function(i){return arguments.length?(u=i,c):u};function f(i){return function(l){var h,y;return arguments.length?([h,y]=l,u=i(h,y),c):[u(0),u(1)]}}return c.range=f(Rn),c.rangeRound=f(Yr),c.unknown=function(i){return arguments.length?(d=i,c):d},function(i){return s=i,a=i(t),r=i(e),n=a===r?0:1/(r-a),c}}function Ln(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function $t(){var t=Cn(qn()(Ut));return t.copy=function(){return Ln(t,$t())},Tn.apply(t,arguments)}function jn(){var t=hs(qn());return t.copy=function(){return Ln(t,jn()).exponent(t.exponent())},Tn.apply(t,arguments)}function ms(){return jn.apply(null,arguments).exponent(.5)}const re=t=>qr(t[t.length-1]);var ps=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ne);const Oe=re(ps);var On=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ne);const ze=re(On);var Xe=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ne);const Ke=re(Xe);var bs=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ne);const ys=re(bs);var zn=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ne);const xs=re(zn);var Gn=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ne);const _s=re(Gn),pn=Math.abs,mt=Math.atan2,jt=Math.cos,$s=Math.max,Ee=Math.min,Tt=Math.sin,Xt=Math.sqrt,_t=1e-12,ge=Math.PI,Te=ge/2,we=2*ge;function ws(t){return t>1?0:t<-1?ge:Math.acos(t)}function bn(t){return t>=1?Te:t<=-1?-Te:Math.asin(t)}function ks(t){return t.innerRadius}function Ds(t){return t.outerRadius}function As(t){return t.startAngle}function Ms(t){return t.endAngle}function Cs(t){return t&&t.padAngle}function Ts(t,e,a,r,n,s,u,o){var d=a-t,c=r-e,f=u-n,i=o-s,l=i*d-f*c;if(!(l*l<_t))return l=(f*(e-s)-i*(t-n))/l,[t+l*d,e+l*c]}function _e(t,e,a,r,n,s,u){var o=t-a,d=e-r,c=(u?s:-s)/Xt(o*o+d*d),f=c*d,i=-c*o,l=t+f,h=e+i,y=a+f,x=r+i,g=(l+y)/2,p=(h+x)/2,v=y-l,b=x-h,$=v*v+b*b,A=n-s,F=l*x-y*h,_=(b<0?-1:1)*Xt($s(0,A*A*$-F*F)),w=(F*b-v*_)/$,D=(-F*v-b*_)/$,T=(F*b+v*_)/$,P=(-F*v+b*_)/$,B=w-g,k=D-p,S=T-g,z=P-p;return B*B+k*k>S*S+z*z&&(w=T,D=P),{cx:w,cy:D,x01:-f,y01:-i,x11:w*(n/A-1),y11:D*(n/A-1)}}function Rs(){var t=ks,e=Ds,a=U(0),r=null,n=As,s=Ms,u=Cs,o=null,d=Sn(c);function c(){var f,i,l=+t.apply(this,arguments),h=+e.apply(this,arguments),y=n.apply(this,arguments)-Te,x=s.apply(this,arguments)-Te,g=pn(x-y),p=x>y;if(o||(o=f=d()),h<l&&(i=h,h=l,l=i),!(h>_t))o.moveTo(0,0);else if(g>we-_t)o.moveTo(h*jt(y),h*Tt(y)),o.arc(0,0,h,y,x,!p),l>_t&&(o.moveTo(l*jt(x),l*Tt(x)),o.arc(0,0,l,x,y,p));else{var v=y,b=x,$=y,A=x,F=g,_=g,w=u.apply(this,arguments)/2,D=w>_t&&(r?+r.apply(this,arguments):Xt(l*l+h*h)),T=Ee(pn(h-l)/2,+a.apply(this,arguments)),P=T,B=T,k,S;if(D>_t){var z=bn(D/l*Tt(w)),E=bn(D/h*Tt(w));(F-=z*2)>_t?(z*=p?1:-1,$+=z,A-=z):(F=0,$=A=(y+x)/2),(_-=E*2)>_t?(E*=p?1:-1,v+=E,b-=E):(_=0,v=b=(y+x)/2)}var G=h*jt(v),J=h*Tt(v),et=l*jt(A),I=l*Tt(A);if(T>_t){var Z=h*jt(b),xt=h*Tt(b),W=l*jt($),ot=l*Tt($),it;if(g<ge)if(it=Ts(G,J,W,ot,Z,xt,et,I)){var bt=G-it[0],Bt=J-it[1],Lt=Z-it[0],It=xt-it[1],R=1/Tt(ws((bt*Lt+Bt*It)/(Xt(bt*bt+Bt*Bt)*Xt(Lt*Lt+It*It)))/2),Q=Xt(it[0]*it[0]+it[1]*it[1]);P=Ee(T,(l-Q)/(R-1)),B=Ee(T,(h-Q)/(R+1))}else P=B=0}_>_t?B>_t?(k=_e(W,ot,G,J,h,B,p),S=_e(Z,xt,et,I,h,B,p),o.moveTo(k.cx+k.x01,k.cy+k.y01),B<T?o.arc(k.cx,k.cy,B,mt(k.y01,k.x01),mt(S.y01,S.x01),!p):(o.arc(k.cx,k.cy,B,mt(k.y01,k.x01),mt(k.y11,k.x11),!p),o.arc(0,0,h,mt(k.cy+k.y11,k.cx+k.x11),mt(S.cy+S.y11,S.cx+S.x11),!p),o.arc(S.cx,S.cy,B,mt(S.y11,S.x11),mt(S.y01,S.x01),!p))):(o.moveTo(G,J),o.arc(0,0,h,v,b,!p)):o.moveTo(G,J),!(l>_t)||!(F>_t)?o.lineTo(et,I):P>_t?(k=_e(et,I,Z,xt,l,-P,p),S=_e(G,J,W,ot,l,-P,p),o.lineTo(k.cx+k.x01,k.cy+k.y01),P<T?o.arc(k.cx,k.cy,P,mt(k.y01,k.x01),mt(S.y01,S.x01),!p):(o.arc(k.cx,k.cy,P,mt(k.y01,k.x01),mt(k.y11,k.x11),!p),o.arc(0,0,l,mt(k.cy+k.y11,k.cx+k.x11),mt(S.cy+S.y11,S.cx+S.x11),p),o.arc(S.cx,S.cy,P,mt(S.y11,S.x11),mt(S.y01,S.x01),!p))):o.arc(0,0,l,A,$,p)}if(o.closePath(),f)return o=null,f+""||null}return c.centroid=function(){var f=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+n.apply(this,arguments)+ +s.apply(this,arguments))/2-ge/2;return[jt(i)*f,Tt(i)*f]},c.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:U(+f),c):t},c.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:U(+f),c):e},c.cornerRadius=function(f){return arguments.length?(a=typeof f=="function"?f:U(+f),c):a},c.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:U(+f),c):r},c.startAngle=function(f){return arguments.length?(n=typeof f=="function"?f:U(+f),c):n},c.endAngle=function(f){return arguments.length?(s=typeof f=="function"?f:U(+f),c):s},c.padAngle=function(f){return arguments.length?(u=typeof f=="function"?f:U(+f),c):u},c.context=function(f){return arguments.length?(o=f==null?null:f,c):o},c}function on(t,e,a){var r=null,n=U(!0),s=null,u=Lr,o=null,d=Sn(c);t=typeof t=="function"?t:t===void 0?jr:U(+t),e=typeof e=="function"?e:e===void 0?U(0):U(+e),a=typeof a=="function"?a:a===void 0?Or:U(+a);function c(i){var l,h,y,x=(i=Pn(i)).length,g,p=!1,v,b=new Array(x),$=new Array(x);for(s==null&&(o=u(v=d())),l=0;l<=x;++l){if(!(l<x&&n(g=i[l],l,i))===p)if(p=!p)h=l,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=l-1;y>=h;--y)o.point(b[y],$[y]);o.lineEnd(),o.areaEnd()}p&&(b[l]=+t(g,l,i),$[l]=+e(g,l,i),o.point(r?+r(g,l,i):b[l],a?+a(g,l,i):$[l]))}if(v)return o=null,v+""||null}function f(){return zr().defined(n).curve(u).context(s)}return c.x=function(i){return arguments.length?(t=typeof i=="function"?i:U(+i),r=null,c):t},c.x0=function(i){return arguments.length?(t=typeof i=="function"?i:U(+i),c):t},c.x1=function(i){return arguments.length?(r=i==null?null:typeof i=="function"?i:U(+i),c):r},c.y=function(i){return arguments.length?(e=typeof i=="function"?i:U(+i),a=null,c):e},c.y0=function(i){return arguments.length?(e=typeof i=="function"?i:U(+i),c):e},c.y1=function(i){return arguments.length?(a=i==null?null:typeof i=="function"?i:U(+i),c):a},c.lineX0=c.lineY0=function(){return f().x(t).y(e)},c.lineY1=function(){return f().x(t).y(a)},c.lineX1=function(){return f().x(r).y(e)},c.defined=function(i){return arguments.length?(n=typeof i=="function"?i:U(!!i),c):n},c.curve=function(i){return arguments.length?(u=i,s!=null&&(o=u(s)),c):u},c.context=function(i){return arguments.length?(i==null?s=o=null:o=u(s=i),c):s},c}function Ss(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Ps(t){return t}function Fs(){var t=Ps,e=Ss,a=null,r=U(0),n=U(we),s=U(0);function u(o){var d,c=(o=Pn(o)).length,f,i,l=0,h=new Array(c),y=new Array(c),x=+r.apply(this,arguments),g=Math.min(we,Math.max(-we,n.apply(this,arguments)-x)),p,v=Math.min(Math.abs(g)/c,s.apply(this,arguments)),b=v*(g<0?-1:1),$;for(d=0;d<c;++d)($=y[h[d]=d]=+t(o[d],d,o))>0&&(l+=$);for(e!=null?h.sort(function(A,F){return e(y[A],y[F])}):a!=null&&h.sort(function(A,F){return a(o[A],o[F])}),d=0,i=l?(g-c*b)/l:0;d<c;++d,x=p)f=h[d],$=y[f],p=x+($>0?$*i:0)+b,y[f]={data:o[f],index:d,value:$,startAngle:x,endAngle:p,padAngle:v};return y}return u.value=function(o){return arguments.length?(t=typeof o=="function"?o:U(+o),u):t},u.sortValues=function(o){return arguments.length?(e=o,a=null,u):e},u.sort=function(o){return arguments.length?(a=o,e=null,u):a},u.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:U(+o),u):r},u.endAngle=function(o){return arguments.length?(n=typeof o=="function"?o:U(+o),u):n},u.padAngle=function(o){return arguments.length?(s=typeof o=="function"?o:U(+o),u):s},u}function yn(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function Vn(t){this._context=t}Vn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yn(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ln(t){return new Vn(t)}function xn(t){return{daysAdded:Nt(t.added.added)}}function Bs(t,e){const a=`"added:${t}"`;if(t===1)return a;const r=`-"added:${e}"`;return`${a} AND ${r}`}function Ns(t,e,a,r){if(!t.daysAdded.size)return[null,[]];let s;switch(e){case q.Month:s=-31;break;case q.ThreeMonths:s=-90;break;case q.Year:s=-365;break;case q.AllTime:s=Me(t.daysAdded.keys());break}const u=1,o=Math.min(70,Math.abs(s)),d=tt().domain([s,u]),c=Yt().value(b=>b[0]).domain(d.domain()).thresholds(d.ticks(o))(t.daysAdded.entries()),f=wt;if(!gt(c,f))return[null,[]];const i=tt().range([.7,.3]),l=$t(b=>ze(i(b))).domain([u,s]),h=gt(c,f),y=Math.abs(s),x=Math.round(h/y),g=[{label:Se(),value:$e({cards:h})},{label:Dn(),value:Jn({count:x})}];function p(b,$,A){const F=en(b.x0,b.x1),_=$e({cards:f(b)}),w=Pe(),D=$e({cards:$});return`${F}:<br>${_}<br>${w}: ${D}`}function v(b){const $=Math.abs(b.x0)+1,A=Math.abs(b.x1)+1,F=Bs($,A);a("search",{query:F})}return[{scale:d,bins:c,total:h,hoverText:p,onClick:r?v:null,colourScale:l,binValue:wt,showArea:!0},g]}var Ys=K('<label><input type="radio"> </label>'),qs=K('<label><input type="radio"> </label> <label><input type="radio"> </label> <label><input type="radio"> </label> <!>',1);function ye(t,e){ut(e,!1);const a=[];let r=O(e,"revlogRange",8),n=O(e,"graphRange",12),s=O(e,"followRevlog",8,!1);function u(D){D===lt.All?n(q.AllTime):n()===q.AllTime&&n(q.Year)}const o=Pt(1*De),d=Pt(3*De),c=Pt(1*Sr),f=Ze();X(()=>(rt(s()),rt(r())),()=>{s()&&u(r())}),vt(),dt();var i=qs(),l=H(i),h=L(l);st(h);var y,x=M(h);x.nodeValue=` ${o!=null?o:""}`,Y(l);var g=M(l,2),p=L(g);st(p);var v,b=M(p);b.nodeValue=` ${d!=null?d:""}`,Y(g);var $=M(g,2),A=L($);st(A);var F,_=M(A);_.nodeValue=` ${c!=null?c:""}`,Y($);var w=M($,2);Mt(w,()=>r()===lt.All,D=>{var T=Ys(),P=L(T);st(P);var B,k=M(P);k.nodeValue=` ${f!=null?f:""}`,Y(T),ct(()=>{B!==(B=q.AllTime)&&(P.value=(P.__value=q.AllTime)==null?"":q.AllTime)}),pt(a,[],P,()=>(q.AllTime,n()),n),j(D,T)}),ct(()=>{y!==(y=q.Month)&&(h.value=(h.__value=q.Month)==null?"":q.Month),v!==(v=q.ThreeMonths)&&(p.value=(p.__value=q.ThreeMonths)==null?"":q.ThreeMonths),F!==(F=q.Year)&&(A.value=(A.__value=q.Year)==null?"":q.Year)}),pt(a,[],h,()=>(q.Month,n()),n),pt(a,[],p,()=>(q.ThreeMonths,n()),n),pt(a,[],A,()=>(q.Year,n()),n),j(t,i),ft()}const Ls="tick-odd",In="graph-element-clickable";function js(t,e,a){var p;const r=te(t),n=r.transition().duration(600),s=v=>nt(v);if(a)Rt(r,!0);else{Rt(r,!1);return}const u=(p=a.binValue)!=null?p:v=>v.length,o=a.scale.range([e.marginLeft,e.width-e.marginRight]);r.select(".x-ticks").call(v=>{var b;return v.transition(n).call(Ne(o).ticks(7).tickSizeOuter(0).tickFormat((b=a.xTickFormat)!=null?b:s))}).attr("direction","ltr");const d=Ae(a.bins,v=>u(v)),c=tt().range([e.height-e.marginBottom,e.marginTop]).domain([0,d]).nice();r.select(".y-ticks").call(v=>v.transition(n).call(Ye(c).ticks(e.height/50).tickSizeOuter(0).tickFormat(s))).attr("direction","ltr");function f(v){const b=Math.max(0,o(v.x1)-o(v.x0)-1);return b!=null?b:0}const i=v=>v.attr("width",f).transition(n).attr("x",b=>o(b.x0)).attr("y",b=>c(u(b))).attr("height",b=>c(0)-c(u(b))).attr("fill",b=>a.colourScale(b.x1));r.select("g.bars").selectAll("rect").data(a.bins).join(v=>v.append("rect").attr("rx",1).attr("x",b=>o(b.x0)).attr("y",c(0)).attr("height",0).call(i),v=>v.call(i),v=>v.call(b=>b.transition(n).attr("height",0).attr("y",c(0))));const l=a.bins.map(v=>u(v));l.unshift(0);const h=sn(l),y=c.copy().domain([0,a.total]).nice();a.showArea&&a.bins.length&&h.slice(-1)[0]&&(r.select(".y2-ticks").call(v=>v.transition(n).call(nn(y).ticks(e.height/50).tickSizeOuter(0).tickFormat(s))).attr("direction","ltr"),r.select("path.cumulative-overlay").datum(h).attr("d",on().curve(ln).x((v,b)=>o(b===0?a.bins[0].x0:a.bins[b-1].x1)).y0(e.height-e.marginBottom).y1(v=>y(v))));const x=a.bins.map((v,b)=>[v,h[b+1]]),g=r.select("g.hover-columns").selectAll("rect").data(x).join("rect").attr("x",([v])=>o(v.x0)).attr("y",()=>c(d)).attr("width",([v])=>f(v)).attr("height",()=>c(0)-c(d)).on("mousemove",(v,[b,$])=>{const[A,F]=ve(v,document.body),_=a.showArea?$/a.total*100:0;he(a.hoverText(b,$,_),A,F)}).on("mouseout",me);a.onClick&&g.filter(([v])=>v.length>0).attr("class",In).on("click",(v,[b])=>a.onClick(b))}var Os=Zt('<svg><g class="bars"></g><!><!><!><!></svg>');function Vt(t,e){ut(e,!1);let a=O(e,"data",8,null);const r=ee();let n=N(null);X(()=>(m(n),rt(a())),()=>{js(m(n),r,a())}),vt(),dt();var s=Os();ae(s,f=>C(n,f),()=>m(n));var u=M(L(s));qe(u);var o=M(u);an(o);var d=M(o);pe(d,{bounds:r});var c=M(d);be(c,{bounds:r}),Y(s),ct(()=>St(s,"viewBox",`0 0 ${r.width} ${r.height}`)),j(t,s),ft()}var zs=K("<!> <!> <!>",1);function Gs(t,e){ut(e,!1);const a=Dt(),r=()=>yt(s(),"$prefs",a);let n=O(e,"sourceData",8,null),s=O(e,"prefs",8),u=N(null),o=N([]),d=N(q.Month);const c=Ft();let f=N(null);const i=Zn(),l=ta();X(()=>(rt(n()),xn),()=>{n()&&C(f,xn(n()))}),X(()=>(m(f),m(u),m(o),m(d),r()),()=>{m(f)&&(h=>(C(u,h[0]),C(o,h[1])))(Ns(m(f),m(d),c,r().browserLinksSupported))}),vt(),dt(),kt(t,{title:i,subtitle:l,children:(h,y)=>{var x=zs(),g=H(x);Ct(g,{children:(b,$)=>{ye(b,{get graphRange(){return m(d)},set graphRange(A){C(d,A)},get revlogRange(){return lt.All},$$legacy:!0})},$$slots:{default:!0}});var p=M(g,2);Vt(p,{get data(){return m(u)}});var v=M(p,2);qt(v,{get tableData(){return m(o)}}),j(h,x)},$$slots:{default:!0}}),ft()}function Vs(t,e){const a=t.buttons;switch(e){case q.Month:return a.oneMonth;case q.ThreeMonths:return a.threeMonths;case q.Year:return a.oneYear;case q.AllTime:return a.allTime}}function Is(t,e,a,r){const n=Vs(a,r),s=[...n.learning.map((v,b)=>({buttonNum:b+1,group:"learning",count:v})),...n.young.map((v,b)=>({buttonNum:b+1,group:"young",count:v})),...n.mature.map((v,b)=>({buttonNum:b+1,group:"mature",count:v}))],u=v=>{const b=s.filter(_=>_.group==v),$=gt(b,_=>_.count),A=gt(b.filter(_=>_.buttonNum>1),_=>_.count),F=$?nt(A/$*100):"0";return{total:$,correct:A,percent:F}},o=v=>{const b=u(v.group).total,$=v.count,A=b?nt($/b*100):"0";return`${nt($)} (${A}%)`},d=Math.max(...s.map(v=>v.count)),c=te(t),f=c.transition().duration(600);if(d)Rt(c,!0);else{Rt(c,!1);return}const i=Ce().domain(["learning","young","mature"]).range([e.marginLeft,e.width-e.marginRight]);c.select(".x-ticks").call(v=>v.transition(f).call(Ne(i).tickFormat(b=>{let $;switch(b){case"learning":$=tn();break;case"young":$=Be();break;case"mature":default:$=Fe();break}return`${$} ‎(${u(b).percent}%)`}).tickSizeOuter(0))).attr("direction","ltr");const l=Ce().domain(["1","2","3","4"]).range([0,i.bandwidth()]).paddingOuter(1).paddingInner(.1),h=$t(Oe).domain([1,4]),y=v=>nt(v),x=tt().range([e.height-e.marginBottom,e.marginTop]).domain([0,d]);c.select(".y-ticks").call(v=>v.transition(f).call(Ye(x).ticks(e.height/50).tickSizeOuter(0).tickFormat(y))).attr("direction","ltr");const g=v=>v.attr("width",l.bandwidth()).attr("opacity",.8).transition(f).attr("x",b=>i(b.group)+l(b.buttonNum.toString())).attr("y",b=>x(b.count)).attr("height",b=>x(0)-x(b.count)).attr("fill",b=>h(b.buttonNum));c.select("g.bars").selectAll("rect").data(s).join(v=>v.append("rect").attr("rx",1).attr("x",b=>i(b.group)+l(b.buttonNum.toString())).attr("y",x(0)).attr("height",0).call(g),v=>v.call(g),v=>v.call(b=>b.transition(f).attr("height",0).attr("y",x(0))));function p(v){const b=ea(),$=na(),A=aa(u(v.group)),F=`${$}: ${o(v)}`;return`${b}: ${v.buttonNum}<br>${F}<br>${A}`}c.select("g.hover-columns").selectAll("rect").data(s).join("rect").attr("x",v=>i(v.group)+l(v.buttonNum.toString())).attr("y",()=>x(d)).attr("width",l.bandwidth()).attr("height",()=>x(0)-x(d)).on("mousemove",(v,b)=>{const[$,A]=ve(v,document.body);he(p(b),$,A)}).on("mouseout",me)}var Hs=Zt('<!><svg><g class="bars"></g><!><!><!></svg>',1);function Es(t,e){ut(e,!1);let a=O(e,"sourceData",8,null),r=O(e,"revlogRange",8),n=N(q.Year);const s=ee();let u=N(null);const o=ra(),d=sa();X(()=>(rt(a()),m(u),m(n)),()=>{a()&&Is(m(u),s,a(),m(n))}),vt(),dt(),kt(t,{title:o,subtitle:d,children:(c,f)=>{var i=Hs(),l=H(i);Ct(l,{children:(p,v)=>{ye(p,{get graphRange(){return m(n)},set graphRange(b){C(n,b)},get revlogRange(){return r()},followRevlog:!0,$$legacy:!0})},$$slots:{default:!0}});var h=M(l);ae(h,p=>C(u,p),()=>m(u));var y=M(L(h));qe(y);var x=M(y);pe(x,{bounds:s});var g=M(x);be(g,{bounds:s}),Y(h),ct(()=>St(h,"viewBox",`0 0 ${s.width} ${s.height}`)),j(c,i)},$$slots:{default:!0}}),ft()}function Qs(t,e){const a=new Map(Object.entries(t.reviews.count).map(([s,u])=>[Number(s),u.learn+u.relearn+u.mature+u.filtered+u.young])),r=Us(e),n=[];for(let s=0;s<7;s++)n.push((e+s)%7);return{reviewCount:a,timeFunction:r,weekdayLabels:n,rolloverHour:t.rolloverHour}}function Ws(t,e,a,r,n,s,u,o){const d=te(t),c=new Date,f=new Date;f.setFullYear(n);const i=tt().range([e.marginLeft,e.width-e.marginRight]).domain([-1,53]),l=new Map;let h=0;for(const[_,w]of a.reviewCount.entries()){let D=Qt.offset(c,_);if(D=Gr.offset(D,-1*a.rolloverHour),w>h&&(h=w),D.getFullYear()!=n)continue;const T=a.timeFunction.count(ie(D),D),P=Qt.count(a.timeFunction(D),D),B=Qt.count(ie(D),D);l.set(B,{day:_,count:w,weekNumber:T,weekDay:P,date:D})}if(h)Rt(d,!0);else{Rt(d,!1);return}const y=ie(f),x=new Date(c);x.setFullYear(c.getFullYear()-1);for(let _=0;_<365;_++){const w=Qt.offset(y,_);if(w>c||u==lt.Year&&w<x)continue;const D=Qt.count(ie(w),w);if(!l.has(D)){const T=a.timeFunction.count(ie(w),w),P=Qt.count(a.timeFunction(w),w);l.set(D,{day:D,count:0,weekNumber:T,weekDay:P,date:w})}}const g=Array.from(l.values()),p=tt().range([.2,s?.8:1]),v=ms().domain([0,h]).interpolator(_=>ze(p(_)));function b(_){const w=Xr(_.date,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),D=fe({reviews:_.count});return`${w}<br>${D}`}const $=e.height/10,A=s?"#333":"#ddd",F=Kr();d.select("g.weekdays").selectAll("text").data(a.weekdayLabels).join("text").text(_=>Ur(_)).attr("width",i(-1)-2).attr("height",$-2).attr("x",i(1)-3).attr("y",(_,w)=>e.marginTop+w*$).attr("fill",s?"#ddd":"black").attr("dominant-baseline","hanging").attr("text-anchor","end").attr("font-size",F.includes("zh")?"xx-small":"small").attr("font-family","monospace").attr("direction","ltr").style("user-select","none").on("click",null).filter(_=>[zt.SUNDAY,zt.MONDAY,zt.FRIDAY,zt.SATURDAY].includes(_)).on("click",(_,w)=>o(w)),d.select("g.days").selectAll("rect").data(g).join("rect").attr("fill",A).attr("width",_=>i(_.weekNumber+1)-i(_.weekNumber)-2).attr("height",$-2).attr("x",_=>i(_.weekNumber+1)).attr("y",_=>e.marginTop+_.weekDay*$).on("mousemove",(_,w)=>{const[D,T]=ve(_,document.body);he(b(w),D,T)}).on("mouseout",me).attr("class",_=>_.count>0?In:"").on("click",function(_,w){w.count>0&&r("search",{query:`"prop:rated=${w.day}"`})}).transition().duration(800).attr("fill",_=>_.count===0?A:v(_.count))}function Us(t){switch(t){case zt.MONDAY:return Er;case zt.FRIDAY:return Hr;case zt.SATURDAY:return Ir;default:return Vr}}var Xs=K("<span><button>◄</button></span> <span> </span> <span><button>►</button></span>",1),Ks=Zt('<!><svg><g class="weekdays"></g><g class="days"></g><!><!></svg>',1);function Js(t,e){ut(e,!1);const a=Dt(),r=()=>yt(s(),"$prefs",a);let n=O(e,"sourceData",8),s=O(e,"prefs",8),u=O(e,"revlogRange",8),o=O(e,"nightMode",8);const d=Ft();let c=N(null);const f=N(ee());ue(f,m(f).height=120),ue(f,m(f).marginLeft=20),ue(f,m(f).marginRight=20);let i=N(null);const l=new Date().getFullYear();let h=N(0),y=N(l);const x=oa();X(()=>(rt(u()),m(h),m(y)),()=>{u()<lt.Year?C(h,l):u()===lt.Year?C(h,l-1):C(h,2e3),m(y)<m(h)&&C(y,m(h))}),X(()=>(rt(n()),m(c),r(),m(i),m(f),m(y),rt(o()),rt(u())),()=>{n()&&(C(c,Qs(n(),r().calendarFirstDayOfWeek)),Ws(m(i),m(f),m(c),d,m(y),o(),u(),g=>Je(s(),Jt(r).calendarFirstDayOfWeek=g,Jt(r))))}),vt(),dt(),kt(t,{title:x,children:(g,p)=>{var v=Ks(),b=H(v);Ct(b,{children:(_,w)=>{var D=Xs(),T=H(D),P=L(T);Y(T);var B=M(T,2),k=L(B);Y(B);var S=M(B,2),z=L(S);Y(S),ct(()=>{P.disabled=m(h)>=m(y),Ot(k,m(y)),z.disabled=m(y)>=l}),de("click",P,()=>cn(y,-1)),de("click",z,()=>cn(y)),j(_,D)},$$slots:{default:!0}});var $=M(b);ae($,_=>C(i,_),()=>m(i));var A=M(L($),2);pe(A,{get bounds(){return m(f)}});var F=M(A);be(F,{get bounds(){return m(f)}}),Y($),ct(()=>St($,"viewBox",`0 0 ${m(f).width} ${m(f).height}`)),j(g,v)},$$slots:{default:!0}}),ft()}const _n=[On[5][2],Gn[5][2],zn[5][2],Xe[5][2],Xe[5][3],"#FFDC41","grey"];function Zs(t,e){const a=e?t.cardCounts.excludingInactive:t.cardCounts.includingInactive,r=e?'AND -("is:buried" OR "is:suspended")':"";return[[la(),a.newCards,!0,`"is:new"${r}`],[tn(),a.learn,!0,`(-"is:review" AND "is:learn")${r}`],[An(),a.relearn,!0,`("is:review" AND "is:learn")${r}`],[Be(),a.young,!0,`("is:review" AND -"is:learn") AND "prop:ivl<21"${r}`],[Fe(),a.mature,!0,`("is:review" -"is:learn") AND "prop:ivl>=21"${r}`],[ca(),a.suspended,e,'"is:suspended"'],[ua(),a.buried,e,'"is:buried"']]}function to(t,e){const a=Zs(t,e),r=nt(gt(a,n=>n[1]));return{title:ia(),counts:a,totalCards:r}}function eo(t,e,a){const r=sn(a.counts,y=>y[1]),n=Array.from(r).map((y,x)=>{const g=a.counts[x];return{label:g[0],count:g[1],show:g[2],query:g[3],idx:x,total:y}}),s=Math.max(1,r.slice(-1)[0]),u=tt().domain([0,s]),o=te(t),d=o.select(".counts"),c=Fs()(a.counts.map(y=>y[1])),f=e.height/2-e.marginTop-e.marginBottom,i=Rs().innerRadius(0).outerRadius(f),l=o.transition().duration(600);return d.attr("transform",`translate(${f},${f+e.marginTop})`).selectAll("path").data(c).join(y=>y.append("path").attr("fill",(x,g)=>_n[g]).attr("d",i),function(y){return y.call(x=>x.transition(l).attrTween("d",g=>{const p=Rn({startAngle:0,endAngle:0},g);return v=>i(p(v))}))}),u.range([e.marginLeft,e.width-e.marginRight]),n.flatMap((y,x)=>{const g=nt(y.count/s*100,2);return y.show?{label:y.label,count:nt(y.count),percent:`${g}%`,colour:_n[x],query:y.query}:[]})}var no=K('<label><input type="checkbox"> </label>'),ao=K('<button class="search-link svelte-o8j8wx"> </button>'),ro=K("<span> </span>"),so=K('<tr><td class="svelte-o8j8wx"><span>■&nbsp;</span> <!></td><td class="right svelte-o8j8wx"> </td><td class="right svelte-o8j8wx"> </td></tr>'),oo=K('<!> <div class="counts-outer svelte-o8j8wx"><div class="svg-container svelte-o8j8wx"><svg class="svelte-o8j8wx"><g class="counts"></g></svg></div> <div class="counts-table svelte-o8j8wx"><table class="svelte-o8j8wx"><tbody><!><tr><td class="svelte-o8j8wx"><span style="visibility: hidden;">■</span> </td><td class="right svelte-o8j8wx"> </td><td class="svelte-o8j8wx"></td></tr></tbody></table></div></div>',1);function io(t,e){ut(e,!1);const a=Dt(),r=()=>yt(s(),"$prefs",a);let n=O(e,"sourceData",8),s=O(e,"prefs",8);const u=Ft();let o=N(null);const d=N(ee());ue(d,m(d).width=225),ue(d,m(d).marginBottom=0);let c=N(null),f=N(null);const i=fa(),l=da();X(()=>(m(c),rt(n()),r(),m(o),m(d)),()=>{C(c,to(n(),r().cardCountsSeparateInactive)),C(f,eo(m(o),m(d),m(c)))}),vt(),dt(),kt(t,{get title(){return m(c).title},children:(h,y)=>{var x=oo(),g=H(x);Ct(g,{children:(k,S)=>{var z=no(),E=L(z);st(E);var G=M(E);G.nodeValue=` ${i!=null?i:""}`,Y(z),rn(E,()=>r().cardCountsSeparateInactive,J=>Je(s(),Jt(r).cardCountsSeparateInactive=J,Jt(r))),j(k,z)},$$slots:{default:!0}});var p=M(g,2),v=L(p),b=L(v);ae(b,k=>C(o,k),()=>m(o)),Y(v);var $=M(v,2),A=L($),F=L(A),_=L(F);Le(_,1,()=>m(f),je,(k,S)=>{var z=so(),E=L(z),G=L(E),J=M(G,2);Mt(J,()=>r().browserLinksSupported,W=>{var ot=ao(),it=L(ot);Y(ot),ct(()=>Ot(it,m(S).label)),de("click",ot,()=>u("search",{query:m(S).query})),j(W,ot)},W=>{var ot=ro(),it=L(ot);Y(ot),ct(()=>Ot(it,m(S).label)),j(W,ot)}),Y(E);var et=M(E),I=L(et);Y(et);var Z=M(et),xt=L(Z);Y(Z),Y(z),ct(()=>{var W;St(G,"style",`color: ${(W=m(S).colour)!=null?W:""};`),Ot(I,m(S).count),Ot(xt,m(S).percent)}),j(k,z)});var w=M(_),D=L(w),T=M(L(D));T.nodeValue=` ${l!=null?l:""}`,Y(D);var P=M(D),B=L(P);Y(P),Gt(),Y(w),Y(F),Y(A),Y($),Y(p),ct(()=>{var k;St(b,"viewBox",`0 0 ${m(d).width} ${m(d).height}`),St(b,"style",`opacity: ${(k=m(c).totalCards?1:0)!=null?k:""}`),Ot(B,m(c).totalCards)}),j(h,x)},$$slots:{default:!0}}),ft()}function lo(t){return{eases:Nt(t.difficulty.eases),average:t.difficulty.average}}function co(t,e){const a=`"prop:d>=${t/100}"`;let r=`"prop:d<${(e+1)/100}"`;return e===99&&(r=r.replace("<","<=")),`${a} AND ${r}`}function uo(t,e,a){const r=tt().domain([t,e]).nice(),n=r.ticks(a),s=r.domain(),u=t-s[0],o=n[1]-n[0];if(u===0||u%o!==0&&o%u!==0)return[r,n];const d=c=>c+u;return[tt().domain(s.map(d)),n.map(d)]}function fo(t,e,a){const r=t.eases;if(!r.size)return[null,[]];const n=0,s=100,u=20,[o,d]=uo(n,s,u),c=Yt().value(g=>g[0]).domain(o.domain()).thresholds(d)(r.entries()),f=gt(c,wt),i=$t(Oe).domain([100,0]);function l(g,p){const v=`${g.x0}%-${g.x1}%`;return va({cards:wt(g),percent:v})}function h(g){const p=g.x0,v=g.x1-1,b=co(p,v);e("search",{query:b})}const y=g=>nt(g,0)+"%",x=[{label:ga(),value:y(t.average)}];return[{scale:o,bins:c,total:f,hoverText:l,onClick:a?h:null,colourScale:i,showArea:!1,binValue:wt,xTickFormat:y},x]}var go=K("<!> <!>",1);function vo(t,e){ut(e,!1);const a=Dt(),r=()=>yt(s(),"$prefs",a);let n=O(e,"sourceData",8,null),s=O(e,"prefs",8);const u=Ft();let o=N(null),d=N([]);const c=ha(),f=ma();X(()=>(rt(n()),m(o),m(d),r()),()=>{n()&&(h=>(C(o,h[0]),C(d,h[1])))(fo(lo(n()),u,r().browserLinksSupported))}),vt(),dt();var i=At(),l=H(i);Mt(l,()=>{var h;return(h=n())==null?void 0:h.fsrs},h=>{kt(h,{title:c,subtitle:f,children:(y,x)=>{var g=go(),p=H(g);Vt(p,{get data(){return m(o)}});var v=M(p,2);qt(v,{get tableData(){return m(d)}}),j(y,g)},$$slots:{default:!0}})}),j(t,i),ft()}function ho(t){return{eases:Nt(t.eases.eases),average:t.eases.average}}function mo(t,e){if(t===e)return`"prop:ease=${t/100}"`;const a=`"prop:ease>=${t/100}"`,r=`"prop:ease<${(e+1)/100}"`;return`${a} AND ${r}`}function po(t,e,a){const r=tt().domain([t,e]).nice(),n=r.ticks(a),s=r.domain(),u=t-s[0],o=n[1]-n[0];if(u===0||u%o!==0&&o%u!==0)return[r,n];const d=c=>c+u;return[tt().domain(s.map(d)),n.map(d)]}function bo(t,e,a){const r=t.eases;if(!r.size)return[null,[]];const[,n]=Kt(r.keys()),s=130,u=n+1,o=20,[d,c]=po(s,u,o),f=Yt().value(p=>p[0]).domain(d.domain()).thresholds(c)(r.entries()),i=gt(f,wt),l=$t(Oe).domain([s,300]);function h(p,v){const b=Math.floor(p.x0),A=Math.floor(p.x1)-b<=10?`${p.x0}%`:`${p.x0}%-${p.x1}%`;return ba({cards:wt(p),percent:A})}function y(p){const v=p.x0,b=p.x1-1,$=mo(v,b);e("search",{query:$})}const x=p=>nt(p,0)+"%",g=[{label:pa(),value:x(gt(Array.from(r.entries()).map(([p,v])=>(p+2.5)*v))/i)}];return[{scale:d,bins:f,total:i,hoverText:h,onClick:a?y:null,colourScale:l,showArea:!1,binValue:wt,xTickFormat:x},g]}var yo=K("<!> <!>",1);function xo(t,e){ut(e,!1);const a=Dt(),r=()=>yt(s(),"$prefs",a);let n=O(e,"sourceData",8,null),s=O(e,"prefs",8);const u=Ft();let o=N(null),d=N([]);const c=ya(),f=xa();X(()=>(rt(n()),m(o),m(d),r()),()=>{n()&&(h=>(C(o,h[0]),C(d,h[1])))(bo(ho(n()),u,r().browserLinksSupported))}),vt(),dt();var i=At(),l=H(i);Mt(l,()=>{var h,y;return!((y=(h=n())==null?void 0:h.fsrs)!=null&&y)},h=>{kt(h,{title:c,subtitle:f,children:(y,x)=>{var g=yo(),p=H(g);Vt(p,{get data(){return m(o)}});var v=M(p,2);qt(v,{get tableData(){return m(d)}}),j(y,g)},$$slots:{default:!0}})}),j(t,i),ft()}function $n(t){const e=t.futureDue;return{dueCounts:Nt(e.futureDue),haveBacklog:e.haveBacklog,dailyLoad:e.dailyLoad}}function _o(t,e){if(t===e)return`"prop:due=${t}"`;{const a=`"prop:due>=${t}"`,r=`"prop:due<=${e}"`;return`${a} AND ${r}`}}function $o(t,e,a,r,n){var F;const s={histogramData:null,tableData:[]},u=t.dueCounts;if(!u)return s;const[o,d]=Kt(u.keys());let c=o;a||(c=0);let f=d;switch(e){case q.Month:f=31;break;case q.ThreeMonths:f=90;break;case q.Year:f=365;break;case q.AllTime:break}const i=Math.min(70,f-c),l=tt().domain([c,f]),h=Yt().value(_=>_[0]).domain(l.domain()).thresholds(l.ticks(i))(u.entries());if(!gt(h,_=>_.length))return s;const y=_=>nt(_),x=tt().range([.7,.3]),g=$t(_=>Ke(x(_))).domain([c,f]),p=gt(h,wt);function v(_,w,D){const T=en(_.x0,_.x1===f?_.x1+1:_.x1),P=wa({cards:wt(_)}),B=Pe();return`${T}:<br>${P}<br>${B}: ${nt(w)}`}function b(_){const w=_.x0,D=_.x1===f?_.x1:_.x1-1,T=_o(w,D);r("search",{query:T})}const $=f-c,A=[{label:Se(),value:fe({reviews:p})},{label:Dn(),value:ke({count:Math.round(p/$)})},{label:_a(),value:fe({reviews:(F=t.dueCounts.get(1))!=null?F:0})},{label:$a(),value:ke({count:t.dailyLoad})}];return{histogramData:{scale:l,bins:h,total:p,hoverText:v,onClick:n?b:null,showArea:!0,colourScale:g,binValue:wt,xTickFormat:y},tableData:A}}var wo=K('<label><input type="checkbox"> </label>'),ko=K("<!> <!>",1),Do=K("<!> <!> <!>",1);function Ao(t,e){ut(e,!1);const a=Dt(),r=()=>yt(s(),"$prefs",a);let n=O(e,"sourceData",8,null),s=O(e,"prefs",8);const u=Ft();let o=N(null),d=N(null),c=N([]),f=N(q.Month);const i=ka(),l=Da(),h=Aa();X(()=>(rt(n()),$n),()=>{n()&&C(o,$n(n()))}),X(()=>(m(o),m(d),m(c),m(f),r()),()=>{m(o)&&(y=>(C(d,y.histogramData),C(c,y.tableData)))($o(m(o),m(f),r().futureDueShowBacklog,u,r().browserLinksSupported))}),vt(),dt(),kt(t,{title:i,subtitle:l,children:(y,x)=>{var g=Do(),p=H(g);Ct(p,{children:($,A)=>{var F=ko(),_=H(F);Mt(_,()=>m(o)&&m(o).haveBacklog,D=>{var T=wo(),P=L(T);st(P);var B=M(P);B.nodeValue=` ${h!=null?h:""}`,Y(T),rn(P,()=>r().futureDueShowBacklog,k=>Je(s(),Jt(r).futureDueShowBacklog=k,Jt(r))),j(D,T)});var w=M(_,2);ye(w,{get graphRange(){return m(f)},set graphRange(D){C(f,D)},get revlogRange(){return lt.All},$$legacy:!0}),j($,F)},$$slots:{default:!0}});var v=M(p,2);Vt(v,{get data(){return m(d)}});var b=M(v,2);qt(b,{get tableData(){return m(c)}}),j(y,g)},$$slots:{default:!0}}),ft()}var Mo=K('<label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label> <label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label> <input type="text" id="statisticsSearchText" class="svelte-19q2rko">',1),Co=K('<label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label> <label class="svelte-19q2rko"><input type="radio" class="svelte-19q2rko"> </label>',1),To=K('<div class="range-box svelte-19q2rko"><div class="spin svelte-19q2rko">◐</div> <!> <!></div> <div class="range-box-pad svelte-19q2rko"></div>',1);function Hn(t,e){ut(e,!1);const a=Dt(),r=()=>yt(c(),"$days",a),n=()=>yt(f(),"$search",a),s=[],u=[];var o=N();(function(D){D[D.Deck=1]="Deck",D[D.Collection=2]="Collection",D[D.Custom=3]="Custom"})(ht(o)||C(o,{}));let d=O(e,"loading",8),c=O(e,"days",8),f=O(e,"search",8),i=N(Fn(r())),l=N();n()==="deck:current"?C(l,ht(o).Deck):n()===""?C(l,ht(o).Collection):C(l,ht(o).Custom);let h=N(n());function y(){oe(f(),m(h))}const x=Ma(),g=Ca(),p=Ta(),v=Ra(),b=Sa();X(()=>(m(l),ht(o)),()=>{switch(m(l)){case ht(o).Deck:oe(f(),C(h,"deck:current"));break;case ht(o).Collection:oe(f(),C(h,""));break}}),X(()=>(m(i),lt),()=>{switch(m(i)){case lt.Year:oe(c(),365);break;case lt.All:oe(c(),0);break}}),vt(),dt();var $=To(),A=H($),F=L(A),_=M(F,2);Ct(_,{children:(D,T)=>{var P=Mo(),B=H(P),k=L(B);st(k);var S,z=M(k);z.nodeValue=` ${g!=null?g:""}`,Y(B);var E=M(B,2),G=L(E);st(G);var J,et=M(G);et.nodeValue=` ${p!=null?p:""}`,Y(E);var I=M(E,2);st(I),St(I,"placeholder",v),ct(()=>{S!==(S=ht(o).Deck)&&(k.value=(k.__value=ht(o).Deck)==null?"":ht(o).Deck),J!==(J=ht(o).Collection)&&(G.value=(G.__value=ht(o).Collection)==null?"":ht(o).Collection)}),pt(s,[],k,()=>(ht(o).Deck,m(l)),Z=>C(l,Z)),pt(s,[],G,()=>(ht(o).Collection,m(l)),Z=>C(l,Z)),Wr(I,()=>m(h),Z=>C(h,Z)),de("change",I,y),de("focus",I,()=>{C(l,ht(o).Custom)}),j(D,P)},$$slots:{default:!0}});var w=M(_,2);Ct(w,{children:(D,T)=>{var P=Co(),B=H(P),k=L(B);st(k);var S,z=M(k);z.nodeValue=` ${x!=null?x:""}`,Y(B);var E=M(B,2),G=L(E);st(G);var J,et=M(G);et.nodeValue=` ${b!=null?b:""}`,Y(E),ct(()=>{S!==(S=lt.Year)&&(k.value=(k.__value=lt.Year)==null?"":lt.Year),J!==(J=lt.All)&&(G.value=(G.__value=lt.All)==null?"":lt.All)}),pt(u,[],k,()=>(lt.Year,m(i)),I=>C(i,I)),pt(u,[],G,()=>(lt.All,m(i)),I=>C(i,I)),j(D,P)},$$slots:{default:!0}}),Y(A),Gt(2),ct(()=>Pa(F,"loading",d())),j(t,$),ft()}async function Ro(t,e){let a=await t();const{subscribe:r,set:n}=Ue(a);function s(o){a=o,n(o),e(o)}function u(o){s(o(a))}return{subscribe:r,set:s,update:u}}function So(t,e){ut(e,!1);const a=Dt(),r=()=>yt(u(),"$search",a),n=()=>yt(o(),"$days",a),s=N();let u=O(e,"search",8),o=O(e,"days",8);const d=Ro(()=>Jr({}),Zr);let c=N(null),f=N(!0);async function i(y,x){await d,C(f,!0);try{C(c,await es({search:y,days:x}))}finally{C(f,!1)}}X(()=>(r(),n()),()=>{i(r(),n())}),X(()=>n(),()=>{C(s,Fn(n()))}),vt(),dt();var l=At(),h=H(l);rs(h,()=>d,null,(y,x)=>{var g=At(),p=H(g);ts(p,e,"default",{get revlogRange(){return m(s)},get prefs(){return m(x)},get sourceData(){return m(c)},get loading(){return m(f)}}),j(y,g)}),j(t,l),ft()}var Po=K('<!> <div class="graphs-container svelte-n9umk6"><!></div> <div class="spacer svelte-n9umk6"></div>',1);function Fo(t,e){ut(e,!1);const a=Dt(),r=()=>yt(o,"$search",a),n=()=>yt(ns,"$pageTheme",a);let s=O(e,"initialSearch",8),u=O(e,"initialDays",8);const o=Ue(s()),d=Ue(u());let c=O(e,"graphs",8),f=O(e,"controller",8,Hn);function i(l){as(`browserSearch: ${r()} ${l.detail.query}`)}dt(),So(t,{search:o,days:d,children:Kn,$$slots:{default:(l,h)=>{const y=xe(()=>h.sourceData),x=xe(()=>h.loading),g=xe(()=>h.prefs),p=xe(()=>h.revlogRange);var v=Po(),b=H(v);Mt(b,f,F=>{var _=At(),w=H(_);fn(w,f,(D,T)=>{T(D,{search:o,days:d,get loading(){return m(x)}})}),j(F,_)});var $=M(b,2),A=L($);Mt(A,()=>m(y)&&m(p),F=>{var _=At(),w=H(_);Le(w,1,c,je,(D,T)=>{var P=At(),B=H(P);fn(B,()=>m(T),(k,S)=>{S(k,{get sourceData(){return m(y)},get prefs(){return m(g)},get revlogRange(){return m(p)},get nightMode(){return n().isDark},$$events:{search:i}})}),j(D,P)}),j(F,_)}),Y($),Gt(2),j(l,v)}}}),ft()}function Bo(t,e){function a(r){return r.map((n,s)=>({hour:s,totalCount:n.total,correctCount:n.correct}))}switch(e){case q.Month:return a(t.hours.oneMonth);case q.ThreeMonths:return a(t.hours.threeMonths);case q.Year:return a(t.hours.oneYear);case q.AllTime:return a(t.hours.allTime)}}function No(t,e,a,r){const n=Bo(a,r),s=Math.max(...n.map(g=>g.totalCount)),u=te(t),o=u.transition().duration(600);if(s)Rt(u,!0);else{Rt(u,!1);return}const d=Ce().domain(n.map(g=>g.hour.toString())).range([e.marginLeft,e.width-e.marginRight]).paddingInner(.1);u.select(".x-ticks").call(g=>g.transition(o).call(Ne(d).tickSizeOuter(0))).selectAll(".tick").selectAll("text").classed(Ls,g=>g%2!=0).attr("direction","ltr");const c=tt().range([.1,.8]),f=$t(g=>ze(c(g))).domain([0,s]),i=g=>nt(g),l=tt().range([e.height-e.marginBottom,e.marginTop]).domain([0,s]).nice();u.select(".y-ticks").call(g=>g.transition(o).call(Ye(l).ticks(e.height/50).tickSizeOuter(0).tickFormat(i))).attr("direction","ltr");const h=l.copy().domain([0,1]),y=g=>g.attr("width",d.bandwidth()).transition(o).attr("x",p=>d(p.hour.toString())).attr("y",p=>l(p.totalCount)).attr("height",p=>l(0)-l(p.totalCount)).attr("fill",p=>f(p.totalCount));u.select("g.bars").selectAll("rect").data(n).join(g=>g.append("rect").attr("rx",1).attr("x",p=>d(p.hour.toString())).attr("y",l(0)).attr("height",0).call(y),g=>g.call(y),g=>g.call(p=>p.transition(o).attr("height",0).attr("y",l(0)))),u.select(".y2-ticks").call(g=>g.transition(o).call(nn(h).ticks(e.height/50).tickFormat(p=>`${Math.round(p*100)}%`).tickSizeOuter(0))).attr("direction","ltr"),u.select("path.cumulative-overlay").datum(n).attr("d",on().curve(ln).defined(g=>g.totalCount>0).x(g=>d(g.hour.toString())+d.bandwidth()/2).y0(e.height-e.marginBottom).y1(g=>{const p=g.correctCount/g.totalCount;return h(isNaN(p)?0:p)}));function x(g){const p=Fa({hourStart:g.hour,hourEnd:g.hour+1}),v=Ba({reviews:g.totalCount}),b=Na({percent:g.totalCount?g.correctCount/g.totalCount*100:0,reviews:g.correctCount});return`${p}<br>${v}<br>${b}`}u.select("g.hover-columns").selectAll("rect").data(n).join("rect").attr("x",g=>d(g.hour.toString())).attr("y",()=>l(s)).attr("width",d.bandwidth()).attr("height",()=>l(0)-l(s)).on("mousemove",(g,p)=>{const[v,b]=ve(g,document.body);he(x(p),v,b)}).on("mouseout",me)}var Yo=Zt('<!><svg><g class="bars"></g><!><!><!><!></svg>',1);function qo(t,e){ut(e,!1);let a=O(e,"sourceData",8,null),r=O(e,"revlogRange",8),n=N(q.Year);const s=ee();let u=N(null);const o=Ya(),d=qa();X(()=>(rt(a()),m(u),m(n)),()=>{a()&&No(m(u),s,a(),m(n))}),vt(),dt(),kt(t,{title:o,subtitle:d,children:(c,f)=>{var i=Yo(),l=H(i);Ct(l,{children:(v,b)=>{ye(v,{get graphRange(){return m(n)},set graphRange($){C(n,$)},get revlogRange(){return r()},followRevlog:!0,$$legacy:!0})},$$slots:{default:!0}});var h=M(l);ae(h,v=>C(u,v),()=>m(u));var y=M(L(h));an(y);var x=M(y);qe(x);var g=M(x);pe(g,{bounds:s});var p=M(g);be(p,{bounds:s}),Y(h),ct(()=>St(h,"viewBox",`0 0 ${s.width} ${s.height}`)),j(c,i)},$$slots:{default:!0}}),ft()}var V=(t=>(t[t.Month=0]="Month",t[t.Percentile50=1]="Percentile50",t[t.Percentile95=2]="Percentile95",t[t.All=3]="All",t))(V||{});function Re(t){const e=Nt(t.intervals),a=gt(e,([s,u])=>u),r=Array(a);let n=0;for(const s of e.entries())r.fill(s[0],n,n+s[1]),n+=s[1];return r.sort((s,u)=>s-u),{intervals:r}}function Lo(t,e,a,r){return e-t<=1?(r?Oa:za)({day:t,cards:a}):(r?Ga:Va)({daysStart:t,daysEnd:e-1,cards:a})}function jo(t,e){if(t===e)return`"prop:ivl=${t}"`;const a=`"prop:ivl>=${t}"`,r=`"prop:ivl<=${e}"`;return`${a} ${r}`}function Oo(t,e){t===0&&(t=.5);const a=`"prop:s>=${t-.5}"`,r=`"prop:s<${e+.5}"`;return`${a} ${r}`}function En(t,e,a,r,n){var _;const s=t.intervals;if(!s.length)return[null,[]];const u=0;let[,o]=Kt(s),d=!1;switch(e){case 0:o=Math.min(o,30);break;case 1:o=vn(s,.5),d=!0;break;case 2:o=vn(s,.95),d=!0;break;case 3:d=!0;break}o=o+1;const c=n?w=>w:w=>w+1,f=(w,D,T)=>D===T.length-1?[w-(T[0]-1),w+1]:[w-(T[0]-1)],i=Math.min(70,o-u),l=tt().domain([u,o]),h=tt().domain((d?l.nice():l).domain().map(c)),y=Yt().domain(h.domain()).thresholds(h.ticks(i).flatMap(f))(s),x=gt(y,w=>w.length);if(!x)return[null,[]];const g=tt().range([.7,.3]),p=$t(w=>ze(g(w))).domain([o,u]);function v(w,D,T){const P=Lo(w.x0,w.x1,w.length,n),B=Pe();return`${P}<br>${B}: ‎${nt(T,1)}%`}function b(w){const D=w.x0,T=w.x1-1,P=(n?Oo:jo)(D,T);a("search",{query:P})}const $=Math.round((_=fs(s))!=null?_:0),A=Pt($*86400,!1),F=[{label:n?La():ja(),value:A}];return[{scale:h,bins:y,total:x,hoverText:v,onClick:r?b:null,colourScale:p,showArea:!0},F]}var zo=K('<label><input type="radio"> </label> <label><input type="radio"> 50%</label> <label><input type="radio"> 95%</label> <label><input type="radio"> </label>',1),Go=K("<!> <!> <!>",1);function Vo(t,e){ut(e,!1);const a=Dt(),r=()=>yt(u(),"$prefs",a),n=[];let s=O(e,"sourceData",8,null),u=O(e,"prefs",8);const o=Ft();let d=N(null),c=N(null),f=N([]),i=N(V.Percentile95);const l=Ia(),h=Ha(),y=Pt(1*De),x=Ze();X(()=>(rt(s()),Re),()=>{s()&&C(d,Re(s().intervals))}),X(()=>(m(d),m(c),m(f),m(i),r()),()=>{m(d)&&(g=>(C(c,g[0]),C(f,g[1])))(En(m(d),m(i),o,r().browserLinksSupported,!1))}),vt(),dt(),kt(t,{title:l,subtitle:h,children:(g,p)=>{var v=Go(),b=H(v);Ct(b,{children:(F,_)=>{var w=zo(),D=H(w),T=L(D);st(T);var P,B=M(T);B.nodeValue=` ${y!=null?y:""}`,Y(D);var k=M(D,2),S=L(k);st(S);var z;Gt(),Y(k);var E=M(k,2),G=L(E);st(G);var J;Gt(),Y(E);var et=M(E,2),I=L(et);st(I);var Z,xt=M(I);xt.nodeValue=` ${x!=null?x:""}`,Y(et),ct(()=>{P!==(P=V.Month)&&(T.value=(T.__value=V.Month)==null?"":V.Month),z!==(z=V.Percentile50)&&(S.value=(S.__value=V.Percentile50)==null?"":V.Percentile50),J!==(J=V.Percentile95)&&(G.value=(G.__value=V.Percentile95)==null?"":V.Percentile95),Z!==(Z=V.All)&&(I.value=(I.__value=V.All)==null?"":V.All)}),pt(n,[],T,()=>(V.Month,m(i)),W=>C(i,W)),pt(n,[],S,()=>(V.Percentile50,m(i)),W=>C(i,W)),pt(n,[],G,()=>(V.Percentile95,m(i)),W=>C(i,W)),pt(n,[],I,()=>(V.All,m(i)),W=>C(i,W)),j(F,w)},$$slots:{default:!0}});var $=M(b,2);Vt($,{get data(){return m(c)}});var A=M($,2);qt(A,{get tableData(){return m(f)}}),j(g,v)},$$slots:{default:!0}}),ft()}function Io(t){return{retrievability:Nt(t.retrievability.retrievability),average:t.retrievability.average,sumByCard:t.retrievability.sumByCard,sumByNote:t.retrievability.sumByNote}}function Ho(t,e){const a=`"prop:r>=${t/100}"`;let r=`"prop:r<${(e+1)/100}"`;return e===99&&(r=r.replace("<","<=")),`${a} AND ${r}`}function Eo(t,e,a){const r=tt().domain([t,e]).nice(),n=r.ticks(a),s=r.domain(),u=t-s[0],o=n[1]-n[0];if(u===0||u%o!==0&&o%u!==0)return[r,n];const d=c=>c+u;return[tt().domain(s.map(d)),n.map(d)]}function Qo(t,e,a){const r=t.retrievability;if(!r.size)return[null,[]];const n=0,s=100,u=20,[o,d]=Eo(n,s,u),c=Yt().value(g=>g[0]).domain(o.domain()).thresholds(d)(r.entries()),f=gt(c,wt),i=$t(Oe).domain([0,100]);function l(g,p){const v=`${g.x0}%-${g.x1}%`;return Ua({cards:wt(g),percent:v})}function h(g){const p=g.x0,v=g.x1-1,b=Ho(p,v);e("search",{query:b})}const y=g=>nt(g,0)+"%",x=[{label:Ea(),value:y(t.average)},{label:Qa(),value:`${$e({cards:+t.sumByCard.toFixed(0)})} / ${Wa({notes:+t.sumByNote.toFixed(0)})}`}];return[{scale:o,bins:c,total:f,hoverText:l,onClick:a?h:null,colourScale:i,showArea:!1,binValue:wt,xTickFormat:y},x]}var Wo=K("<!> <!>",1);function Uo(t,e){ut(e,!1);const a=Dt(),r=()=>yt(s(),"$prefs",a);let n=O(e,"sourceData",8,null),s=O(e,"prefs",8);const u=Ft();let o=N(null),d=N([]);const c=Xa(),f=Ka();X(()=>(rt(n()),m(o),m(d),r()),()=>{n()&&(h=>(C(o,h[0]),C(d,h[1])))(Qo(Io(n()),u,r().browserLinksSupported))}),vt(),dt();var i=At(),l=H(i);Mt(l,()=>{var h;return(h=n())==null?void 0:h.fsrs},h=>{kt(h,{title:c,subtitle:f,children:(y,x)=>{var g=Wo(),p=H(g);Vt(p,{get data(){return m(o)}});var v=M(p,2);qt(v,{get tableData(){return m(d)}}),j(y,g)},$$slots:{default:!0}})}),j(t,i),ft()}function wn(t){return{reviewCount:Nt(t.reviews.count),reviewTime:Nt(t.reviews.time)}}function Qn(t){const e=[0,0,0,0,0];for(const a of t)e[0]+=a[1].mature,e[1]+=a[1].young,e[2]+=a[1].relearn,e[3]+=a[1].learn,e[4]+=a[1].filtered;return e}function ce(t,e){return gt(Qn(t).slice(0,e+1))}function Xo(t,e,a,r,n){const s=te(t),u=s.transition().duration(600),o=1;let d=0;switch(r){case q.Month:d=-30;break;case q.ThreeMonths:d=-89;break;case q.Year:d=-364;break;case q.AllTime:d=Me(a.reviewCount.keys());break}const c=Math.min(70,Math.abs(d)),f=tt().domain([d,o]);r===q.AllTime&&f.nice(c);const i=n?a.reviewTime:a.reviewCount,l=Yt().value(R=>R[0]).domain(f.domain()).thresholds(f.ticks(c))(i.entries());if(gt(l,R=>R.length))Rt(s,!0);else return Rt(s,!1),[];f.range([e.marginLeft,e.width-e.marginRight]),s.select(".x-ticks").call(R=>R.transition(u).call(Ne(f).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const y=R=>n?Pt(R/1e3,!0):Math.round(R)!=R?"":nt(R),x=Ae(l,R=>ce(R,4)),g=tt().range([e.height-e.marginBottom,e.marginTop]).domain([0,x]).nice();s.select(".y-ticks").call(R=>R.transition(u).call(Ye(g).ticks(e.height/50).tickSizeOuter(0).tickFormat(y))).attr("direction","ltr");function p(R){const Q=Math.max(0,f(R.x1)-f(R.x0)-1);return Q!=null?Q:0}const v=tt().range([.3,.5]),b=tt().range([.4,.7]),$=$t(R=>Ke(b(R))).domain(f.domain()),A=$t(R=>Ke(v(R))).domain(f.domain()),F=$t(R=>xs(v(R))).domain(f.domain()),_=$t(R=>_s(v(R))).domain(f.domain()),w=$t(R=>ys(v(R))).domain(f.domain());function D(R){switch(R){case 0:return $;case 1:return A;case 3:return _;case 2:return F;case 4:return w}}function T(R){return n?Pt(R/1e3):fe({reviews:R})}function P(R,Q){const at=en(R.x0,R.x1),Ht=Qn(R),se=T(gt(Ht));let Et=`<table><tr><td>${at}</td><td align=end>${se}</td></tr>`;const Un=[[4,rr()],[3,tn()],[2,An()],[1,Be()],[0,Fe()],[null,Pe()]];for(const[Ge,Xn]of Un){let Ve,Ie;Ge==null?(Ve="transparent",Ie=T(Q)):(Ve=D(Ge)(1),Ie=T(Ht[Ge])),Et+=`<tr>
            <td><span style="color: ${Ve};">■</span> ${Xn}</td>
            <td align=end>${Ie}</td>
            </tr>`}return Et}const B=(R,Q)=>R.attr("width",p).transition(u).attr("x",at=>f(at.x0)).attr("y",at=>g(ce(at,Q))).attr("height",at=>g(0)-g(ce(at,Q))).attr("fill",at=>D(Q)(at.x0));for(const R of[0,1,2,3,4])s.select(`g.bars${R}`).selectAll("rect").data(l).join(Q=>Q.append("rect").attr("rx",1).attr("x",at=>f(at.x0)).attr("y",g(0)).attr("height",0).call(at=>B(at,R)),Q=>Q.call(at=>B(at,R)),Q=>Q.call(at=>at.transition(u).attr("height",0).attr("y",g(0))));const k=l.map(R=>ce(R,4));k.unshift(0);const S=sn(k),z=S.slice(-1)[0],E=g.copy().domain([0,z]).nice();z&&(s.select(".y2-ticks").call(R=>R.transition(u).call(nn(E).ticks(e.height/50).tickFormat(y).tickSizeOuter(0))).attr("direction","ltr"),s.select("path.cumulative-overlay").datum(S).attr("d",on().curve(ln).x((R,Q)=>f(Q===0?l[0].x0:l[Q-1].x1)).y0(e.height-e.marginBottom).y1(R=>E(R))));const G=l.map((R,Q)=>[R,S[Q+1]]);s.select("g.hover-columns").selectAll("rect").data(G).join("rect").attr("x",([R])=>f(R.x0)).attr("y",()=>g(x)).attr("width",([R])=>p(R)).attr("height",()=>g(0)-g(x)).on("mousemove",(R,[Q,at])=>{const[Ht,se]=ve(R,document.body);he(P(Q,at),Ht,se)}).on("mouseout",me);const J=-d+1,et=gt(l,R=>R.length),I=et/J*100,Z=z,xt=Z/J,W=Z/et;let ot,it,bt,Bt,Lt;if(n){ot=Pt(Z/1e3,!1),it=un({count:Math.round(W/1e3/60)}),bt=un({count:Math.round(xt/1e3/60)}),Lt=Ja();const R=Yt().value(Et=>Et[0]).domain(f.domain())(a.reviewCount.entries()),Q=gt(R,Et=>ce(Et,4)),at=Z/1e3,Ht=at/Q,se=Q*60/at;Bt=Za({averageSeconds:Ht,cardsPerMinute:se})}else ot=fe({reviews:Z}),it=ke({count:Math.round(W)}),bt=ke({count:Math.round(xt)}),Bt=Lt="";const It=[{label:tr(),value:er({amount:et,total:J,percent:I<99.5?nt(I):I<99.95?nt(I,1):I<100?nt(I,2):"100"})},{label:Se(),value:ot},{label:nr(),value:it},{label:ar(),value:bt}];return Bt&&It.push({label:Lt,value:Bt}),It}var Ko=K('<label><input type="checkbox"> </label> <!>',1),Jo=Zt("<g></g>"),Zo=Zt("<!><svg><!><!><!><!><!></svg><!>",1);function ti(t,e){ut(e,!1);let a=O(e,"sourceData",8,null),r=O(e,"revlogRange",8),n=N(null);const s=ee();let u=N(null),o=N(q.Month),d=N(!1),c=N([]);const f=sr(),i=or();let l=N("");X(()=>(rt(a()),wn),()=>{a()&&C(n,wn(a()))}),X(()=>(m(n),m(u),m(o),m(d)),()=>{m(n)&&C(c,Xo(m(u),s,m(n),m(o),m(d)))}),X(()=>(m(d),cr),()=>{m(d)?C(l,ir()):C(l,lr())}),vt(),dt(),kt(t,{title:f,get subtitle(){return m(l)},children:(h,y)=>{var x=Zo(),g=H(x);Ct(g,{children:(w,D)=>{var T=Ko(),P=H(T),B=L(P);st(B);var k=M(B);k.nodeValue=` ${i!=null?i:""}`,Y(P);var S=M(P,2);ye(S,{get graphRange(){return m(o)},set graphRange(z){C(o,z)},get revlogRange(){return r()},followRevlog:!0,$$legacy:!0}),rn(B,()=>m(d),z=>C(d,z)),j(w,T)},$$slots:{default:!0}});var p=M(g);ae(p,w=>C(u,w),()=>m(u));var v=L(p);Le(v,0,()=>[4,3,2,1,0],je,(w,D)=>{var T=Jo();ct(()=>ur(T,`bars${D!=null?D:""}`)),j(w,T)});var b=M(v);an(b);var $=M(b);qe($);var A=M($);pe(A,{bounds:s});var F=M(A);be(F,{bounds:s}),Y(p);var _=M(p);qt(_,{get tableData(){return m(c)}}),ct(()=>St(p,"viewBox",`0 0 ${s.width} ${s.height}`)),j(h,x)},$$slots:{default:!0}}),ft()}var ei=K('<label><input type="radio"> </label> <label><input type="radio"> 50%</label> <label><input type="radio"> 95%</label> <label><input type="radio"> </label>',1),ni=K("<!> <!> <!>",1);function ai(t,e){ut(e,!1);const a=Dt(),r=()=>yt(u(),"$prefs",a),n=[];let s=O(e,"sourceData",8,null),u=O(e,"prefs",8);const o=Ft();let d=N(null),c=N(null),f=N([]),i=N(V.Percentile95);const l=fr(),h=dr(),y=Pt(1*De),x=Ze();X(()=>(rt(s()),Re),()=>{s()&&C(d,Re(s().stability))}),X(()=>(m(d),m(c),m(f),m(i),r()),()=>{m(d)&&(v=>(C(c,v[0]),C(f,v[1])))(En(m(d),m(i),o,r().browserLinksSupported,!0))}),vt(),dt();var g=At(),p=H(g);Mt(p,()=>{var v;return(v=s())==null?void 0:v.fsrs},v=>{kt(v,{title:l,subtitle:h,children:(b,$)=>{var A=ni(),F=H(A);Ct(F,{children:(D,T)=>{var P=ei(),B=H(P),k=L(B);st(k);var S,z=M(k);z.nodeValue=` ${y!=null?y:""}`,Y(B);var E=M(B,2),G=L(E);st(G);var J;Gt(),Y(E);var et=M(E,2),I=L(et);st(I);var Z;Gt(),Y(et);var xt=M(et,2),W=L(xt);st(W);var ot,it=M(W);it.nodeValue=` ${x!=null?x:""}`,Y(xt),ct(()=>{S!==(S=V.Month)&&(k.value=(k.__value=V.Month)==null?"":V.Month),J!==(J=V.Percentile50)&&(G.value=(G.__value=V.Percentile50)==null?"":V.Percentile50),Z!==(Z=V.Percentile95)&&(I.value=(I.__value=V.Percentile95)==null?"":V.Percentile95),ot!==(ot=V.All)&&(W.value=(W.__value=V.All)==null?"":V.All)}),pt(n,[],k,()=>(V.Month,m(i)),bt=>C(i,bt)),pt(n,[],G,()=>(V.Percentile50,m(i)),bt=>C(i,bt)),pt(n,[],I,()=>(V.Percentile95,m(i)),bt=>C(i,bt)),pt(n,[],W,()=>(V.All,m(i)),bt=>C(i,bt)),j(D,P)},$$slots:{default:!0}});var _=M(F,2);Vt(_,{get data(){return m(c)}});var w=M(_,2);qt(w,{get tableData(){return m(f)}}),j(b,A)},$$slots:{default:!0}})}),j(t,g),ft()}function kn(t){let e;const a=t.today;if(a.answerCount){const r=Pr(a.answerCount,a.answerMillis/1e3),n=a.answerCount-a.correctCount;let s=gr();s+=` ${n} (${nt(n/a.answerCount*100)}%)`;const u=vr({learnCount:a.learnCount,reviewCount:a.reviewCount,relearnCount:a.relearnCount,filteredCount:a.earlyReviewCount});let o;a.matureCount?o=hr({correct:a.matureCorrect,total:a.matureCount,percent:a.matureCorrect/a.matureCount*100}):o=mr(),e=[r,s,u,o]}else e=[pr()];return{title:br(),lines:e}}var ri=K("<div> </div>"),si=K('<div class="legend svelte-2llkqb"></div>');function oi(t,e){ut(e,!1);let a=O(e,"sourceData",8,null),r=N(null);X(()=>(rt(a()),kn),()=>{a()&&C(r,kn(a()))}),vt(),dt();var n=At(),s=H(n);Mt(s,()=>m(r),u=>{kt(u,{get title(){return m(r).title},children:(o,d)=>{var c=si();Le(c,5,()=>m(r).lines,je,(f,i)=>{var l=ri(),h=L(l);Y(l),ct(()=>Ot(h,m(i))),j(f,l)}),Y(c),j(o,c)},$$slots:{default:!0}})}),j(t,n),ft()}function Qe(t,e){const a=t+e;return a===0?"0%":nt(t/a*100,1)+"%"}var Wn=(t=>(t[t.Young=0]="Young",t[t.Mature=1]="Mature",t[t.Total=2]="Total",t))(Wn||{});function Wt(t,e,a){let r,n,s;switch(a){case 0:r=e.youngPassed,n=e.youngFailed,s=Qe(e.youngPassed,e.youngFailed);break;case 1:r=e.maturePassed,n=e.matureFailed,s=Qe(e.maturePassed,e.matureFailed);break;case 2:r=e.youngPassed+e.maturePassed,n=e.youngFailed+e.matureFailed,s=Qe(r,n);break}return`
        <tr>
            <td class="trl">${t}</td>
            <td class="trr">${nt(r)}</td>
            <td class="trr">${nt(n)}</td>
            <td class="trr">${s}</td>
        </tr>`}function ii(t,e){const a=t.trueRetention;let r="";for(const n of Object.values(Wn)){if(typeof n=="string")continue;const s=`
        <style>
            td.trl { border: 1px solid; text-align: left; }
            td.trr { border: 1px solid; text-align: right; }
            td.trc { border: 1px solid; text-align: center; }
            table.true-retention { width: 100%; table-layout: fixed; }
            colgroup col:first-child { width: 40% }
        </style>
        <table class="true-retention" cellspacing="0" cellpadding="2">
        <colgroup><col><col><col></colgroup>
            <tr>
                <td class="trl"><b>${li(n)}</b></td>
                <td class="trr">${yr()}</td>
                <td class="trr">${xr()}</td>
                <td class="trr">${_r()}</td>
            </tr>
            ${Wt($r(),a.today,n)}
            ${Wt(wr(),a.yesterday,n)}
            ${Wt(kr(),a.week,n)}
            ${Wt(Dr(),a.month,n)}
            ${e===lt.Year?Wt(Ar(),a.year,n):Wt(Mr(),a.allTime,n)}
        </table>`;r+=s}return r}function li(t){switch(t){case 0:return Be();case 1:return Fe();case 2:return Se()}}var ci=K('<div class="true-retention-table svelte-2xnk54"><!></div>');function ui(t,e){ut(e,!1);let a=O(e,"revlogRange",8),r=O(e,"sourceData",8,null),n=N();const s=Cr(),u=Tr();X(()=>(rt(r()),rt(a())),()=>{r()&&C(n,ii(r(),a()))}),vt(),dt(),kt(t,{title:s,subtitle:u,children:(o,d)=>{var c=At(),f=H(c);Mt(f,()=>m(n),i=>{var l=ci(),h=L(l);Rr(h,()=>m(n),!1,!1),Y(l),j(i,l)}),j(o,c)},$$slots:{default:!0}}),ft()}function Si(t){Fo(t,{graphs:[oi,Ao,Js,ti,io,Vo,ai,xo,vo,Uo,qo,Es,Gs,ui],initialSearch:"deck:current",initialDays:365,controller:Hn})}export{Si as component};
