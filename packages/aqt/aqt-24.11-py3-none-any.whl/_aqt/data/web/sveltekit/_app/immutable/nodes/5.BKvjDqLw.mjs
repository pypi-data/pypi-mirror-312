var Lr=Object.defineProperty;var Er=(i,t,a)=>t in i?Lr(i,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[t]=a;var ie=(i,t,a)=>Er(i,typeof t!="symbol"?t+"":t,a);import{E as Nr,G as Mr,H as Vr,J as Fr,K as jr,s as st,L as Je,M as ze,N as je,O as jt,P as Ps,Q as Xt,S as yt,T as bs,U as Ct,V as Hr,W as Br,X as Ht,Y as zr,Z as Gr,_ as Wr,$ as qr,a0 as Qr}from"../chunks/backend.fkC9kjAd.mjs";import{l as Ur,w as Kr,a as Yr,b as Jr}from"../chunks/utils.kLv4HcqM.mjs";import{s as w,aL as Xr,C as Ys,b0 as Zr,g as s,_ as Ot,j as ea,G as ta,p as ve,aM as se,b as $e,Z as sa,X as ss,Y as ra,N as U,P as $,O as N,t as L,n as Z,l as ce,a as Ee,m as V,L as Qe,aZ as we,D as _,ay as oe,M as aa}from"../chunks/runtime.BreniANL.mjs";import{w as Oe,g as Pe,d as na,r as Js,a as oa}from"../chunks/index.C9wOYftf.mjs";import{c as Bt}from"../chunks/cloneDeep.CihkQVl_.mjs";import{i as zt,a as la,S as ia}from"../chunks/Select.CuXCm-VX.mjs";import{e as Fe,a as u,b as Y,t as K,n as ca}from"../chunks/disclose-version.C7Ref1zK.mjs";import{b as _t}from"../chunks/this.CuBSVDza.mjs";import{i as me}from"../chunks/lifecycle.CyW130Fa.mjs";import{p as F,a as be,s as Xs}from"../chunks/props.CyhLJmEU.mjs";import{s as da,c as Zs,o as rs,a as ua}from"../chunks/index-client.TjEV9IuS.mjs";import{c as Ae,C as fa}from"../chunks/Container.BA026blb.mjs";import{I as ga,b as Te}from"../chunks/IconButton.CQVGe_K4.mjs";import{s as ke,a as ue,b as rt,c as J}from"../chunks/store.BCoIkSvf.mjs";import{cf as er,v as qe,cg as Zt,cc as tr,ar as et,ch as va,ci as $a,t as $t,cj as as,ck as sr,cl as pa,cm as Ss,cn as ma,co as xs,cp as ha,cq as ya,cr as Ca,cs as wa,ct as _a,cu as ka,cv as Pa,cw as ba,cx as Sa,cy as xa,cz as Oa,cA as Aa,cB as Da,cC as Os,cD as Ra,cE as Ta,cF as Ia,cG as La,cH as As,cI as Ea,cJ as Na,cK as Ma,cL as Va,cM as Fa,cN as ja,cO as Ha,cP as Ba,cQ as za,cR as Ga,cS as rr,cT as Wa,cU as qa,cV as Qa,cW as Ua,cX as Ka,cY as Ya,cZ as Ja,c_ as Xa,c$ as Za,d0 as en,d1 as tn,d2 as sn,d3 as rn,d4 as an,d5 as nn,d6 as on,d7 as ln,d8 as cn,d9 as dn,da as un,db as fn,dc as gn,dd as vn,de as $n,df as pn,dg as mn,dh as hn,di as yn,dj as Cn,dk as wn,dl as _n,dm as kn,dn as Pn,dp as bn,dq as Sn,dr as xn,ds as On,dt as Ds,du as An,dv as Dn,dw as Rn,dx as Tn,dy as In,dz as Ln,dA as En,dB as Rs,dC as Nn,dD as Mn,dE as Vn,dF as Fn,dG as jn,dH as ar,dI as nr,dJ as or,dK as Hn,dL as Bn,dM as zn,dN as Gn,dO as Wn,q as vt,dP as qn,dQ as Qn,dR as Un,dS as Kn,dT as Yn,dU as bt,dV as Ts,dW as Is,dX as lr,dY as Jn,dZ as ir,d_ as Xn,d$ as Zn,e0 as eo,e1 as to,b1 as lt,e2 as Ls,e3 as so,e4 as ro,e5 as ao,e6 as no,e7 as oo,e8 as lo,e9 as io,ea as co,eb as uo,ec as fo,ed as go,ee as Es,ef as cr,eg as vo,eh as $o,ei as Gt,ej as po,ek as mo,el as ho,em as dr,en as ur,eo as yo,ep as Wt,eq as Co,er as fr,es as Ns,et as wo,eu as _o,ev as ko,ew as Po,ex as bo,ey as gr,ez as So,eA as xo,eB as Oo,eC as Ao,eD as Do,eE as Ro,eF as To,eG as Io,U as Lo,eH as Eo,eI as No,eJ as Mo,eK as Vo,eL as Fo,eM as jo,eN as Ho,eO as Bo,eP as zo,eQ as vr,eR as Ms,eS as Go,eT as Wo,eU as qo,eV as Qo,eW as Uo,eX as Ko,eY as Yo,eZ as Jo,e_ as Xo,e$ as Zo,f0 as el,f1 as Vs,f2 as tl,f3 as sl,f4 as rl,f5 as al,f6 as nl,f7 as ol,f8 as ll,f9 as Fs,fa as il,fb as cl,fc as dl,fd as ul,fe as fl,ff as gl,fg as vl,fh as $l,fi as pl,fj as ml,fk as hl,fl as qt,fm as yl}from"../chunks/runtime-require.DNOiO2i-.mjs";import{R as _e}from"../chunks/Row.Bs46Alvy.mjs";import{e as At,i as ns,p as Cl}from"../chunks/theme.C2zODCPG.mjs";import{c as es}from"../chunks/svelte-component.CtMCXxmm.mjs";import{T as Be}from"../chunks/TitledContainer.CEgJrMj0.mjs";import{s as B,e as Ce}from"../chunks/render.DcSgmNQ4.mjs";import{C as it,R as Pt,H as ge,c as Ie,a as te,b as Ue,S as He,E as Ze,M as wl}from"../chunks/EnumSelectorRow.ChOxUdBm.mjs";import{d as _l,W as kl,P as Pl,D as gt,t as bl}from"../chunks/Badge.CwGJd0Es.mjs";import{a as Dt,c as Sl,b as Qt}from"../chunks/input.Zv-cJeNo.mjs";import{I as xt,ab as xl,J as Ol,f as js,h as $r,ac as Al,S as Dl,g as Rl,p as Tl}from"../chunks/Shortcut.DmvJtCcr.mjs";import{C as at}from"../chunks/Col.BRw5LzE5.mjs";import{m as pr}from"../chunks/context-keys.Dbye-yJ_.mjs";import{L as Il,S as Ll}from"../chunks/LabelButton.B49ZAgmI.mjs";import{t as Hs,s as Bs}from"../chunks/index.01ZVgqmA.mjs";import{r as St}from"../chunks/progress.C0ky-jd_.mjs";import{y as zs,z as Gs,A as Ut,C as El,B as Nl,D as Ml,E as Vl,H as Fl,F as jl,G as Hl,b as Bl,J as zl,I as Gl,L as Wl,K as ql,N as Ql,M as Ul}from"../chunks/HoverColumns.Ddtjl6Ew.mjs";import{t as Ws,b as Ge,c as Kl,u as Yl,d as Jl}from"../chunks/time.bYpCYamH.mjs";import{t as Xl}from"../chunks/time.dgyUukLq.mjs";import{I as Zl,i as ei,c as ti,C as si,T as ri}from"../chunks/TableData.BlAFnzlm.mjs";import{a as qs,c as Kt}from"../chunks/bridgecommand.BZhvos8e.mjs";function ai(i){w(i,i.v+1)}function ni(i,t){const a=Oe(i(),e=>{let r=!1;const n=Xr(()=>{Ys(()=>{const g=i();r&&e(g)})});return r=!0,n});return t?{set:t,update:e=>t(e(i())),subscribe:a.subscribe}:{subscribe:a.subscribe}}function oi(i){let t,a=ea(0),e=0,r=ta;function n(){return Zr()?(s(a),Ys(()=>{if(e===0){let g=!1;r=i.subscribe(c=>{t=c,g&&ai(a)}),g=!0}return e+=1,()=>{e-=1,Ot().then(()=>{e===0&&r()})}}),t):Pe(i)}return"set"in i?{get current(){return n()},set current(g){i.set(g)}}:{get current(){return n()}}}const li=Object.freeze(Object.defineProperty({__proto__:null,derived:na,fromStore:oi,get:Pe,readable:Js,readonly:oa,toStore:ni,writable:Oe},Symbol.toStringTag,{value:"Module"}));function ii(i,t,...a){return ci(i,ei,t,a)}function ci(i,t,a,e){return function r(n,g){if(g>=e.length)return a(n);const c=new Zl,l=e[g++];let f=-1;for(const y of n){const P=l(y,++f,n),d=c.get(P);d?d.push(y):c.set(P,[y])}for(const[y,P]of c)c.set(y,r(P,g));return t(c)}(i,0)}const di=ti("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function ts(){let i;return[new Promise(a=>i=a),i]}class ui{constructor(t,a){ie(this,"currentConfig");ie(this,"currentAuxData");ie(this,"configList");ie(this,"cardStateCustomizer");ie(this,"currentDeck");ie(this,"deckLimits");ie(this,"defaults");ie(this,"addonComponents");ie(this,"newCardsIgnoreReviewLimit");ie(this,"applyAllParentLimits");ie(this,"fsrs");ie(this,"fsrsReschedule",Oe(!1));ie(this,"daysSinceLastOptimization");ie(this,"currentPresetName");ie(this,"originalConfigsPromise");ie(this,"originalConfigsResolve");ie(this,"targetDeckId");ie(this,"configs");ie(this,"selectedIdx");ie(this,"configListSetter");ie(this,"modifiedConfigs",new Set);ie(this,"removedConfigs",[]);ie(this,"schemaModified");ie(this,"_presetAssignmentsChanged",!1);var e,r;this.targetDeckId=t,this.currentDeck=a.currentDeck,this.defaults=a.defaults.config,this.configs=a.allConfig.map(n=>({config:n.config,useCount:n.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(n=>n.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=Oe(a.cardStateCustomizer),this.deckLimits=Oe((r=(e=a.currentDeck)==null?void 0:e.limits)!=null?r:gi()),this.newCardsIgnoreReviewLimit=Oe(a.newCardsIgnoreReviewLimit),this.applyAllParentLimits=Oe(a.applyAllParentLimits),this.fsrs=Oe(a.fsrs),this.daysSinceLastOptimization=Oe(a.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=Oe(this.getCurrentConfig()),this.currentAuxData=Oe(this.getCurrentAuxData()),this.currentPresetName=Oe(this.configs[this.selectedIdx].config.name),this.configList=Js(this.getConfigList(),n=>{this.configListSetter=n}),this.schemaModified=a.schemaModified,this.addonComponents=Oe([]),Pe(this.configList),this.currentConfig.subscribe(n=>this.onCurrentConfigChanged(n)),this.currentAuxData.subscribe(n=>this.onCurrentAuxDataChanged(n)),[this.originalConfigsPromise,this.originalConfigsResolve]=ts()}setCurrentIndex(t){this.selectedIdx=t,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList()}getCurrentName(){return this.configs[this.selectedIdx].config.name}getCurrentNameForSearch(){return this.getCurrentName().replace(/([\\"])/g,"\\$1")}setCurrentName(t){if(this.configs[this.selectedIdx].config.name===t)return;const a=this.ensureNewNameUnique(t),e=this.configs[this.selectedIdx].config;e.name=a,e.id&&this.modifiedConfigs.add(e.id),this.sortConfigs(),this.updateConfigList()}addConfig(t){this.addConfigFrom(t,this.defaults)}cloneConfig(t){this.addConfigFrom(t,this.configs[this.selectedIdx].config.config)}addConfigFrom(t,a){const e=this.ensureNewNameUnique(t),n={config:new Nr({id:0n,name:e,config:new Mr(Bt(a))}),useCount:0};this.configs.push(n),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const t=this.configs[this.selectedIdx].config.id;if(t===1n)throw Error("can't remove default config");t!==0n&&(this.removedConfigs.push(t),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1),this.selectedIdx=Math.max(0,this.selectedIdx-1),this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList()}dataForSaving(t){const e=[...this.configs.map(r=>r.config).filter((r,n)=>n!==this.selectedIdx&&(r.id===0n||this.modifiedConfigs.has(r.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:e,mode:t,cardStateCustomizer:Pe(this.cardStateCustomizer),limits:Pe(this.deckLimits),newCardsIgnoreReviewLimit:Pe(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Pe(this.applyAllParentLimits),fsrs:Pe(this.fsrs),fsrsReschedule:Pe(this.fsrsReschedule)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(t){await Vr(this.dataForSaving(t))}onCurrentConfigChanged(t){const a=this.configs[this.selectedIdx].config;zt(t,a.config)||(a.config=t,a.id&&this.modifiedConfigs.add(a.id))}onCurrentAuxDataChanged(t){const a=this.getCurrentAuxData();zt(a,t)||this.currentConfig.update(e=>{const r=new TextEncoder().encode(JSON.stringify(t));return e.other=r,e})}ensureNewNameUnique(t){return this.configs.findIndex(e=>e.config.name===t)!==-1?t+(new Date().getTime()/1e3).toFixed(0):t}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var t;(t=this.configListSetter)==null||t.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return Bt(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const t=this.configs[this.selectedIdx].config.config;return fi(t.other)}sortConfigs(){const t=this.configs[this.selectedIdx].config.name;this.configs.sort((a,e)=>Ur(a.config.name,e.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(a=>a.config.name==t)}getConfigList(){return this.configs.map((a,e)=>{const r=a.useCount+(e===this.selectedIdx?1:0);return{name:a.config.name,current:e===this.selectedIdx,idx:e,useCount:r}})}getAllConfigs(){return Bt({configs:this.configs.map(t=>t.config),cardStateCustomizer:Pe(this.cardStateCustomizer),limits:Pe(this.deckLimits),newCardsIgnoreReviewLimit:Pe(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Pe(this.applyAllParentLimits),fsrs:Pe(this.fsrs),fsrsReschedule:Pe(this.fsrsReschedule),currentConfig:Pe(this.currentConfig)})}async isModified(){const t=await this.originalConfigsPromise,a=this.getAllConfigs();return!zt(t,a)}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function fi(i){if(!i.length)return{};let t;try{t=JSON.parse(new TextDecoder().decode(i))}catch{return console.log("invalid json in deck config"),{}}return t.constructor!==Object?(console.log("invalid object in deck config"),{}):t}function gi(){return new Fr({})}class tt{constructor(t,a,e,r,n){ie(this,"title");ie(this,"value");ie(this,"setter");ie(this,"disabledValue");ie(this,"startValue");ie(this,"initialValue");this.title=t,this.value=this.initialValue=a,this.setter=e,this.disabledValue=r,this.startValue=n}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(t){var a,e;this.value=(e=(a=this.value)!=null?a:this.startValue)!=null?e:t,this.setter(this.value)}setValue(t){this.value=t,this.setter(t)}}async function mr(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await Ot()}function wt(i){return i.fsrsParams5?i.fsrsParams5:i.fsrsParams4}const vi=async({params:i})=>{const t=Number(i.deckId),a=BigInt(t),e=await jr({did:a});return{state:new ui(BigInt(a),e)}},Kd=Object.freeze(Object.defineProperty({__proto__:null,load:vi},Symbol.toStringTag,{value:"Module"}));er("svelte",da);er("svelte/store",li);function $i(i,t){ve(t,!1);const a=ke(),e=()=>ue(g,"$components",a),r=()=>ue(c,"$auxData",a);let n=F(t,"state",8);const g=n().addonComponents,c=n().currentAuxData;me();var l=Fe(),f=se(l);be(f,()=>e().length,y=>{Be(y,{title:"Add-ons",children:(P,d)=>{var T=Fe(),C=se(T);At(C,1,e,ns,(x,p)=>{var b=Fe(),S=se(b);es(S,()=>s(p).component,(G,I)=>{I(G,Xs({get data(){return r()},set data(W){rt(c,W)}},()=>s(p),{$$legacy:!0}))}),u(x,b)}),u(P,T)},$$slots:{default:!0}})}),u(i,l),$e()}function Yt(i,t){let a,e;if(t instanceof Element){if(a=t,e=Array.prototype.indexOf.call(i,a),e<0)return null}else if(typeof t=="string"){const r=i.namedItem(t);if(!r||(a=r,e=Array.prototype.indexOf.call(i,a),e<0))return null}else if(t<0){e=i.length+t;const r=i.item(e);if(!r)return null;a=r}else{e=t;const r=i.item(e);if(!r)return null;a=r}return[a,e]}class pi{constructor(t){ie(this,"parent");this.parent=t}insertElement(t,a){const e=Yt(this.parent.children,a);if(!e)return-1;const[r,n]=e;return this.parent.insertBefore(t,r[0]),n}appendElement(t,a){var c;const e=Yt(this.parent.children,a);if(!e)return-1;const[r,n]=e,g=(c=r.nextElementSibling)!=null?c:null;return this.parent.insertBefore(t,g),n+1}updateElement(t,a){const e=Yt(this.parent.children,a);return e?(t(...e),!0):!1}}function mi(i){return new pi(i)}function hi(i){return i.nodeType===Node.ELEMENT_NODE}function yi(i){function t(e){sa(i,e)}return[{get(){return ss(i)},available(){return ra(i)}},t]}function Ci(i,t,a,e){const r=Oe([]);r.subscribe(t);function n(C,x){r.update(p=>(p.splice(C,0,x),p))}const[g,c]=ts(),l=g.then(mi),f=Oe([]);async function y(C,x){const[p,b]=ts(),S=await l,G=i();function I(o){return!C.id||o.id===C.id}async function W(o,O){for(const k of o)for(const h of k.addedNodes){if(!hi(h)||!I(h))continue;const M=x(h,S);return M>=0&&n(M,G),b(void 0),O.disconnect()}}new MutationObserver(W).observe(S.parent,{childList:!0});const z={component:C,hostProps:G};return f.update(o=>(o.push(z),o)),await p,{destroy(){f.update(o=>(la(o,z),o))}}}async function P(C,x){return(await l).updateElement((b,S)=>{r.update(G=>(G[S]=C(G[S]),G))},x)}const d=e({addComponent:y,updateProps:P});function T(){const C=i();return r.update(x=>(x.push(C),x)),C}return a({getProps:T}),{dynamicSlotted:f,resolveSlotContainer:c,slotsInterface:d}}function wi(){return{detach:Oe(!1)}}function _i({addComponent:i,updateProps:t}){function a(c,l=0){return i(c,(f,y)=>y.insertElement(f,l))}function e(c,l=-1){return i(c,(f,y)=>y.appendElement(f,l))}function r(c){return t(l=>(l.detach.set(!1),l),c)}function n(c){return t(l=>(l.detach.set(!0),l),c)}function g(c){return t(l=>(l.detach.update(f=>!f),l),c)}return{insert:a,append:e,show:r,hide:n,toggle:g}}const ki=Symbol("dynamicSlotting"),[Qs,Pi]=yi(ki);var bi=Y('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function We(i,t){ve(t,!1);const a=ke(),e=()=>ue(d,"$dynamicSlotted",a);function r(b){return b}let n=F(t,"slotHost",8),g=F(t,"createProps",8,wi),c=F(t,"updatePropsList",8,r),l=F(t,"setSlotHostContext",8,Pi),f=F(t,"createInterface",8,_i);const{slotsInterface:y,resolveSlotContainer:P,dynamicSlotted:d}=Ci(g(),c(),l(),f());let T=F(t,"api",8);Object.assign(T(),y),me();var C=bi(),x=U(C);st(x,t,"default",{});var p=$(x,2);At(p,1,e,({component:b,hostProps:S})=>b.id,(b,S)=>{let G=()=>s(S).component,I=()=>s(S).hostProps;var W=Fe(),E=se(W);es(E,n,(z,o)=>{o(z,{get id(){return G().id},get hostProps(){return I()},children:(O,k)=>{var h=Fe(),m=se(h);es(m,()=>G().component,(M,A)=>{A(M,Xs(()=>G().props))}),u(O,h)},$$slots:{default:!0}})}),u(b,W)}),N(C),_l(C,b=>P(b)),u(i,C),$e()}var Si=Y('<div class="item svelte-u5rx4p"><!></div>');function Q(i,t){var f;ve(t,!1);const a=ke(),e=()=>ue(g,"$detach",a);let r=F(t,"id",8,void 0),n=F(t,"hostProps",8,void 0);Qs.available()||console.log("Item: should always have a slotHostContext");const{detach:g}=(f=n())!=null?f:Qs.get().getProps();me();var c=Si(),l=U(c);be(l,()=>!e(),y=>{var P=Fe(),d=se(P);st(d,t,"default",{}),u(y,P)}),N(c),L(()=>qe(c,"id",r())),u(i,c),$e()}var xi=Y(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function kt(i,t){ve(t,!1);let a=F(t,"title",8);me(),Z();var e=xi(),r=se(e),n=$(r);L(()=>qe(n,"title",Zt()));var g=U(n);xt(g,{icon:xl}),N(n),L(()=>{var c;return B(r,`${(c=a())!=null?c:""} `)}),u(i,e),$e()}var Oi=Y('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),Ai=Y('<div class="m-2"><!></div>');function Di(i,t){let a=F(t,"value",12),e=F(t,"title",8);var r=Ai(),n=U(r);it(n,{children:(g,c)=>{var l=Oi(),f=U(l),y=U(f);kt(y,{get title(){return e()}}),N(f);var P=$(f,2),d=U(P);tr(d),N(P),N(l),Dt(d,a),u(g,l)},$$slots:{default:!0,revert:(g,c)=>{Pt(g,{slot:"revert",get value(){return a()},set value(l){a(l)},defaultValue:"",$$legacy:!0})}}}),N(r),u(i,r)}var Ri=Y('<div class="spinner decrement svelte-1dakg3f" tabindex="-1" role="button"><!></div> <div class="spinner increment svelte-1dakg3f" tabindex="-1" role="button"><!></div>',1),Ti=Y('<div class="spin-box svelte-1dakg3f"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-1dakg3f"> <!></div>');function hr(i,t){ve(t,!1);let a=F(t,"value",12),e=F(t,"step",8,1),r=F(t,"min",8,1),n=F(t,"max",8,9999),g=V(),c=V(!1);function l(E){Number.isNaN(E)||a(Math.min(n(),Math.max(r(),E))),Ot().then(()=>we(g,s(g).value=s(y)))}function f(E){return Math.floor(E)===E?0:E.toString().split(".")[1].length||0}let y=V();function P(){l(parseFloat(this.value))}function d(E){s(c)&&(l(a()+(E.deltaY<0?e():-e())),E.preventDefault())}function T(E){l(a()+E),s(p)&&setTimeout(()=>T(E),b)}const C=[1500,1250,1e3,750,500,250];async function x(E){w(p,!0),b=128,w(S,setTimeout(E,250));for(const z of C)b=await new Promise(o=>setTimeout(()=>o(s(p)?b/2:128),z))}let p=V(!1),b,S=V();ce(()=>(Qe(a()),Qe(e())),()=>{w(y,a().toFixed(f(e())))}),Ee(),me();var G=Ti(),I=U(G);_t(I,E=>w(g,E),()=>s(g)),et(I);var W=$(I,2);be(W,Ol,E=>{var z=Ri(),o=se(z);L(()=>qe(o,"title",va()));var O=U(o);js(O,{children:(m,M)=>{xt(m,{icon:$r})},$$slots:{default:!0}}),N(o);var k=$(o,2);L(()=>qe(k,"title",$a()));var h=U(k);js(h,{children:(m,M)=>{xt(m,{icon:Al})},$$slots:{default:!0}}),N(k),L(()=>{$t(o,"active",a()>r()),$t(k,"active",a()<n())}),Ce("click",o,()=>{s(g).focus(),a()>r()&&T(-e())}),Ce("mousedown",o,()=>x(()=>{a()>r()&&T(-e())})),Ce("mouseup",o,()=>{clearTimeout(s(S)),w(p,!1)}),Ce("click",k,()=>{s(g).focus(),a()<n()&&T(e())}),Ce("mousedown",k,()=>x(()=>{a()<n()&&T(e())})),Ce("mouseup",k,()=>{clearTimeout(s(S)),w(p,!1)}),u(E,z)}),N(G),L(()=>{qe(I,"min",r()),qe(I,"max",n()),qe(I,"step",e()),as(I,s(y))}),Ce("blur",I,P),Ce("focusin",I,()=>w(c,!0)),Ce("focusout",I,()=>w(c,!1)),Ce("wheel",G,d),u(i,G),$e()}var Ii=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Li=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Xe(i,t){let a=F(t,"value",12),e=F(t,"defaultValue",8),r=F(t,"min",8,0),n=F(t,"max",8,9999),g=F(t,"step",8,.01);var c=Li(),l=se(c);Ae(l,()=>({"--cols":13})),_e(l.lastChild,{children:(f,y)=>{var P=Ii(),d=se(P);Ae(d,()=>({"--col-size":7})),at(d.lastChild,{breakpoint:"xs",children:(C,x)=>{var p=Fe(),b=se(p);st(b,t,"default",{}),u(C,p)},$$slots:{default:!0}}),N(d);var T=$(d,2);Ae(T,()=>({"--col-size":6})),at(T.lastChild,{breakpoint:"xs",children:(C,x)=>{it(C,{children:(p,b)=>{hr(p,{get value(){return a()},set value(S){a(S)},get min(){return r()},get max(){return n()},get step(){return g()},$$legacy:!0})},$$slots:{default:!0,revert:(p,b)=>{Pt(p,{slot:"revert",get value(){return a()},set value(S){a(S)},get defaultValue(){return e()},$$legacy:!0})}}})},$$slots:{default:!0}}),N(T),u(f,P)},$$slots:{default:!0}}),N(l),u(i,c)}var Ei=Y("<!> <!>",1),Ni=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Mi=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Le(i,t){let a=F(t,"value",12),e=F(t,"defaultValue",8),r=F(t,"min",8,0),n=F(t,"max",8,9999);var g=Mi(),c=se(g);Ae(c,()=>({"--cols":13})),_e(c.lastChild,{children:(l,f)=>{var y=Ni(),P=se(y);Ae(P,()=>({"--col-size":7})),at(P.lastChild,{breakpoint:"xs",children:(T,C)=>{var x=Fe(),p=se(x);st(p,t,"default",{}),u(T,x)},$$slots:{default:!0}}),N(P);var d=$(P,2);Ae(d,()=>({"--col-size":6})),at(d.lastChild,{breakpoint:"xs",children:(T,C)=>{_e(T,{class:"flex-grow-1",children:(x,p)=>{var b=Ei(),S=se(b);st(S,t,"tabs",{});var G=$(S,2);it(G,{children:(I,W)=>{hr(I,{get value(){return a()},set value(E){a(E)},get min(){return r()},get max(){return n()},$$legacy:!0})},$$slots:{default:!0,revert:(I,W)=>{Pt(I,{slot:"revert",get value(){return a()},set value(E){a(E)},get defaultValue(){return e()},$$legacy:!0})}}}),u(x,b)},$$slots:{default:!0}})},$$slots:{default:!0}}),N(d),u(l,y)},$$slots:{default:!0}}),N(c),u(i,g)}var Vi=Y('<input type="date" class="svelte-ora9c4">'),Fi=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),ji=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Hi=Y("<div><!></div>");function Bi(i,t){ve(t,!1);let a=F(t,"date",12);ce(()=>Qe(a()),()=>{a(a()?a():"1970-01-01")}),Ee();var e=Hi(),r=U(e);it(r,{children:(n,g)=>{var c=ji(),l=se(c);Ae(l,()=>({"--cols":13})),_e(l.lastChild,{children:(f,y)=>{var P=Fi(),d=se(P);Ae(d,()=>({"--col-size":7})),at(d.lastChild,{breakpoint:"xs",children:(C,x)=>{var p=Fe(),b=se(p);st(b,t,"default",{}),u(C,p)},$$slots:{default:!0}}),N(d);var T=$(d,2);Ae(T,()=>({"--col-size":6})),at(T.lastChild,{breakpoint:"xs",children:(C,x)=>{var p=Vi();et(p),Dt(p,a),u(C,p)},$$slots:{default:!0}}),N(T),u(f,P)},$$slots:{default:!0}}),N(l),u(n,c)},$$slots:{default:!0}}),N(e),u(i,e),$e()}var zi=Y("<!> <!> <!> <!> <!>",1),Gi=Y("<!> <!>",1),Wi=Y("<!> <!> <!>",1);function qi(i,t){ve(t,!1);const a=ke(),e=()=>ue(P,"$fsrs",a),r=()=>ue(l,"$config",a),n=()=>ue(y,"$cardStateCustomizer",a);let g=F(t,"state",8),c=F(t,"api",8);const l=g().currentConfig,f=g().defaults,y=g().cardStateCustomizer,P=g().fsrs,d={maximumInterval:{title:sr(),help:pa(),url:ge.DeckOptions.maximumInterval},historicalRetention:{title:Ss(),help:ma(),sched:Ie.FSRS},ignoreRevlogsBeforeMs:{title:xs(),help:ha(),sched:Ie.FSRS},startingEase:{title:ya(),help:Ca(),url:ge.DeckOptions.startingEase,sched:Ie.SM2},easyBonus:{title:wa(),help:_a(),url:ge.DeckOptions.easyBonus,sched:Ie.SM2},intervalModifier:{title:ka(),help:Pa(),url:ge.DeckOptions.intervalModifier,sched:Ie.SM2},hardInterval:{title:ba(),help:Sa(),url:ge.DeckOptions.hardInterval,sched:Ie.SM2},newInterval:{title:xa(),help:Oa(),url:ge.DeckOptions.newInterval,sched:Ie.SM2},customScheduling:{title:Aa(),help:Da(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling"}},T=Object.values(d);let C=V(),x=V();function p(S){s(C).show(),s(x).to(S)}me();var b=oe(()=>Os());Be(i,{get title(){return s(b)},children:(S,G)=>{We(S,{slotHost:Q,get api(){return c()},children:(I,W)=>{var E=Wi(),z=se(E);Q(z,{children:(k,h)=>{Le(k,{get value(){return r().maximumReviewInterval},set value(m){J(l,_(r).maximumReviewInterval=m,_(r))},get defaultValue(){return f.maximumReviewInterval},min:1,max:365*100,children:(m,M)=>{te(m,{$$events:{click:()=>p(Object.keys(d).indexOf("maximumInterval"))},children:(A,D)=>{Z();var R=K();L(()=>B(R,d.maximumInterval.title)),u(A,R)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var o=$(z,2);be(o,()=>!e(),k=>{var h=zi(),m=se(h);Q(m,{children:(X,re)=>{Xe(X,{get value(){return r().initialEase},set value(H){J(l,_(r).initialEase=H,_(r))},get defaultValue(){return f.initialEase},min:1.31,max:5,children:(H,j)=>{te(H,{$$events:{click:()=>p(Object.keys(d).indexOf("startingEase"))},children:(pe,he)=>{Z();var fe=K();L(()=>B(fe,d.startingEase.title)),u(pe,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var M=$(m,2);Q(M,{children:(X,re)=>{Xe(X,{get value(){return r().easyMultiplier},set value(H){J(l,_(r).easyMultiplier=H,_(r))},get defaultValue(){return f.easyMultiplier},min:1,max:5,children:(H,j)=>{te(H,{$$events:{click:()=>p(Object.keys(d).indexOf("easyBonus"))},children:(pe,he)=>{Z();var fe=K();L(()=>B(fe,d.easyBonus.title)),u(pe,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var A=$(M,2);Q(A,{children:(X,re)=>{Xe(X,{get value(){return r().intervalMultiplier},set value(H){J(l,_(r).intervalMultiplier=H,_(r))},get defaultValue(){return f.intervalMultiplier},min:.5,max:2,children:(H,j)=>{te(H,{$$events:{click:()=>p(Object.keys(d).indexOf("intervalModifier"))},children:(pe,he)=>{Z();var fe=K();L(()=>B(fe,d.intervalModifier.title)),u(pe,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var D=$(A,2);Q(D,{children:(X,re)=>{Xe(X,{get value(){return r().hardMultiplier},set value(H){J(l,_(r).hardMultiplier=H,_(r))},get defaultValue(){return f.hardMultiplier},min:.5,max:1.3,children:(H,j)=>{te(H,{$$events:{click:()=>p(Object.keys(d).indexOf("hardInterval"))},children:(pe,he)=>{Z();var fe=K();L(()=>B(fe,d.hardInterval.title)),u(pe,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var R=$(D,2);Q(R,{children:(X,re)=>{Xe(X,{get value(){return r().lapseMultiplier},set value(H){J(l,_(r).lapseMultiplier=H,_(r))},get defaultValue(){return f.lapseMultiplier},max:1,children:(H,j)=>{te(H,{$$events:{click:()=>p(Object.keys(d).indexOf("newInterval"))},children:(pe,he)=>{Z();var fe=K();L(()=>B(fe,d.newInterval.title)),u(pe,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),u(k,h)},k=>{var h=Gi(),m=se(h);Xe(m,{get value(){return r().historicalRetention},set value(A){J(l,_(r).historicalRetention=A,_(r))},get defaultValue(){return f.historicalRetention},min:.5,max:1,children:(A,D)=>{te(A,{$$events:{click:()=>p(Object.keys(d).indexOf("historicalRetention"))},children:(R,X)=>{Z();var re=K();L(()=>B(re,Ss())),u(R,re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var M=$(m,2);Q(M,{children:(A,D)=>{Bi(A,{get date(){return r().ignoreRevlogsBeforeDate},set date(R){J(l,_(r).ignoreRevlogsBeforeDate=R,_(r))},children:(R,X)=>{te(R,{$$events:{click:()=>p(Object.keys(d).indexOf("ignoreRevlogsBeforeMs"))},children:(re,H)=>{Z();var j=K();L(()=>B(j,xs())),u(re,j)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),u(k,h)});var O=$(o,2);Q(O,{children:(k,h)=>{Di(k,{get title(){return d.customScheduling.title},get value(){return n()},set value(m){rt(y,m)},$$events:{click:()=>p(Object.keys(d).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0}}),u(I,E)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(S,G)=>{var I=oe(()=>Os());Ue(S,{get title(){return s(I)},get url(){return ge.DeckOptions.advanced},slot:"tooltip",get fsrs(){return e()},helpSections:T,$$events:{mount:W=>{w(C,W.detail.modal),w(x,W.detail.carousel)}}})}}}),$e()}var Qi=Y("<!> <!>",1);function Ui(i,t){ve(t,!1);const a=ke(),e=()=>ue(g,"$config",a);let r=F(t,"state",8),n=F(t,"api",8);const g=r().currentConfig,c=r().defaults,l={disableAutoplay:{title:Ra(),help:Ta()},skipQuestionWhenReplaying:{title:Ia(),help:La()}},f=Object.values(l);let y=V(),P=V();function d(C){s(y).show(),s(P).to(C)}me();var T=oe(()=>As());Be(i,{get title(){return s(T)},children:(C,x)=>{We(C,{slotHost:Q,get api(){return n()},children:(p,b)=>{var S=Qi(),G=se(S);Q(G,{children:(W,E)=>{He(W,{get value(){return e().disableAutoplay},set value(z){J(g,_(e).disableAutoplay=z,_(e))},get defaultValue(){return c.disableAutoplay},children:(z,o)=>{te(z,{$$events:{click:()=>d(Object.keys(l).indexOf("disableAutoplay"))},children:(O,k)=>{Z();var h=K();L(()=>B(h,l.disableAutoplay.title)),u(O,h)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var I=$(G,2);Q(I,{children:(W,E)=>{He(W,{get value(){return e().skipQuestionWhenReplayingAnswer},set value(z){J(g,_(e).skipQuestionWhenReplayingAnswer=z,_(e))},get defaultValue(){return c.skipQuestionWhenReplayingAnswer},children:(z,o)=>{te(z,{$$events:{click:()=>d(Object.keys(l).indexOf("skipQuestionWhenReplaying"))},children:(O,k)=>{Z();var h=K();L(()=>B(h,l.skipQuestionWhenReplaying.title)),u(O,h)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),u(p,S)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(C,x)=>{var p=oe(()=>As());Ue(C,{get title(){return s(p)},get url(){return ge.DeckOptions.audio},slot:"tooltip",helpSections:f,$$events:{mount:b=>{w(y,b.detail.modal),w(P,b.detail.carousel)}}})}}}),$e()}function Ki(){return[{label:Ea(),value:Je.DECK},{label:Na(),value:Je.DECK_THEN_RANDOM_NOTES},{label:Ma(),value:Je.LOWEST_POSITION},{label:Va(),value:Je.HIGHEST_POSITION},{label:Fa(),value:Je.RANDOM_NOTES},{label:ja(),value:Je.RANDOM_CARDS}]}function Yi(){return[{label:Ha(),value:ze.TEMPLATE},{label:Ba(),value:ze.NO_SORT},{label:za(),value:ze.TEMPLATE_THEN_RANDOM},{label:Ga(),value:ze.RANDOM_NOTE_THEN_TEMPLATE},{label:rr(),value:ze.RANDOM_CARD}]}function Ji(i){return[{label:Wa(),value:je.DAY},{label:qa(),value:je.DAY_THEN_DECK},{label:Qa(),value:je.DECK_THEN_DAY},{label:Ua(),value:je.INTERVALS_ASCENDING},{label:Ka(),value:je.INTERVALS_DESCENDING},...sc(i),{label:Ya(),value:je.RETRIEVABILITY_ASCENDING},{label:Ja(),value:je.RETRIEVABILITY_DESCENDING},{label:rr(),value:je.RANDOM},{label:Xa(),value:je.ADDED},{label:Za(),value:je.REVERSE_ADDED}]}function Us(){return[{label:en(),value:jt.MIX_WITH_REVIEWS},{label:tn(),value:jt.AFTER_REVIEWS},{label:sn(),value:jt.BEFORE_REVIEWS}]}function Xi(){return[{label:rn(),value:Ps.SUSPEND},{label:an(),value:Ps.TAG_ONLY}]}function Zi(){return[{label:nn(),value:Xt.DUE},{label:on(),value:Xt.RANDOM}]}function ec(){return[{label:ln(),value:yt.BURY_CARD},{label:cn(),value:yt.ANSWER_AGAIN},{label:dn(),value:yt.ANSWER_GOOD},{label:un(),value:yt.ANSWER_HARD},{label:fn(),value:yt.SHOW_REMINDER}]}function tc(){return[{label:gn(),value:bs.SHOW_ANSWER},{label:vn(),value:bs.SHOW_REMINDER}]}function sc(i){const t=[{label:i?$n():pn(),value:je.EASE_ASCENDING},{label:i?mn():hn(),value:je.EASE_DESCENDING}];return i&&t.reverse(),t}var rc=Y("<!> <!> <!> <!> <!>",1);function ac(i,t){ve(t,!1);const a=ke(),e=()=>ue(g,"$config",a);let r=F(t,"state",8),n=F(t,"api",8);const g=r().currentConfig,c=r().defaults,l={secondsToShowQuestion:{title:yn(),help:Cn()},secondsToShowAnswer:{title:wn(),help:_n()},waitForAudio:{title:kn(),help:Pn()},questionAction:{title:bn(),help:Sn()},answerAction:{title:xn(),help:On()}},f=Object.values(l);let y=V(),P=V();function d(C){s(y).show(),s(P).to(C)}me();var T=oe(()=>Ds());Be(i,{get title(){return s(T)},children:(C,x)=>{We(C,{slotHost:Q,get api(){return n()},children:(p,b)=>{var S=rc(),G=se(S);Q(G,{children:(o,O)=>{Xe(o,{get value(){return e().secondsToShowQuestion},set value(k){J(g,_(e).secondsToShowQuestion=k,_(e))},get defaultValue(){return c.secondsToShowQuestion},step:.1,children:(k,h)=>{te(k,{$$events:{click:()=>d(Object.keys(l).indexOf("secondsToShowQuestion"))},children:(m,M)=>{Z();var A=K();L(()=>B(A,l.secondsToShowQuestion.title)),u(m,A)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var I=$(G,2);Q(I,{children:(o,O)=>{Xe(o,{get value(){return e().secondsToShowAnswer},set value(k){J(g,_(e).secondsToShowAnswer=k,_(e))},get defaultValue(){return c.secondsToShowAnswer},step:.1,children:(k,h)=>{te(k,{$$events:{click:()=>d(Object.keys(l).indexOf("secondsToShowAnswer"))},children:(m,M)=>{Z();var A=K();L(()=>B(A,l.secondsToShowAnswer.title)),u(m,A)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=$(I,2);Q(W,{children:(o,O)=>{He(o,{get value(){return e().waitForAudio},set value(k){J(g,_(e).waitForAudio=k,_(e))},get defaultValue(){return c.waitForAudio},children:(k,h)=>{te(k,{$$events:{click:()=>d(Object.keys(l).indexOf("waitForAudio"))},children:(m,M)=>{Z();var A=K();L(()=>B(A,l.waitForAudio.title)),u(m,A)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=$(W,2);Q(E,{children:(o,O)=>{var k=oe(tc);Ze(o,{get value(){return e().questionAction},set value(h){J(g,_(e).questionAction=h,_(e))},get defaultValue(){return c.questionAction},get choices(){return s(k)},children:(h,m)=>{te(h,{$$events:{click:()=>d(Object.keys(l).indexOf("questionAction"))},children:(M,A)=>{Z();var D=K();L(()=>B(D,l.questionAction.title)),u(M,D)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var z=$(E,2);Q(z,{children:(o,O)=>{var k=oe(ec);Ze(o,{get value(){return e().answerAction},set value(h){J(g,_(e).answerAction=h,_(e))},get defaultValue(){return c.answerAction},get choices(){return s(k)},children:(h,m)=>{te(h,{$$events:{click:()=>d(Object.keys(l).indexOf("answerAction"))},children:(M,A)=>{Z();var D=K();L(()=>B(D,l.answerAction.title)),u(M,D)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),u(p,S)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(C,x)=>{var p=oe(()=>Ds());Ue(C,{get title(){return s(p)},get url(){return ge.DeckOptions.autoAdvance},slot:"tooltip",helpSections:f,$$events:{mount:b=>{w(y,b.detail.modal),w(P,b.detail.carousel)}}})}}}),$e()}var nc=Y("<!> <!> <!>",1);function oc(i,t){ve(t,!1);const a=ke(),e=()=>ue(g,"$config",a);let r=F(t,"state",8),n=F(t,"api",8);const g=r().currentConfig,c=r().defaults,l=`

`+An(),f={buryNewSiblings:{title:Dn(),help:Rn()+l},buryReviewSiblings:{title:Tn(),help:In()+l},buryInterdayLearningSiblings:{title:Ln(),help:En()+l}},y=Object.values(f);let P=V(),d=V();function T(x){s(P).show(),s(d).to(x)}me();var C=oe(()=>Rs());Be(i,{get title(){return s(C)},children:(x,p)=>{We(x,{slotHost:Q,get api(){return n()},children:(b,S)=>{var G=nc(),I=se(G);Q(I,{children:(z,o)=>{He(z,{get value(){return e().buryNew},set value(O){J(g,_(e).buryNew=O,_(e))},get defaultValue(){return c.buryNew},children:(O,k)=>{te(O,{$$events:{click:()=>T(Object.keys(f).indexOf("buryNewSiblings"))},children:(h,m)=>{Z();var M=K();L(()=>B(M,f.buryNewSiblings.title)),u(h,M)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=$(I,2);Q(W,{children:(z,o)=>{He(z,{get value(){return e().buryReviews},set value(O){J(g,_(e).buryReviews=O,_(e))},get defaultValue(){return c.buryReviews},children:(O,k)=>{te(O,{$$events:{click:()=>T(Object.keys(f).indexOf("buryReviewSiblings"))},children:(h,m)=>{Z();var M=K();L(()=>B(M,f.buryReviewSiblings.title)),u(h,M)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=$(W,2);Q(E,{children:(z,o)=>{He(z,{get value(){return e().buryInterdayLearning},set value(O){J(g,_(e).buryInterdayLearning=O,_(e))},get defaultValue(){return c.buryInterdayLearning},children:(O,k)=>{te(O,{$$events:{click:()=>T(Object.keys(f).indexOf("buryInterdayLearningSiblings"))},children:(h,m)=>{Z();var M=K();L(()=>B(M,f.buryInterdayLearningSiblings.title)),u(h,M)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),u(b,G)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(x,p)=>{var b=oe(()=>Rs());Ue(x,{get title(){return s(b)},get url(){return ge.Studying.siblingsAndBurying},slot:"tooltip",helpSections:y,$$events:{mount:S=>{w(P,S.detail.modal),w(d,S.detail.carousel)}}})}}}),$e()}function lc(){}var ic=Y('<hr class="dropdown-divider">');function cc(i){var t=ic();u(i,t)}var dc=Y('<div class="save svelte-ymxw35"> </div>'),uc=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),fc=Y("<!> <!> <!> <!> <!> <!> <!>",1),gc=Y('<div class="d-flex"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>');function vc(i,t){ve(t,!1);const a=window.getComputedStyle(document.body).direction=="rtl",e=Zs();let r=F(t,"state",8);async function n(){if(await Ot(),r().defaultConfigSelected()){alert(Nn());return}const C=(r().removalWilLForceFullSync()?Mn()+" ":"")+Vn({name:r().getCurrentName()});if(confirm(Kr(C)))try{r().removeCurrentConfig(),e("remove")}catch(x){alert(x)}}async function g(C){if(await mr(),C===Ct.COMPUTE_ALL_PARAMS&&!Pe(r().fsrs)){alert(Fn());return}r().save(C)}const c="Control+Enter";let l=V(!1);me();var f=gc(),y=U(f),P=oe(()=>Rl(c));Ae(y,()=>({"--border-left-radius":a?"0":"var(--border-radius)","--border-right-radius":a?"var(--border-radius)":"0"})),Il(y.lastChild,{primary:!0,get tooltip(){return s(P)},$$events:{click:()=>g(Ct.NORMAL)},children:(C,x)=>{var p=dc(),b=U(p);L(()=>B(b,jn())),N(p),u(C,p)},$$slots:{default:!0}}),N(y);var d=$(y,2);Dl(d,{keyCombination:c,$$events:{action:()=>g(Ct.NORMAL)}});var T=$(d,2);kl(T,{get show(){return s(l)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>w(l,!1)},$$slots:{reference:(C,x)=>{var p=uc(),b=se(p);Ae(b,()=>({"--border-right-radius":a?"0":"var(--border-radius)","--border-left-radius":a?"var(--border-radius)":"0"})),ga(b.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>w(l,!s(l))},children:(S,G)=>{xt(S,{icon:$r})},$$slots:{default:!0}}),N(b),u(C,p)},floating:(C,x)=>{Pl(C,{slot:"floating",children:(p,b)=>{var S=fc(),G=se(S);gt(G,{$$events:{click:()=>e("add")},children:(k,h)=>{Z();var m=K();L(()=>B(m,ar())),u(k,m)},$$slots:{default:!0}});var I=$(G,2);gt(I,{$$events:{click:()=>e("clone")},children:(k,h)=>{Z();var m=K();L(()=>B(m,nr())),u(k,m)},$$slots:{default:!0}});var W=$(I,2);gt(W,{$$events:{click:()=>e("rename")},children:(k,h)=>{Z();var m=K();L(()=>B(m,or())),u(k,m)},$$slots:{default:!0}});var E=$(W,2);gt(E,{$$events:{click:n},children:(k,h)=>{Z();var m=K();L(()=>B(m,Hn())),u(k,m)},$$slots:{default:!0}});var z=$(E,2);cc(z);var o=$(z,2);gt(o,{$$events:{click:()=>g(Ct.APPLY_TO_CHILDREN)},children:(k,h)=>{Z();var m=K();L(()=>B(m,Bn())),u(k,m)},$$slots:{default:!0}});var O=$(o,2);gt(O,{$$events:{click:()=>g(Ct.COMPUTE_ALL_PARAMS)},children:(k,h)=>{Z();var m=K();L(()=>B(m,zn())),u(k,m)},$$slots:{default:!0}}),u(p,S)},$$slots:{default:!0}})}}}),N(f),u(i,f),$e()}var $c=Y('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content svelte-18qg9px"><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" class="btn-close svelte-18qg9px" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text" class="form-control svelte-18qg9px"></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function pc(i,t){ve(t,!1);const a=ke(),e=()=>ue(Cl,"$pageTheme",a),r=V();let n=F(t,"title",8),g=F(t,"prompt",8),c=F(t,"initialValue",8,""),l=F(t,"onOk",8);const f=Math.random().toString(36).substring(2),y=ss(pr);let P=V(),d,T=V();function C(){l()(s(T).value),d.hide(),w(r,c())}function x(){d.hide(),w(r,c())}function p(){s(T).focus(),S(!0)}function b(){S(!1)}const{set:S,remove:G}=bl(x);rs(()=>{s(P).addEventListener("shown.bs.modal",p),s(P).addEventListener("hidden.bs.modal",b),d=new wl(s(P),{keyboard:!1}),y.set(f,d)}),ua(()=>{G(),s(P).removeEventListener("shown.bs.modal",p),s(P).removeEventListener("hidden.bs.modal",b)}),ce(()=>Qe(c()),()=>{w(r,c())}),Ee(),me();var I=$c();_t(I,j=>w(P,j),()=>s(P));var W=U(I),E=U(W),z=U(E),o=U(z),O=U(o);N(o);var k=$(o,2);N(z);var h=$(z,2),m=U(h),M=U(m),A=U(M),D=U(A);N(A);var R=$(A,2);_t(R,j=>w(T,j),()=>s(T)),et(R),N(M),N(m),N(h);var X=$(h,2),re=U(X),H=$(re,2);return N(X),N(E),N(W),N(I),L(()=>{var j;$t(E,"default-colors",e().isDark),B(O,n()),$t(k,"invert",e().isDark),B(D,`${(j=g())!=null?j:""}:`),$t(R,"nightMode",e().isDark)}),Dt(R,()=>s(r),j=>w(r,j)),Ce("submit",m,Tl(C)),Ce("click",re,x),Ce("click",H,C),u(i,I),Te(t,"modalKey",f),$e({modalKey:f})}var mc=Y('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),hc=Y('<!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function yc(i,t){ve(t,!1);const a=ke(),e=()=>ue(c,"$configList",a),r=V(),n=V();let g=F(t,"state",8);const c=g().configList,l=Zs(),f=()=>l("presetchange");function y(h){const m=Gn({decks:h.useCount});return`${h.name} (${m})`}function P(h){g().setCurrentIndex(h.detail.value),f()}function d(h){const m=h.trim();m.length&&(g().addConfig(m),f())}function T(h){const m=h.trim();m.length&&(g().cloneConfig(m),f())}function C(h){g().setCurrentName(h)}const x=ss(pr);let p=V(),b=V(""),S=V(""),G=V(lc);function I(){w(S,ar()),w(G,d),w(b,""),x.get(s(p)).show()}function W(){w(S,nr()),w(G,T),w(b,g().getCurrentName()),x.get(s(p)).show()}function E(){w(S,or()),w(G,C),w(b,g().getCurrentName()),x.get(s(p)).show()}ce(()=>e(),()=>{w(r,e().findIndex(h=>h.current))}),ce(()=>(e(),s(r)),()=>{w(n,y(e()[s(r)]))}),Ee(),me();var z=hc(),o=se(z),O=oe(()=>Wn());pc(o,{get title(){return s(S)},get prompt(){return s(O)},get initialValue(){return s(b)},get onOk(){return s(G)},get modalKey(){return s(p)},set modalKey(h){w(p,h)},$$legacy:!0});var k=$(o,2);Ae(k,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),Ll(k.lastChild,{breakpoint:"sm",children:(h,m)=>{var M=mc(),A=U(M);ia(A,{class:"flex-grow-1 mr1",get value(){return s(r)},set value(R){w(r,R)},get label(){return s(n)},get list(){return e()},parser:R=>({content:y(R),value:R.idx}),$$events:{change:P},$$legacy:!0});var D=$(A,2);vc(D,{get state(){return g()},$$events:{add:I,clone:W,rename:E,remove:f}}),N(M),u(h,M)},$$slots:{default:!0}}),N(k),u(i,z),$e()}var Cc=Y('<li class="svelte-1ibi4j8"><button class="svelte-1ibi4j8"> </button></li>'),wc=Y('<ul class="svelte-1ibi4j8"></ul>');function Ks(i,t){ve(t,!1);let a=F(t,"tabs",8),e=F(t,"value",12),r=V(n());function n(){const f=a().slice().reverse().findIndex(y=>y.value!==null);return f===-1?0:a().length-f-1}function g(f){for(const[y,P]of a().entries())f===y?P.enable(e()):f>y?P.reset():P.disable()}const c=f=>()=>w(r,f);ce(()=>s(r),()=>{g(s(r))}),ce(()=>(Qe(a()),s(r)),()=>{var f;e((f=a()[s(r)].value)!=null?f:0)}),ce(()=>(Qe(a()),s(r),Qe(e())),()=>{a()[s(r)].setValue(e())}),Ee(),me();var l=wc();At(l,5,a,ns,(f,y,P)=>{var d=Cc(),T=U(d),C=aa(()=>c(P)),x=U(T);N(T),N(d),L(()=>{$t(d,"active",s(r)===P),B(x,s(y).title)}),Ce("click",T,function(...p){var b;(b=s(C))==null||b.apply(this,p)}),u(f,d)}),N(l),u(i,l),$e()}var _c=Y("<div> </div>");function Ve(i,t){ve(t,!1);let a=F(t,"warning",8),e=F(t,"className",8,"alert-warning");me();var r=Fe(),n=se(r);be(n,a,g=>{_e(g,{children:(c,l)=>{var f=_c(),y=U(f);L(()=>B(y,Yr(a()))),N(f),L(()=>{var P;return vt(f,`col-12 alert ${(P=e())!=null?P:""} mb-0`)}),Hs(1,f,()=>Bs),Hs(2,f,()=>Bs),u(c,f)},$$slots:{default:!0}})}),u(i,r),$e()}var kc=Y("<!> <!> <!> <!> <!>",1);function Pc(i,t){var A,D,R,X,re,H;ve(t,!1);const a=ke(),e=()=>ue(P,"$config",a),r=()=>ue(d,"$limits",a),n=()=>ue(C,"$newCardsIgnoreReviewLimit",a),g=()=>ue(x,"$applyAllParentLimits",a),c=V();let l=F(t,"state",8),f=F(t,"api",8);function y(){we(I,s(I)[0]=new tt(bt(),e().newPerDay,j=>J(P,_(e).newPerDay=j,_(e)),e().newPerDay,null)),we(W,s(W)[0]=new tt(bt(),e().reviewsPerDay,j=>J(P,_(e).reviewsPerDay=j,_(e)),e().reviewsPerDay,null))}const P=l().currentConfig,d=l().deckLimits,T=l().defaults,C=l().newCardsIgnoreReviewLimit,x=l().applyAllParentLimits,p=`

`+qn()+`

`+Qn(),b=`

`+Un()+p,S=Zt()+`

`+Kn(),G=Zt()+`

`+Yn(),I=V([new tt(bt(),e().newPerDay,j=>J(P,_(e).newPerDay=j,_(e)),e().newPerDay,null),new tt(Ts(),(A=r().new)!=null?A:null,j=>J(d,_(r).new=j!=null?j:void 0,_(r)),null,null),new tt(Is(),r().newTodayActive&&(D=r().newToday)!=null?D:null,j=>J(d,_(r).newToday=j!=null?j:void 0,_(r)),null,(R=r().newToday)!=null?R:null)]),W=V([new tt(bt(),e().reviewsPerDay,j=>J(P,_(e).reviewsPerDay=j,_(e)),e().reviewsPerDay,null),new tt(Ts(),(X=r().review)!=null?X:null,j=>J(d,_(r).review=j!=null?j:void 0,_(r)),null,null),new tt(Is(),r().reviewTodayActive&&(re=r().reviewToday)!=null?re:null,j=>J(d,_(r).reviewToday=j!=null?j:void 0,_(r)),null,(H=r().reviewToday)!=null?H:null)]);let E=V(0),z=V(0);const o={newLimit:{title:lr(),help:Jn()+p,url:ge.DeckOptions.newCardsday},reviewLimit:{title:ir(),help:Xn()+b,url:ge.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:Zn(),help:S,url:ge.DeckOptions.newCardsday},applyAllParentLimits:{title:eo(),help:G,url:ge.DeckOptions.newCardsday}},O=Object.values(o);let k=V(),h=V();function m(j){s(k).show(),s(h).to(j)}ce(()=>(s(E),s(z),lt),()=>{w(c,Math.min(9999,s(E)*10)>s(z)?to({cards:s(E),expected:Math.min(9999,s(E)*10)}):"")}),Ee(),me();var M=oe(()=>Ls());return Be(i,{get title(){return s(M)},children:(j,pe)=>{We(j,{slotHost:Q,get api(){return f()},children:(he,fe)=>{var Se=kc(),ne=se(Se);Q(ne,{children:(Re,Ne)=>{Le(Re,{get value(){return s(E)},set value(ye){w(E,ye)},get defaultValue(){return T.newPerDay},children:(ye,nt)=>{te(ye,{$$events:{click:()=>m(Object.keys(o).indexOf("newLimit"))},children:(Me,pt)=>{Z();var Ye=K();L(()=>B(Ye,o.newLimit.title)),u(Me,Ye)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(ye,nt)=>{Ks(ye,{slot:"tabs",get tabs(){return s(I)},get value(){return s(E)},set value(Me){w(E,Me)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var le=$(ne,2);Q(le,{children:(Re,Ne)=>{Le(Re,{get value(){return s(z)},set value(ye){w(z,ye)},get defaultValue(){return T.reviewsPerDay},children:(ye,nt)=>{te(ye,{$$events:{click:()=>m(Object.keys(o).indexOf("reviewLimit"))},children:(Me,pt)=>{Z();var Ye=K();L(()=>B(Ye,o.reviewLimit.title)),u(Me,Ye)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(ye,nt)=>{Ks(ye,{slot:"tabs",get tabs(){return s(W)},get value(){return s(z)},set value(Me){w(z,Me)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var xe=$(le,2);Q(xe,{children:(Re,Ne)=>{Ve(Re,{get warning(){return s(c)}})},$$slots:{default:!0}});var De=$(xe,2);Q(De,{children:(Re,Ne)=>{He(Re,{get value(){return n()},set value(ye){rt(C,ye)},defaultValue:!1,children:(ye,nt)=>{te(ye,{$$events:{click:()=>m(Object.keys(o).indexOf("newCardsIgnoreReviewLimit"))},children:(Me,pt)=>{kt(Me,{get title(){return o.newCardsIgnoreReviewLimit.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Ke=$(De,2);Q(Ke,{children:(Re,Ne)=>{He(Re,{get value(){return g()},set value(ye){rt(x,ye)},defaultValue:!1,children:(ye,nt)=>{te(ye,{$$events:{click:()=>m(Object.keys(o).indexOf("applyAllParentLimits"))},children:(Me,pt)=>{kt(Me,{get title(){return o.applyAllParentLimits.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),u(he,Se)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(j,pe)=>{var he=oe(()=>Ls());Ue(j,{get title(){return s(he)},get url(){return ge.DeckOptions.dailyLimits},slot:"tooltip",helpSections:O,$$events:{mount:fe=>{w(k,fe.detail.modal),w(h,fe.detail.carousel)}}})}}}),Te(t,"onPresetChange",y),$e({onPresetChange:y})}var bc=Y("<!> <!> <!> <!> <!>",1);function Sc(i,t){ve(t,!1);const a=ke(),e=()=>ue(c,"$config",a),r=()=>ue(f,"$fsrs",a);let n=F(t,"state",8),g=F(t,"api",8);const c=n().currentConfig,l=n().defaults,f=n().fsrs,y=`

`+so();let P=V([]);const d={newGatherPriority:{title:ro(),help:ao()+y},newCardSortOrder:{title:no(),help:oo()+y},newReviewPriority:{title:lo(),help:io()+y},interdayStepPriority:{title:co(),help:uo()+y},reviewSortOrder:{title:fo(),help:go()+y}},T=Object.values(d);let C=V(),x=V();function p(S){s(C).show(),s(x).to(S)}ce(()=>(e(),s(P),Je),()=>{switch(e().newCardGatherPriority){case Je.RANDOM_NOTES:w(P,[ze.TEMPLATE_THEN_RANDOM,ze.RANDOM_NOTE_THEN_TEMPLATE]);break;case Je.RANDOM_CARDS:w(P,[ze.TEMPLATE_THEN_RANDOM,ze.RANDOM_NOTE_THEN_TEMPLATE,ze.RANDOM_CARD]);break;default:w(P,[]);break}s(P).includes(e().newCardSortOrder)&&J(c,_(e).newCardSortOrder=0,_(e)),e().newCardSortOrder in ze||J(c,_(e).newCardSortOrder=0,_(e))}),Ee(),me();var b=oe(()=>Es());Be(i,{get title(){return s(b)},children:(S,G)=>{We(S,{slotHost:Q,get api(){return g()},children:(I,W)=>{var E=bc(),z=se(E);Q(z,{children:(m,M)=>{var A=oe(Ki);Ze(m,{get value(){return e().newCardGatherPriority},set value(D){J(c,_(e).newCardGatherPriority=D,_(e))},get defaultValue(){return l.newCardGatherPriority},get choices(){return s(A)},children:(D,R)=>{te(D,{$$events:{click:()=>p(Object.keys(d).indexOf("newGatherPriority"))},children:(X,re)=>{Z();var H=K();L(()=>B(H,d.newGatherPriority.title)),u(X,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var o=$(z,2);Q(o,{children:(m,M)=>{var A=oe(Yi);Ze(m,{get value(){return e().newCardSortOrder},set value(D){J(c,_(e).newCardSortOrder=D,_(e))},get defaultValue(){return l.newCardSortOrder},get choices(){return s(A)},get disabledChoices(){return s(P)},children:(D,R)=>{te(D,{$$events:{click:()=>p(Object.keys(d).indexOf("newCardSortOrder"))},children:(X,re)=>{Z();var H=K();L(()=>B(H,d.newCardSortOrder.title)),u(X,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var O=$(o,2);Q(O,{children:(m,M)=>{var A=oe(Us);Ze(m,{get value(){return e().newMix},set value(D){J(c,_(e).newMix=D,_(e))},get defaultValue(){return l.newMix},get choices(){return s(A)},children:(D,R)=>{te(D,{$$events:{click:()=>p(Object.keys(d).indexOf("newReviewPriority"))},children:(X,re)=>{Z();var H=K();L(()=>B(H,d.newReviewPriority.title)),u(X,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var k=$(O,2);Q(k,{children:(m,M)=>{var A=oe(Us);Ze(m,{get value(){return e().interdayLearningMix},set value(D){J(c,_(e).interdayLearningMix=D,_(e))},get defaultValue(){return l.interdayLearningMix},get choices(){return s(A)},children:(D,R)=>{te(D,{$$events:{click:()=>p(Object.keys(d).indexOf("interdayStepPriority"))},children:(X,re)=>{Z();var H=K();L(()=>B(H,d.interdayStepPriority.title)),u(X,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var h=$(k,2);Q(h,{children:(m,M)=>{var A=oe(()=>Ji(r()));Ze(m,{get value(){return e().reviewOrder},set value(D){J(c,_(e).reviewOrder=D,_(e))},get defaultValue(){return l.reviewOrder},get choices(){return s(A)},children:(D,R)=>{te(D,{$$events:{click:()=>p(Object.keys(d).indexOf("reviewSortOrder"))},children:(X,re)=>{Z();var H=K();L(()=>B(H,d.reviewSortOrder.title)),u(X,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),u(I,E)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(S,G)=>{var I=oe(()=>Es());Ue(S,{get title(){return s(I)},get url(){return ge.DeckOptions.displayOrder},slot:"tooltip",helpSections:T,$$events:{mount:W=>{w(C,W.detail.modal),w(x,W.detail.carousel)}}})}}}),$e()}var xc=Y('<textarea class="w-100"></textarea>');function Oc(i,t){ve(t,!1);let a=F(t,"value",12),e=F(t,"defaults",8),r=V();function n(l){return l.map(f=>f.toFixed(4)).join(", ")}function g(){a(this.value.replace(/ /g,"").split(",").filter(l=>l).map(l=>Number(l)))}ce(()=>Qe(a()),()=>{w(r,n(a()))}),Ee(),me();var c=xc();tr(c),L(()=>qe(c,"placeholder",n(e()))),L(()=>as(c,s(r))),Ce("blur",c,g),u(i,c),$e()}var Ac=Y("<!> <!>",1);function Dc(i,t){let a=F(t,"value",12),e=F(t,"defaultValue",8),r=F(t,"defaults",8);var n=Ac(),g=se(n);st(g,t,"default",{});var c=$(g,2);it(c,{children:(l,f)=>{Oc(l,{get value(){return a()},set value(y){a(y)},get defaults(){return r()},$$legacy:!0})},$$slots:{default:!0,revert:(l,f)=>{Pt(l,{slot:"revert",get value(){return a()},set value(y){a(y)},get defaultValue(){return e()},$$legacy:!0})}}}),u(i,n)}var Rc=Y('<input type="text" class="w-100 mb-1">');function Tc(i,t){let a=F(t,"value",12),e=F(t,"placeholder",8);it(i,{children:(r,n)=>{var g=Rc();et(g),L(()=>qe(g,"placeholder",e())),Dt(g,a),u(r,g)},$$slots:{default:!0}})}function Jt(i,t,a,e){const r=zs(i);if(r.selectAll(".lines").remove(),r.selectAll(".hover-columns").remove(),r.selectAll(".focus-line").remove(),r.selectAll(".legend").remove(),a.length==0)return Gs(r,!1),[];const n=r.transition().duration(600),g=new Date,c=a.map(o=>({...o,date:new Date(g.getTime()+o.x*24*60*60*1e3)})),l=g,f=Ut(c,o=>o.date),y=Xl().domain([l,f]).range([t.marginLeft,t.width-t.marginRight]);r.select(".x-ticks").call(o=>o.transition(n).call(El(y).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const P=o=>e?Ws(o,!0):o.toString(),d=e?Ut(c,o=>o.timeCost):Ut(c,o=>o.count),T=Nl().range([t.height-t.marginBottom,t.marginTop]).domain([0,d]).nice();r.select(".y-ticks").call(o=>o.transition(n).call(Ml(T).ticks(t.height/50).tickSizeOuter(0).tickFormat(P))).attr("direction","ltr"),r.select(".y-ticks .y-axis-title").remove(),r.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-t.marginLeft).attr("x",0-t.height/2).attr("dy","1em").attr("fill","currentColor").style("text-anchor","middle").text(e?"Review Time per day":"Review Count per day");const C=c.map(o=>[y(o.date),T(e?o.timeCost:o.count),o.label]),x=ii(C,o=>Object.assign(o,{z:o[0][2]}),o=>o[2]),p=di;r.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(x.entries())).join("path").attr("stroke",(o,O)=>p[O%p.length]).attr("d",o=>Vl()(o[1].map(O=>[O[0],O[1]]))).attr("data-group",o=>o[0]);const b=r.append("line").attr("class","focus-line").attr("y1",t.marginTop).attr("y2",t.height-t.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),S=Array.from(x.values()).reduce((o,O)=>o.length>O.length?o:O),G=t.width/S.length;r.append("g").attr("class","hover-columns").selectAll("rect").data(S).join("rect").attr("x",o=>o[0]-G/2).attr("y",t.marginTop).attr("width",G).attr("height",t.height-t.marginTop-t.marginBottom).attr("fill","transparent").on("mousemove",I).on("mouseout",()=>{b.style("opacity",0),Fl()});function I(o,O){jl(o,document.body);const k=y.invert(O[0]),h={};x.forEach((A,D)=>{const R=Bl(H=>y.invert(H[0])).left,X=R(A,k),re=A[X-1]||A[X];re&&(h[D]=T.invert(re[1]))}),b.attr("x1",O[0]).attr("x2",O[0]).style("opacity",1);const m=+((k.getTime()-Date.now())/(60*60*24*1e3)).toFixed();let M=`Date: ${Jr(k)}<br>In ${m} Days<br>`;for(const[A,D]of Object.entries(h))M+=`#${A}: ${e?Ws(D):cr({reviews:Math.round(D)})}<br>`;Hl(M,o.pageX,o.pageY)}const W=r.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(x.keys())).join("g").attr("transform",(o,O)=>`translate(0,${O*20})`).attr("cursor","pointer").on("click",(o,O)=>E(o,O));W.append("rect").attr("x",t.width-t.marginRight+36).attr("width",12).attr("height",12).attr("fill",(o,O)=>p[O%p.length]),W.append("text").attr("x",t.width-t.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(o=>`#${o}`);const E=(o,O)=>{const k=O,h=r.select(`path[data-group="${k}"]`),m=h.classed("hidden"),M=o.currentTarget;h.classed("hidden",!m),h.style("display",()=>m?null:"none"),zs(M).select("rect").style("opacity",m?1:.5)};return Gs(r,!0),[]}var Ic=Y(" <!>",1),Lc=Y('<label><input type="checkbox"> </label>'),Ec=ca("<!><svg><!><!><!><!></svg><!>",1),Nc=Y('<!> <!> <div class="ms-1 me-1"><!> <!> <button><!></button> <button><!></button> <div><!></div> <!></div> <div class="m-2"><!> <!></div> <div class="m-2"><details><summary> </summary> <!> <button><!></button> <!> <div> </div></details></div> <div class="m-2"><details><summary>FSRS simulator (experimental)</summary> <!> <!> <!> <!> <!> <button></button> <button></button> <div> </div> <!></details></div>',1);function Mc(i,t){ve(t,!1);const a=ke(),e=()=>ue(z,"$daysSinceLastOptimization",a),r=()=>ue(G,"$presetName",a),n=()=>ue(I,"$config",a),g=()=>ue(E,"$fsrsReschedule",a),c=V(),l=V(),f=V(),y=V(),P=V(),d=V(),T=V(),C=V(),x=V(),p=V();let b=F(t,"state",8),S=F(t,"openHelpModal",8);const G=b().currentPresetName,I=b().currentConfig,W=b().defaults,E=b().fsrsReschedule,z=b().daysSinceLastOptimization;let o=V(),O=V(!1),k=V(!1),h=V(!1),m=V(0),M=V(),A=V(!1);const D=V(new Hr({daysToSimulate:365,lossAversion:2.5})),R=V(new Br({params:wt(n()),desiredRetention:n().desiredRetention,deckSize:0,daysToSimulate:365,newLimit:n().newPerDay,reviewLimit:n().reviewsPerDay,maxInterval:n().maximumReviewInterval,search:`preset:"${b().getCurrentNameForSearch()}" -is:suspended`}));function X(v){const ee=Math.round(100/.23456790123456783*(Math.pow(v,1/-.5)-1));return ee===100?"":_o({days:ee})}function re(v){return v<.7||v>.97?"alert-danger":v<.8||v>.95?"alert-warning":"alert-info"}function H(){return BigInt(n().ignoreRevlogsBeforeDate?new Date(n().ignoreRevlogsBeforeDate).getTime():0)}async function j(){if(s(O)){await Ht({});return}if(b().presetAssignmentsChanged()){alert(Gt());return}w(O,!0),w(o,void 0);try{await St(async()=>{const v=wt(n()),q=await zr({search:n().paramSearch?n().paramSearch:s(f),ignoreRevlogsBeforeMs:H(),currentParams:v});v.length&&v.every((ae,de)=>ae.toFixed(4)===q.params[de].toFixed(4))||q.params.length===0?setTimeout(()=>alert(po()),200):J(I,_(n).fsrsParams5=q.params,_(n)),s(o)&&we(o,s(o).current=s(o).total)},v=>{v.value.case==="computeParams"&&w(o,v.value.value)})}finally{w(O,!1)}}async function pe(){if(s(k)){await Ht({});return}if(b().presetAssignmentsChanged()){alert(Gt());return}w(k,!0),w(o,void 0);try{await St(async()=>{const v=n().paramSearch?n().paramSearch:s(f),q=await Gr({params:wt(n()),search:v,ignoreRevlogsBeforeMs:H()});s(o)&&we(o,s(o).current=s(o).total),setTimeout(()=>alert(`Log loss: ${q.logLoss.toFixed(4)}, RMSE(bins): ${(q.rmseBins*100).toFixed(2)}%. ${mo()}`),200)},v=>{v.value.case==="computeParams"&&w(o,v.value.value)})}finally{w(k,!1)}}async function he(){if(s(h)){await Ht({});return}if(b().presetAssignmentsChanged()){alert(Gt());return}w(h,!0),w(M,void 0);try{await St(async()=>{we(D,s(D).maxInterval=n().maximumReviewInterval),we(D,s(D).params=wt(n())),we(D,s(D).search=`preset:"${b().getCurrentNameForSearch()}" -is:suspended`);const v=await Wr(s(D));w(m,v.optimalRetention),w(M,void 0)},v=>{v.value.case==="computeRetention"&&w(M,v.value.value)})}finally{w(h,!1)}}function fe(v){if(!v||!v.total)return"";const q=(v.current/v.total*100).toFixed(1);return v instanceof Qr?`${q}%`:ko({pct:q,reviews:v.reviews})}function Se(v){return v?Po({count:v.current}):""}function ne(v){return v?bo({num:v.toFixed(2)}):""}let le=V([]);const xe=Ul();let De=V(null);const Ke=vo();let Re=0,Ne=V([]);function ye(v,q){const ae=[];for(let de=0;de<v.length;(de+=1)-1){let ee=0,ot=0;for(let ft=Math.max(0,de-q+1);ft<=de;(ft+=1)-1)ee+=v[ft],ot+=1;ae.push(ee/ot)}return ae}function nt(v,q){return v.map((ae,de)=>ae+q[de])}async function Me(){let v;Re+=1;try{await St(async()=>{we(R,s(R).params=wt(n())),we(R,s(R).desiredRetention=n().desiredRetention),we(R,s(R).search=`preset:"${b().getCurrentNameForSearch()}" -is:suspended`),w(p,"processing..."),v=await qr(s(R))},()=>{})}finally{if(w(p,""),v){const q=ye(v.dailyTimeCost,Math.ceil(s(R).daysToSimulate/50)),ae=ye(nt(v.dailyReviewCount,v.dailyNewCount),Math.ceil(s(R).daysToSimulate/50));w(Ne,s(Ne).concat(q.map((de,ee)=>({x:ee,timeCost:de,count:ae[ee],label:Re})))),w(le,Jt(s(De),xe,s(Ne),s(A)))}}}function pt(){w(Ne,s(Ne).filter(v=>v.label!==Re)),Re=Math.max(0,Re-1),w(le,Jt(s(De),xe,s(Ne),s(A)))}const Ye=$o();ce(()=>(e(),lt),()=>{w(c,e()>30?ho():"")}),ce(()=>r(),()=>{r()&&w(m,0)}),ce(()=>(s(O),s(k),s(h)),()=>{w(l,s(O)||s(k)||s(h))}),ce(()=>Qe(b()),()=>{w(f,`preset:"${b().getCurrentNameForSearch()}" -is:suspended`)}),ce(()=>n(),()=>{w(y,Number(n().desiredRetention.toFixed(2)))}),ce(()=>s(y),()=>{w(P,X(s(y)))}),ce(()=>s(y),()=>{w(d,re(s(y)))}),ce(()=>s(D),()=>{s(D).daysToSimulate>3650&&we(D,s(D).daysToSimulate=3650)}),ce(()=>s(o),()=>{w(T,fe(s(o)))}),ce(()=>s(M),()=>{w(C,Se(s(M)))}),ce(()=>s(o),()=>{var v,q;w(x,(q=(v=s(o))==null?void 0:v.reviews)!=null?q:void 0)}),ce(()=>{},()=>{w(p,"")}),ce(()=>(s(De),s(Ne),s(A)),()=>{w(le,Jt(s(De),xe,s(Ne),s(A)))}),Ee(),me();var os=Nc(),ls=se(os);Xe(ls,{get value(){return n().desiredRetention},set value(v){J(I,_(n).desiredRetention=v,_(n))},get defaultValue(){return W.desiredRetention},min:.7,max:.99,children:(v,q)=>{te(v,{$$events:{click:()=>S()("desiredRetention")},children:(ae,de)=>{Z();var ee=K();L(()=>B(ee,dr())),u(ae,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var is=$(ls,2);Ve(is,{get warning(){return s(P)},get className(){return s(d)}});var Rt=$(is,2),cs=U(Rt);Dc(cs,{get value(){return n().fsrsParams5},set value(v){J(I,_(n).fsrsParams5=v,_(n))},defaultValue:[],get defaults(){return W.fsrsParams5},children:(v,q)=>{te(v,{$$events:{click:()=>S()("modelParams")},children:(ae,de)=>{Z();var ee=K();L(()=>B(ee,ur())),u(ae,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ds=$(cs,2);Tc(ds,{get value(){return n().paramSearch},set value(v){J(I,_(n).paramSearch=v,_(n))},get placeholder(){return s(f)},$$legacy:!0});var ct=$(ds,2),Cr=U(ct);be(Cr,()=>s(O),v=>{var q=K();L(()=>B(q,Wt())),u(v,q)},v=>{var q=K();L(()=>B(q,yo())),u(v,q)}),N(ct);var dt=$(ct,2),wr=U(dt);be(wr,()=>s(k),v=>{var q=K();L(()=>B(q,Wt())),u(v,q)},v=>{var q=K();L(()=>B(q,Co())),u(v,q)}),N(dt);var Tt=$(dt,2),_r=U(Tt);be(_r,()=>s(O)||s(k),v=>{var q=K();L(()=>B(q,s(T))),u(v,q)},v=>{var q=Fe(),ae=se(q);be(ae,()=>s(x)!==void 0,de=>{var ee=K();L(()=>B(ee,cr({reviews:s(x)}))),u(de,ee)},null,!0),u(v,q)}),N(Tt);var kr=$(Tt,2);Ve(kr,{get warning(){return s(c)},className:"alert-warning"}),N(Rt);var It=$(Rt,2),us=U(It);He(us,{get value(){return g()},set value(v){rt(E,v)},defaultValue:!1,children:(v,q)=>{te(v,{$$events:{click:()=>S()("rescheduleCardsOnChange")},children:(ae,de)=>{var ee=oe(()=>gr());kt(ae,{get title(){return s(ee)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Pr=$(us,2);be(Pr,g,v=>{var q=oe(()=>So());Ve(v,{get warning(){return s(q)}})}),N(It);var Lt=$(It,2),fs=U(Lt),Et=U(fs),br=U(Et);L(()=>B(br,fr())),N(Et);var gs=$(Et,2);Le(gs,{get value(){return s(D).daysToSimulate},set value(v){we(D,s(D).daysToSimulate=v)},defaultValue:365,min:1,max:3650,children:(v,q)=>{te(v,{$$events:{click:()=>S()("computeOptimalRetention")},children:(ae,de)=>{Z();var ee=K();L(()=>B(ee,Ns())),u(ae,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ut=$(gs,2),Sr=U(ut);be(Sr,()=>s(h),v=>{var q=K();L(()=>B(q,Wt())),u(v,q)},v=>{var q=K();L(()=>B(q,wo())),u(v,q)}),N(ut);var vs=$(ut,2);be(vs,()=>s(m),v=>{var q=Ic(),ae=se(q);L(()=>{var ee;return B(ae,`${(ee=ne(s(m)))!=null?ee:""} `)});var de=$(ae);be(de,()=>s(m)-n().desiredRetention>=.01,ee=>{var ot=oe(()=>xo());Ve(ee,{get warning(){return s(ot)},className:"alert-warning"})}),u(v,q)});var $s=$(vs,2),xr=U($s);N($s),N(fs),N(Lt);var ps=$(Lt,2),ms=U(ps),hs=$(U(ms),2);Le(hs,{get value(){return s(R).daysToSimulate},set value(v){we(R,s(R).daysToSimulate=v)},defaultValue:365,min:1,max:3650,children:(v,q)=>{te(v,{$$events:{click:()=>S()("simulateFsrsReview")},children:(ae,de)=>{Z();var ee=K();L(()=>B(ee,Ns())),u(ae,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ys=$(hs,2);Le(ys,{get value(){return s(R).deckSize},set value(v){we(R,s(R).deckSize=v)},defaultValue:0,min:1,max:1e5,children:(v,q)=>{te(v,{$$events:{click:()=>S()("simulateFsrsReview")},children:(ae,de)=>{Z();var ee=K("Additional new cards to simulate");u(ae,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Cs=$(ys,2);Le(Cs,{get value(){return s(R).newLimit},set value(v){we(R,s(R).newLimit=v)},get defaultValue(){return W.newPerDay},min:0,max:9999,children:(v,q)=>{te(v,{$$events:{click:()=>S()("simulateFsrsReview")},children:(ae,de)=>{Z();var ee=K();L(()=>B(ee,lr())),u(ae,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ws=$(Cs,2);Le(ws,{get value(){return s(R).reviewLimit},set value(v){we(R,s(R).reviewLimit=v)},get defaultValue(){return W.reviewsPerDay},min:0,max:9999,children:(v,q)=>{te(v,{$$events:{click:()=>S()("simulateFsrsReview")},children:(ae,de)=>{Z();var ee=K();L(()=>B(ee,ir())),u(ae,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var _s=$(ws,2);Le(_s,{get value(){return s(R).maxInterval},set value(v){we(R,s(R).maxInterval=v)},get defaultValue(){return W.maximumReviewInterval},min:1,max:36500,children:(v,q)=>{te(v,{$$events:{click:()=>S()("simulateFsrsReview")},children:(ae,de)=>{Z();var ee=K();L(()=>B(ee,sr())),u(ae,ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var mt=$(_s,2);mt.textContent="Simulate";var ht=$(mt,2);ht.textContent="Clear last simulation";var Nt=$(ht,2),Or=U(Nt);N(Nt);var Ar=$(Nt,2);zl(Ar,{title:Ke,children:(v,q)=>{var ae=Ec(),de=se(ae);Gl(de,{children:(Mt,gd)=>{var Vt=Lc(),Ft=U(Vt);et(Ft);var Tr=$(Ft);Tr.nodeValue=` ${Ye!=null?Ye:""}`,N(Vt),Sl(Ft,()=>s(A),Ir=>w(A,Ir)),u(Mt,Vt)},$$slots:{default:!0}});var ee=$(de);_t(ee,Mt=>w(De,Mt),()=>s(De));var ot=U(ee);si(ot);var ft=$(ot);Wl(ft);var ks=$(ft);ql(ks,{bounds:xe});var Dr=$(ks);Ql(Dr,{bounds:xe}),N(ee);var Rr=$(ee);ri(Rr,{get tableData(){return s(le)}}),L(()=>qe(ee,"viewBox",`0 0 ${xe.width} ${xe.height}`)),u(v,ae)},$$slots:{default:!0}}),N(ms),N(ps),L(()=>{var v,q,ae,de,ee;vt(ct,`btn ${(v=s(O)?"btn-warning":"btn-primary")!=null?v:""}`),ct.disabled=!s(O)&&s(l),vt(dt,`btn ${(q=s(k)?"btn-warning":"btn-primary")!=null?q:""}`),dt.disabled=!s(k)&&s(l),vt(ut,`btn ${(ae=s(h)?"btn-warning":"btn-primary")!=null?ae:""}`),ut.disabled=!s(h)&&s(l),B(xr,s(C)),vt(mt,`btn ${(de=s(l)?"btn-warning":"btn-primary")!=null?de:""}`),mt.disabled=s(l),vt(ht,`btn ${(ee=s(l)?"btn-warning":"btn-primary")!=null?ee:""}`),ht.disabled=s(l),B(Or,s(p))}),Ce("click",ct,()=>j()),Ce("click",dt,()=>pe()),Ce("click",ut,()=>he()),Ce("click",mt,()=>Me()),Ce("click",ht,()=>pt()),u(i,os),$e()}var Vc=Y("<!> <!>",1);function Fc(i,t){ve(t,!1);const a=ke(),e=()=>ue(g,"$fsrs",a);let r=F(t,"state",8),n=F(t,"api",8);const g=r().fsrs,c={fsrs:{title:"FSRS",help:Oo(),url:ge.DeckOptions.fsrs},desiredRetention:{title:dr(),help:Ao(),sched:Ie.FSRS},modelParams:{title:ur(),help:Do()+`

`+Ro(),sched:Ie.FSRS},rescheduleCardsOnChange:{title:gr(),help:To(),sched:Ie.FSRS},computeOptimalRetention:{title:fr(),help:Io(),sched:Ie.FSRS}},l=Object.values(c);let f=V(),y=V();function P(d){s(f).show(),s(y).to(d)}me(),Be(i,{title:"FSRS",children:(d,T)=>{We(d,{slotHost:Q,get api(){return n()},children:(C,x)=>{var p=Vc(),b=se(p);Q(b,{children:(G,I)=>{He(G,{get value(){return e()},set value(W){rt(g,W)},defaultValue:!1,children:(W,E)=>{te(W,{$$events:{click:()=>P(Object.keys(c).indexOf("fsrs"))},children:(z,o)=>{kt(z,{get title(){return c.fsrs.title}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var S=$(b,2);be(S,e,G=>{Mc(G,{get state(){return r()},openHelpModal:I=>P(Object.keys(c).indexOf(I))})}),u(C,p)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(d,T)=>{Ue(d,{title:"FSRS",get url(){return ge.DeckOptions.fsrs},slot:"tooltip",get fsrs(){return e()},helpSections:l,$$events:{mount:C=>{w(f,C.detail.modal),w(y,C.detail.carousel)}}})}}}),$e()}function jc(i,t){ve(t,!1);let a=F(t,"html",8),e=F(t,"mounted",8);rs(e()),me();var r=Fe(),n=se(r);Lo(n,a,!1,!1),u(i,r),$e()}function Hc(i){switch(i){case Ge.Seconds:return"s";case Ge.Minutes:return"m";case Ge.Hours:return"h";case Ge.Days:return"d";default:return""}}function Bc(i){switch(i){case"s":return Ge.Seconds;case"h":return Ge.Hours;case"d":return Ge.Days;default:return Ge.Minutes}}function zc(i){const t=i*60;let a=Kl(t);return[Ge.Months,Ge.Years].includes(a)&&(a=Ge.Days),`${Math.round(Yl(a,t))}${Hc(a)}`}function Gc(i){const t=i.match(/(\d+)(.*)/);if(t){const[a,e,r]=t,n=Bc(r),g=Jl(n)*parseInt(e,10);return Math.min(g,2**31)/60}else return 0}function Wc(i){return i.map(zc).join(" ")}function qc(i){return i.split(" ").map(Gc).filter(t=>t)}var Qc=Y('<input type="text" class="svelte-f5c9s0">');function Uc(i,t){ve(t,!1);let a=F(t,"value",12),e=V();function r(){a(qc(this.value))}ce(()=>Qe(a()),()=>{w(e,Wc(a()))}),Ee(),me();var n=Qc();et(n),L(()=>as(n,s(e))),Ce("blur",n,r),u(i,n),$e()}var Kc=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Yc=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function yr(i,t){let a=F(t,"value",12),e=F(t,"defaultValue",8);var r=Yc(),n=se(r);Ae(n,()=>({"--cols":13})),_e(n.lastChild,{children:(g,c)=>{var l=Kc(),f=se(l);Ae(f,()=>({"--col-size":7})),at(f.lastChild,{breakpoint:"xs",children:(P,d)=>{var T=Fe(),C=se(T);st(C,t,"default",{}),u(P,T)},$$slots:{default:!0}}),N(f);var y=$(f,2);Ae(y,()=>({"--col-size":6})),at(y.lastChild,{breakpoint:"xs",children:(P,d)=>{it(P,{children:(T,C)=>{Uc(T,{get value(){return a()},set value(x){a(x)},$$legacy:!0})},$$slots:{default:!0,revert:(T,C)=>{Pt(T,{slot:"revert",get value(){return a()},set value(x){a(x)},get defaultValue(){return e()},$$legacy:!0})}}})},$$slots:{default:!0}}),N(y),u(g,l)},$$slots:{default:!0}}),N(n),u(i,r)}var Jc=Y("<!> <!> <!> <!> <!> <!>",1);function Xc(i,t){ve(t,!1);const a=ke(),e=()=>ue(c,"$config",a),r=()=>ue(f,"$fsrs",a);let n=F(t,"state",8),g=F(t,"api",24,()=>({}));const c=n().currentConfig,l=n().defaults,f=n().fsrs;let y=V(),P=V();const d={relearningSteps:{title:Eo(),help:No(),url:ge.DeckOptions.relearningSteps},minimumInterval:{title:Mo(),help:Vo(),url:ge.DeckOptions.minimumInterval,sched:Ie.SM2},leechThreshold:{title:Fo(),help:jo(),url:ge.Leeches.leeches},leechAction:{title:Ho(),help:Bo(),url:ge.Leeches.waiting}},T=Object.values(d);let C=V(),x=V();function p(S){s(C).show(),s(x).to(S)}ce(()=>(e(),r(),lt),()=>{const S=e().relearnSteps.length?e().relearnSteps[e().relearnSteps.length-1]/60/24:0;w(y,!r()&&S>e().minimumLapseInterval?zo():""),w(P,r()&&S>=1?vr():"")}),Ee(),me();var b=oe(()=>Ms());Be(i,{get title(){return s(b)},children:(S,G)=>{We(S,{slotHost:Q,get api(){return g()},children:(I,W)=>{var E=Jc(),z=se(E);Q(z,{children:(M,A)=>{yr(M,{get value(){return e().relearnSteps},set value(D){J(c,_(e).relearnSteps=D,_(e))},get defaultValue(){return l.relearnSteps},children:(D,R)=>{te(D,{$$events:{click:()=>p(Object.keys(d).indexOf("relearningSteps"))},children:(X,re)=>{Z();var H=K();L(()=>B(H,d.relearningSteps.title)),u(X,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var o=$(z,2);Q(o,{children:(M,A)=>{Ve(M,{get warning(){return s(P)}})},$$slots:{default:!0}});var O=$(o,2);be(O,()=>!r(),M=>{Q(M,{children:(A,D)=>{Le(A,{get value(){return e().minimumLapseInterval},set value(R){J(c,_(e).minimumLapseInterval=R,_(e))},get defaultValue(){return l.minimumLapseInterval},min:1,children:(R,X)=>{te(R,{$$events:{click:()=>p(Object.keys(d).indexOf("minimumInterval"))},children:(re,H)=>{Z();var j=K();L(()=>B(j,d.minimumInterval.title)),u(re,j)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}})});var k=$(O,2);Q(k,{children:(M,A)=>{Ve(M,{get warning(){return s(y)}})},$$slots:{default:!0}});var h=$(k,2);Q(h,{children:(M,A)=>{Le(M,{get value(){return e().leechThreshold},set value(D){J(c,_(e).leechThreshold=D,_(e))},get defaultValue(){return l.leechThreshold},min:1,children:(D,R)=>{te(D,{$$events:{click:()=>p(Object.keys(d).indexOf("leechThreshold"))},children:(X,re)=>{Z();var H=K();L(()=>B(H,d.leechThreshold.title)),u(X,H)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var m=$(h,2);Q(m,{children:(M,A)=>{var D=oe(Xi);Ze(M,{get value(){return e().leechAction},set value(R){J(c,_(e).leechAction=R,_(e))},get defaultValue(){return l.leechAction},get choices(){return s(D)},breakpoint:"md",children:(R,X)=>{te(R,{$$events:{click:()=>p(Object.keys(d).indexOf("leechAction"))},children:(re,H)=>{Z();var j=K();L(()=>B(j,d.leechAction.title)),u(re,j)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),u(I,E)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(S,G)=>{var I=oe(()=>Ms());Ue(S,{get title(){return s(I)},get url(){return ge.DeckOptions.lapses},slot:"tooltip",get fsrs(){return r()},helpSections:T,$$events:{mount:W=>{w(C,W.detail.modal),w(x,W.detail.carousel)}}})}}}),$e()}var Zc=Y("<!> <!> <!> <!>",1),ed=Y("<!> <!> <!> <!> <!>",1);function td(i,t){ve(t,!1);const a=ke(),e=()=>ue(f,"$config",a),r=()=>ue(P,"$fsrs",a),n=V(),g=V();let c=F(t,"state",8),l=F(t,"api",24,()=>({}));const f=c().currentConfig,y=c().defaults,P=c().fsrs;let d=V(),T=V();const C={learningSteps:{title:Go(),help:Wo(),url:ge.DeckOptions.learningSteps},graduatingInterval:{title:qo(),help:Qo(),url:ge.DeckOptions.graduatingInterval,sched:Ie.SM2},easyInterval:{title:Uo(),help:Ko(),url:ge.DeckOptions.easyInterval,sched:Ie.SM2},insertionOrder:{title:Yo(),help:Jo(),url:ge.DeckOptions.insertionOrder}},x=Object.values(C);let p=V(),b=V();function S(I){s(p).show(),s(b).to(I)}ce(()=>(e(),r()),()=>{const I=e().learnSteps.length?e().learnSteps[e().learnSteps.length-1]/60/24:0;w(d,I>e().graduatingIntervalGood?Xo():""),w(T,r()&&I>=1?vr():"")}),ce(()=>(e(),lt),()=>{w(n,e().graduatingIntervalGood>e().graduatingIntervalEasy?Zo():"")}),ce(()=>(e(),lt),()=>{w(g,e().newCardInsertOrder==Xt.RANDOM?el():"")}),Ee(),me();var G=oe(()=>Vs());Be(i,{get title(){return s(G)},children:(I,W)=>{We(I,{slotHost:Q,get api(){return l()},children:(E,z)=>{var o=ed(),O=se(o);Q(O,{children:(A,D)=>{yr(A,{get value(){return e().learnSteps},set value(R){J(f,_(e).learnSteps=R,_(e))},get defaultValue(){return y.learnSteps},children:(R,X)=>{te(R,{$$events:{click:()=>S(Object.keys(C).indexOf("learningSteps"))},children:(re,H)=>{Z();var j=K();L(()=>B(j,C.learningSteps.title)),u(re,j)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var k=$(O,2);Q(k,{children:(A,D)=>{Ve(A,{get warning(){return s(T)}})},$$slots:{default:!0}});var h=$(k,2);be(h,()=>!r(),A=>{var D=Zc(),R=se(D);Q(R,{children:(j,pe)=>{Le(j,{get value(){return e().graduatingIntervalGood},set value(he){J(f,_(e).graduatingIntervalGood=he,_(e))},get defaultValue(){return y.graduatingIntervalGood},children:(he,fe)=>{te(he,{$$events:{click:()=>S(Object.keys(C).indexOf("graduatingInterval"))},children:(Se,ne)=>{Z();var le=K();L(()=>B(le,C.graduatingInterval.title)),u(Se,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var X=$(R,2);Q(X,{children:(j,pe)=>{Ve(j,{get warning(){return s(d)}})},$$slots:{default:!0}});var re=$(X,2);Q(re,{children:(j,pe)=>{Le(j,{get value(){return e().graduatingIntervalEasy},set value(he){J(f,_(e).graduatingIntervalEasy=he,_(e))},get defaultValue(){return y.graduatingIntervalEasy},children:(he,fe)=>{te(he,{$$events:{click:()=>S(Object.keys(C).indexOf("easyInterval"))},children:(Se,ne)=>{Z();var le=K();L(()=>B(le,C.easyInterval.title)),u(Se,le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=$(re,2);Q(H,{children:(j,pe)=>{Ve(j,{get warning(){return s(n)}})},$$slots:{default:!0}}),u(A,D)});var m=$(h,2);Q(m,{children:(A,D)=>{var R=oe(Zi);Ze(A,{get value(){return e().newCardInsertOrder},set value(X){J(f,_(e).newCardInsertOrder=X,_(e))},get defaultValue(){return y.newCardInsertOrder},get choices(){return s(R)},breakpoint:"md",children:(X,re)=>{te(X,{$$events:{click:()=>S(Object.keys(C).indexOf("insertionOrder"))},children:(H,j)=>{Z();var pe=K();L(()=>B(pe,C.insertionOrder.title)),u(H,pe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var M=$(m,2);Q(M,{children:(A,D)=>{Ve(A,{get warning(){return s(g)}})},$$slots:{default:!0}}),u(E,o)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(I,W)=>{var E=oe(()=>Vs());Ue(I,{get title(){return s(E)},get url(){return ge.DeckOptions.newCards},slot:"tooltip",helpSections:x,get fsrs(){return r()},$$events:{mount:z=>{w(p,z.detail.modal),w(b,z.detail.carousel)}}})}}}),$e()}var sd=Y('<div class="show-timer-switch" style="display: contents;"><!></div>'),rd=Y('<div class="show-timer-switch" style="display: contents;"><!></div>'),ad=Y("<!> <!> <!> <!>",1);function nd(i,t){ve(t,!1);const a=ke(),e=()=>ue(c,"$config",a),r=V();let n=F(t,"state",8),g=F(t,"api",8);const c=n().currentConfig,l=n().defaults,f={maximumAnswerSecs:{title:tl(),help:sl()},showAnswerTimer:{title:rl(),help:al()},stopTimerOnAnswer:{title:nl(),help:ol()}},y=Object.values(f);let P=V(),d=V();function T(x){s(P).show(),s(d).to(x)}ce(()=>(e(),lt),()=>{w(r,e().capAnswerTimeToSecs>600?ll():"")}),Ee(),me();var C=oe(()=>Fs());Be(i,{get title(){return s(C)},children:(x,p)=>{We(x,{slotHost:Q,get api(){return g()},children:(b,S)=>{var G=ad(),I=se(G);Q(I,{children:(o,O)=>{Le(o,{get value(){return e().capAnswerTimeToSecs},set value(k){J(c,_(e).capAnswerTimeToSecs=k,_(e))},get defaultValue(){return l.capAnswerTimeToSecs},min:1,max:7200,children:(k,h)=>{te(k,{$$events:{click:()=>T(Object.keys(f).indexOf("maximumAnswerSecs"))},children:(m,M)=>{Z();var A=K();L(()=>B(A,f.maximumAnswerSecs.title)),u(m,A)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var W=$(I,2);Q(W,{children:(o,O)=>{Ve(o,{get warning(){return s(r)}})},$$slots:{default:!0}});var E=$(W,2);Q(E,{children:(o,O)=>{var k=sd(),h=U(k);He(h,{get value(){return e().showTimer},set value(m){J(c,_(e).showTimer=m,_(e))},get defaultValue(){return l.showTimer},children:(m,M)=>{te(m,{$$events:{click:()=>T(Object.keys(f).indexOf("showAnswerTimer"))},children:(A,D)=>{Z();var R=K();L(()=>B(R,f.showAnswerTimer.title)),u(A,R)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),N(k),u(o,k)},$$slots:{default:!0}});var z=$(E,2);Q(z,{children:(o,O)=>{var k=rd(),h=U(k);He(h,{get value(){return e().stopTimerOnAnswer},set value(m){J(c,_(e).stopTimerOnAnswer=m,_(e))},get defaultValue(){return l.stopTimerOnAnswer},children:(m,M)=>{te(m,{$$events:{click:()=>T(Object.keys(f).indexOf("stopTimerOnAnswer"))},children:(A,D)=>{Z();var R=K();L(()=>B(R,f.stopTimerOnAnswer.title)),u(A,R)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),N(k),u(o,k)},$$slots:{default:!0}}),u(b,G)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(x,p)=>{var b=oe(()=>Fs());Ue(x,{get title(){return s(b)},get url(){return ge.DeckOptions.timer},slot:"tooltip",helpSections:y,$$events:{mount:S=>{w(P,S.detail.modal),w(d,S.detail.carousel)}}})}}}),$e()}var od=Y('<tr><td class="svelte-9pdz93"> </td><td class="svelte-9pdz93"><input type="radio"></td><td class="svelte-9pdz93"><input type="radio"></td><td class="svelte-9pdz93"><input type="radio"></td></tr>'),ld=Y('<div class="easy-days-settings svelte-9pdz93"><table class="svelte-9pdz93"><thead><tr><th class="svelte-9pdz93"></th><th class="svelte-9pdz93"> </th><th class="svelte-9pdz93"> </th><th class="svelte-9pdz93"> </th></tr></thead><tbody></tbody></table></div>'),id=Y("<!> <!>",1);function cd(i,t){ve(t,!1);const a=ke(),e=()=>ue(l,"$config",a),r=V(),n=[];let g=F(t,"state",8),c=F(t,"api",8);const l=g().currentConfig,f=g().defaults,y=[il(),cl(),dl(),ul(),fl(),gl(),vl()];ce(()=>e(),()=>{e().easyDaysPercentages.length!==7&&J(l,_(e).easyDaysPercentages=f.easyDaysPercentages,_(e))}),ce(()=>(e(),lt),()=>{w(r,e().easyDaysPercentages.some(d=>d===1)?"":$l())}),Ee(),me();var P=oe(()=>yl());Be(i,{get title(){return s(P)},children:(d,T)=>{We(d,{slotHost:Q,get api(){return c()},children:(C,x)=>{var p=id(),b=se(p);Q(b,{children:(G,I)=>{var W=ld(),E=U(W),z=U(E),o=U(z),O=$(U(o)),k=U(O);L(()=>B(k,pl())),N(O);var h=$(O),m=U(h);L(()=>B(m,ml())),N(h);var M=$(h),A=U(M);L(()=>B(A,hl())),N(M),N(o),N(z);var D=$(z);At(D,5,()=>y,ns,(R,X,re)=>{let H=re;var j=od(),pe=U(j),he=U(pe);N(pe);var fe=$(pe),Se=U(fe);et(Se),Se.value=(Se.__value=1)==null?"":1,N(fe);var ne=$(fe),le=U(ne);et(le),le.value=(le.__value=.5)==null?"":.5,N(ne);var xe=$(ne),De=U(xe);et(De),De.value=(De.__value=0)==null?"":0,N(xe),N(j),L(()=>{B(he,s(X)),qt(Se,e().easyDaysPercentages[H]===1),qt(le,e().easyDaysPercentages[H]===.5),qt(De,e().easyDaysPercentages[H]===0)}),Qt(n,[re],Se,()=>e().easyDaysPercentages[H],Ke=>J(l,_(e).easyDaysPercentages[H]=Ke,_(e))),Qt(n,[re],le,()=>e().easyDaysPercentages[H],Ke=>J(l,_(e).easyDaysPercentages[H]=Ke,_(e))),Qt(n,[re],De,()=>e().easyDaysPercentages[H],Ke=>J(l,_(e).easyDaysPercentages[H]=Ke,_(e))),u(R,j)}),N(D),N(E),N(W),u(G,W)},$$slots:{default:!0}});var S=$(b,2);Q(S,{children:(G,I)=>{Ve(G,{get warning(){return s(r)}})},$$slots:{default:!0}}),u(C,p)},$$slots:{default:!0}})},$$slots:{default:!0}}),$e()}var dd=Y("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),ud=Y('<!> <div class="deck-options-page svelte-htbfcn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1);function fd(i,t){ve(t,!1);const a=ke(),e=()=>ue(n,"$addons",a);let r=F(t,"state",8);const n=r().addonComponents;function g(){return r().currentAuxData}function c(o){rt(n,[...e(),o])}function l(o,O){rt(n,[...e(),{component:jc,html:o,mounted:O}])}const f={},y={},P={},d={},T={},C={},x={},p={},b={},S={};let G=V();me();var I=ud(),W=se(I);yc(W,{get state(){return r()},$$events:{presetchange(...o){var O;(O=s(G))==null||O.apply(this,o)}}});var E=$(W,2),z=U(E);return Ae(z,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),fa(z.lastChild,{breakpoint:"sm",class:"container-columns",children:(o,O)=>{var k=dd(),h=se(k),m=U(h);_e(m,{class:"row-columns",children:(ne,le)=>{Pc(ne,{get state(){return r()},api:y,get onPresetChange(){return s(G)},set onPresetChange(xe){w(G,xe)},$$legacy:!0})},$$slots:{default:!0}});var M=$(m,2);_e(M,{class:"row-columns",children:(ne,le)=>{td(ne,{get state(){return r()},api:P})},$$slots:{default:!0}});var A=$(M,2);_e(A,{class:"row-columns",children:(ne,le)=>{Xc(ne,{get state(){return r()},api:d})},$$slots:{default:!0}});var D=$(A,2);_e(D,{class:"row-columns",children:(ne,le)=>{Sc(ne,{get state(){return r()},api:C})},$$slots:{default:!0}});var R=$(D,2);_e(R,{class:"row-columns",children:(ne,le)=>{Fc(ne,{get state(){return r()},api:{}})},$$slots:{default:!0}}),N(h);var X=$(h,2),re=U(X);_e(re,{class:"row-columns",children:(ne,le)=>{oc(ne,{get state(){return r()},api:T})},$$slots:{default:!0}});var H=$(re,2);_e(H,{class:"row-columns",children:(ne,le)=>{Ui(ne,{get state(){return r()},api:p})},$$slots:{default:!0}});var j=$(H,2);_e(j,{class:"row-columns",children:(ne,le)=>{nd(ne,{get state(){return r()},api:x})},$$slots:{default:!0}});var pe=$(j,2);_e(pe,{class:"row-columns",children:(ne,le)=>{ac(ne,{get state(){return r()},api:x})},$$slots:{default:!0}});var he=$(pe,2);be(he,()=>e().length,ne=>{_e(ne,{class:"row-columns",children:(le,xe)=>{$i(le,{get state(){return r()}})},$$slots:{default:!0}})});var fe=$(he,2);_e(fe,{class:"row-columns",children:(ne,le)=>{cd(ne,{get state(){return r()},api:S})},$$slots:{default:!0}});var Se=$(fe,2);_e(Se,{class:"row-columns",children:(ne,le)=>{qi(ne,{get state(){return r()},api:b})},$$slots:{default:!0}}),N(X),u(o,k)},$$slots:{default:!0}}),N(z),N(E),u(i,I),Te(t,"auxData",g),Te(t,"addSvelteAddon",c),Te(t,"addHtmlAddon",l),Te(t,"options",f),Te(t,"dailyLimits",y),Te(t,"newOptions",P),Te(t,"lapseOptions",d),Te(t,"buryOptions",T),Te(t,"displayOrder",C),Te(t,"timerOptions",x),Te(t,"audioOptions",p),Te(t,"advancedOptions",b),Te(t,"easyDays",S),$e({auxData:g,addSvelteAddon:c,addHtmlAddon:l,options:f,dailyLimits:y,newOptions:P,lapseOptions:d,buryOptions:T,displayOrder:C,timerOptions:x,audioOptions:p,advancedOptions:b,easyDays:S})}function Yd(i,t){ve(t,!1);let a=F(t,"data",8),e=V();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await mr(),qs()&&(await a().state.isModified()?Kt("confirmDiscardChanges"):Kt("_close"))},rs(()=>{globalThis.$deckOptions=new Promise((r,n)=>{r(s(e))}),a().state.resolveOriginalConfigs(),qs()&&Kt("deckOptionsReady")}),me(),_t(fd(i,{get state(){return a().state},$$legacy:!0}),r=>w(e,r),()=>s(e)),$e()}export{Yd as component,Kd as universal};
