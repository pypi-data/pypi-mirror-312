import{D as le,h as ie,i as re,c as S,j as O}from"./command.Tw-kyRUm.js";import{A as ue,s as w,l as v,i as D,f as y,J as I,E as k,K as R,a5 as p,D as T,e as W,c as G,b as H,a6 as j,z as _,G as E,H as z,I as N,L as K,N as ce,R as fe}from"./scheduler.DHKinp9c.js";import{S as A,i as P,g as de,t as g,c as me,a as b,b as q,d as F,m as Q,e as X}from"./index.D4HIzqHl.js";import{g as M,a as he}from"./datasetStores.B4SLb2vf.js";class L extends Map{constructor(e,a=ge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),e!=null)for(const[s,t]of e)this.set(s,t)}get(e){return super.get(V(this,e))}has(e){return super.has(V(this,e))}set(e,a){return super.set(pe(this,e),a)}delete(e){return super.delete(_e(this,e))}}function V({_intern:n,_key:e},a){const s=e(a);return n.has(s)?n.get(s):a}function pe({_intern:n,_key:e},a){const s=e(a);return n.has(s)?n.get(s):(n.set(s,a),a)}function _e({_intern:n,_key:e},a){const s=e(a);return n.has(s)&&(a=n.get(s),n.delete(s)),a}function ge(n){return n!==null&&typeof n=="object"?n.valueOf():n}function be(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const J=Symbol("implicit");function Y(){var n=new L,e=[],a=[],s=J;function t(o){let l=n.get(o);if(l===void 0){if(s!==J)return s;n.set(o,l=e.push(o)-1)}return a[l%a.length]}return t.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new L;for(const l of o)n.has(l)||n.set(l,e.push(l)-1);return t},t.range=function(o){return arguments.length?(a=Array.from(o),t):a.slice()},t.unknown=function(o){return arguments.length?(s=o,t):s},t.copy=function(){return Y(e,a).unknown(s)},be.apply(t,arguments),t}function ye(n){for(var e=n.length/6|0,a=new Array(e),s=0;s<e;)a[s]="#"+n.slice(s*6,++s*6);return a}const ke=ye("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Je(n){return Y(ke).domain(n)}function ve(n,e,a){const s=[];let t=[],o=0;for(const l of n){const r=t.length?e+l:l,i=o+r.length;i>a?(s.push(t.join(e)),t=[l],o=l.length):(t.push(l),o=i)}return t.length&&s.push(t.join(e)),s}async function Ue(){let n,e;try{const a=await fetch("/datasets/info");a.ok?(n=await a.json(),e=n.map(s=>new re(s))):(e=[],console.log("api.getDatasetsInfo -",a.status,a.statusText,await a.text()))}catch(a){e=[],console.log("api.getDatasetsInfo -",a)}return e}async function Re(n){let e;try{const a=await fetch(`/datasets/${n}`);a.ok?e=await a.json():(e={},console.log("api.getDataset -",a.status,a.statusText,await a.text()))}catch(a){e={},console.log("api.getDataset -",a)}return e}async function We(n,e=1,a=100,s){let t,o,l="";s&&s.model!==""&&s.search!==""&&(l=`&query=${s.search}&embedding_table=${s.model}`);try{const r=await fetch(`/browser/${n}/?skip=${(e-1)*a}&limit=${a}${l}`);r.ok?(o=await r.json(),t=new le(o)):(t={},console.log("api.getBrowser -",r.status,r.statusText,await r.text()))}catch(r){t={},console.log("api.getBrowser -",r)}return t}async function Ge(n){const e=[];for(let s=0;;s+=100)try{const t=await fetch(`/sources/${n}/?limit=100&skip=${s}`);if(t.ok){const o=await t.json();if(e.push(...o),o&&o.length<100)break}else{t.status!=404&&console.log("api.getSources -",t.status,t.statusText,await t.text());break}}catch(t){console.log("api.getSources -",t)}return e}async function He(n){const e=[];for(let s=0;;s+=1e3)try{const t=await fetch(`/items/${n}/?limit=1000&skip=${s}`);if(t.ok){const o=await t.json();if(e.push(...o.map(l=>l.id)),o&&o.length<1e3)break}else{t.status!=404&&console.log("api.getDatasetItemsIds -",t.status,t.statusText,await t.text());break}}catch(t){console.log("api.getDatasetItemsIds -",t)}return e}async function Ke(n,e){let a,s;const t=Date.now();try{const o=await fetch(`/dataset_items/${n}/${e}`);o.ok?(a=await o.json(),s=new ie(a)):(s={},console.log("api.getDatasetItem -",o.status,o.statusText,await o.text()))}catch(o){s={},console.log("api.getDatasetItem -",o)}return console.log("api.getDatasetItem - Done in",Date.now()-t),s}async function qe(n,e,a){let s;try{const t=await fetch(`/embeddings/${n}/${a}/?item_ids=${e}`);t.ok?s=await t.json():(s=[],console.log("api.getViewEmbeddings -",t.status,t.statusText,await t.text()))}catch(t){s=[],console.log("api.getViewEmbeddings -",t)}return s}async function Fe(n,e,a,s,t){const o=t?`/${n}/${e}/?ids=`:`/${n}/${e}/${s}/?ids=`,l=ve(a,"&ids=",8e3);await Promise.all(l.map(async r=>{const i=o+r;try{const d=await fetch(i,{method:"DELETE"});d.ok||console.log("api.deleteSchema -",d.status,d.statusText,await d.text())}catch(d){console.log("api.deleteSchema -",d)}}))}async function Qe(n,e,a,s){const t=s?`/${n}/${e}/${a.id}`:`/${n}/${e}/${a.table_info.name}/${a.id}`;try{const o=await fetch(t,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)});o.ok||console.log("api.addSchema -",o.status,o.statusText,await o.text())}catch(o){console.log("api.addSchema -",o)}}async function Xe(n,e,a,s){const t=s?`/${n}/${e}/${a.id}`:`/${n}/${e}/${a.table_info.name}/${a.id}`;try{const o=await fetch(t,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(a)});o.ok||console.log("api.updateSchema -",o.status,o.statusText,await o.text())}catch(o){console.log("api.updateSchema -",o)}}async function Ye(){let n;try{const e=await fetch("/models");e.ok?n=await e.json():(n=[],console.log("api.getModels -",e.status,e.statusText))}catch(e){n=[],console.log("api.getModels -",e)}return n}function Ze(){const n=ue();return e=>{const{originalEvent:a}=e.detail,{cancelable:s}=e,t=a.type;n(t,{originalEvent:a,currentTarget:a.currentTarget},{cancelable:s})||e.preventDefault()}}function we(n,e){const a=[];return e.builders.forEach(s=>{const t=s.action(n);t&&a.push(t)}),{destroy:()=>{a.forEach(s=>{s.destroy&&s.destroy()})}}}function U(n){const e={};return n.forEach(a=>{Object.keys(a).forEach(s=>{s!=="action"&&(e[s]=a[s])})}),e}function De(n){let e=n[0]?"a":"button",a,s,t=(n[0]?"a":"button")&&B(n);return{c(){t&&t.c(),a=v()},l(o){t&&t.l(o),a=v()},m(o,l){t&&t.m(o,l),D(o,a,l),s=!0},p(o,l){o[0],e?w(e,o[0]?"a":"button")?(t.d(1),t=B(o),e=o[0]?"a":"button",t.c(),t.m(a.parentNode,a)):t.p(o,l):(t=B(o),e=o[0]?"a":"button",t.c(),t.m(a.parentNode,a))},i(o){s||(b(t,o),s=!0)},o(o){g(t,o),s=!1},d(o){o&&y(a),t&&t.d(o)}}}function Se(n){let e=n[0]?"a":"button",a,s,t=(n[0]?"a":"button")&&C(n);return{c(){t&&t.c(),a=v()},l(o){t&&t.l(o),a=v()},m(o,l){t&&t.m(o,l),D(o,a,l),s=!0},p(o,l){o[0],e?w(e,o[0]?"a":"button")?(t.d(1),t=C(o),e=o[0]?"a":"button",t.c(),t.m(a.parentNode,a)):t.p(o,l):(t=C(o),e=o[0]?"a":"button",t.c(),t.m(a.parentNode,a))},i(o){s||(b(t,o),s=!0)},o(o){g(t,o),s=!1},d(o){o&&y(a),t&&t.d(o)}}}function B(n){let e,a,s,t,o;const l=n[6].default,r=T(l,n,n[5],null);let i=[{type:a=n[0]?void 0:n[1]},{href:n[0]},{tabindex:"0"},n[4],n[3]],d={};for(let c=0;c<i.length;c+=1)d=k(d,i[c]);return{c(){e=W(n[0]?"a":"button"),r&&r.c(),this.h()},l(c){e=G(c,((n[0]?"a":"button")||"null").toUpperCase(),{type:!0,href:!0,tabindex:!0});var u=H(e);r&&r.l(u),u.forEach(y),this.h()},h(){j(n[0]?"a":"button")(e,d)},m(c,u){D(c,e,u),r&&r.m(e,null),s=!0,t||(o=[_(e,"click",n[13]),_(e,"change",n[14]),_(e,"keydown",n[15]),_(e,"keyup",n[16]),_(e,"mouseenter",n[17]),_(e,"mouseleave",n[18])],t=!0)},p(c,u){r&&r.p&&(!s||u&32)&&E(r,l,c,c[5],s?N(l,c[5],u,null):z(c[5]),null),j(c[0]?"a":"button")(e,d=M(i,[(!s||u&3&&a!==(a=c[0]?void 0:c[1]))&&{type:a},(!s||u&1)&&{href:c[0]},{tabindex:"0"},u&16&&c[4],c[3]]))},i(c){s||(b(r,c),s=!0)},o(c){g(r,c),s=!1},d(c){c&&y(e),r&&r.d(c),t=!1,K(o)}}}function C(n){let e,a,s,t,o,l;const r=n[6].default,i=T(r,n,n[5],null);let d=[{type:a=n[0]?void 0:n[1]},{href:n[0]},{tabindex:"0"},U(n[2]),n[4],n[3]],c={};for(let u=0;u<d.length;u+=1)c=k(c,d[u]);return{c(){e=W(n[0]?"a":"button"),i&&i.c(),this.h()},l(u){e=G(u,((n[0]?"a":"button")||"null").toUpperCase(),{type:!0,href:!0,tabindex:!0});var h=H(e);i&&i.l(h),h.forEach(y),this.h()},h(){j(n[0]?"a":"button")(e,c)},m(u,h){D(u,e,h),i&&i.m(e,null),t=!0,o||(l=[_(e,"click",n[7]),_(e,"change",n[8]),_(e,"keydown",n[9]),_(e,"keyup",n[10]),_(e,"mouseenter",n[11]),_(e,"mouseleave",n[12]),ce(s=we.call(null,e,{builders:n[2]}))],o=!0)},p(u,h){i&&i.p&&(!t||h&32)&&E(i,r,u,u[5],t?N(r,u[5],h,null):z(u[5]),null),j(u[0]?"a":"button")(e,c=M(d,[(!t||h&3&&a!==(a=u[0]?void 0:u[1]))&&{type:a},(!t||h&1)&&{href:u[0]},{tabindex:"0"},h&4&&U(u[2]),h&16&&u[4],u[3]])),s&&fe(s.update)&&h&4&&s.update.call(null,{builders:u[2]})},i(u){t||(b(i,u),t=!0)},o(u){g(i,u),t=!1},d(u){u&&y(e),i&&i.d(u),o=!1,K(l)}}}function Ie(n){let e,a,s,t;const o=[Se,De],l=[];function r(i,d){return i[2]&&i[2].length?0:1}return e=r(n),a=l[e]=o[e](n),{c(){a.c(),s=v()},l(i){a.l(i),s=v()},m(i,d){l[e].m(i,d),D(i,s,d),t=!0},p(i,[d]){let c=e;e=r(i),e===c?l[e].p(i,d):(de(),g(l[c],1,1,()=>{l[c]=null}),me(),a=l[e],a?a.p(i,d):(a=l[e]=o[e](i),a.c()),b(a,1),a.m(s.parentNode,s))},i(i){t||(b(a),t=!0)},o(i){g(a),t=!1},d(i){i&&y(s),l[e].d(i)}}}function je(n,e,a){const s=["href","type","builders"];let t=I(e,s),{$$slots:o={},$$scope:l}=e,{href:r=void 0}=e,{type:i=void 0}=e,{builders:d=[]}=e;const c={"data-bits-button-root":""};function u(f){p.call(this,n,f)}function h(f){p.call(this,n,f)}function m(f){p.call(this,n,f)}function Z(f){p.call(this,n,f)}function $(f){p.call(this,n,f)}function x(f){p.call(this,n,f)}function ee(f){p.call(this,n,f)}function te(f){p.call(this,n,f)}function ne(f){p.call(this,n,f)}function se(f){p.call(this,n,f)}function ae(f){p.call(this,n,f)}function oe(f){p.call(this,n,f)}return n.$$set=f=>{e=k(k({},e),R(f)),a(4,t=I(e,s)),"href"in f&&a(0,r=f.href),"type"in f&&a(1,i=f.type),"builders"in f&&a(2,d=f.builders),"$$scope"in f&&a(5,l=f.$$scope)},[r,i,d,c,t,l,o,u,h,m,Z,$,x,ee,te,ne,se,ae,oe]}let Te=class extends A{constructor(e){super(),P(this,e,je,Ie,w,{href:0,type:1,builders:2})}};function Ee(n){let e;const a=n[5].default,s=T(a,n,n[8],null);return{c(){s&&s.c()},l(t){s&&s.l(t)},m(t,o){s&&s.m(t,o),e=!0},p(t,o){s&&s.p&&(!e||o&256)&&E(s,a,t,t[8],e?N(a,t[8],o,null):z(t[8]),null)},i(t){e||(b(s,t),e=!0)},o(t){g(s,t),e=!1},d(t){s&&s.d(t)}}}function ze(n){let e,a;const s=[{builders:n[3]},{class:S(O({variant:n[1],size:n[2],className:n[0]}))},{type:"button"},n[4]];let t={$$slots:{default:[Ee]},$$scope:{ctx:n}};for(let o=0;o<s.length;o+=1)t=k(t,s[o]);return e=new Te({props:t}),e.$on("click",n[6]),e.$on("keydown",n[7]),{c(){q(e.$$.fragment)},l(o){F(e.$$.fragment,o)},m(o,l){Q(e,o,l),a=!0},p(o,[l]){const r=l&31?M(s,[l&8&&{builders:o[3]},l&7&&{class:S(O({variant:o[1],size:o[2],className:o[0]}))},s[2],l&16&&he(o[4])]):{};l&256&&(r.$$scope={dirty:l,ctx:o}),e.$set(r)},i(o){a||(b(e.$$.fragment,o),a=!0)},o(o){g(e.$$.fragment,o),a=!1},d(o){X(e,o)}}}function Ne(n,e,a){const s=["class","variant","size","builders"];let t=I(e,s),{$$slots:o={},$$scope:l}=e,{class:r=void 0}=e,{variant:i="default"}=e,{size:d="default"}=e,{builders:c=[]}=e;function u(m){p.call(this,n,m)}function h(m){p.call(this,n,m)}return n.$$set=m=>{e=k(k({},e),R(m)),a(4,t=I(e,s)),"class"in m&&a(0,r=m.class),"variant"in m&&a(1,i=m.variant),"size"in m&&a(2,d=m.size),"builders"in m&&a(3,c=m.builders),"$$scope"in m&&a(8,l=m.$$scope)},[r,i,d,c,t,o,u,h,l]}class Be extends A{constructor(e){super(),P(this,e,Ne,ze,w,{class:0,variant:1,size:2,builders:3})}}function Ce(n){let e;const a=n[2].default,s=T(a,n,n[4],null);return{c(){s&&s.c()},l(t){s&&s.l(t)},m(t,o){s&&s.m(t,o),e=!0},p(t,o){s&&s.p&&(!e||o&16)&&E(s,a,t,t[4],e?N(a,t[4],o,null):z(t[4]),null)},i(t){e||(b(s,t),e=!0)},o(t){g(s,t),e=!1},d(t){s&&s.d(t)}}}function Ae(n){let e,a;return e=new Be({props:{disabled:n[1],class:S("font-medium h-10 px-6 border rounded-full transition-colors flex gap-2 ",{"bg-primary hover:bg-primary-foreground border-primary hover:border-primary-foreground text-slate-50":n[0],"bg-white border-primary text-primary hover:bg-primary-light":!n[0]}),$$slots:{default:[Ce]},$$scope:{ctx:n}}}),e.$on("click",n[3]),{c(){q(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,t){Q(e,s,t),a=!0},p(s,[t]){const o={};t&2&&(o.disabled=s[1]),t&1&&(o.class=S("font-medium h-10 px-6 border rounded-full transition-colors flex gap-2 ",{"bg-primary hover:bg-primary-foreground border-primary hover:border-primary-foreground text-slate-50":s[0],"bg-white border-primary text-primary hover:bg-primary-light":!s[0]})),t&16&&(o.$$scope={dirty:t,ctx:s}),e.$set(o)},i(s){a||(b(e.$$.fragment,s),a=!0)},o(s){g(e.$$.fragment,s),a=!1},d(s){X(e,s)}}}function Pe(n,e,a){let{$$slots:s={},$$scope:t}=e,{isSelected:o=!1}=e,{disabled:l=!1}=e;function r(i){p.call(this,n,i)}return n.$$set=i=>{"isSelected"in i&&a(0,o=i.isSelected),"disabled"in i&&a(1,l=i.disabled),"$$scope"in i&&a(4,t=i.$$scope)},[o,l,s,r,t]}class xe extends A{constructor(e){super(),P(this,e,Pe,Ae,w,{isSelected:0,disabled:1})}}export{Be as B,xe as P,Ye as a,Ue as b,Ze as c,We as d,qe as e,Ge as f,He as g,Re as h,Ke as i,Qe as j,Fe as k,Je as o,Xe as u};
